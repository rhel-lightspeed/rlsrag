<!DOCTYPE html><html  data-capo=""><head><script type="importmap">
  {
    "imports": {
      "@patternfly/elements/": "/scripts/v1/@patternfly/elements/",
      "@patternfly/pfe-clipboard/": "/scripts/v1/@patternfly/pfe-clipboard/",
      "@rhds/elements/": "/scripts/v1/@rhds/elements/elements/",
      "@cpelements/elements/": "/scripts/v1/@cpelements/elements/elements/"
    },
    "scopes": {
      "/": {
        "@floating-ui/core": "/scripts/v1/@floating-ui/core/dist/floating-ui.core.mjs",
        "@floating-ui/dom": "/scripts/v1/@floating-ui/dom/dist/floating-ui.dom.mjs",
        "@floating-ui/utils": "/scripts/v1/@floating-ui/utils/dist/floating-ui.utils.mjs",
        "@floating-ui/utils/dom": "/scripts/v1/@floating-ui/utils/dom/dist/floating-ui.utils.dom.mjs",
        "@lit/reactive-element": "/scripts/v1/@lit/reactive-element/reactive-element.js",
        "@lit/reactive-element/decorators/": "/scripts/v1/@lit/reactive-element/decorators/",
        "@patternfly/pfe-core": "/scripts/v1/@patternfly/pfe-core/core.js",
        "@patternfly/pfe-core/": "/scripts/v1/@patternfly/pfe-core/",
        "@rhds/tokens/media.js": "/scripts/v1/@rhds/tokens/js/media.js",
        "lit": "/scripts/v1/lit/index.js",
        "lit-element/lit-element.js": "/scripts/v1/lit-element/lit-element.js",
        "lit-html": "/scripts/v1/lit-html/lit-html.js",
        "lit-html/": "/scripts/v1/lit-html/",
        "lit/": "/scripts/v1/lit/",
        "tslib": "/scripts/v1/tslib/tslib.es6.mjs",
        "@cpelements/rh-table/dist/rh-table.js": "/scripts/v1/@cpelements/rh-table/dist/rh-table.js"
      }
    }
  }
</script><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Installing Identity Management | Red Hat Product Documentation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script type="text/javascript" id="trustarc" src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
<script src="//www.redhat.com/dtm.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;700&family=Red+Hat+Text:wght@400;500;700&display=swap">
<link rel="stylesheet" href="/styles/rh-table--lightdom.min.css">
<style>.section .titlepage{gap:.75rem}.section .titlepage,div.edit{align-items:center;display:flex}div.edit{font-size:.9rem;margin-bottom:8px}div.edit>a{align-items:center;display:flex}.edit pf-icon{margin-right:4px}</style>
<style>#error[data-v-df31ff14]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:80vh}h1[data-v-df31ff14]{font-size:calc(var(--rh-font-size-body-text-md, 1rem)*4);font-weight:700;margin-bottom:0}h1[data-v-df31ff14],h1 span[data-v-df31ff14]{line-height:var(--rh-line-height-heading,1.3)}h1 span[data-v-df31ff14]{color:var(--rh-color-text-brand-on-light,#e00);display:block;text-transform:uppercase}h1 span[data-v-df31ff14],p[data-v-df31ff14]{font-size:var(--rh-font-size-body-text-lg,1.125rem)}aside[data-v-df31ff14]{align-items:center;background:var(--rh-color-surface-lightest,#fff);border:var(--rh-border-width-sm,1px) solid var(--rh-color-border-subtle-on-light,#c7c7c7);border-radius:var(--rh-border-radius-default,3px);border-top:calc(var(--rh-border-width-md, 2px)*2) solid var(--rh-color-text-brand-on-light,#e00);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2));display:flex;flex-direction:column;justify-content:space-between;margin-top:var(--rh-space-2xl,32px);padding:var(--rh-space-xl,24px)}aside[data-v-df31ff14],aside>div[data-v-df31ff14]{width:100%}.text-container[data-v-df31ff14]{margin:auto;max-width:442px;text-align:center}.desktop[data-v-df31ff14]{display:none}.sr-only[data-v-df31ff14]{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;clip-path:inset(50%);white-space:nowrap}form[data-v-df31ff14]{display:flex}button[data-v-df31ff14],input[data-v-df31ff14]{border:1px solid var(--rh-color-black-500,#8a8d90);box-sizing:border-box;height:40px}input[data-v-df31ff14]{border-right:none;flex:1;font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);padding-left:var(--rh-space-md,8px);width:100%}button[data-v-df31ff14]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-left:none;display:flex;width:var(--rh-size-icon-04,40px)}button[data-v-df31ff14]:before{background:var(--rh-context-light-color-text-link,#06c);content:"";cursor:pointer;display:block;height:28px;margin:auto;width:28px}.search-icon[data-v-df31ff14]{margin:auto}ul[data-v-df31ff14]{max-width:275px;padding:0}ul li[data-v-df31ff14]{display:inline-block;list-style:none;margin-right:var(--rh-space-xl,24px);padding:var(--rh-space-xs,4px) 0}ul li a[data-v-df31ff14]{color:var(--rh-context-light-color-text-link,#06c);text-decoration:none}@media (min-width:992px){aside[data-v-df31ff14]{flex-direction:row}.mobile[data-v-df31ff14]{display:none}.desktop[data-v-df31ff14]{display:block}input[data-v-df31ff14]{width:auto}}</style>
<style>@keyframes fade-in{0%{opacity:0;visibility:hidden}1%{visibility:visible}to{opacity:1;visibility:visible}}@media (min-height:48em){.rhdocs{--rh-table--maxHeight:calc(100vh - 12.5rem)}}*,.rhdocs *,.rhdocs :after,.rhdocs :before,:after,:before{box-sizing:border-box}.rhdocs img,.rhdocs object,.rhdocs svg,img,object,svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs hr{border:0;border-top:.0625rem solid #d2d2d2;clear:both;margin:1rem 0}.rhdocs a{color:#06c;text-decoration:underline}.rhdocs a:focus,.rhdocs a:hover{color:#036}.rhdocs a.anchor-heading{color:#151515;cursor:pointer;text-decoration:none;word-break:break-all}.rhdocs p{margin:1.49963rem 0}.rhdocs li>p{margin:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:500;margin:0 0 .625rem}.rhdocs h1{font-size:2.25rem;margin:2rem 0}.rhdocs h2{font-size:1.625rem;margin:2rem 0}.rhdocs h3{font-size:1.5rem;font-weight:400}.rhdocs h4,.rhdocs h5{font-size:1.25rem}.rhdocs h5{font-weight:400}.rhdocs h6{font-size:1.125rem;font-weight:500;line-height:1.6667}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ol ::marker,.rhdocs ul ::marker{font:inherit}.rhdocs li{margin:0 0 .5em;padding:0}.rhdocs li>p{margin:.5rem 0}.rhdocs li>ol,.rhdocs li>ul{margin:0}.rhdocs dl dd{margin:.5rem 0 .5rem 1rem}.rhdocs dl dd>p{margin:.5rem 0}.rhdocs .informaltable,.rhdocs .table-contents,.rhdocs .table-wrapper{max-height:var(--rh-table--maxHeight);overflow:auto}.rhdocs table{border:0;font-size:1rem;line-height:1.6667;table-layout:fixed}.rhdocs table caption{color:#585858;margin-bottom:.5rem;margin-top:.5rem;text-align:left}.rhdocs table td,.rhdocs table th{border:0;border-bottom:.0625rem solid #d2d2d2;border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);padding:.5em 1rem}.rhdocs table td.halign-left,.rhdocs table th.halign-left{text-align:left}.rhdocs table td.halign-center,.rhdocs table th.halign-center,table td.halign-center,table th.halign-center{text-align:center}.rhdocs table td.halign-right,.rhdocs table th.halign-right{text-align:right}.rhdocs table td.valign-top,.rhdocs table th.valign-top{vertical-align:top}.rhdocs table td.valign-middle,.rhdocs table th.valign-middle{vertical-align:middle}.rhdocs table td.valign-bottom,.rhdocs table th.valign-bottom{vertical-align:bottom}.rhdocs table thead td,.rhdocs table thead th{background:#f5f5f5;font-weight:600}.rhdocs rh-table table,.rhdocs rh-table.rh-table--expanded-vertically{max-height:-moz-max-content;max-height:max-content}.rhdocs pre.nowrap{overflow:auto;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs .codeblock__wrapper pre{background:transparent}.rh-table--full-screen code,.rhdocs .content--md code,.rhdocs .content--sm code,.rhdocs .rh-table--full-screen code{overflow-wrap:normal;word-break:normal}.rhdocs[class] pre code,[class] pre code{background:inherit;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.rhdocs .keycap,.rhdocs kbd{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.keycap strong,.rhdocs .keycap strong{font-weight:inherit}.rhdocs kbd.keyseq,kbd.keyseq{background:transparent;border:0;box-shadow:none;padding:0}.rhdocs kbd.keyseq kbd,kbd.keyseq kbd{display:inline-block;margin:0 .375rem}.rhdocs kbd.keyseq kbd:first-child,kbd.keyseq kbd:first-child{margin-left:0}.rhdocs b.button{font-size:90%;font-weight:700;padding:.1875rem}.rhdocs b.button:before{content:"["}.rhdocs b.button:after{content:"]"}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}.rhdocs audio,.rhdocs canvas,.rhdocs progress,.rhdocs video{display:inline-block;vertical-align:baseline}.rhdocs audio:not([controls]){display:none;height:0}[hidden],template{display:none}.rhdocs a{background:transparent}.rhdocs a:active,.rhdocs a:hover{outline:0}.rhdocs a.anchor-heading:hover:before{color:#151515;content:"#";margin-left:-1.6rem;position:absolute}.rhdocs a.anchor-heading:focus-visible{color:#151515}@media screen and (max-width:990px){.rhdocs a.anchor-heading:hover:before{font-size:16px;margin-left:-1rem;padding-top:8px}.rhdocs h1 a.anchor-heading:hover:before{padding-top:12px}.rhdocs h4 a.anchor-heading:hover:before,.rhdocs h5 a.anchor-heading:hover:before{padding-top:4px}.rhdocs h6 a.anchor-heading:hover:before{padding-top:2px}}.rhdocs abbr[title]{border-bottom:.0625rem dotted}.rhdocs dfn{font-style:italic}.rhdocs h1{font-size:2em;margin:.67em 0}.rhdocs mark{background:#ff0;color:#000}.rhdocs small{font-size:80%}.rhdocs sub,.rhdocs sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.rhdocs sup{top:-.5em}.rhdocs sub{bottom:-.25em}.rhdocs img{border:0}.rhdocs svg:not(:root){overflow:hidden}.rhdocs figure{margin:1em 2.5rem}.rhdocs hr{box-sizing:content-box;height:0}.rhdocs code,.rhdocs kbd,.rhdocs pre,.rhdocs samp{font-family:monospace,monospace;font-size:1em}.rhdocs button,.rhdocs optgroup,.rhdocs select,.rhdocs textarea,.rhdocsinput{color:inherit;font:inherit;margin:0}.rhdocs button.copy-link-btn{background:none;border:2px solid #fff;font:1px Red Hat Text}.rhdocs button.copy-link-btn:hover{border-bottom:2px solid #06c}.rhdocs button.copy-link-btn .link-icon{padding-bottom:4px}.rhdocs button{overflow:visible}.rhdocs button,.rhdocs select{text-transform:none}.rhdocs button,.rhdocs html input[type=button],.rhdocs input[type=reset],.rhdocs input[type=submit]{-moz-appearance:button;appearance:button;-webkit-appearance:button;cursor:pointer}.rhdocs button[disabled],.rhdocs html input[disabled]{cursor:default}.rhdocs button::-moz-focus-inner,.rhdocs input::-moz-focus-inner{border:0;padding:0}.rhdocs input{line-height:normal}.rhdocs input[type=checkbox],.rhdocs input[type=radio]{box-sizing:border-box;padding:0}.rhdocs input[type=number]::-webkit-inner-spin-button,.rhdocs input[type=number]::-webkit-outer-spin-button{height:auto}.rhdocs input[type=search]{-moz-appearance:textfield;appearance:textfield;-webkit-appearance:textfield;box-sizing:content-box}.rhdocs input[type=search]::-webkit-search-cancel-button,.rhdocs input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.rhdocs fieldset{border:.0625rem solid silver;margin:0 .125rem;padding:.35em .625em .75em}.rhdocs legend{border:0;padding:0}.rhdocs textarea{overflow:auto}.rhdocs optgroup{font-weight:700}.rhdocs table{border-collapse:collapse;border-spacing:0}.rhdocs td,.rhdocs th{padding:0}.rhdocs ._additional-resources[class][class][id]:last-child{margin-top:-2rem}.rhdocs ._additional-resources[class][class]:only-child{grid-column:1/-1}._additional-resources[class][class] .additional-resources__heading,._additional-resources[class][class] .heading,._additional-resources[class][class] h1,._additional-resources[class][class] h2,._additional-resources[class][class] h3,._additional-resources[class][class] h4,._additional-resources[class][class] h5,._additional-resources[class][class] h6,._additional-resources[class][class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper ._additional-resources[class][class] ul{display:block}._additional-resources[class][class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}._additional-resources[class][class] li:only-child{grid-column:1/-1}._additional-resources[class][class] li:last-child{border:0}@media (min-width:1100px){._additional-resources[class][class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}._additional-resources[class][class] li p:only-child{margin:0;padding:0}._additional-resources[class][class] li a{text-decoration:none}._additional-resources[class][class] li a:focus,._additional-resources[class][class] li a:hover{text-decoration:underline}.rhdocs table .admonitionblock>div:nth-child(2),.rhdocs table .caution>div:nth-child(2),.rhdocs table .important>div:nth-child(2),.rhdocs table .note>div:nth-child(2),.rhdocs table .tip>div:nth-child(2),.rhdocs table .warning>div:nth-child(2){margin:.5rem 0}.rhdocs table .admonitionblock>div:nth-child(2)>:first-child,.rhdocs table .caution>div:nth-child(2)>:first-child,.rhdocs table .important>div:nth-child(2)>:first-child,.rhdocs table .note>div:nth-child(2)>:first-child,.rhdocs table .tip>div:nth-child(2)>:first-child,.rhdocs table .warning>div:nth-child(2)>:first-child{margin-top:0}.rhdocs table .admonitionblock>div:nth-child(2)>:last-child,.rhdocs table .caution>div:nth-child(2)>:last-child,.rhdocs table .important>div:nth-child(2)>:last-child,.rhdocs table .note>div:nth-child(2)>:last-child,.rhdocs table .tip>div:nth-child(2)>:last-child,.rhdocs table .warning>div:nth-child(2)>:last-child{margin-bottom:0}.rhdocs .codeblock__wrapper+.codeblock__wrapper,.rhdocs pre+pre,.rhdocs pre[class]+pre[class]{margin-top:2rem}.rhdocs .codeblock__wrapper{background:#f8f8f8;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__wrapper:before{background-repeat:no-repeat;background-size:6.25rem 100%;bottom:var(--scrollbar__height,1px);content:"";display:block;height:7.125rem;max-height:100%;max-height:calc(100% - var(--scrollbar__height, 2px));position:absolute;right:var(--scrollbar__width,6px);top:.0625rem;width:4.0625rem;z-index:1}.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 6.25rem)}@media (min-height:48em){.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 12.5rem)}}.rhdocs .codeblock__inner-wrapper{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs .codeblock__wrapper--expanded .codeblock__inner-wrapper{max-height:-moz-max-content;max-height:max-content}.codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.codeblock__copy:focus{outline:.0625rem dashed currentcolor}.codeblock__copy svg#icon--copy{height:1rem;width:1rem}.codeblock__expand{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;border:0;cursor:pointer;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));position:absolute;text-indent:-9999em;top:3.25rem;width:1.75rem;z-index:2}.codeblock__expand:before{background:#6a6e73;content:"";height:100%;left:0;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");-webkit-mask-position:center center;mask-position:center center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:auto 1rem;mask-size:auto 1rem;position:absolute;top:0;width:100%}.codeblock__wrapper--expanded .codeblock__expand{background:#2b9af3}.codeblock__wrapper--expanded .codeblock__expand:before{background:#fff}.codeblock__expand:focus:before,.codeblock__expand:hover:before{background:#06c}.codeblock__wrapper--expanded .codeblock__expand:focus:before,.codeblock__wrapper--expanded .codeblock__expand:hover:before{background:#fff}.codeblock__expand:focus{outline:.0625rem dashed currentcolor}.rhdocs .calloutlist>ol,.rhdocs .colist>ol{counter-reset:colist;list-style:none;margin:1rem 0 2rem;padding:0}.rhdocs .calloutlist>ol>li,.rhdocs .colist>ol>li{counter-increment:colist;font-size:1rem;margin:.5rem 0;padding-left:1.75rem;position:relative}.rhdocs .calloutlist>ol>li .colist-num,.rhdocs .colist>ol>li .colist-num{display:none}.calloutlist>ol>li:before,.colist>ol>li:before{content:counter(colist);left:0;position:absolute;top:.1875rem}.calloutlist dt{clear:left;float:left;margin:0;padding:0 .5rem 0 0}.included-in-guides[class],.included-in-guides[class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.included-in-guides[class][id]:last-child{margin-top:-2rem}.included-in-guides[class]:only-child{grid-column:1/-1}.included-in-guides[class] .additional-resources__heading,.included-in-guides[class] .heading,.included-in-guides[class] h1,.included-in-guides[class] h2,.included-in-guides[class] h3,.included-in-guides[class] h4,.included-in-guides[class] h5,.included-in-guides[class] h6,.included-in-guides[class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.included-in-guides[class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper .included-in-guides[class] ul{display:block}.included-in-guides[class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}.included-in-guides[class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.included-in-guides[class] li:only-child{grid-column:1/-1}.included-in-guides[class] li:last-child{border:0}@media (min-width:1100px){.included-in-guides[class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}.included-in-guides[class] li p:only-child{margin:0;padding:0}.included-in-guides[class] li a{text-decoration:none}.included-in-guides[class] li a:focus,.included-in-guides[class] li a:hover{text-decoration:underline}.menuseq{display:inline-flex;overflow:hidden;text-indent:-9999em}.menuseq .menu,.menuseq .menuitem,.menuseq .submenu{display:block;position:relative;text-indent:0}.menuseq .menu+.menu:before,.menuseq .menu+.menuitem:before,.menuseq .menu+.submenu:before,.menuseq .menuitem+.menu:before,.menuseq .menuitem+.menuitem:before,.menuseq .menuitem+.submenu:before,.menuseq .submenu+.menu:before,.menuseq .submenu+.menuitem:before,.menuseq .submenu+.submenu:before{content:">";display:inline-block;font-weight:700;padding:0 .25em}.related-topic-content__wrapper{margin:2em 0}.related-topic-content__wrapper--for-guide{margin-bottom:-2.5rem;padding-bottom:.0625rem;position:relative;z-index:1}.related-topic-content__wrapper--for-guide:before{background:#f0f0f0;content:"";display:block;height:100%;left:-3rem;position:absolute;right:-4.5rem;top:0;width:auto;z-index:-1}@media (min-width:1100px){.related-topic-content__wrapper--for-guide:before{left:-2.5rem;right:-3.625rem}}.related-topic-content__wrapper--for-guide summary{padding:1em 2em 1em 2.1875rem}@media (min-width:950px){.related-topic-content__inner-wrapper{display:grid;gap:2em;grid-template-columns:repeat(2,minmax(0,1fr))}}.local-render .rhdocs-content{margin:0 auto}.rhdocs cp-documentation{display:block;padding-bottom:2.5rem}.rhdocs cp-documentation.PFElement,.rhdocs cp-documentation[pfelement]{padding:0}rh-table{display:block}::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar{height:.625rem;width:.625rem}::-webkit-scrollbar,::-webkit-scrollbar-track,:host .rhdocs ::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar-track{background-color:#d6d6d6}::-webkit-scrollbar-thumb,:host .rhdocs ::-webkit-scrollbar-thumb{background-color:#8e8e8e}*,:host .rhdocs *{scrollbar-color:#8e8e8e #d6d6d6}.rhdocs p:empty,p:empty{display:none}.rhdocs[class] h1 code,.rhdocs[class] h2 code,.rhdocs[class] h3 code,.rhdocs[class] h4 code,.rhdocs[class] h5 code,.rhdocs[class] h6 code,[class] h1 code,[class] h2 code,[class] h3 code,[class] h4 code,[class] h5 code,[class] h6 code{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.pane-page-title h1,.rhdocs__header__primary-wrapper h1{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:2.25rem;line-height:1.333}.rhdocs details[class]{list-style:none;margin:1rem 0 3rem;padding:0}.rhdocs-toc[class]{background:#f2f2f2;margin:1rem 0 2rem;padding:1rem}.rhdocs-toc[class]>:last-child{margin-bottom:0}.rhdocs-toc[class] .rhdocs-toctitle{font-size:1.25rem;font-weight:400;line-height:1.6667;margin-top:0;text-transform:none}.rhdocs-toc[class] li{margin-bottom:.25em;padding-left:.5em}.preamble{margin:0 0 2rem}.sect1{margin:2rem 0 1rem}:host .sect1,cp-documentation .sect1{margin:0 0 2rem;padding:.0625rem 0 0}:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child{margin-top:0}.listingblock,.literalblock{margin:1rem 0}.quoteblock,.verseblock{border-left:.25rem solid #d2d2d2;margin:1rem 0;padding:1rem 1rem 1rem 2rem}.quoteblock.pullleft,.verseblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.quoteblock.pullleft,.verseblock.pullleft{margin-left:-1rem}}.quoteblock.pullright,.verseblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.quoteblock.pullright,.verseblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.quoteblock.pullright,.verseblock.pullright{margin-right:-10rem}}.quoteblock>:first-child,.verseblock>:first-child{margin-top:0}.quoteblock .content,.verseblock .content{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.25rem;line-height:1.6667}.quoteblock .attribution,.verseblock .attribution{font-size:.875rem;font-style:italic;font-weight:600;line-height:1.6667;text-transform:uppercase}.quoteblock .attribution .citetitle,.verseblock .attribution .citetitle{color:#585858}.quoteblock .attribution cite,.verseblock .attribution cite{font-size:1em}.quoteblock blockquote{font-style:italic;margin:0;padding:0}.quoteblock blockquote .content>:first-child{margin-top:0}.quoteblock blockquote .content>:first-child:before{color:#e00;content:"â€œ";display:block;float:left;font-size:2.75rem;font-style:normal;line-height:1.125em;margin-right:.5rem}.quoteblock blockquote .content>:first-child .content>:first-child:before{content:none}.imageblock{margin:1rem 0}.imageblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.imageblock.pullleft{margin-left:-1rem}}.imageblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.imageblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.imageblock.pullright{margin-right:-10rem}}.imageblock.interrupter{margin:2rem 0}@media (min-width:768px){.imageblock.interrupter{margin-left:-1rem;margin-right:-2rem}.imageblock.interrupter .caption{margin-left:1rem;margin-right:2rem}}@media (min-width:1100px){.imageblock.interrupter{margin-right:-10rem}.imageblock.interrupter .caption{margin-right:10rem}}.imageblock.interrupter img{max-width:100%}.imageblock .caption{color:#585858;display:block;font-size:.875rem;line-height:1.6667;margin:.5rem 0 0}.rhdocs-footnotes{border-top:.0625rem solid #d2d2d2;margin:3rem 0 1rem;padding:1rem 0 0}.rhdocs-footnotes>ol{margin:0;padding:0 0 0 1.5rem}@supports (counter-reset:footnotenum){.rhdocs-footnotes>ol{counter-reset:footnotenum;list-style:none;padding:0}.rhdocs-footnotes>ol>li{counter-increment:footnotenum}.rhdocs-footnotes>ol>li:before{color:#585858;content:"[" counter(footnotenum) "]";display:inline-block;margin-right:.25rem}}.rhdocs-footer{background:#ededed;color:#151515;font-size:.875rem;line-height:1.6667;margin:3rem 0 0;padding:1rem}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.visually-hidden{overflow:hidden;position:absolute;clip:rect(0,0,0,0);border:0;height:.0625rem;margin:-.0625rem;padding:0;width:.0625rem}.rh-docs-legal-notice{margin-top:4em}pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}code.language-none,code.language-text,code.language-txt,pre.language-none,pre.language-text,pre.language-txt{color:#151515}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#cceae7;color:#263238}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#cceae7;color:#263238}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}.token.atrule{color:#40199a}.token.attr-name{color:#06c}.token.attr-value,.token.attribute{color:#b300b3}.token.boolean{color:#40199a}.token.builtin,.token.cdata,.token.char,.token.class,.token.class-name{color:#06c}.token.comment{color:#6a6e73}.token.constant{color:#40199a}.token.deleted{color:#c9190b}.token.doctype{color:#6a6e73}.token.entity{color:#c9190b}.token.function{color:#40199a}.token.hexcode{color:#b300b3}.token.id,.token.important{color:#40199a;font-weight:700}.token.inserted{color:#06c}.token.keyword{color:#40199a}.token.number{color:#b300b3}.token.operator{color:#06c}.token.prolog{color:#6a6e73}.token.property{color:#06c}.token.pseudo-class,.token.pseudo-element{color:#b300b3}.token.punctuation,.token.regex{color:#06c}.token.selector{color:#c9190b}.token.string{color:#b300b3}.token.symbol{color:#40199a}.token.unit{color:#b300b3}.token.url,.token.variable{color:#c9190b}.rhdocs.local-render{margin:0 auto;max-width:45.8125rem;padding:0 1.5rem}@media print{.field code,.field pre,code[class*=language-],pre,pre[class*=language-]{white-space:pre-wrap!important;word-wrap:break-word!important;overflow-wrap:break-word!important;word-break:break-word!important}}.book-nav__list[class]{display:flex;justify-content:space-between;line-height:var(--jupiter__lineHeight--xs,1.3333);list-style:none;margin:5rem 0 0;padding:0}@media (min-width:1200px){.book-nav__list[class]{display:grid;gap:2rem;grid-template-columns:repeat(2,minmax(0,1fr))}}.book-nav__item a{display:inline-block;font-size:.875rem;font-weight:500;padding-left:1.25rem;position:relative;text-transform:uppercase}.book-nav__item a:before{background:url(/sites/dxp-docs/penumbra-dist/jupiter/images/arrow-down-solid.svg) no-repeat;background-size:contain;content:"";display:block;height:.875rem;left:0;position:absolute;top:.125rem;transform:rotate(90deg);width:.875rem}.book>.titlepage:not(:last-child),.rhdocs .chapter,section[id]{padding-bottom:3.75rem}.book>.titlepage .chapter:last-child,.book>.titlepage section[id]:last-child,.chapter .chapter:last-child,.chapter section[id]:last-child,section[id] .chapter:last-child,section[id] section[id]:last-child{margin-bottom:-3.75rem}.rhdocs .codeblock__wrapper+section[id],pre+section[id]{padding-top:3.75rem}.rhdocs .cta-link{font-size:inherit}.rhdocs a{word-wrap:break-word;overflow-wrap:break-word}.rhdocs .caution,.rhdocs .important,.rhdocs .note,.rhdocs .tip,.rhdocs .warning{padding:.8888888889em;position:relative}.rhdocs .QSIPopOver{bottom:18.75rem!important;top:auto!important}.rhdocs .alert{position:relative}.rhdocs button.dismiss-button{background:none;border:0;cursor:pointer;height:2.5rem;margin-top:-1.25rem;padding:0;position:absolute;right:.3125rem;text-align:center;top:50%;width:2.5rem;z-index:50}.rhdocs button.dismiss-button:after{content:"\f109";display:inline-block;filter:alpha(opacity=30);font-family:rh-web-iconfont;font-size:1.3125rem;font-style:normal;font-variant:normal;font-weight:400;line-height:1;line-height:2.5rem;opacity:.3;text-decoration:inherit;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs .book>.titlepage,.rhdocs .chapter,.rhdocs section[id]{padding-bottom:var(--rh-space-4xl,64px)}.rhdocs .alert{border:0;border-radius:0}.rhdocs .alert>h2:first-child,.rhdocs .alert>h3:first-child,.rhdocs .alert>h4:first-child,.rhdocs .alert>h5:first-child,.rhdocs .alert>h6:first-child,.rhdocs .alert>p:first-child{margin-top:0!important}.rhdocs .alert>p:last-child{margin-bottom:0!important}.rhdocs .alert-w-icon[class]{padding-left:2.8125rem}.rhdocs .alert-w-icon .alert-icon{float:left;font-size:1.125rem;margin-left:-1.875rem;margin-right:.625rem}.rhdocs .alert-w-icon .alert-icon[class*=" rh-icon-"],.rhdocs .alert-w-icon .alert-icon[class^=rh-icon-]{font-size:2.25rem;line-height:1em;margin-left:-2.5rem;margin-top:-.375rem}.rhdocs .alert-w-icon .alert-icon[class*=" icon-innov-prev"],.rhdocs .alert-w-icon .alert-icon[class^=icon-innov-prev]{font-size:1.3125rem;margin-top:.25rem}.rhdocs .alert-w-icon.alert-plain{background:none;color:#151515;padding-left:5rem}.rhdocs .alert-w-icon.alert-plain .alert-icon{font-size:3rem;margin-left:-4.375rem;margin-right:0}.rhdocs .alert-w-icon.alert-plain.alert-success .alert-icon{color:#3f9c35}.rhdocs .alert-w-icon.alert-plain.alert-info .alert-icon{color:#0088ce}.rhdocs .alert-w-icon.alert-plain.alert-warning .alert-icon{color:#f0ab00}.rhdocs .alert-w-icon.alert-plain.alert-danger .alert-icon{color:#e00}#target_banner .copy-url{float:right;margin-top:0}#target_banner .dropdown-menu{font-size:inherit}.titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.para{margin:1.49963rem 0}.para[class]{margin-bottom:1.49963rem}dd{margin-bottom:2.5rem}.rhdocs .card-light,.rhdocs .card-light-gray,.rhdocs .card-light-grey{background:#f0f0f0;border:.0625rem solid #f0f0f0;color:#151515}.rhdocs .card-light-gray.push-bottom:first-child,.rhdocs .card-light-grey.push-bottom:first-child,.rhdocs .card-light.push-bottom:first-child{margin-bottom:3.125rem!important}.rhdocs .card-light a.card-link,.rhdocs .card-light h1,.rhdocs .card-light h2,.rhdocs .card-light h3,.rhdocs .card-light h4,.rhdocs .card-light h5,.rhdocs .card-light h6,.rhdocs .card-light-gray a.card-link,.rhdocs .card-light-gray h1,.rhdocs .card-light-gray h2,.rhdocs .card-light-gray h3,.rhdocs .card-light-gray h4,.rhdocs .card-light-gray h5,.rhdocs .card-light-gray h6,.rhdocs .card-light-grey a.card-link,.rhdocs .card-light-grey h1,.rhdocs .card-light-grey h2,.rhdocs .card-light-grey h3,.rhdocs .card-light-grey h4,.rhdocs .card-light-grey h5,.rhdocs .card-light-grey h6{color:#151515}.rhdocs .card-light-gray.card-active:after,.rhdocs .card-light-grey.card-active:after,.rhdocs .card-light.card-active:after{border-top-color:#f0f0f0}.rhdocs .card-md,.rhdocs .card-narrow{display:block;padding:1.1875rem;white-space:normal;word-wrap:break-word}.rhdocs .card .card-heading.card-heading-sm,.rhdocs .card-sm .card .card-heading{font-size:1.0625em;font-weight:500;line-height:1.5}.rhdocs .card .card-heading.card-heading-flush{margin-bottom:.25rem}.rhdocs .card .card-heading.card-heading-red{color:#d10000}.rhdocs .card>p{margin-top:0}.rhdocs .card>p:last-child{margin-bottom:0}.rhdocs .new-experience{background-color:#e7f1fa;border:.0625rem solid #bee1f4;font-size:1rem;margin:1.5rem;padding:1.5rem;position:relative;z-index:1}@media (min-width:48rem){.new-experience{display:flex}.new-experience--contained{left:50%;position:relative;transform:translateX(-50%);width:calc(100vw - 2.5rem)}}.new-experience__primary-content{flex-grow:1}@media (min-width:48rem){.new-experience__primary-content{margin-right:1.25rem}}.new-experience__title{font-size:inherit;font-weight:inherit;line-height:1.6;margin:0;padding:0}.new-experience__title+a,.new-experience__title+pfe-cta{display:inline-block;margin-top:1.5em}.new-experience__secondary-content{min-width:12.5rem}@media (min-width:48rem){.new-experience__secondary-content{text-align:right}}.example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:min-content 1fr}dl.calloutlist[class] dt{float:none;margin:0;padding:0}dl.calloutlist[class] dd{margin:0;padding:0}dl.calloutlist[class] dd>:first-child{margin-top:0}dl.calloutlist[class] dd>:last-child{margin-bottom:0}.toast{background-color:#000;background-color:rgba(0,0,0,.9);bottom:.9375rem;box-shadow:0 .125rem .3125rem 0 rgba(0,0,0,.26);color:#fff;left:.9375rem;max-width:32.8125rem;min-width:6.25rem;padding:.9375rem;position:fixed;right:.9375rem;transform:translate3d(0,150%,0);transition:transform .2s cubic-bezier(.465,.183,.153,.946);will-change:transform;z-index:999}.toast.show{transform:translateZ(0)}.toast a{color:#fff;text-decoration:underline}.toast a:focus,.toast a:hover{color:#2b9af3}.toast a.btn{text-decoration:none}.toast .btn.btn-link{color:#fff}.toast .close{color:#fff;opacity:.3;text-decoration:none}.toast .close:focus,.toast .close:hover{color:#fff;opacity:.5}.no-csstransforms3d.csstransitions .toast{transition:all .2s cubic-bezier(.465,.183,.153,.946)}.no-csstransforms3d .toast{opacity:0;visibility:hidden}.no-csstransforms3d .toast.show{opacity:1;visibility:visible}.annotator-outer[class][class]{display:none;flex-direction:column;flex-grow:1;height:auto;margin:0;position:static;width:auto}@media (min-width:1400px){.annotator-outer[class][class]{display:flex}}.annotator-frame[class] *{height:auto}@media (min-width:1400px){.annotator-frame .h-sidebar-iframe[class]{position:static;width:calc(100% + 1.5rem)}}.annotator-toolbar[class][class]{position:static;width:auto}.annotator-toolbar>ul,.annotator-toolbar>ul>li{display:block;height:auto;list-style:none;margin:0;padding:0;width:auto}.annotator-toolbar>ul>li{display:flex;justify-content:flex-end}.annotator-frame[class] .annotator-frame-button--sidebar_toggle,.annotator-outer .annotator-frame-button[class][class],.app-content-wrapper *{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif!important}.annotator-outer .annotator-frame-button[class][class]{font-size:.9375rem;font-weight:500;height:auto;line-height:1.333;margin-right:1.875rem;padding:.75em 1em;position:static}@media (min-width:1400px){.annotator-outer .annotator-frame-button[class][class]{margin-right:0}}.annotator-outer iframe{flex-grow:1;margin-bottom:1.25rem}@media (min-width:1400px){.annotator-outer iframe{min-height:37.5rem}}.producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.producttitle .productnumber{color:var(--jupiter__palette__red--50,#e00)}.cp-modal-open,.zoom-open{overflow:hidden}.cp-modal,.cp-video-modal,.zoom-modal{bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;outline:0;overflow:hidden;position:fixed;right:0;top:0;transition:all .2s cubic-bezier(.465,.183,.153,.946);z-index:1040;z-index:1050;-webkit-overflow-scrolling:touch}.rhdocs .in.cp-modal,.rhdocs .in.cp-video-modal,.rhdocs .in.zoom-modal{display:block;filter:alpha(opacity=100);opacity:1;overflow-x:hidden;overflow-y:auto}.rhdocs .cp-modal .close,.rhdocs .cp-video-modal .close,.rhdocs .zoom-modal .close{background-color:#fff;border-radius:50%;color:#1a1a1a;font-size:1.75rem;height:28px;height:1.75rem;line-height:1.75rem;margin-bottom:.375rem;margin-top:0;opacity:.9;position:absolute;right:-.5rem;text-shadow:none;top:0;width:28px;width:1.75rem}.cp-modal .close:after,.cp-video-modal .close:after,.zoom-modal .close:after{line-height:1.75rem}.cp-modal-wrap,.zoom-wrap{margin:.625rem;padding-top:.5rem;position:relative}@media (min-width:48rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{margin:2.8125rem auto;width:38.4375rem}}@media (min-width:62rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:49.8958rem}}@media (min-width:75rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:60.3125rem}}.rhdocs .cp-modal-body :last-child{margin-bottom:0}.rhdocs .cp-modal-backdrop,.rhdocs .zoom-backdrop{background-color:#000;bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;position:fixed;right:0;top:0;transition:opacity .2s cubic-bezier(.465,.183,.153,.946);z-index:1040}.rhdocs .in.cp-modal-backdrop,.rhdocs .in.zoom-backdrop{display:block;filter:alpha(opacity=80);opacity:.8}.rhdocs .cp-modal-body{background:#fff;padding:1.875rem}.rhdocs .cp-modal[data-cp-modal-video=true] .cp-modal-body,.rhdocs .cp-video-modal .cp-modal-body{padding:0}.rhdocs [data-action=zoom]{position:relative}.rhdocs [data-action=zoom]:after{background:rgba(0,0,0,.4);bottom:0;color:#fff;display:inline-block;font-family:rh-web-iconfont;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.375rem;position:absolute;right:0;text-decoration:inherit;text-decoration:none!important;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs [data-action=zoom]:focus:after,.rhdocs [data-action=zoom]:hover:after{background:rgba(0,0,0,.9)}.rhdocs .zoom-wrap .zoom-larger{text-align:center}.rhdocs .zoom-wrap .zoom-larger a{color:#fff}.rhdocs .zoom-wrap .zoom-larger a:focus,.rhdocs .zoom-wrap .zoom-larger a:hover{color:#fff;text-decoration:underline}.rhdocs .zoom-wrap .zoom-larger a:after{content:"â¿»";display:inline-block;margin-left:.25rem}.rhdocs .zoom-body{background:#fff;border-radius:.5rem;margin:0 0 1rem;padding:1rem;text-align:center}.rhdocs .zoom-body .video-wrapper{height:0;overflow:hidden;padding-bottom:56.25%;position:relative}.rhdocs .zoom-body .video-wrapper[data-aspect-ratio="4:3"]{padding-bottom:75%}.rhdocs .zoom-body iframe{height:100%;left:0;position:absolute;top:0;width:100%}.rhdocs .para>.title[class],.rhdocs p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0;text-transform:none}.rhdocs .para>.title[class]+.content>:first-child,.rhdocs .para>.title[class]+p,.rhdocs p.title[class]+.content>:first-child,.rhdocs p.title[class]+p{margin-top:0}.rhdocs [class] pre .caution,.rhdocs [class] pre .important,.rhdocs [class] pre .note,.rhdocs [class] pre .tip,.rhdocs [class] pre .warning{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.rhdocs [class] pre .caution:after,.rhdocs [class] pre .important:after,.rhdocs [class] pre .note:after,.rhdocs [class] pre .tip:after,.rhdocs [class] pre .warning:after{content:none}.rhdocs [class] code.email{background-color:transparent;font:inherit;padding:0}.rhdocs [class] .author{margin-bottom:1.5rem}.rhdocs [class] .author .author{margin-bottom:0}.rhdocs table{margin:2rem 0}.rhdocs [class] table{width:auto}.rhdocs table .table-contents table{max-width:100%;overflow:auto}.rhdocs rh-table table{margin:0;max-width:9999em;overflow:visible}.rhdocs td,.rhdocs th{border-left:0;padding:.5em 1rem;transition:background .25s ease-out}.rhdocs td.content--md[class][class],.rhdocs th.content--md[class][class]{min-width:13em}.rhdocs td.content--lg[class][class],.rhdocs th.content--lg[class][class]{min-width:20em}.rhdocs thead th{padding-top:1.5em}.rhdocs caption{color:currentColor;color:var(--pfe-table__caption--Color,currentColor);font-weight:700;margin-bottom:.5rem;margin-top:.5rem;text-align:center}.rhdocs .revhistory table td,.rhdocs .revhistory table th{border-color:transparent}.rhdocs .revhistory table td{padding:.625rem .875rem}.rhdocs .revhistory table.simplelist{margin:0}@media print{#masthead{display:none!important}}.rh-table--is-full-screen #to-top{display:none}.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-body-copy-lage,1.125rem);line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs rh-codeblock::slotted(#content){border-radius:.25rem;padding:var (--rh-space-lg,16px)}.rhdocs rh-codeblock .screen{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs rh-codeblock[class][class][class][class][class]{max-width:99999em}.rhdocs .codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.rhdocs .codeblock__copy:focus{outline:.0625rem dashed currentcolor}.rhdocs .codeblock__copy svg#icon--copy{height:1rem;width:1rem}.rhdocs pre{border:0;max-height:-moz-max-content;max-height:max-content}.rhdocs pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre,.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre[class]{margin:0;padding:0;position:relative}.rhdocs code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs code.literal{background:#eee;border-radius:.25rem;color:#000;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs code.literal,.rhdocs kbd,.rhdocs span.keycap{font-family:RedHatMono,Red Hat Mono,Consolas,monospace}.rhdocs kbd,.rhdocs span.keycap{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ._additional-resources[class][class],.rhdocs ._additional-resources[class][class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.rhdocs ._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.rhdocs ._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.rhdocs ._additional-resources[class][class] li:last-child{border:0}.rhdocs section.section#additional_resource .additional-resources__heading,.rhdocs section.section#additional_resource .heading,.rhdocs section.section#additional_resource h1,.rhdocs section.section#additional_resource h2,.rhdocs section.section#additional_resource h3,.rhdocs section.section#additional_resource h4,.rhdocs section.section#additional_resource h5,.rhdocs section.section#additional_resource h6,.rhdocs section.section#additional_resource p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.rhdocs section.section:first-of-type{margin-top:var(--rh-space-4xl,64px)}.rhdocs section.section p{margin-bottom:var(--rh-space-lg,16px);margin-top:0;word-wrap:break-word}.rhdocs .section.section h1,.rhdocs .section.section h2,.rhdocs .section.section h3,.rhdocs .section.section h4,.rhdocs .section.section h5,.rhdocs .section.section h6,.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h1:first-of-type,.rhdocs h2:first-of-type,.rhdocs h3:first-of-type,.rhdocs h4:first-of-type,.rhdocs h5:first-of-type,.rhdocs h6:first-of-type{margin-top:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h2,.rhdocs section.section h2{font-size:var(--rh-font-size-heading-md,1.75rem)}.rhdocs h3,.rhdocs section.section h3{font-size:1.5rem;font-weight:400}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs dl{display:block;margin-block-end:1em;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.rhdocs .para{margin:1.49963rem 0}.rhdocs dl.calloutlist[class] dt{float:none;margin:0;padding:0}.rhdocs dl.calloutlist[class] dd>:last-child{margin-bottom:0}.rhdocs dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:fit-content(40%) 1fr}.rhdocs .calloutlist dt{clear:left;display:flex;flex-wrap:wrap;float:left;margin:0;padding:0 .5rem 0 0}.rhdocs .calloutlist dt a:not(:first-child){padding-left:4px}.rhdocs dl.calloutlist[class] dd{margin:0;padding:0}.rhdocs .callout,.rhdocs .colist>ol>li:before,.rhdocs .conum{background:#06c;border-radius:50%;color:#fff;display:inline-block;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-style:normal;font-weight:600;height:1.25rem;line-height:1.35rem;padding:0;position:relative;text-align:center;top:-.125em;vertical-align:middle;width:1.25rem}.rhdocs img,.rhdocs object,.rhdocs svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs .titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.rhdocs[class] .author{margin-bottom:1.5rem}.rhdocs[class] .author .author{margin-bottom:0}.rhdocs .para>.title[class],p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0}.rhdocs .example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}.rhdocs code{background:#eee;color:#000;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs .para[class]{margin-bottom:1.49963rem}.rhdocs[class] code.email{background-color:transparent;font:inherit;padding:0}rh-alert.admonition #description,rh-alert.admonition p{font-size:var(--rh-font-size-body-text-md,1rem)}rh-alert{width:-moz-fit-content;width:fit-content}.rhdocs .producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.rhdocs dl{margin:1rem 0}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs ol ol{list-style:lower-roman}.rhdocs .codeblock--processed pf-clipboard-copy::part(input),.rhdocs .codeblock--processed pf-clipboard-copy::part(span){display:none}.token.tag{color:#c9190b}.calloutlist div.para{margin:0}rh-alert.admonition{margin-bottom:var(--rh-space-lg,1rem)}.guibutton,.guimenu,.guimenuitem{font-weight:700}.guibutton{font-size:90%;padding:.1875rem}.guibutton:before{content:"["}.guibutton:after{content:"]"}.docs-content-container,.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}pre[hidden]{display:none}.codeblock[class][class][class][class][class]{max-width:99999em}.codeblock__wrapper{background:var(--rh-color-surface-lighter,#f2f2f2);margin:1rem 0;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__inner-wrapper:after{content:"";display:block;min-height:.625rem;width:4.375rem}.codeblock__copy{--pfe-clipboard--icon--Color--hover:#06c;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));padding:.3125rem .375rem;position:absolute;top:1rem;width:1.75rem;z-index:2}.codeblock__inner-wrapper pre{border:0;max-height:-moz-max-content;max-height:max-content}.pfe-clipboard:not([copied]) .pfe-clipboard__text--success,:host(:not([copied])) .pfe-clipboard__text--success{display:none!important}.codeblock[class]{margin:0;overflow:visible;padding-right:0}pre{display:block;font-size:.8125rem;line-height:1.42857;margin:0 0 .625rem;word-break:break-all;word-wrap:break-word;background-color:var(--rh-color-surface-lighter,#f2f2f2);border:.0625rem solid #ccc;border-radius:.25rem;color:#333}.docs-content-container pre,.rhdocs pre{background:var(--rh-color-surface-lighter,#f2f2f2);color:#151515;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs pre[class]{line-height:1.6667;overflow-x:auto}rh-codeblock pre[class][class]{overflow-x:auto}.pfe-clipboard__text--success{background-color:#ddd;border:1px solid #000;border-radius:2px}*,:after,:before{box-sizing:border-box}:root{--rh-space-xs:4px;--rh-space-sm:6px;--rh-space-md:8px;--rh-space-lg:16px;--rh-space-xl:24px;--rh-space-2xl:32px;--rh-space-3xl:48px;--rh-space-4xl:64px;--rh-space-5xl:80px;--rh-space-6xl:96px;--rh-space-7xl:128px;--rh-font-size-body-text-xs:.75rem;--rh-font-size-body-text-sm:.875rem;--rh-font-size-body-text-md:1rem;--rh-font-size-body-text-lg:1.125rem;--rh-font-size-body-text-xl:1.25rem;--rh-font-size-body-text-2xl:1.5rem;--rh-font-size-heading-xs:1.25rem;--rh-font-size-heading-sm:1.5rem;--rh-font-size-heading-md:1.75rem;--rh-font-size-heading-lg:2.25rem;--rh-font-size-heading-xl:2.5rem;--rh-font-size-heading-2xl:3rem;--pfe-navigation--logo--maxWidth:200px;--pfe-navigation__logo--height:40px;--pfe-navigation--fade-transition-delay:500ms;--pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);--pf-global--icon--FontSize--sm:.75rem}body,html{font-family:Red Hat Text,sans-serif;font-size:var(--rh-font-size-body-text-md,1rem);line-height:var(--rh-line-height-body-text,1.5);margin:0}h1,h2,h3,h4,h5,h6{font-family:Red Hat Display,sans-serif;font-weight:400;line-height:var(--rh-line-height-heading,1.3)}h1{font-size:var(--rh-font-size-heading-2xl,3rem);line-height:62px}h2{font-size:var(--rh-font-size-heading-xl,2.5rem);line-height:48px}h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}h4{font-size:var(--rh-font-size-heading-md,2.25rem)}h5{font-size:var(--rh-font-size-heading-sm,2.25rem)}h6{font-size:var(--rh-font-size-heading-xs,2.25rem)}main{line-height:30px}section{padding-bottom:3rem;padding-top:3rem}img{height:auto;max-width:100%}a{color:var(--rh-color-interactive-blue-darker,#06c);text-decoration:none}a:hover{color:var(--rh-color-interactive-blue-darkest,#004080)}rh-alert.html-container a{text-decoration:underline}.container{padding-left:12px;padding-right:12px}.container,.container-fluid{margin-left:auto;margin-right:auto;width:100%}.container-fluid{padding:12px}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{min-width:1140px}}@media (min-width:1400px){.container{min-width:1320px}}.grid{display:grid;gap:var(--rh-space-xl,24px)}.grid-center{margin:auto}.grid.grid-col-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-12{grid-template-columns:repeat(12,1fr)}@media (min-width:768px){.grid.grid-col-md-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-md-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-md-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-md-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-md-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-md-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-md-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-md-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-md-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-md-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-md-12{grid-template-columns:repeat(12,1fr)}}@media (min-width:992px){.grid.grid-col-lg-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-lg-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-lg-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-lg-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-lg-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-lg-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-lg-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-lg-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-lg-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-lg-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-lg-12{grid-template-columns:repeat(12,1fr)}}.span-1{grid-column:span 1}.span-2{grid-column:span 2}.span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-5{grid-column:span 5}.span-6{grid-column:span 6}.span-7{grid-column:span 7}.span-8{grid-column:span 8}.span-9{grid-column:span 9}.span-10{grid-column:span 10}.span-11{grid-column:span 11}.span-12{grid-column:span 12}@media (min-width:399px){.span-xs-1{grid-column:span 1}.span-xs-2{grid-column:span 2}.span-xs-3{grid-column:span 3}.span-xs-4{grid-column:span 4}.span-xs-5{grid-column:span 5}.span-xs-6{grid-column:span 6}.span-xs-7{grid-column:span 7}.span-xs-8{grid-column:span 8}.span-xs-9{grid-column:span 9}.span-xs-10{grid-column:span 10}.span-xs-11{grid-column:span 11}.span-xs-12{grid-column:span 12}}@media (min-width:768px){.span-md-1{grid-column:span 1}.span-md-2{grid-column:span 2}.span-md-3{grid-column:span 3}.span-md-4{grid-column:span 4}.span-md-5{grid-column:span 5}.span-md-6{grid-column:span 6}.span-md-7{grid-column:span 7}.span-md-8{grid-column:span 8}.span-md-9{grid-column:span 9}.span-md-10{grid-column:span 10}.span-md-11{grid-column:span 11}.span-md-12{grid-column:span 12}}@media (min-width:992px){.span-lg-1{grid-column:span 1}.span-lg-2{grid-column:span 2}.span-lg-3{grid-column:span 3}.span-lg-4{grid-column:span 4}.span-lg-5{grid-column:span 5}.span-lg-6{grid-column:span 6}.span-lg-7{grid-column:span 7}.span-lg-8{grid-column:span 8}.span-lg-9{grid-column:span 9}.span-lg-10{grid-column:span 10}.span-lg-11{grid-column:span 11}.span-lg-12{grid-column:span 12}}@media (min-width:1025px){.span-xl-1{grid-column:span 1}.span-xl-2{grid-column:span 2}.span-xl-3{grid-column:span 3}.span-xl-4{grid-column:span 4}.span-xl-5{grid-column:span 5}.span-xl-6{grid-column:span 6}.span-xl-7{grid-column:span 7}.span-xl-8{grid-column:span 8}.span-xl-9{grid-column:span 9}.span-xl-10{grid-column:span 10}.span-xl-11{grid-column:span 11}.span-xl-12{grid-column:span 12}}@media (min-width:1200px){.span-2xl-1{grid-column:span 1}.span-2xl-2{grid-column:span 2}.span-2xl-3{grid-column:span 3}.span-2xl-4{grid-column:span 4}.span-2xl-5{grid-column:span 5}.span-2xl-6{grid-column:span 6}.span-2xl-7{grid-column:span 7}.span-2xl-8{grid-column:span 8}.span-2xl-9{grid-column:span 9}.span-2xl-10{grid-column:span 10}.span-2xl-11{grid-column:span 11}.span-2xl-12{grid-column:span 12}}.flex{display:flex;flex-direction:column;gap:var(--rh-space-lg,16px)}.flex-row{flex-direction:row}.flex-column{flex-direction:column}@media (min-width:768px){.flex-md-row{flex-direction:row}.flex-md-column{flex-direction:column}}.typography-h1{font-size:var(--rh-font-size-heading-2xl,3rem)}.typography-h2{font-size:var(--rh-font-size-heading-xl,2.5rem)}.typography-h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}.typography-h4{font-size:var(--rh-font-size-heading-md,1.75rem)}.typography-h5{font-size:var(--rh-font-size-heading-sm,1.5rem)}.typography-h6{font-size:var(--rh-font-size-heading-xs,1.25rem)}.content section{padding:0}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{margin:var(--rh-space-lg,16px) 0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0}.list-unstyled{list-style:none;padding-left:0}.tooltip-content{align-items:center;display:flex;font-family:Red Hat Text;justify-content:center;text-transform:none}.tooltip-content .check-icon{margin-left:var(--rh-space-md,8px)}.doc-image-link{display:inline-block;text-decoration:none}.modal-img{display:block;width:100%}.modal-helper-text{margin-top:.5rem;text-align:center}.modal-helper-text a{color:#000;cursor:pointer}.modal-helper-text a:hover{text-decoration:underline}.modal-helper-text a:after{content:"⿻";margin-left:.25rem}pf-modal.pf-img-modal{--pf-c-modal-box--MaxHeight:90vh;overflow-y:scroll}pf-modal.pf-img-modal::part(close-button){background-color:#fff;border-radius:50%;color:#000;margin-right:-2rem;margin-top:-2rem}pf-modal.pf-img-modal::part(close-button):hover{opacity:.7}h2.truste-title{line-height:normal;margin-top:0}rh-alert p[slot=header]{color:#002952}@media (width < 992px){html:has(nav.mobile-nav .mobile-nav-wrapper){scroll-behavior:smooth;scroll-padding-top:4rem}html:has(nav.mobile-nav .mobile-jump-links){scroll-padding-top:7rem}html:has(nav.mobile-nav.hide-mobile-nav){scroll-padding-top:2rem}}.highlight{background:#fff4cc;color:#000}</style>
<style>rh-alert[data-v-84359384]{width:100%}</style>
<style>.search-btn[data-v-edc0d12c]{align-items:center;background-color:var(--rh-color-canvas-black,#151515);border:3px solid var(--rh-color-canvas-black,#151515);cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;outline:none;padding:14px var(--rh-space-md,8px)}.search-btn[data-v-edc0d12c]:focus{border-top:3px solid var(--rh-color-accent-brand-on-light,#e00);outline:2px dotted var(--rh-color-white,#fff)}.search-btn .search-icon[data-v-edc0d12c]{height:26px;padding:2px 0 var(--rh-space-xs,4px);width:20px}.search-btn .search-icon[data-v-edc0d12c],.search-icon-helper-text[data-v-edc0d12c]{color:var(--rh-color-white,#fff)}.search-mobile[data-v-edc0d12c]{margin-bottom:var(--rh-space-2xl,32px)}.search-mobile form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto}.search-box[data-v-edc0d12c]{width:35rem}nav[data-v-edc0d12c]{background-color:#151515;justify-content:space-between;width:100%}a[data-v-edc0d12c],a[data-v-edc0d12c]:visited{color:#fff;display:inline-block;font-size:var(--rh-font-size-body-text-md,1rem)}.skip-link[class][class][data-v-edc0d12c]{font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class][data-v-edc0d12c]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}.visually-hidden[data-v-edc0d12c]{border:1px solid #06c;height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);white-space:nowrap}h3[data-v-edc0d12c]{color:#464646;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-lg,1.125rem)}.language-picker[data-v-edc0d12c]{align-items:center;background-color:#fff;display:flex;flex-direction:column;padding:var(--rh-space-xl,24px);width:100%}.language-picker h3[data-v-edc0d12c]{margin:0;padding:0 1rem 1rem}.language-picker ul[data-v-edc0d12c]{margin:0;padding:0}.language-picker a[data-v-edc0d12c]{color:#06c}.language-picker li[data-v-edc0d12c]{list-style:none}.language-dropdown[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:block!important;position:absolute;right:0;width:100%;z-index:104}.pfe-navigation.pfe-navigation--processed>[slot=secondary-links][data-v-edc0d12c]{height:auto;overflow:visible;visibility:visible;width:auto}.upper-navigation[data-v-edc0d12c]{padding:0 var(--rh-space-2xl,32px)}.upper-nav-container[data-v-edc0d12c]{border-bottom:1px solid #404040;margin:0}.upper-nav-hidden[data-v-edc0d12c]:not(:focus):not(:active){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.upper-nav-menu[data-v-edc0d12c]{align-items:center;display:flex;justify-content:flex-end;line-height:1.444;list-style:none;margin-bottom:0;margin-top:0;padding-left:0}.upper-nav-menu[data-v-edc0d12c],.upper-nav-menu>li[data-v-edc0d12c]{position:relative}.upper-nav-menu>li:not(:first-child)>a[data-v-edc0d12c]:before,.upper-nav-menu>li:not(:first-child)>button[data-v-edc0d12c]:before{background-color:#404040;content:"";height:40%;left:0;position:absolute;top:30%;width:1px}li[data-v-edc0d12c]{display:list-item;margin:0;padding:0;text-align:-webkit-match-parent}.upper-nav-menu button.upper-nav-links[data-v-edc0d12c]{border:0;border-top:3px solid transparent;cursor:pointer;line-height:1.444}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]{outline-color:#151515}.upper-nav-menu button.upper-nav-links[aria-expanded=true] .upper-nav-arrow[data-v-edc0d12c]{filter:invert(0) sepia(2%) saturate(21%) hue-rotate(257deg) brightness(108%) contrast(100%);transform:rotate(270deg)}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]:before{display:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]{background-color:var(--pfe-navigation--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));border-top:3px solid transparent;color:#fff;display:block;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);outline:none;padding:12px 12px 14px;text-decoration:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:hover{border-top-color:#b8bbbe}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within{outline:1px dashed var(--rh-color-white,#fff);outline-offset:-1px}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within:before{display:none}.upper-nav-dropdown-container[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:none;padding:5px 30px 24px;position:absolute;right:0;top:100%;width:500px;z-index:105}.upper-nav-dropdown-container>ul[data-v-edc0d12c]{-moz-column-count:2;column-count:2;list-style-type:none;padding:0;width:auto}.upper-nav-dropdown-container>ul li[data-v-edc0d12c]{color:#151515;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);list-style-type:none;margin-bottom:0}.upper-nav-dropdown-container>ul li span[data-v-edc0d12c]{font-weight:var(--rh-font-weight-body-text-medium,500)}.upper-nav-dropdown-container>ul ul[data-v-edc0d12c]{padding-left:0;padding-top:9px}.upper-nav-dropdown-container>ul>li[data-v-edc0d12c]{padding-top:19px;-moz-column-break-inside:avoid;break-inside:avoid}.upper-nav-dropdown-container>ul>li>ul>li[data-v-edc0d12c]{line-height:1.45;padding:4px 0}.upper-nav-menu .upper-nav-arrow[data-v-edc0d12c]{display:inline-block;filter:invert(100%) sepia(8%) saturate(7%) hue-rotate(1turn) brightness(100%) contrast(93%);height:18px;margin-left:5px;transform:rotate(90deg);vertical-align:middle;width:8px}#pfe-navigation__secondary-links .show[data-v-edc0d12c],.upper-navigation .show[data-v-edc0d12c]{display:block}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:active,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:focus,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:hover{background-color:#fff;color:#151515}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]{background-color:#fff;border-top-color:#b8bbbe;color:#000;position:relative;z-index:1}.upper-nav-dropdown-container>ul a[data-v-edc0d12c]{color:var(--rh-color-accent-base-on-light,#06c);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;text-decoration:none}.pfe-navigation__search[data-v-edc0d12c]{background-color:var(--rh-color-white,#fff)}.pfe-navigation__search form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto;max-width:992px}pfe-navigation [slot=secondary-links] .buttons[data-v-edc0d12c]{display:flex;flex-wrap:wrap;gap:var(--rh-space-md,8px);margin-top:4px}pfe-navigation [slot=secondary-links] .buttons a[data-v-edc0d12c]{border:1px solid #d2d2d2;border-radius:3px;color:#06c;cursor:pointer;flex-basis:calc(50% - 5px);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-weight:var(--rh-font-weight-code-regular,400);padding:1em;text-align:center;text-decoration:none}pfe-navigation [slot=secondary-links] .mobile-lang-select[data-v-edc0d12c]{border:1px solid #d2d2d2;border-bottom-color:#3c3f42;cursor:pointer;display:flex;margin:3rem 0;position:relative}pfe-navigation [slot=secondary-links] .mobile-lang-select label[data-v-edc0d12c]{bottom:100%;color:#000;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;font-weight:500;margin-bottom:5px;position:absolute}pfe-navigation [slot=secondary-links] .mobile-lang-select select[data-v-edc0d12c]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-style:none;color:#000;flex-basis:100%;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:16px;line-height:24px;padding:6px 24px 6px 8px}select[data-v-edc0d12c]{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position:98% 50%;background-repeat:no-repeat}#inputLabel[data-v-edc0d12c]{align-items:center;display:flex;position:relative}#inputLabel form[data-v-edc0d12c]{width:100%}.input-box[data-v-edc0d12c]{font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 8px;width:100%}.input-box[data-v-edc0d12c]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-box[data-v-edc0d12c]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}@media(max-width:960px){.search-box[data-v-edc0d12c]{width:28rem}}@media (max-width:768px){.right-navigation[data-v-edc0d12c],.upper-navigation[data-v-edc0d12c]{display:none}}@media (min-width:767px){.pfe-navigation__search form[data-v-edc0d12c]{padding:var(--rh-space-2xl,32px) 0}}</style>
<style>.element-invisible,.sr-only,.visually-hidden{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;white-space:nowrap}@keyframes reveal-nav{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@keyframes reveal-nav-parts{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}1%{visibility:visible}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@media print{.pfe-navigation__menu,pfe-navigation [slot]{display:none!important}}pfe-navigation{--pfe-broadcasted--text:var(--pfe-theme--color--text,#151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted,#6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link,#06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover,#004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus,#004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited,#6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration,none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover,underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus,underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited,none)}@supports (display:grid){pfe-navigation{animation:reveal-nav .1618s 4s 1 forwards;max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}pfe-navigation>*{animation:reveal-nav-parts .1618s 4s 1 forwards;opacity:0;transition:opacity .1618s ease-in-out;transition:opacity var(--pfe-reveal-duration,.1618s) ease-in-out;visibility:hidden}}pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed>*{animation:none;opacity:1;visibility:visible}pfe-navigation pfe-primary-detail{display:none}pfe-navigation[pfelement]{display:block}pfe-navigation-dropdown{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515)}#pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],#pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],#pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class],pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class]{display:none}#pfe-navigation,#pfe-navigation *,pfe-navigation,pfe-navigation *{box-sizing:border-box}#pfe-navigation [pfelement] .pfe-navigation__log-in-link,pfe-navigation [pfelement] .pfe-navigation__log-in-link{display:none}#pfe-navigation,pfe-navigation{align-items:stretch;background:#151515;background:var(--pfe-navigation__nav-bar--Background,#151515);color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;font-family:Red Hat Text,RedHatText,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamily,Red Hat Text,RedHatText,Arial,Helvetica,sans-serif);font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);height:auto;line-height:1.5;margin:0;max-width:9999em;min-height:72px;min-height:var(--pfe-navigation__nav-bar--Height,72px);padding:0 16px;position:relative;z-index:95;z-index:var(--pfe-navigation--ZIndex,var(--pfe-theme--zindex--navigation,95))}@media (min-width:768px){#pfe-navigation,pfe-navigation{flex-wrap:wrap;margin:0;max-width:9999em;padding:0 16px}}@media (min-width:1200px){#pfe-navigation,pfe-navigation{margin:0 auto;padding:0 32px}}#pfe-navigation .pfe-navigation__dropdown,#pfe-navigation pfe-navigation-dropdown,pfe-navigation .pfe-navigation__dropdown,pfe-navigation pfe-navigation-dropdown{display:none}#pfe-navigation>[slot=account],#pfe-navigation>[slot=search],#pfe-navigation>[slot=secondary-links],pfe-navigation>[slot=account],pfe-navigation>[slot=search],pfe-navigation>[slot=secondary-links]{height:0;overflow:hidden;visibility:hidden;width:0}@media (min-width:768px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{align-items:stretch;display:flex;flex-wrap:wrap}}@media (min-width:992px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{flex-wrap:nowrap}}#pfe-navigation .pfe-navigation__logo-wrapper,pfe-navigation .pfe-navigation__logo-wrapper{align-items:center;display:flex;justify-content:flex-start;margin:0;min-width:150px;padding:10px 16px 10px 0}@media (min-width:768px){.pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:auto}}.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:0}#pfe-navigation .pfe-navigation__logo-link,pfe-navigation .pfe-navigation__logo-link{border-radius:3px;display:block;margin-left:-8px;outline:0;padding:6px 8px;position:relative}#pfe-navigation .pfe-navigation__logo-link:focus,pfe-navigation .pfe-navigation__logo-link:focus{outline:0}#pfe-navigation .pfe-navigation__logo-link:focus:after,pfe-navigation .pfe-navigation__logo-link:focus:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:block;height:auto;width:100%}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{height:40px;height:var(--pfe-navigation__logo--height,40px);width:auto}}@media print{#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:none}}#pfe-navigation .pfe-navigation__logo-image:only-child,pfe-navigation .pfe-navigation__logo-image:only-child{display:block}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small{height:32px;height:var(--pfe-navigation__logo--height,32px)}}@media print{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen{display:none!important}}@media screen{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print{display:none!important}}#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print{display:inline-block!important}#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;justify-content:center;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{display:none!important}}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__fallback-links a[class]:focus,#pfe-navigation .pfe-navigation__fallback-links a[class]:hover,#pfe-navigation .pfe-navigation__log-in-link[class]:focus,#pfe-navigation .pfe-navigation__log-in-link[class]:hover,#pfe-navigation .pfe-navigation__menu-link[class]:focus,#pfe-navigation .pfe-navigation__menu-link[class]:hover,#pfe-navigation .pfe-navigation__secondary-link[class]:focus,#pfe-navigation .pfe-navigation__secondary-link[class]:hover,pfe-navigation .pfe-navigation__fallback-links a[class]:focus,pfe-navigation .pfe-navigation__fallback-links a[class]:hover,pfe-navigation .pfe-navigation__log-in-link[class]:focus,pfe-navigation .pfe-navigation__log-in-link[class]:hover,pfe-navigation .pfe-navigation__menu-link[class]:focus,pfe-navigation .pfe-navigation__menu-link[class]:hover,pfe-navigation .pfe-navigation__secondary-link[class]:focus,pfe-navigation .pfe-navigation__secondary-link[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__secondary-link:focus{outline:0}#pfe-navigation .pfe-navigation__fallback-links a:focus:after,#pfe-navigation .pfe-navigation__log-in-link:focus:after,#pfe-navigation .pfe-navigation__menu-link:focus:after,#pfe-navigation .pfe-navigation__secondary-link:focus:after,pfe-navigation .pfe-navigation__fallback-links a:focus:after,pfe-navigation .pfe-navigation__log-in-link:focus:after,pfe-navigation .pfe-navigation__menu-link:focus:after,pfe-navigation .pfe-navigation__secondary-link:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{pointer-events:none}#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding:0 16px 0 0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{display:block;height:18px}#pfe-navigation .pfe-navigation__fallback-links a[class],#pfe-navigation .pfe-navigation__fallback-links a[href],#pfe-navigation .pfe-navigation__log-in-link[class],#pfe-navigation .pfe-navigation__log-in-link[href],#pfe-navigation .pfe-navigation__menu-link[class],#pfe-navigation .pfe-navigation__menu-link[href],#pfe-navigation .pfe-navigation__secondary-link[class],#pfe-navigation .pfe-navigation__secondary-link[href],pfe-navigation .pfe-navigation__fallback-links a[class],pfe-navigation .pfe-navigation__fallback-links a[href],pfe-navigation .pfe-navigation__log-in-link[class],pfe-navigation .pfe-navigation__log-in-link[href],pfe-navigation .pfe-navigation__menu-link[class],pfe-navigation .pfe-navigation__menu-link[href],pfe-navigation .pfe-navigation__secondary-link[class],pfe-navigation .pfe-navigation__secondary-link[href]{align-items:center;justify-content:center}#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%;--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none!important}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation [slot=account]>a[href]:focus,#pfe-navigation [slot=account]>a[href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation [slot=account]>a[href]:focus,pfe-navigation [slot=account]>a[href]:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation [slot=account]>a[href]:focus,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation [slot=account]>a[href]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle:focus:after,#pfe-navigation [slot=account]>a[href]:focus:after,pfe-navigation .pfe-navigation__account-toggle:focus:after,pfe-navigation [slot=account]>a[href]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{pointer-events:none}@supports (display:grid){#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__account-toggle[class]:focus,#pfe-navigation .pfe-navigation__account-toggle[class]:hover,#pfe-navigation [slot=account]>a[href][class]:focus,#pfe-navigation [slot=account]>a[href][class]:hover,pfe-navigation .pfe-navigation__account-toggle[class]:focus,pfe-navigation .pfe-navigation__account-toggle[class]:hover,pfe-navigation [slot=account]>a[href][class]:focus,pfe-navigation [slot=account]>a[href][class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none}}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{--pfe-icon--size:18px;padding:2px 0 4px}@media (min-width:768px){#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{padding-right:0}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],#pfe-navigation [slot=account]>a[href][href]:focus,#pfe-navigation [slot=account]>a[href][href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation [slot=account]>a[href][href]:focus,pfe-navigation [slot=account]>a[href][href]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after{border:1px dashed #151515;border:1px dashed var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{font-size:inherit;list-style:none;margin:0;padding:0}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{align-items:stretch;display:flex}}#pfe-navigation .pfe-navigation__fallback-links li,#pfe-navigation .pfe-navigation__menu li,pfe-navigation .pfe-navigation__fallback-links li,pfe-navigation .pfe-navigation__menu li{font-size:inherit;margin:0;padding:0}#pfe-navigation .pfe-navigation__fallback-links li:before,#pfe-navigation .pfe-navigation__menu li:before,pfe-navigation .pfe-navigation__fallback-links li:before,pfe-navigation .pfe-navigation__menu li:before{content:none}#pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__fallback-links{margin-left:auto}#pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__menu-link{display:flex;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);white-space:nowrap}#pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed{display:block;padding:0}#pfe-navigation.pfe-navigation--processed:before,pfe-navigation.pfe-navigation--processed:before{content:none}#pfe-navigation.pfe-navigation--processed>[slot=account],#pfe-navigation.pfe-navigation--processed>[slot=search],#pfe-navigation.pfe-navigation--processed>[slot=secondary-links],pfe-navigation.pfe-navigation--processed>[slot=account],pfe-navigation.pfe-navigation--processed>[slot=search],pfe-navigation.pfe-navigation--processed>[slot=secondary-links]{height:auto;overflow:visible;visibility:visible;width:auto}#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,#pfe-navigation.pfe-navigation--processed>[slot],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed>[slot]{animation:none;opacity:1}#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{display:block;height:auto;list-style:none;margin:0 0 8px;padding:0;width:auto}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0 0 8px}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{display:none!important}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{pointer-events:none}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding:0 16px 0 0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{display:block;height:18px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed #fff;border:1px dashed var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{box-shadow:none}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{background:0 0;box-shadow:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column{position:relative}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper{display:block}#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{height:0;transition:height .25s ease-in-out;transition:var(--pfe-navigation--accordion-transition,height .25s ease-in-out)}@media (prefers-reduced-motion){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{transition:none}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:absolute;right:0;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:auto}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:0}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper{left:100vw;left:calc(100vw - 32px);left:calc(100vw - var(--pfe-navigation__mobile-dropdown--PaddingHorizontal,32px));position:absolute;top:0;width:100vw}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false],pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false]{height:100vh;height:calc(100vh - 72px);height:calc(100vh - var(--pfe-navigation__nav-bar--Height,72px));overflow-y:scroll}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 64px24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px) var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a{border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));display:inline-block}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6{margin:32px 0 .75em;margin:var(--pfe-navigation--gutter,32px) 0 .75em;padding:0;-moz-column-break-inside:avoid;break-inside:avoid;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);font-family:Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamilyHeadline,Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif);font-size:1.125rem;font-size:var(--pf-global--FontSize--lg,1.125rem);font-weight:500}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a{border:1px solid transparent;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li{margin:0 0 16px;-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--BackgroundColor,#e00);--pfe-cta--BackgroundColor--hover:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00);--pfe-theme--ui--border-width:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00)}pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul{list-style:none;margin:0;padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515);-moz-column-count:auto;column-count:auto;display:block;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);gap:0;margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:flex;flex-wrap:wrap;padding-bottom:32px;padding-top:32px}@supports (display:grid){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{display:grid;gap:32px;gap:var(--pfe-navigation--gutter,32px);grid-auto-flow:row;grid-template-columns:repeat(4,minmax(0,1fr))}}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:block;gap:0;margin-left:-16px;margin-right:-16px;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{transition-delay:0s;visibility:visible}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px;-moz-column-break-inside:avoid;break-inside:avoid}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid{max-width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown{background:#fff}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:32px 64px;padding:32px var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px)}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container{margin:0;padding:0;width:auto}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class]{padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown{visibility:hidden}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{padding:0}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:0 1px 2px rgba(0,0,0,.12);box-shadow:var(--pfe-navigation__dropdown--BoxShadow,0 1px 2px rgba(0,0,0,.12));max-width:100%;min-width:13em;padding:0 32px;position:absolute;top:100%}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:none;max-width:100%;position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{right:0}}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{width:100%}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{left:0;position:absolute;right:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{position:static}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown{width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles{padding-left:16px;padding-right:16px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form{align-items:center;display:flex}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{padding:10px;transition:box-shadow .2s}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{border:1px solid #f0f0f0;border-bottom-color:#8b8e91;color:#717579;flex-basis:0%;flex-grow:1;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);margin-right:8px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button{background-color:#e00;border:1px solid #e00;border-radius:2px;color:#fff;flex-basis:auto;flex-grow:0;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after{border:1px dashed #000;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-navigation__dropdown--separator--Border,1px solid var(--pfe-theme--color--ui--border--lighter,#d2d2d2));display:block}@media (min-width:768px){#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:none}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__site-switcher__back-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:block}#pfe-navigation .pfe-navigation__site-switcher__back-button,pfe-navigation .pfe-navigation__site-switcher__back-button{background-color:transparent;border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);padding:21px 21px 21px 45px;position:relative;text-align:left;width:100%}#pfe-navigation .pfe-navigation__site-switcher__back-button:before,pfe-navigation .pfe-navigation__site-switcher__back-button:before{border:2px solid #06c;border:2px solid var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));border-right:0;border-top:0;content:"";display:block;height:8px;left:35px;position:absolute;right:auto;top:27px;transform:rotate(45deg);transform-origin:left top;width:8px}#pfe-navigation .pfe-navigation__site-switcher__back-button:focus,#pfe-navigation .pfe-navigation__site-switcher__back-button:hover,pfe-navigation .pfe-navigation__site-switcher__back-button:focus,pfe-navigation .pfe-navigation__site-switcher__back-button:hover{border:1px dashed #151515;border-top:1px dashed #151515;border:1px dashed var(--pfe-navigation__dropdown--Color,#151515);color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);outline:0}#pfe-navigation.pfe-navigation--processed site-switcher,pfe-navigation.pfe-navigation--processed site-switcher{-moz-columns:auto;columns:auto;display:block}#pfe-navigation.pfe-navigation--stuck,pfe-navigation.pfe-navigation--stuck{left:0;position:fixed;top:0;width:100%;z-index:95;z-index:var(--pfe-theme--zindex--navigation,95)}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner{opacity:1!important}#pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown{display:none!important}#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown{display:block!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item{display:block}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus{outline:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown{display:flex;flex-wrap:wrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope{flex-basis:25%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope{flex-basis:100%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope{margin-right:16px}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{display:flex;flex-direction:column;flex-wrap:nowrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{flex-basis:auto}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a{color:#fff!important;justify-content:center!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true]{color:#151515!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon{display:none!important}[id=pfe-navigation__account-dropdown][class][class]{display:block;height:auto;left:0;padding:0;position:absolute;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px);width:100%}[id=pfe-navigation__account-dropdown].pfe-navigation__dropdown-wrapper--invisible[class]{display:none}.pfe-navigation__dropdown-wrapper{overflow:hidden}@media (min-width:768px){.pfe-navigation__custom-dropdown--single-column{min-width:25em}}.pfe-navigation--collapse-secondary-links .pfe-navigation__custom-dropdown--single-column{min-width:0}.secondary-link__icon-wrapper{align-items:center;display:flex;justify-content:center}.secondary-link__alert-count{background:#06c;background:var(--pfe-navigation__nav-bar--alert-color,var(--pfe-theme--color--link,#06c));border-radius:20px;color:#fff;color:var(--pfe-navigation__nav-bar--Color--on-highlight,var(--pfe-theme--color--text--on-saturated,#fff));display:block;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);line-height:20px;margin:0 4px 0 2px;min-width:23px;overflow:hidden;padding:0 8px}.secondary-link__alert-count:empty{display:none}#pfe-navigation__1x-skip-links{left:0;position:absolute;top:0}#pfe-navigation__1x-skip-links,#pfe-navigation__1x-skip-links li{height:0;list-style:none;margin:0;padding:0;width:0}.skip-link[class][class]{font-size:.875rem;font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}pfe-navigation pfe-navigation-account[slot=account]{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));width:100%}</style>
<style>:host([size=sm]) #container[data-v-8589d091]{--_size:var(--pf-global--icon--FontSize--sm,12px)}.content-wrapper[data-v-8589d091]{height:auto;margin:0 auto;min-height:46vh}.content[data-v-8589d091]{max-width:1000px}#left-content[data-v-8589d091]{max-width:330px;z-index:1}.line-below-chp[data-v-8589d091]{margin:var(--rh-space-xl,24px) 0 var(--rh-space-3xl,48px)}.toc-container[data-v-8589d091]{border-right:1px solid var(--rh-color-gray-30,#c7c7c7);min-height:100vh;position:sticky;top:0;transition:transform .3s ease-in-out}nav#toc[data-v-8589d091]{height:auto;overflow-y:auto;padding-bottom:var(--rh-space-2xl,32px)}.max-height-85[data-v-8589d091]{max-height:85vh}.max-height-75[data-v-8589d091]{max-height:75vh}.toc-filter[data-v-8589d091]{background-color:#fff;padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px);position:sticky;top:-1px;width:100%;z-index:1}#text[data-v-8589d091],.toc-filter[data-v-8589d091]{align-items:center;display:flex}#text[data-v-8589d091]{flex:1;flex-direction:row}#search-icon[data-v-8589d091]{color:#151515;left:2.5rem;position:absolute;top:55%;transform:translateY(-50%)}pf-icon[data-v-8589d091]{--pf-icon--size:16px}#text:focus-within #icon[data-v-8589d091],#text:hover #icon[data-v-8589d091]{color:#151515}#text[data-v-8589d091]:after,#text[data-v-8589d091]:before{content:"";inset:0;pointer-events:none;position:absolute}#text-input[data-v-8589d091]:focus,#text-input:focus+#utilities[data-v-8589d091]{border-bottom:2px solid #06c;outline:none}#text-input[data-v-8589d091]{background-color:transparent;border:1px solid #f0f0f0;border-bottom-color:#8a8d90;color:#151515;font-family:inherit;font-size:100%;grid-area:text-input;line-height:1.5;overflow:hidden;padding:.375rem .25rem .375rem 2rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%}#utilities[data-v-8589d091]{align-items:center;border:1px solid #f0f0f0;border-bottom:1px solid #8a8d90;border-left:0;display:flex}#utilities rh-badge[data-v-8589d091]{border-radius:80px;font-weight:var(--rh-font-weight-heading-medium,500);--_background-color:#e0e0e0;margin-right:8px}#clear-button[data-v-8589d091]{--pf-c-button--PaddingTop:0.625rem;--pf-c-button--PaddingRight:.25rem;--pf-c-button--PaddingBottom:0.625rem;--pf-c-button--PaddingLeft:.25rem;margin-right:8px}#text-input.no-right-border[data-v-8589d091]{border-right:0}.btn-container[data-v-8589d091]{bottom:0;display:flex;justify-content:flex-end;padding:1rem;pointer-events:none;position:fixed;right:0;z-index:2}.top-scroll-btn[data-v-8589d091]{--pf-c-button--BorderRadius:64px;pointer-events:all}.focusable[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-interactive-blue,#06c)}.mobile-nav-wrapper[data-v-8589d091]{align-items:center;border-bottom:1px solid #c7c7c7;display:flex;height:auto;justify-content:space-between;padding:var(--rh-space-sm,.5rem)}.mobile-nav[data-v-8589d091]{align-items:center;background-color:var(--rh-color-bg-page,#fff);min-height:51px;position:sticky;top:0;z-index:5}.active-mobile-menu[data-v-8589d091]{color:#151515;padding-left:.5rem}.hidden[data-v-8589d091]{display:none}.mobile-nav-btn[data-v-8589d091]{background-color:transparent;border:none;font-family:inherit;font-size:.875rem;font-weight:500;margin:0;min-height:40px;min-width:40px}.border-right[data-v-8589d091]{border-right:1px solid #c7c7c7}.toc-focus-container[data-v-8589d091]{position:sticky;top:0;z-index:2}.toc-focus-btn[data-v-8589d091]{align-items:center;background-color:var(--rh-color-white,#fff);border:1px solid var(--rh-color-blue-50,#06c);border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;position:absolute;right:-20px;top:15px;width:40px}.toc-focus-btn[data-v-8589d091]:focus-visible,.toc-focus-btn[data-v-8589d091]:hover{background-color:var(--rh-color-blue-10,#e0f0ff);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2))}.toc-focus-btn[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-blue-50,#06c)}.toc-focus-btn-icon[data-v-8589d091]{color:var(--rh-color-blue-50,#06c)}.toc-wrapper[data-v-8589d091]{padding:0}.product-container[data-v-8589d091]{border-bottom:1px solid var(--rh-color-gray-30,#c7c7c7);padding:var(--rh-space-xl,24px) var(--rh-space-2xl,32px)}.product-container h1.product-title[data-v-8589d091]{font-size:var(--rh-font-size-code-xl,1.25rem);line-height:30px;margin-bottom:0;margin-top:0}.product-container .product-version[data-v-8589d091]{align-items:center;display:flex;flex-wrap:wrap;margin-top:var(--rh-space-lg,16px)}.product-version .version-label[data-v-8589d091]{color:var(--rh-color-canvas-black,#151515);font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:500}.product-version .version-select-dropdown[data-v-8589d091]{margin:var(--rh-space-md,8px) var(--rh-space-sm,6px);max-width:9.75rem;min-height:2rem;min-width:3rem;overflow:hidden;width:-moz-min-content;width:min-content;word-wrap:nowrap;-webkit-appearance:none;-moz-appearance:none;background:var(--rh-color-white,#fff);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position-x:85%;background-position-y:50%;background-repeat:no-repeat;border:1px solid var(--rh-color-gray-30,#c7c7c7);border-bottom:0;box-shadow:0 -1px 0 0 var(--rh-color-gray-60,#4d4d4d) inset;cursor:pointer;font-size:var(--rh-font-size-body-text-md,1rem);padding:var(--rh-space-md,8px);padding-right:24px;text-overflow:ellipsis}pf-popover[data-v-8589d091]{margin-top:var(--rh-space-md,8px);--pf-c-popover__arrow--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover__content--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover--BoxShadow:0px 4px 8px 0px #15151540;--pf-c-popover__title-text--Color:var(--rh-color-white,#fff);--pf-c-popover--MaxWidth:300px;--pf-c-popover--MinWidth:300px;--pf-c-popover--c-button--Top:20px;--pf-c-popover--c-button--Right:4px;--pf-c-button--m-plain--hover--Color:var(--rh-color-white,#fff)}pf-popover[data-v-8589d091]::part(content){padding:var(--rh-space-2xl,32px)}pf-popover[data-v-8589d091]::part(body){margin-top:var(--rh-space-lg,16px)}pf-popover[data-v-8589d091]::part(close-button){--pf-c-button--m-plain--focus--Color:var(--rh-color-gray-30,#c7c7c7);--pf-c-button--m-plain--Color:var(--rh-color-gray-30,#c7c7c7)}.popover-header-text[data-v-8589d091]{color:var(--rh-color-white,#fff);font-size:var(--rh-font-size-code-md,1rem);margin:0;max-width:80%;padding:0}.popover-body-link[data-v-8589d091]{color:var(--rh-color-blue-30,#92c5f9);text-decoration:none}.popover-trigger-btn[data-v-8589d091]{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center}#first-button[data-v-8589d091]{width:80%}#second-button[data-v-8589d091]{text-align:right;width:20%}#toc-btn[data-v-8589d091]{text-align:left;width:100%}.toc-error[data-v-8589d091]{margin:0;max-width:100%}#layout label[data-v-8589d091]{font-weight:500}.page-layout-options[data-v-8589d091]{background-color:#fff;display:flex;flex-direction:column;padding-bottom:var(--rh-space-lg,16px)}.sticky-top[data-v-8589d091]{position:sticky;top:0}summary[data-v-8589d091]{cursor:pointer;list-style:none;position:relative}summary[data-v-8589d091]::-webkit-details-marker{display:none}details#jump-links-details .jump-links-heading[data-v-8589d091]{background-color:var(--rh-color-white,#fff);display:block;margin-top:var(--rh-space-lg,16px);padding:var(--rh-space-lg,16px) 0 0 var(--rh-space-xl,24px);position:sticky;top:0}details#jump-links-details .jump-links-heading[data-v-8589d091]:before{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;height:9px;left:2px;position:absolute;top:26px;transform:rotate(-135deg);width:9px}details#jump-links-details[open] .jump-links-heading[data-v-8589d091]:before{transform:rotate(135deg)}.table-of-contents>ol[data-v-8589d091]{list-style:none;margin:0;padding:0}nav.table-of-contents[data-v-8589d091]{z-index:1}nav.table-of-contents ol[data-v-8589d091]{list-style:none;margin:0;padding:0}#mobile-browse-docs[data-v-8589d091]{font-weight:var(--rh-font-weight-body-text-medium,500);padding-left:var(--rh-space-2xl,32px)}.docs-content-container[data-v-8589d091]{font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:1.6667;padding-left:6rem;padding-right:6rem;padding-top:var(--rh-space-3xl,4rem)}.chapter-title[data-v-8589d091]{font-family:Red Hat Display}h1.chapter-title[data-v-8589d091]{font-size:var(--rh-fontsize-heading-xl,2.25rem);line-height:46.8px;margin:0;padding:0}.chapter .section h4[data-v-8589d091]{font-size:24px;font-weight:400}.banner-wrapper[data-v-8589d091]{padding:3rem 6rem 0}.page-format-dropdown[data-v-8589d091]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBhc4xCoAwDAXQxE6li0K76w0cPZqjHsEb6AlcHb2BR9ADdG7GmIKTWv0QSOAFPjrndgAo4TtHxszTD4JoVAhh1VoXiNgkUO+971Q8iGgxxlSy1jc3CGof39baWTrzNSOkkksEbG/oBGEJIn6gD3jAAAAAAElFTkSuQmCC");background-position:8.5rem;background-repeat:no-repeat;background-size:auto;border:1px solid #c7c7c7;box-shadow:inset 0 -1px 0 0 #4d4d4d;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-md,1rem);margin-top:var(--rh-space-xs,4px);max-width:168px;min-height:36px;min-width:168px;overflow:hidden;padding:0 var(--rh-space-xl,24px) 0 var(--rh-space-md,8px);text-overflow:ellipsis;white-space:nowrap}.content-format-selectors[data-v-8589d091]{color:#151515;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:var(--rh-font-weight-body-text-medium,500);margin-right:var(--rh-space-2xl,32px);max-width:250px;min-width:250px;padding-top:var(--rh-space-2xl,32px)}.chapter .section .simpara[data-v-8589d091],.chapter .section p[data-v-8589d091]{font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:30px}#toggle-focus-mode[data-v-8589d091]{padding-right:var(--rh-space-lg,1rem)}@keyframes slideaway-left-8589d091{0%{display:block}to{opacity:0;transform:translateX(-40px)}}@keyframes slideaway-right-8589d091{0%{display:block}to{opacity:0;transform:translateX(40px)}}@keyframes enter-left-8589d091{0%{display:none;transform:translateX(-40px)}to{opacity:1}}@keyframes enter-right-8589d091{0%{display:none;transform:translateX(40px)}to{opacity:1}}.hide-left[data-v-8589d091]{animation:slideaway-left-8589d091 .2s;display:none}.enter-left[data-v-8589d091]{animation:enter-left-8589d091 .3s;border-right:none;display:block}.enter-right[data-v-8589d091]{animation:enter-right-8589d091 .3s;display:block}.hide-right[data-v-8589d091]{animation:slideaway-right-8589d091 .2s;display:none}.toc-container.enter-toc-container-left[data-v-8589d091]{transform:translateX(-85%)}.alert-section[data-v-8589d091]{padding-bottom:3rem}rh-alert[data-v-8589d091]{width:auto}@media (min-width:992px){#mobile-nav[data-v-8589d091],#toc-list-mobile[data-v-8589d091]{display:none}}@media (min-width:992px) and (max-width:1400px){.docs-ocp-content-container[data-v-8589d091]{padding:var(--rh-space-4xl,64px) var(--rh-space-lg,16px) 0}}@media (width < 992px){#breadcrumbs[data-v-8589d091],.content-format-selectors[data-v-8589d091],.toc-container[data-v-8589d091]{display:none}#mobile-nav-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7}#toc-wrapper-mobile[data-v-8589d091]{padding:var(--rh-space-md,1.5rem)}.product-container[data-v-8589d091]{padding:var(--rh-space-2xl,32px) var(--rh-space-lg,16px)}.product-container.shrink-product-padding[data-v-8589d091]{padding:var(--rh-space-lg,16px)}.product-version .version-select-dropdown[data-v-8589d091]{margin:0 var(--rh-space-lg,16px)}#page-content-options-mobile[data-v-8589d091]{padding:var(--rh-space-lg,2rem)}label[for=page-format][data-v-8589d091],label[for=toggle-focus-mode][data-v-8589d091]{display:block}.page-format-dropdown[data-v-8589d091]{background-position:97%;max-width:100%}nav#mobile-toc-menu[data-v-8589d091]{max-height:50vh;overflow-y:scroll}.mobile-jump-links #first-button[data-v-8589d091]{width:100%}#jump-links-btn[data-v-8589d091]{text-align:left;width:100%}#mobile-jump-links-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7;padding:0 var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}.table-of-contents #browse-docs[data-v-8589d091]{margin-top:1rem;padding-top:var(--rh-space-md,1.5rem)}.mobile-nav[data-v-8589d091]{display:block}.hide-mobile-nav[data-v-8589d091],.mobile-nav[data-v-8589d091]{transition:transform .3s ease-in-out}.hide-mobile-nav[data-v-8589d091]{transform:translateY(-100%)}.docs-content-container[data-v-8589d091]{padding-left:1.25rem;padding-right:1.25rem;padding-top:var(--rh-space-xl,24px)}.banner-wrapper[data-v-8589d091]{padding:0 1rem}.toc-filter-mobile[data-v-8589d091]{align-items:center;display:flex;padding:var(--rh-space-lg,16px);width:100%}#text-input[data-v-8589d091]{padding-left:.5rem}.toc-filter[data-v-8589d091]{display:none}}@media (width <=576px){.content-format-selectors[data-v-8589d091]{display:none}}.informaltable[data-v-8589d091],.rhdocs .informaltable[data-v-8589d091],.rhdocs .table-contents[data-v-8589d091],.rhdocs .table-wrapper[data-v-8589d091],.table-contents[data-v-8589d091],.table-wrapper[data-v-8589d091]{max-height:var(--rh-table--maxHeight);overflow:auto}rh-table[data-v-8589d091]{display:block;margin:2rem 0;max-width:100%}.pvof-doc__wrapper[data-v-8589d091],.rhdocs[data-v-8589d091]{--rh-table--maxHeight:calc(100vh - 12.5rem)}</style>
<style>:is(rh-footer-block) a[data-v-97dd2752]{text-decoration:underline}</style>
<style>:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a{color:var(--rh-color-link-inline-on-dark,var(--rh-color-interactive-blue-lighter,#92c5f9));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:hover{color:var(--rh-color-link-inline-hover-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:is(:focus,:focus-within){color:var(--rh-color-link-inline-focus-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:visited{color:var(--rh-color-link-inline-visited-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a[slot^=logo]{display:block}:is(rh-footer) a[slot^=logo]>img{display:block;height:100%;height:var(--rh-size-icon-04,40px);width:auto}:is(rh-footer,rh-footer-universal,rh-global-footer) :is(h1,h2,h3,h4,h5,h6){font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);line-height:var(--rh-line-height-heading,1.3)}rh-footer [slot=links]:is(h1,h2,h3,h4,h5):nth-of-type(n+5){--_link-header-margin:calc(var(--rh-space-2xl, 32px) - var(--rh-space-lg, 16px))}rh-footer [slot^=links] a{gap:var(--rh-footer-links-gap,var(--rh-space-md,8px))}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] li{display:contents;margin:0;padding:0}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] a{color:var(--rh-color-text-primary-on-dark,#fff)!important;display:block;font-size:var(--rh-footer-link-font-size,var(--rh-font-size-body-text-sm,.875rem));width:-moz-fit-content;width:fit-content}:is(rh-footer-universal,rh-global-footer) [slot^=links] a{font-size:inherit}:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-lg,16px)}@media screen and (min-width:768px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-2xl,32px)}}@media screen and (min-width:1440px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-4xl,64px)}}rh-footer:not(:defined){background-color:var(--rh-color-surface-darker,#1f1f1f);display:grid;grid-template-areas:"footer" "global";grid-template-rows:1fr auto;min-height:var(--rh-footer-nojs-min-height,750px);width:100%}:is(rh-footer-universal,rh-global-footer):not(:defined):before{grid-area:global}rh-footer:not(:defined)>[slot=logo]{padding:var(--rh-space-2xl,32px) var(--_section-side-gap)}:is(rh-footer-universal,rh-global-footer):not(:defined)>*,rh-footer:not(:defined)>:not([slot=logo],:is(rh-footer-universal,rh-global-footer)){border:0;clip:rect(1px,1px,1px,1px);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:is(rh-footer-universal,rh-global-footer):not(:defined){background-color:var(--rh-color-surface-darkest,#151515);display:block;min-height:176px;width:100%}rh-footer-universal rh-footer-copyright{grid-column:-1/1}</style>
<style>.status-legal .status-page-widget[data-v-5f538988]{display:block;margin:.5rem 0;width:11.3125rem;width:-moz-max-content;width:max-content}.status-page-widget[data-v-5f538988]{align-items:center;display:flex;flex-direction:row}.status-legal .status-page-widget .status-description[data-v-5f538988]{color:#ccc;font-weight:600;letter-spacing:.0125rem;line-height:1.5;margin-right:.5rem}.status-good[data-v-5f538988]{background-color:#3e8536}.status-critical[data-v-5f538988]{background-color:#a30100}.status-partial[data-v-5f538988]{background-color:#f5c12d}.status-maintentance[data-v-5f538988]{background-color:#316dc1}.status-minor[data-v-5f538988]{background-color:#b85c00}.status-description[data-v-5f538988]{color:#ccc;font-weight:500;letter-spacing:.2px;line-height:1.5}.current-status-indicator[data-v-5f538988]{border-radius:6px;display:inline-block;height:12px;margin:0 0 0 5px;width:12px}.current-status-indicator.small[data-v-5f538988]{border-radius:4px;display:inline-block;height:8px;margin:0 0 0 5px;width:8px}</style>
<style>.breadcrumbs[data-v-798f280c]{align-items:center;background-color:#f6f6f6;display:flex;gap:var(--rh-space-xl,24px);padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}nav[data-v-798f280c]{flex:1}ol[data-v-798f280c]{background-color:#f6f6f6;font-size:.875rem;list-style:none;margin:0;padding:0}li[data-v-798f280c]{color:#151515;display:inline}a[data-v-798f280c]:after{border-bottom-color:transparent;border-left-color:transparent;box-shadow:inset .25rem .25rem 0 .0625rem #8a8d8d;content:"";display:inline-block;height:1.07143em;margin:0 .5em;position:relative;right:0;top:.75em;transform:translateY(-.5em) rotate(135deg) scale(.5);width:1.07143em}</style>
<style>ol[data-v-fa0dae77]{margin:0;padding:0}li[data-v-fa0dae77],ol[data-v-fa0dae77],ul[data-v-fa0dae77]{list-style:none;margin:0}.chapter-title[data-v-fa0dae77]{font-size:1em}.sub-chapter-title[data-v-fa0dae77],.sub-chapter-title a[data-v-fa0dae77]{font-size:.875rem}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77],.heading[data-v-fa0dae77],.sub-nav .link[data-v-fa0dae77],.sub-nav .link .link[data-v-fa0dae77]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-fa0dae77]:hover,.link[data-v-fa0dae77]:hover,.sub-nav .link[data-v-fa0dae77]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}details[open]:first-of-type>.heading[data-v-fa0dae77]:after{transform:rotate(135deg)}.item[data-v-fa0dae77]{line-height:22px}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77]{color:var(--rh-color-text-primary-on-light,#151515)}.sub-nav[data-v-fa0dae77],.toc-wrapper[data-v-fa0dae77]{list-style:none;margin:0}.toc-wrapper[data-v-fa0dae77]{min-width:100%;padding:0}.sub-nav[data-v-fa0dae77]{font-size:1em;line-height:24px;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-fa0dae77]:hover{color:#151515}.active[data-v-fa0dae77]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.chapter-landing-page[data-v-fa0dae77]{font-weight:500}summary[data-v-fa0dae77]{cursor:pointer;list-style:none;position:relative}summary[data-v-fa0dae77]::-webkit-details-marker{display:none}@keyframes slideDown-fa0dae77{0%{height:0;opacity:0}to{height:var(--details-height-open,"100%");opacity:1}}html[data-v-fa0dae77]{--details-transition-time:400ms}details[data-v-fa0dae77]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-fa0dae77]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-fa0dae77]:after,details .heading[data-v-fa0dae77]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-fa0dae77]:after{height:8px;width:8px}</style>
<style>.item[data-v-b883c74f]{line-height:22px}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f]{color:var(--rh-color-text-primary-on-light,#151515)}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f],.heading[data-v-b883c74f],.sub-nav .link[data-v-b883c74f],.sub-nav .link .link[data-v-b883c74f]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-b883c74f]:hover,.link[data-v-b883c74f]:hover,.sub-nav .link[data-v-b883c74f]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}ol[data-v-b883c74f]{margin:0;padding:0}li[data-v-b883c74f],ol[data-v-b883c74f],ul[data-v-b883c74f]{list-style:none;margin:0}.chapter-title[data-v-b883c74f]{font-size:1em}.sub-nav[data-v-b883c74f]{font-size:1em;line-height:24px;list-style:none;margin:0;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-b883c74f]:hover{color:#151515}.active[data-v-b883c74f]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.sub-chapter-title[data-v-b883c74f],.sub-chapter-title a[data-v-b883c74f]{font-size:.875rem}summary[data-v-b883c74f]{cursor:pointer;list-style:none;position:relative}summary[data-v-b883c74f]::-webkit-details-marker{display:none}html[data-v-b883c74f]{--details-transition-time:400ms}.chapter-landing-page[data-v-b883c74f]{font-weight:500}details[open]:first-of-type>.heading[data-v-b883c74f]:after{transform:rotate(135deg)}details[data-v-b883c74f]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-b883c74f]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-b883c74f]:after,details .heading[data-v-b883c74f]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-b883c74f]:after{height:8px;width:8px}</style>
<style>.html-container[data-v-9c2a9ddb]{padding:2rem 1.5rem 0}rh-alert[data-v-9c2a9ddb]{color:#151515}@media (max-width:772px){.html-container[data-v-9c2a9ddb]{padding:3rem 1rem 0}}</style>
<style>.search-container[data-v-69710f44]{height:100%}.form-box[data-v-69710f44],.search-container[data-v-69710f44]{justify-content:center}.form-box[data-v-69710f44],.search-box[data-v-69710f44],.search-container[data-v-69710f44]{align-items:center;display:flex;width:100%}.search-box[data-v-69710f44]{justify-content:space-between;position:relative}ul[data-v-69710f44]{list-style-type:none}#search-list[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;box-shadow:0 4px 4px 0 #00000040;color:#151515;display:block;left:0;margin:0;padding:0;position:absolute;top:37px;width:100%;z-index:200}#search-list li[data-v-69710f44]{align-items:center;display:flex;justify-content:space-between;padding:.75rem}#search-list .active[data-v-69710f44],#search-list li[data-v-69710f44]:hover{background:#f0f0f0}.group-title[data-v-69710f44]{border-top:1px solid #4d4d4d;color:#4d4d4d;cursor:default;font-size:12px;font-weight:400;pointer-events:none}.group-title[data-v-69710f44],.group-title[data-v-69710f44]:hover{background:#fff}.search-item-text-elipsis[data-v-69710f44]{display:inline-block;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-item-text[data-v-69710f44]{padding-left:1.75rem}.search-item-chip[data-v-69710f44]{float:right}.search-product-version[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;border-radius:3px;font-size:1rem;font-weight:400;line-height:24px}.search-icon-form[data-v-69710f44]{color:var(--rh-color-gray-50,#707070);left:12px;position:absolute}.input-search-box[data-v-69710f44]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 40px;width:100%}.input-clear-btn[data-v-69710f44]{align-items:center;background-color:transparent;border:none;display:flex;height:36px;justify-content:center;margin-right:-30px;outline:none;transform:translateX(-30px)}.input-clear-btn[data-v-69710f44]:focus{border:1px solid var(--rh-color-accent-base-on-light,#06c)}.input-clear-btn:focus .input-clear-icon[data-v-69710f44]{color:var(--rh-color-canvas-black,#151515)}.input-clear-icon[data-v-69710f44]{color:#6b6e72;cursor:pointer}.input-clear-icon[data-v-69710f44]:hover{color:var(--rh-color-canvas-black,#151515)}.form-submit-btn[data-v-69710f44]::part(button){align-items:center;background-color:var(--rh-color-gray-20,#e0e0e0);border-radius:0;display:flex;height:36px;justify-content:center;--_default-border-color:var(--rh-color-gray-20,#e0e0e0)}.input-close-btn[data-v-69710f44]{background:none;border:none;cursor:pointer;margin:0 var(--rh-space-lg,16px)}.input-close-icon[data-v-69710f44]{color:var(--rh-color-white,#fff)}@media (max-width:992px){.form-box[data-v-69710f44]{gap:var(--rh-space-md,8px);margin:auto;width:100%}.input-search-box[data-v-69710f44]{border:1px solid var(--rh-color-gray-30,#c7c7c7)}.input-search-box[data-v-69710f44]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-search-box[data-v-69710f44]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.search-item-text-elipsis[data-v-69710f44]{max-width:60%}}@media (max-width:767px){.input-close-btn[data-v-69710f44]{display:none}.search-container[data-v-69710f44]{border:1px solid #f0f0f0}}</style>
<link rel="stylesheet" href="/_nuxt/entry.DNAluCmw.css" integrity="sha384-FnrZajt9k3u4tri3ClqikI96k+jP7kyrvgKKgdzBr5Y8CQEi3gusKE0+eMSLvGxm">
<link rel="stylesheet" href="/_nuxt/SearchAutocomplete.DkrJaF8R.css" integrity="sha384-Zw8gf6w7SrpWDmknvrab5QanIN+DSJRS/bPB9/lgDkhR7JhDmG/VF++MTMKU8mKB">
<link rel="stylesheet" href="/_nuxt/Breadcrumbs.BLkLxUMB.css" integrity="sha384-f6iEfCywVoZB0/hIKTRaxywtS21KzhBx2JOI/uVjjU9aqFcP7X9cqLH29w2HQvLe">
<link rel="stylesheet" href="/_nuxt/Alert.fTkXFs3h.css" integrity="sha384-yFMpT5E64LAQi3qJ10AJJ1oOH3DrI68OvLSjSivjNCQXZ25pmFxlPavPQ0TEyEpq">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C3PvZR0C.js" integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ds9UYxCD.js" integrity="sha384-PFyBx6Pvk48yXM+prD4CDErW/3HFtPEqORVyAch5qDvJSyubA93+vR4jsWGRQKZs">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BUXK7nH-.js" integrity="sha384-Kqf3r1QrD7+NOn9EuK/ba9sTBZjn7vLAjnCoRtq7IKz+QV0JUUBFf1Snf1yVkkgr">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxBriHwM.js" integrity="sha384-bejD6BN5N1iVRo5Ymn+LdVN0jvrnJTzgqgFD9xQ5+Yi46U6ff+s5W2AISzRWvJaM">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DB5Lt3x5.js" integrity="sha384-Ae/gV/4Dt4jnJApC0CWbckKJ7omq+W9Hb4jjdMyhxGJpwk6FlO7pGYMD3bPO/h1y">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D8BFaW0S.js" integrity="sha384-/m09v/yYk14L9Hra6/9jYtMTn2IdkKQvzpFPRQ5P/baRKwdZQN98873hqvwuYXFS">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_58Q44fW.js" integrity="sha384-EdSd8jpnetO/BWDAc8C4SpQExZ7pYjMygNPvbLmiA1TaYsNUdVOqIIyOIzaErEeU">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DOCUiUcq.js" integrity="sha384-9H868K5q7MLzC8TSRXT3pVqDzsOVxZLYvUQ8cLGpHPZCFEyEJjnwSHE+/7FWrJPV">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiTVMRA7.js" integrity="sha384-xBIJ2xO0t62/oREKqSxPtW1tRxKY+5YYXbGcJ0QR9IRM28JhL+53NOiAvVFn3rmF">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/CR3F0y4K.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Bn-QuJwp.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/T_zvNmZe.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Ciddaed-.js">
<link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/Footer_Cloud.DpSdW8MR.svg">
<script type="module">
      import "@rhds/elements/rh-cta/rh-cta.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@cpelements/pfe-navigation/dist/pfe-navigation.min.js";
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">import "@rhds/elements/rh-footer/rh-footer.js"</script>
<link rel="canonical" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/installing_identity_management/index">
<script type="module">
      import "@rhds/elements/rh-alert/rh-alert.js";
      import "@rhds/elements/rh-code-block/rh-code-block.js";
      import '@rhds/elements/rh-cta/rh-cta.js';
      import '@patternfly/elements/pf-switch/pf-switch.js';
      import '@cpelements/rh-table/dist/rh-table.js';
      import '@patternfly/pfe-clipboard/dist/pfe-clipboard.min.js';
      import '@patternfly/elements/pf-button/pf-button.js';
      import '@patternfly/elements/pf-modal/pf-modal.js';
      import '@patternfly/elements/pf-icon/pf-icon.js';
      import '@patternfly/elements/pf-popover/pf-popover.js';
      import '@patternfly/elements/pf-tooltip/pf-tooltip.js';
      import '@rhds/elements/rh-badge/rh-badge.js';
      </script>
<meta name="description" content="Installing Identity Management | Red Hat Documentation">
<meta name="app-version" content="v0.0.1">
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
        import "@patternfly/elements/pf-badge/pf-badge.js";
      </script>
<script type="module" src="/_nuxt/C3PvZR0C.js" crossorigin integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c"></script></head><body><div id="__nuxt"><!--[--><!--[--><!----><header data-v-edc0d12c><a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden" data-v-edc0d12c>Skip to navigation</a><a href="#main-content" class="skip-link visually-hidden" data-v-edc0d12c>Skip to content</a><nav id="upper-navigation" class="upper-navigation" aria-labelledby="upper-navigation-label" data-analytics-region="upper-navigation" data-v-edc0d12c><p id="upper-navigation-label" class="upper-nav-hidden" data-v-edc0d12c>Featured links</p><div class="upper-nav-container" data-v-edc0d12c><ul class="upper-nav-menu" data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/" class="upper-nav-links" data-analytics-text="Support" data-analytics-category="Featured Links" data-v-edc0d12c>Support</a></li><li data-v-edc0d12c><a href="https://console.redhat.com/" class="upper-nav-links" data-analytics-text="Console" data-analytics-category="Featured Links" data-v-edc0d12c>Console</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" class="upper-nav-links" data-analytics-text="Developers" data-analytics-category="Featured Links" data-v-edc0d12c>Developers</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" class="upper-nav-links" data-analytics-text="Start a trial" data-analytics-category="Featured Links" data-v-edc0d12c>Start a trial</a></li><li data-v-edc0d12c><button id="all-red-hat" class="upper-nav-links" data-analytics-text="All Red Hat" data-analytics-category="Featured Links" aria-expanded="false" data-analytics-linktype="tab" data-v-edc0d12c>All Red Hat<svg class="upper-nav-arrow" xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024" aria-hidden="true" data-v-edc0d12c=""><path d="M810.642 511.557c0 8.905-3.447 16.776-10.284 23.613L322.31 1013.216c-6.835 6.837-14.706 10.284-23.61 10.284s-16.776-3.447-23.613-10.284l-51.303-51.303c-6.837-6.837-10.284-14.707-10.284-23.612s3.447-16.775 10.284-23.61L626.972 511.5 223.784 108.31c-6.837-6.835-10.284-14.706-10.284-23.61s3.447-16.776 10.284-23.613l51.303-51.303C281.924 2.947 289.794-.5 298.7-.5s16.775 3.447 23.61 10.284L800.36 487.83c6.837 6.837 10.284 14.708 10.284 23.613v.114" data-v-edc0d12c=""/></svg></button><div class="upper-nav-dropdown-container" data-v-edc0d12c><ul data-v-edc0d12c><li data-v-edc0d12c><span data-v-edc0d12c>For customers</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/support" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Customer support" data-v-edc0d12c>Customer support</a></li><li data-v-edc0d12c><a href="/products" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Documentation" data-v-edc0d12c>Documentation</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/support/cases" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Support cases" data-v-edc0d12c>Support Cases</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/management" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Subscription management" data-v-edc0d12c>Subscription management</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/" data-analytics-category="All Red Hat|For customers" data-analytics-text="Red Hat Ecosystem Catalog" data-v-edc0d12c>Red Hat Ecosystem Catalog</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/partners" data-analytics-category="All Red Hat|For customers" data-analytics-text="Find a partner" data-v-edc0d12c>Find a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>For partners</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://connect.redhat.com/login" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner login" data-v-edc0d12c>Partner login</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/en/support" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner support" data-v-edc0d12c>Partner support</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Become a partner " data-v-edc0d12c>Become a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Try, buy, &amp; sell</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://marketplace.redhat.com/en-us" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Marketplace" data-v-edc0d12c>Red Hat Marketplace</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/store" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Store" data-v-edc0d12c>Red Hat Store</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/contact" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Contact sales" data-v-edc0d12c>Contact Sales</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Learning resources</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.redhat.com/en/services/training-and-certification" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Training and certification " data-v-edc0d12c>Training and certification</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" data-pzn-audience="developers|community" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="For developers" data-v-edc0d12c>For developers</a></li><li data-v-edc0d12c><a href="https://cloud.redhat.com/learn" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Hybrid cloud learning hub" data-v-edc0d12c>Hybrid cloud learning hub</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Interactive labs" data-v-edc0d12c>Interactive labs</a></li><li data-v-edc0d12c><a href="https://learn.redhat.com/" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Learning community" data-v-edc0d12c>Learning community</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/tv" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Red Hat TV" data-v-edc0d12c>Red Hat TV</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Open source communities</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.ansible.com/community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="Ansible" data-v-edc0d12c>Ansible</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/sysadmin/" id="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For system administrators" data-v-edc0d12c>For system administrators</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/architect/" data-pzn-audience="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For architects" data-v-edc0d12c>For architects</a></li></ul></li></ul></div></li></ul></div></nav><pfe-navigation full-width id="pfe-navigation" pf-sticky="true" lang="en" data-v-edc0d12c><nav class="pfe-navigation" aria-label="Main Navigation" data-v-edc0d12c><div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper" data-v-edc0d12c><a href="/en" class="pfe-navigation__logo-link" data-v-edc0d12c><img class="pfe-navigation__logo-image pfe-navigation__logo-image--screen pfe-navigation__logo-image--small" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" width="240" height="40" alt="Red Hat Documentation" data-v-edc0d12c></a></div></nav><span data-v-edc0d12c></span><div slot="secondary-links" data-v-edc0d12c><div class="hidden-at-desktop hidden-at-tablet search-mobile" data-v-edc0d12c><div id="search-form" class="search-container" opensearchbox="true" data-v-edc0d12c data-v-69710f44><form role="search" class="form-box" autocomplete="off" data-v-69710f44><div class="search-box" data-v-69710f44><pf-icon icon="search" size="md" class="search-icon-form" data-v-69710f44></pf-icon><input type="text" id="input-search" class="input-search-box" placeholder="Search documentation" value aria-autocomplete="list" data-v-69710f44><!----><!----><!----><rh-button disabled variant="tertiary" class="form-submit-btn" data-v-69710f44><img src="data:image/svg+xml,%3csvg%20width=&#39;14&#39;%20height=&#39;14&#39;%20viewBox=&#39;0%200%2014%2014&#39;%20fill=&#39;none&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%3e%3cpath%20d=&#39;M7%200L5.6%201.4L10.3%206H0V8H10.3L5.6%2012.6L7%2014L14%207L7%200Z&#39;%20fill=&#39;%23707070&#39;/%3e%3c/svg%3e" alt="Submit button" data-v-69710f44></rh-button></div></form><!----></div></div><div class="hidden-at-desktop hidden-at-tablet buttons" data-v-edc0d12c><a href="https://access.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Support" data-v-edc0d12c>Support</a><a href="https://console.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Console" data-v-edc0d12c>Console</a><a href="https://developers.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Developers" data-v-edc0d12c>Developers</a><a href="https://www.redhat.com/en/products/trials" data-analytics-category="More Red Hat" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a><a href="https://www.redhat.com/en/contact" data-analytics-category="More Red Hat" data-analytics-text="Contact" data-v-edc0d12c>Contact</a></div><div class="hidden-at-desktop hidden-at-tablet mobile-lang-select" data-v-edc0d12c><label for="lang_selection" data-v-edc0d12c>Select your language</label><select id="lang_selection" data-v-edc0d12c><!--[--><option value="en" xml:lang="en" hreflang="en" data-v-edc0d12c>English</option><option value="fr" xml:lang="fr" hreflang="fr" data-v-edc0d12c>Français</option><option value="ko" xml:lang="ko" hreflang="ko" data-v-edc0d12c>한국어</option><option value="ja" xml:lang="ja" hreflang="ja" data-v-edc0d12c>日本語</option><option value="zh-cn" xml:lang="zh-cn" hreflang="zh-cn" data-v-edc0d12c>中文 (中国)</option><option value="de" xml:lang="de" hreflang="de" data-v-edc0d12c>Deutsch</option><option value="it" xml:lang="it" hreflang="it" data-v-edc0d12c>Italiano</option><option value="pt-br" xml:lang="pt-br" hreflang="pt-br" data-v-edc0d12c>Português</option><option value="es" xml:lang="es" hreflang="es" data-v-edc0d12c>Español</option><!--]--></select></div></div></pfe-navigation></header><main id="main-content"><!--[--><!--[--><!--[--><!----><!----><!--]--><div class="breadcrumbs" id="breadcrumbs" data-v-8589d091 data-v-798f280c><nav aria-label="Breadcrumb" class="breadcrumb" data-v-798f280c><ol data-v-798f280c><li data-v-798f280c><a href="/" data-v-798f280c>Home</a></li><li data-v-798f280c><a href="/en/products" data-v-798f280c>Products</a></li><!--[--><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/" data-v-798f280c>Red Hat Enterprise Linux</a></li><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/9/" data-v-798f280c>9</a></li><li data-v-798f280c><!--[-->Installing Identity Management<!--]--></li><!--]--></ol></nav><span data-v-798f280c></span></div><!----><nav id="mobile-nav" class="mobile-nav" aria-label="mobile menu" data-v-8589d091><div class="mobile-nav-wrapper" data-v-8589d091><div id="first-button" data-v-8589d091><button id="toc-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><span class="sr-only" data-v-8589d091>Open </span>Table of contents</button></div><div id="second-button" data-v-8589d091><button id="settings-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><pf-icon icon="cog" size="md" data-v-8589d091></pf-icon><span class="sr-only" data-v-8589d091>Open page settings</span></button></div></div><div id="mobile-nav-content-wrapper" class="hidden" role="navigation" tabindex="0" data-v-8589d091><div id="toc-mobile" class="hidden" aria-labelledby="toc-btn" data-v-8589d091><div class="shrink-product-padding product-container" id="product-container-mobile" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter-mobile" data-v-8589d091><span id="text" part="text" data-v-8589d091><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper-mobile" class="span-xs-12 span-sm-4 span-md-3" lang="en" data-v-8589d091><nav id="mobile-toc-menu" class="table-of-contents" aria-label="table of content - mobile" data-v-8589d091><!----></nav></div><!----></div><div id="page-content-options-mobile" class="hidden" aria-labelledby="settings-btn" data-v-8589d091><div class="page-layout-options" data-v-8589d091><label for="page-format-mobile" data-v-8589d091>Format</label><select id="page-format-mobile" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div></div></div><!----><!----></nav><div class="grid grid-col-12 content-wrapper" data-v-8589d091><aside id="left-content" class="span-xs-12 span-sm-4 span-md-3" lang="en-us" aria-label="left navigation" xml:lang="en-us" data-v-8589d091><div class="toc-container" id="toc-container" visible="true" data-v-8589d091><div class="toc-focus-container" id="toc-focus-container" data-v-8589d091><button class="toc-focus-btn" aria-label="toggle left menu" aria-controls="toc-container" aria-expanded="true" data-v-8589d091><pf-icon size="md" icon="angle-left" class="toc-focus-btn-icon" data-v-8589d091></pf-icon></button></div><div class="product-container" id="product-container-desktop" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter" id="toc-filter" data-v-8589d091><span id="text" part="text" data-v-8589d091><span id="search-icon" part="search-icon" data-v-8589d091><pf-icon icon="filter" size="md" data-v-8589d091></pf-icon></span><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper" class="toc-wrapper" data-v-8589d091><nav id="toc" class="max-height-85 table-of-contents" aria-label="Table of contents" data-v-8589d091><ol id="toc-list" data-v-8589d091><!--[--><li class="item chapter" data-v-fa0dae77><a class="link active" href id="chapter-index" data-v-fa0dae77>Installing Identity Management</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_providing-feedback-on-red-hat-documentation_installing-identity-management" id="chapter-landing--installing_identity_management-proc_providing-feedback-on-red-hat-documentation_installing-identity-management" data-v-fa0dae77>Providing feedback on Red Hat documentation</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--preparing-the-system-for-ipa-server-installation_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="preparing-the-system-for-ipa-server-installation_installing-identity-management--summary" data-v-fa0dae77>1. Preparing the system for IdM server installation</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#preparing-the-system-for-ipa-server-installation_installing-identity-management" id="chapter-landing--installing_identity_management-preparing-the-system-for-ipa-server-installation_installing-identity-management" data-v-fa0dae77>Preparing the system for IdM server installation</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#prerequisites" id="sub-link-to-installing_identity_management-prerequisites" data-v-b883c74f>1.1. Prerequisites</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#hardware-recomendations_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-hardware-recomendations_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.2. Hardware recommendations</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation" data-v-b883c74f><summary class="heading sub-chapter-title" id="system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation--summary" data-v-b883c74f>1.3. Custom configuration requirements for IdM</summary><ol id="sub-nav--system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation" id="chapter-landing--installing_identity_management-system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>Custom configuration requirements for IdM</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ipv6_requirements_in_idm" id="sub-link-to-installing_identity_management-ipv6_requirements_in_idm" data-v-b883c74f>1.3.1. IPv6 requirements in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#support_for_encryption_types_in_idm" id="sub-link-to-installing_identity_management-support_for_encryption_types_in_idm" data-v-b883c74f>1.3.2. Support for encryption types in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#support_for_system_wide_cryptographic_policies_in_idm" id="sub-link-to-installing_identity_management-support_for_system_wide_cryptographic_policies_in_idm" data-v-b883c74f>1.3.3. Support for system-wide cryptographic policies in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#fips_compliance" id="sub-link-to-installing_identity_management-fips_compliance" data-v-b883c74f>1.3.4. FIPS compliance</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation--summary" data-v-b883c74f>1.4. Time service requirements for IdM</summary><ol id="sub-nav--assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation" id="chapter-landing--installing_identity_management-assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>Time service requirements for IdM</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_how-idm-uses-chronyd-for-synchronization_assembly_time-service-requirements-for-idm" id="sub-link-to-installing_identity_management-con_how-idm-uses-chronyd-for-synchronization_assembly_time-service-requirements-for-idm" data-v-b883c74f>1.4.1. How IdM uses chronyd for synchronization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_list-of-ntp-configuration-options-for-idm-installation-commands_assembly_time-service-requirements-for-idm" id="sub-link-to-installing_identity_management-ref_list-of-ntp-configuration-options-for-idm-installation-commands_assembly_time-service-requirements-for-idm" data-v-b883c74f>1.4.2. List of NTP configuration options for IdM installation commands</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_ensuring-idm-can-reference-your-ntp-time-server_assembly_time-service-requirements-for-idm" id="sub-link-to-installing_identity_management-proc_ensuring-idm-can-reference-your-ntp-time-server_assembly_time-service-requirements-for-idm" data-v-b883c74f>1.4.3. Ensuring IdM can reference your NTP time server</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources" id="sub-link-to-installing_identity_management-additional_resources" data-v-b883c74f>1.4.4. Additional resources</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.5. Host name and DNS requirements for IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-port-requirements-for-idm_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.6. Port requirements for IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#opening-the-ports-required-by-idm_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-opening-the-ports-required-by-idm_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.7. Opening the ports required by IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-packages-required-for-an-idm-server_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-installing-packages-required-for-an-idm-server_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.8. Installing packages required for an IdM server</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-the-correct-file-mode-creation-mask-for-idm-installation_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-proc_setting-the-correct-file-mode-creation-mask-for-idm-installation_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.9. Setting the correct file mode creation mask for IdM installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_ensuring-that-fapolicyd-rules-do-not-block-idm-installation_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-proc_ensuring-that-fapolicyd-rules-do-not-block-idm-installation_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.10. Ensuring that fapolicyd rules do not block IdM installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation" id="sub-link-to-installing_identity_management-ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation" data-v-b883c74f>1.11. Options for the IdM installation commands</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-ipa-server-with-integrated-dns_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-ipa-server-with-integrated-dns_installing-identity-management--summary" data-v-fa0dae77>2. Installing an IdM server: With integrated DNS, with an integrated CA as the root CA</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-ipa-server-with-integrated-dns_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-ipa-server-with-integrated-dns_installing-identity-management" data-v-fa0dae77>Installing an IdM server: With integrated DNS, with an integrated CA as the root CA</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-ipa-server-with-dns-interactive-install_install-server-with-dns" id="sub-link-to-installing_identity_management-installing-ipa-server-with-dns-interactive-install_install-server-with-dns" data-v-b883c74f>2.1. Interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-ipa-server-with-integrated-dns-non-interactive-installation_install-server-with-dns" id="sub-link-to-installing_identity_management-installing-an-ipa-server-with-integrated-dns-non-interactive-installation_install-server-with-dns" data-v-b883c74f>2.2. Non-interactive installation</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-ipa-server-with-external-ca_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-ipa-server-with-external-ca_installing-identity-management--summary" data-v-fa0dae77>3. Installing an IdM server: With integrated DNS, with an external CA as the root CA</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-ipa-server-with-external-ca_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-ipa-server-with-external-ca_installing-identity-management" data-v-fa0dae77>Installing an IdM server: With integrated DNS, with an external CA as the root CA</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-ipa-server-with-an-external-ca-as-the-root-ca_install-server-external-ca" id="sub-link-to-installing_identity_management-installing-an-ipa-server-with-an-external-ca-as-the-root-ca_install-server-external-ca" data-v-b883c74f>3.1. Interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#troubleshooting-external-ca-installation-fails" id="sub-link-to-installing_identity_management-troubleshooting-external-ca-installation-fails" data-v-b883c74f>3.2. Troubleshooting: External CA installation fails</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-ipa-server-without-a-ca_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-ipa-server-without-a-ca_installing-identity-management--summary" data-v-fa0dae77>4. Installing an IdM server: With integrated DNS, without a CA</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-ipa-server-without-a-ca_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-ipa-server-without-a-ca_installing-identity-management" data-v-fa0dae77>Installing an IdM server: With integrated DNS, without a CA</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#certificates-required-to-install-ipa-server-no-ca_install-server-no-ca" id="sub-link-to-installing_identity_management-certificates-required-to-install-ipa-server-no-ca_install-server-no-ca" data-v-b883c74f>4.1. Certificates required to install an IdM server without a CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-ipa-server-with-dns-interactive-install_install-server-no-ca" id="sub-link-to-installing_identity_management-installing-ipa-server-with-dns-interactive-install_install-server-no-ca" data-v-b883c74f>4.2. Interactive installation</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-ipa-server-without-integrated-dns_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-ipa-server-without-integrated-dns_installing-identity-management--summary" data-v-fa0dae77>5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-ipa-server-without-integrated-dns_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-ipa-server-without-integrated-dns_installing-identity-management" data-v-fa0dae77>Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-ipa-server-without-integrated-dns-interactive-installation_installing-an-ipa-server-without-integrated-dns" id="sub-link-to-installing_identity_management-installing-an-ipa-server-without-integrated-dns-interactive-installation_installing-an-ipa-server-without-integrated-dns" data-v-b883c74f>5.1. Interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-ipa-server-without-integrated-dns-non-interactive-installation_installing-an-ipa-server-without-integrated-dns" id="sub-link-to-installing_identity_management-installing-an-ipa-server-without-integrated-dns-non-interactive-installation_installing-an-ipa-server-without-integrated-dns" data-v-b883c74f>5.2. Non-interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns" id="sub-link-to-installing_identity_management-ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns" data-v-b883c74f>5.3. IdM DNS records for external DNS systems</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management--summary" data-v-fa0dae77>6. Installing an IdM server: Without integrated DNS, with an external CA as the root CA</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management" id="chapter-landing--installing_identity_management-assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management" data-v-fa0dae77>Installing an IdM server: Without integrated DNS, with an external CA as the root CA</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca" id="sub-link-to-installing_identity_management-options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca" data-v-b883c74f>6.1. Options used when installing an IdM CA with an external CA as the root CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-an-ipa-server-without-dns-with-external-ca-interactive-installation_assembly_installing-an-ipa-server-without-dns-with-external-ca" id="sub-link-to-installing_identity_management-proc_installing-an-ipa-server-without-dns-with-external-ca-interactive-installation_assembly_installing-an-ipa-server-without-dns-with-external-ca" data-v-b883c74f>6.2. Interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-an-ipa-server-non-interactive-installation-without-dns-with-external-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca" id="sub-link-to-installing_identity_management-proc_installing-an-ipa-server-non-interactive-installation-without-dns-with-external-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca" data-v-b883c74f>6.3. Non-interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca" id="sub-link-to-installing_identity_management-ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca" data-v-b883c74f>6.4. IdM DNS records for external DNS systems</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management" id="chapter-landing--installing_identity_management-proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management" data-v-fa0dae77>7. Installing an IdM server or replica with custom database settings from an LDIF file</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--troubleshooting-idm-server-installation_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="troubleshooting-idm-server-installation_installing-identity-management--summary" data-v-fa0dae77>8. Troubleshooting IdM server installation</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#troubleshooting-idm-server-installation_installing-identity-management" id="chapter-landing--installing_identity_management-troubleshooting-idm-server-installation_installing-identity-management" data-v-fa0dae77>Troubleshooting IdM server installation</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reviewing-idm-server-installation-error-logs_troubleshooting-idm-server-installation" id="sub-link-to-installing_identity_management-reviewing-idm-server-installation-error-logs_troubleshooting-idm-server-installation" data-v-b883c74f>8.1. Reviewing IdM server installation error logs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reviewing-idm-ca-installation-errors-idm-server-installation" id="sub-link-to-installing_identity_management-reviewing-idm-ca-installation-errors-idm-server-installation" data-v-b883c74f>8.2. Reviewing IdM CA installation errors</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-a-partial-idm-server-installation_troubleshooting-idm-server-installation" id="sub-link-to-installing_identity_management-removing-a-partial-idm-server-installation_troubleshooting-idm-server-installation" data-v-b883c74f>8.3. Removing a partial IdM server installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_2" id="sub-link-to-installing_identity_management-additional_resources_2" data-v-b883c74f>8.4. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#uninstalling-an-ipa-server_installing-identity-management" id="chapter-landing--installing_identity_management-uninstalling-an-ipa-server_installing-identity-management" data-v-fa0dae77>9. Uninstalling an IdM server</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#renaming-an-idm-server_installing-identity-management" id="chapter-landing--installing_identity_management-renaming-an-idm-server_installing-identity-management" data-v-fa0dae77>10. Renaming an IdM server</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--update-downgrade-ipa_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="update-downgrade-ipa_installing-identity-management--summary" data-v-fa0dae77>11. Updating and downgrading IdM</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#update-downgrade-ipa_installing-identity-management" id="chapter-landing--installing_identity_management-update-downgrade-ipa_installing-identity-management" data-v-fa0dae77>Updating and downgrading IdM</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#updating_idm_packages" id="sub-link-to-installing_identity_management-updating_idm_packages" data-v-b883c74f>11.1. Updating IdM packages</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#downgrading-idm-packages_installing-identity-management" id="sub-link-to-installing_identity_management-downgrading-idm-packages_installing-identity-management" data-v-b883c74f>11.2. Downgrading IdM packages</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_3" id="sub-link-to-installing_identity_management-additional_resources_3" data-v-b883c74f>11.3. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--preparing-the-system-for-ipa-client-installation_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="preparing-the-system-for-ipa-client-installation_installing-identity-management--summary" data-v-fa0dae77>12. Preparing the system for IdM client installation</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#preparing-the-system-for-ipa-client-installation_installing-identity-management" id="chapter-landing--installing_identity_management-preparing-the-system-for-ipa-client-installation_installing-identity-management" data-v-fa0dae77>Preparing the system for IdM client installation</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-versions-of-rhel-for-installing-idm-clients_preparing-the-system-for-ipa-client-installation" id="sub-link-to-installing_identity_management-supported-versions-of-rhel-for-installing-idm-clients_preparing-the-system-for-ipa-client-installation" data-v-b883c74f>12.1. Supported versions of RHEL for installing IdM clients</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#dns-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation" id="sub-link-to-installing_identity_management-dns-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation" data-v-b883c74f>12.2. DNS requirements for IdM clients</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#port-requirements-for-ipa-clients_preparing-the-system-for-ipa-client-installation" id="sub-link-to-installing_identity_management-port-requirements-for-ipa-clients_preparing-the-system-for-ipa-client-installation" data-v-b883c74f>12.3. Port requirements for IdM clients</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ipv6-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation" id="sub-link-to-installing_identity_management-ipv6-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation" data-v-b883c74f>12.4. IPv6 requirements for IdM clients</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-packages-required-for-an-idm-client_preparing-the-system-for-ipa-client-installation" id="sub-link-to-installing_identity_management-proc_installing-packages-required-for-an-idm-client_preparing-the-system-for-ipa-client-installation" data-v-b883c74f>12.5. Installing packages required for an IdM client</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_installing-an-idm-client_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_installing-an-idm-client_installing-identity-management--summary" data-v-fa0dae77>13. Installing an IdM client</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_installing-an-idm-client_installing-identity-management" id="chapter-landing--installing_identity_management-assembly_installing-an-idm-client_installing-identity-management" data-v-fa0dae77>Installing an IdM client</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#prerequisites_2" id="sub-link-to-installing_identity_management-prerequisites_2" data-v-b883c74f>13.1. Prerequisites</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client" data-v-b883c74f>13.2. Installing a client by using user credentials: Interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-a-client-by-using-a-one-time-password-interactive-installation_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-proc_installing-a-client-by-using-a-one-time-password-interactive-installation_assembly_installing-an-idm-client" data-v-b883c74f>13.3. Installing a client by using a one-time password: Interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-ipa-client-non-interactive-install_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-installing-ipa-client-non-interactive-install_assembly_installing-an-idm-client" data-v-b883c74f>13.4. Installing a client: Non-interactive installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-pre-ipa-configuration-after-installing-client_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-removing-pre-ipa-configuration-after-installing-client_assembly_installing-an-idm-client" data-v-b883c74f>13.5. Removing pre-IdM configuration after installing a client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#testing-an-ipa-client_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-testing-an-ipa-client_assembly_installing-an-idm-client" data-v-b883c74f>13.6. Testing an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#connection-requests-during-an-ipa-client-installation_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-connection-requests-during-an-ipa-client-installation_assembly_installing-an-idm-client" data-v-b883c74f>13.7. Connections performed during an IdM client installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ipa-client-communication-with-server_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-ipa-client-communication-with-server_assembly_installing-an-idm-client" data-v-b883c74f>13.8. IdM client’s communications with the server during post-installation deployment</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sssd-deployment-operations_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-sssd-deployment-operations_assembly_installing-an-idm-client" data-v-b883c74f>13.9. SSSD communication patterns</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#certmonger-deployment-operations_assembly_installing-an-idm-client" id="sub-link-to-installing_identity_management-certmonger-deployment-operations_assembly_installing-an-idm-client" data-v-b883c74f>13.10. Certmonger communication patterns</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-ipa-client-with-kickstart_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-ipa-client-with-kickstart_installing-identity-management--summary" data-v-fa0dae77>14. Installing an IdM client with Kickstart</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-ipa-client-with-kickstart_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-ipa-client-with-kickstart_installing-identity-management" data-v-fa0dae77>Installing an IdM client with Kickstart</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-a-client-with-kickstart_client-kickstart" id="sub-link-to-installing_identity_management-installing-a-client-with-kickstart_client-kickstart" data-v-b883c74f>14.1. Installing a client with Kickstart</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#kickstart-file-for-client-installation_client-kickstart" id="sub-link-to-installing_identity_management-kickstart-file-for-client-installation_client-kickstart" data-v-b883c74f>14.2. Kickstart file for client installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#testing-an-ipa-client_client-kickstart" id="sub-link-to-installing_identity_management-testing-an-ipa-client_client-kickstart" data-v-b883c74f>14.3. Testing an IdM client</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--troubleshooting-idm-client-installation_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="troubleshooting-idm-client-installation_installing-identity-management--summary" data-v-fa0dae77>15. Troubleshooting IdM client installation</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#troubleshooting-idm-client-installation_installing-identity-management" id="chapter-landing--installing_identity_management-troubleshooting-idm-client-installation_installing-identity-management" data-v-fa0dae77>Troubleshooting IdM client installation</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reviewing-idm-client-installation-errors_troubleshooting-idm-client-installation" id="sub-link-to-installing_identity_management-reviewing-idm-client-installation-errors_troubleshooting-idm-client-installation" data-v-b883c74f>15.1. Reviewing IdM client installation errors</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#resolving-issues-if-the-client-installation-fails-to-update-dns-records_troubleshooting-idm-client-installation" id="sub-link-to-installing_identity_management-resolving-issues-if-the-client-installation-fails-to-update-dns-records_troubleshooting-idm-client-installation" data-v-b883c74f>15.2. Resolving issues if the client installation fails to update DNS records</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#resolving-issues-if-the-client-installation-fails-to-join-the-idm-kerberos-realm_troubleshooting-idm-client-installation" id="sub-link-to-installing_identity_management-resolving-issues-if-the-client-installation-fails-to-join-the-idm-kerberos-realm_troubleshooting-idm-client-installation" data-v-b883c74f>15.3. Resolving issues if the client installation fails to join the IdM Kerberos realm</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_4" id="sub-link-to-installing_identity_management-additional_resources_4" data-v-b883c74f>15.4. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--re-enrolling-an-ipa-client_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="re-enrolling-an-ipa-client_installing-identity-management--summary" data-v-fa0dae77>16. Re-enrolling an IdM client</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#re-enrolling-an-ipa-client_installing-identity-management" id="chapter-landing--installing_identity_management-re-enrolling-an-ipa-client_installing-identity-management" data-v-fa0dae77>Re-enrolling an IdM client</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#client-reenrollment-idm_re-enrolling-client" id="sub-link-to-installing_identity_management-client-reenrollment-idm_re-enrolling-client" data-v-b883c74f>16.1. Client re-enrollment in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#re-enrolling-a-client-by-using-user-credentials-interactive-re-enrollment_re-enrolling-client" id="sub-link-to-installing_identity_management-re-enrolling-a-client-by-using-user-credentials-interactive-re-enrollment_re-enrolling-client" data-v-b883c74f>16.2. Re-enrolling a client by using user credentials: Interactive re-enrollment</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#re-enrolling-idm-client-using-keytab-non-interactive_re-enrolling-client" id="sub-link-to-installing_identity_management-re-enrolling-idm-client-using-keytab-non-interactive_re-enrolling-client" data-v-b883c74f>16.3. Re-enrolling a client by using the client keytab: Non-interactive re-enrollment</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#testing-an-ipa-client_re-enrolling-client" id="sub-link-to-installing_identity_management-testing-an-ipa-client_re-enrolling-client" data-v-b883c74f>16.4. Testing an IdM client</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--uninstalling-an-ipa-client_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="uninstalling-an-ipa-client_installing-identity-management--summary" data-v-fa0dae77>17. Uninstalling an IdM client</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#uninstalling-an-ipa-client_installing-identity-management" id="chapter-landing--installing_identity_management-uninstalling-an-ipa-client_installing-identity-management" data-v-fa0dae77>Uninstalling an IdM client</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-ipa-client-procedure_installing-identity-management" id="sub-link-to-installing_identity_management-uninstalling-an-ipa-client-procedure_installing-identity-management" data-v-b883c74f>17.1. Uninstalling an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management" id="sub-link-to-installing_identity_management-uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management" data-v-b883c74f>17.2. Uninstalling an IdM client: additional steps after multiple past installations</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--renaming-ipa-client-systems_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="renaming-ipa-client-systems_installing-identity-management--summary" data-v-fa0dae77>18. Renaming IdM client systems</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#renaming-ipa-client-systems_installing-identity-management" id="chapter-landing--installing_identity_management-renaming-ipa-client-systems_installing-identity-management" data-v-fa0dae77>Renaming IdM client systems</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#preparing-an-idm-client-for-its-renaming_renaming-clients" id="sub-link-to-installing_identity_management-preparing-an-idm-client-for-its-renaming_renaming-clients" data-v-b883c74f>18.1. Preparing an IdM client for its renaming</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-ipa-client-procedure_renaming-clients" id="sub-link-to-installing_identity_management-uninstalling-an-ipa-client-procedure_renaming-clients" data-v-b883c74f>18.2. Uninstalling an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients" id="sub-link-to-installing_identity_management-uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients" data-v-b883c74f>18.3. Uninstalling an IdM client: additional steps after multiple past installations</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#renaming-the-ipa-client-system_renaming-clients" id="sub-link-to-installing_identity_management-renaming-the-ipa-client-system_renaming-clients" data-v-b883c74f>18.4. Renaming the host system</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#re-installing-an-idm-client_renaming-clients" id="sub-link-to-installing_identity_management-re-installing-an-idm-client_renaming-clients" data-v-b883c74f>18.5. Re-installing an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients" id="sub-link-to-installing_identity_management-re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients" data-v-b883c74f>18.6. Re-adding services, re-generating certificates, and re-adding host groups</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--preparing-the-system-for-ipa-replica-installation_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="preparing-the-system-for-ipa-replica-installation_installing-identity-management--summary" data-v-fa0dae77>19. Preparing the system for an IdM replica installation</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" id="chapter-landing--installing_identity_management-preparing-the-system-for-ipa-replica-installation_installing-identity-management" data-v-fa0dae77>Preparing the system for an IdM replica installation</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#replica-version-requirements_preparing-the-system-for-ipa-replica-installation" id="sub-link-to-installing_identity_management-replica-version-requirements_preparing-the-system-for-ipa-replica-installation" data-v-b883c74f>19.1. Replica version requirements</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#display-software-version_preparing-the-system-for-ipa-replica-installation" id="sub-link-to-installing_identity_management-display-software-version_preparing-the-system-for-ipa-replica-installation" data-v-b883c74f>19.2. Methods for displaying IdM software version</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation" id="sub-link-to-installing_identity_management-ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation" data-v-b883c74f>19.3. Ensuring FIPS compliance for a RHEL 9 replica joining a RHEL 8 IdM environment</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation" id="sub-link-to-installing_identity_management-authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation" data-v-b883c74f>19.4. Authorizing the installation of a replica on an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation" id="sub-link-to-installing_identity_management-authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation" data-v-b883c74f>19.5. Authorizing the installation of a replica on a system that is not enrolled into IdM</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-ipa-replica_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-ipa-replica_installing-identity-management--summary" data-v-fa0dae77>20. Installing an IdM replica</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-ipa-replica_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-ipa-replica_installing-identity-management" data-v-fa0dae77>Installing an IdM replica</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica" id="sub-link-to-installing_identity_management-installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica" data-v-b883c74f>20.1. Installing an IdM replica with integrated DNS and a CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica" id="sub-link-to-installing_identity_management-installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica" data-v-b883c74f>20.2. Installing an IdM replica with integrated DNS and no CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica" id="sub-link-to-installing_identity_management-installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica" data-v-b883c74f>20.3. Installing an IdM replica without integrated DNS and with a CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica" id="sub-link-to-installing_identity_management-installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica" data-v-b883c74f>20.4. Installing an IdM replica without integrated DNS and without a CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-idm-hidden-replica_install-replica" id="sub-link-to-installing_identity_management-installing-an-idm-hidden-replica_install-replica" data-v-b883c74f>20.5. Installing an IdM hidden replica</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#testing-an-ipa-replica_install-replica" id="sub-link-to-installing_identity_management-testing-an-ipa-replica_install-replica" data-v-b883c74f>20.6. Testing an IdM replica</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#connection-requests-during-an-ipa-replica-installation_install-replica" id="sub-link-to-installing_identity_management-connection-requests-during-an-ipa-replica-installation_install-replica" data-v-b883c74f>20.7. Connections performed during an IdM replica installation</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--troubleshooting-idm-replica-installation_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="troubleshooting-idm-replica-installation_installing-identity-management--summary" data-v-fa0dae77>21. Troubleshooting IdM replica installation</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#troubleshooting-idm-replica-installation_installing-identity-management" id="chapter-landing--installing_identity_management-troubleshooting-idm-replica-installation_installing-identity-management" data-v-fa0dae77>Troubleshooting IdM replica installation</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation" id="sub-link-to-installing_identity_management-ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation" data-v-b883c74f>21.1. IdM replica installation error log files</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation" id="sub-link-to-installing_identity_management-reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation" data-v-b883c74f>21.2. Reviewing IdM replica installation errors</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation" id="sub-link-to-installing_identity_management-ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation" data-v-b883c74f>21.3. IdM CA installation error log files</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation" id="sub-link-to-installing_identity_management-reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation" data-v-b883c74f>21.4. Reviewing IdM CA installation errors</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-a-partial-idm-replica-installation_troubleshooting-idm-replica-installation" id="sub-link-to-installing_identity_management-removing-a-partial-idm-replica-installation_troubleshooting-idm-replica-installation" data-v-b883c74f>21.5. Removing a partial IdM replica installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#resolving-invalid-credential-errors_troubleshooting-idm-replica-installation" id="sub-link-to-installing_identity_management-resolving-invalid-credential-errors_troubleshooting-idm-replica-installation" data-v-b883c74f>21.6. Resolving invalid credential errors</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_5" id="sub-link-to-installing_identity_management-additional_resources_5" data-v-b883c74f>21.7. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#uninstalling-an-idm-replica_installing-identity-management" id="chapter-landing--installing_identity_management-uninstalling-an-idm-replica_installing-identity-management" data-v-fa0dae77>22. Uninstalling an IdM replica</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_managing-replication-topology_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_managing-replication-topology_installing-identity-management--summary" data-v-fa0dae77>23. Managing replication topology</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-replication-topology_installing-identity-management" id="chapter-landing--installing_identity_management-assembly_managing-replication-topology_installing-identity-management" data-v-fa0dae77>Managing replication topology</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology--summary" data-v-b883c74f>23.1. Explaining replication agreements, topology suffixes and topology segments</summary><ol id="sub-nav--assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology" id="chapter-landing--installing_identity_management-assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology" data-v-b883c74f>Explaining replication agreements, topology suffixes and topology segments</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" id="sub-link-to-installing_identity_management-replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" data-v-b883c74f>23.1.1. Replication agreements between IdM replicas</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" id="sub-link-to-installing_identity_management-con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" data-v-b883c74f>23.1.2. Topology suffixes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" id="sub-link-to-installing_identity_management-con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" data-v-b883c74f>23.1.3. Topology segments</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_using-the-topology-graph-to-manage-replication-topology_assembly_managing-replication-topology" id="sub-link-to-installing_identity_management-con_using-the-topology-graph-to-manage-replication-topology_assembly_managing-replication-topology" data-v-b883c74f>23.2. Using the topology graph to manage replication topology</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#managing-topology-ui-set-up" id="sub-link-to-installing_identity_management-managing-topology-ui-set-up" data-v-b883c74f>23.3. Setting up replication between two servers using the Web UI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#managing-topology-ui-stop" id="sub-link-to-installing_identity_management-managing-topology-ui-stop" data-v-b883c74f>23.4. Stopping replication between two servers using the Web UI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology" id="sub-link-to-installing_identity_management-proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology" data-v-b883c74f>23.5. Setting up replication between two servers using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#managing-topology-stop-cli" id="sub-link-to-installing_identity_management-managing-topology-stop-cli" data-v-b883c74f>23.6. Stopping replication between two servers using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#managing-topology-remove-ui" id="sub-link-to-installing_identity_management-managing-topology-remove-ui" data-v-b883c74f>23.7. Removing server from topology using the Web UI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-available-server-roles-in-the-idm-topology-using-the-idm-web-ui_assembly_managing-replication-topology" id="sub-link-to-installing_identity_management-viewing-available-server-roles-in-the-idm-topology-using-the-idm-web-ui_assembly_managing-replication-topology" data-v-b883c74f>23.8. Viewing available server roles in the IdM topology using the IdM Web UI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-available-server-roles-in-the-idm-topology-using-the-idm-cli_assembly_managing-replication-topology" id="sub-link-to-installing_identity_management-viewing-available-server-roles-in-the-idm-topology-using-the-idm-cli_assembly_managing-replication-topology" data-v-b883c74f>23.9. Viewing available server roles in the IdM topology using the IdM CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#server-roles-promote-to-ca" id="sub-link-to-installing_identity_management-server-roles-promote-to-ca" data-v-b883c74f>23.10. Promoting a replica to a CA renewal server and CRL publisher server</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology" id="sub-link-to-installing_identity_management-demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology" data-v-b883c74f>23.11. Demoting or promoting hidden replicas</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-and-running-the-ipa-healthcheck-tool_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-and-running-the-ipa-healthcheck-tool_installing-identity-management--summary" data-v-fa0dae77>24. Installing and running the IdM Healthcheck tool</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-and-running-the-ipa-healthcheck-tool_installing-identity-management" id="chapter-landing--installing_identity_management-installing-and-running-the-ipa-healthcheck-tool_installing-identity-management" data-v-fa0dae77>Installing and running the IdM Healthcheck tool</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#healthcheck-in-idm_installing-and-running-the-ipa-healthcheck-tool" id="sub-link-to-installing_identity_management-healthcheck-in-idm_installing-and-running-the-ipa-healthcheck-tool" data-v-b883c74f>24.1. Healthcheck in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool" id="sub-link-to-installing_identity_management-installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool" data-v-b883c74f>24.2. Installing IdM Healthcheck</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#running-idm-healthcheck_installing-and-running-the-ipa-healthcheck-tool" id="sub-link-to-installing_identity_management-running-idm-healthcheck_installing-and-running-the-ipa-healthcheck-tool" data-v-b883c74f>24.3. Running IdM Healthcheck</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_6" id="sub-link-to-installing_identity_management-additional_resources_6" data-v-b883c74f>24.4. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management--summary" data-v-fa0dae77>25. Installing an Identity Management server using an Ansible playbook</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management" data-v-fa0dae77>Installing an Identity Management server using an Ansible playbook</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ansible-and-its-advantages-for-installing-IdM_server-ansible" id="sub-link-to-installing_identity_management-ansible-and-its-advantages-for-installing-IdM_server-ansible" data-v-b883c74f>25.1. Ansible and its advantages for installing IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-ansible-freeipa-package_server-ansible" id="sub-link-to-installing_identity_management-installing-the-ansible-freeipa-package_server-ansible" data-v-b883c74f>25.2. Installing the ansible-freeipa package</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ansible-roles-location-in-the-file-system_server-ansible" id="sub-link-to-installing_identity_management-ansible-roles-location-in-the-file-system_server-ansible" data-v-b883c74f>25.3. Ansible roles location in the file system</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible" id="sub-link-to-installing_identity_management-setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible" data-v-b883c74f>25.4. Setting the parameters for a deployment with an integrated DNS and an integrated CA as the root CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible" id="sub-link-to-installing_identity_management-setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible" data-v-b883c74f>25.5. Setting the parameters for a deployment with external DNS and an integrated CA as the root CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deploying-an-IdM-server-with-an-integrated-CA-using-an-Ansible-playbook_server-ansible" id="sub-link-to-installing_identity_management-deploying-an-IdM-server-with-an-integrated-CA-using-an-Ansible-playbook_server-ansible" data-v-b883c74f>25.6. Deploying an IdM server with an integrated CA as the root CA using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible" id="sub-link-to-installing_identity_management-setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible" data-v-b883c74f>25.7. Setting the parameters for a deployment with an integrated DNS and an external CA as the root CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible" id="sub-link-to-installing_identity_management-setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible" data-v-b883c74f>25.8. Setting the parameters for a deployment with external DNS and an external CA as the root CA</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deploying-an-IdM-server-with-an-external-CA-using-an-Ansible-playbook_server-ansible" id="sub-link-to-installing_identity_management-deploying-an-IdM-server-with-an-external-CA-using-an-Ansible-playbook_server-ansible" data-v-b883c74f>25.9. Deploying an IdM server with an external CA as the root CA using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible" id="sub-link-to-installing_identity_management-uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible" data-v-b883c74f>25.10. Uninstalling an IdM server using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible" id="sub-link-to-installing_identity_management-using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible" data-v-b883c74f>25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management--summary" data-v-fa0dae77>26. Installing an Identity Management replica using an Ansible playbook</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management" data-v-fa0dae77>Installing an Identity Management replica using an Ansible playbook</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible" id="sub-link-to-installing_identity_management-specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible" data-v-b883c74f>26.1. Specifying the base, server and client variables for installing the IdM replica</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible" id="sub-link-to-installing_identity_management-specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible" data-v-b883c74f>26.2. Specifying the credentials for installing the IdM replica using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deploying-an-IdM-replica-using-an-Ansible-playbook_replica-ansible" id="sub-link-to-installing_identity_management-deploying-an-IdM-replica-using-an-Ansible-playbook_replica-ansible" data-v-b883c74f>26.3. Deploying an IdM replica using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-idm-replica-using-an-ansible-playbook_replica-ansible" id="sub-link-to-installing_identity_management-uninstalling-an-idm-replica-using-an-ansible-playbook_replica-ansible" data-v-b883c74f>26.4. Uninstalling an IdM replica using an Ansible playbook</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management--summary" data-v-fa0dae77>27. Installing an Identity Management client using an Ansible playbook</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management" id="chapter-landing--installing_identity_management-installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management" data-v-fa0dae77>Installing an Identity Management client using an Ansible playbook</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible" id="sub-link-to-installing_identity_management-setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible" data-v-b883c74f>27.1. Setting the parameters of the inventory file for the autodiscovery client installation mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible" id="sub-link-to-installing_identity_management-setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible" data-v-b883c74f>27.2. Setting the parameters of the inventory file when autodiscovery is not possible during client installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#authorization-options-for-idm-client-enrollment-using-an-ansible-playbook_client-ansible" id="sub-link-to-installing_identity_management-authorization-options-for-idm-client-enrollment-using-an-ansible-playbook_client-ansible" data-v-b883c74f>27.3. Authorization options for IdM client enrollment using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deploying-an-IdM-client-using-an-Ansible-playbook_client-ansible" id="sub-link-to-installing_identity_management-deploying-an-IdM-client-using-an-Ansible-playbook_client-ansible" data-v-b883c74f>27.4. Deploying an IdM client using an Ansible playbook</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-the-one-time-password-method-in-ansible-to-install-an-idm-client_client-ansible" id="sub-link-to-installing_identity_management-using-the-one-time-password-method-in-ansible-to-install-an-idm-client_client-ansible" data-v-b883c74f>27.5. Using the one-time password method in Ansible to install an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#testing-an-Identity-Management-after-Ansible-installation_client-ansible" id="sub-link-to-installing_identity_management-testing-an-Identity-Management-after-Ansible-installation_client-ansible" data-v-b883c74f>27.6. Testing an Identity Management client after Ansible installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-an-IdM-client-using-an-Ansible-playbook_client-ansible" id="sub-link-to-installing_identity_management-uninstalling-an-IdM-client-using-an-Ansible-playbook_client-ansible" data-v-b883c74f>27.7. Uninstalling an IdM client using an Ansible playbook</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#installing-dns-on-an-existing-idm-server_installing-identity-management" id="chapter-landing--installing_identity_management-installing-dns-on-an-existing-idm-server_installing-identity-management" data-v-fa0dae77>28. Installing DNS on an existing IdM server</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management" id="chapter-landing--installing_identity_management-uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management" data-v-fa0dae77>29. Uninstalling the integrated IdM DNS service from an IdM server</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management" data-v-fa0dae77><summary class="heading chapter-title" id="adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management--summary" data-v-fa0dae77>30. Adding the IdM CA service to an IdM server in a deployment without a CA</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management" id="chapter-landing--installing_identity_management-adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management" data-v-fa0dae77>Adding the IdM CA service to an IdM server in a deployment without a CA</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca" id="sub-link-to-installing_identity_management-installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca" data-v-b883c74f>30.1. Installing the first IdM CA as the root CA into an existing IdM domain</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca" id="sub-link-to-installing_identity_management-installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca" data-v-b883c74f>30.2. Installing the first IdM CA with an external CA as the root CA into an existing IdM domain</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management" id="chapter-landing--installing_identity_management-adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management" data-v-fa0dae77>31. Adding the IdM CA service to an IdM server in a deployment with a CA</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management" id="chapter-landing--installing_identity_management-uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management" data-v-fa0dae77>32. Uninstalling the IdM CA service from an IdM server</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#idm140559999367200" id="chapter-landing--installing_identity_management-idm140559999367200" data-v-fa0dae77>Legal Notice</a></li><!--]--></ol></nav><!----></div></div></aside><article class="content span-xs-12 span-sm-6 span-md-12 span-lg-7" aria-live="polite" data-v-8589d091><!----><div lang="en-us" xml:lang="en-us" class="docs-content-container" data-v-8589d091><!----><!----><h1 data-id="content_chapter" class="chapter-title" data-v-8589d091>Installing Identity Management</h1><hr class="line-below-chp" data-v-8589d091><section class="rhdocs" data-v-8589d091><body><div xml:lang="en-US" class="book" id="idm140560016190720"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">9</span></div><div><h3 class="subtitle">Methods of installing IdM servers and clients</h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm140559999367200">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Depending on your environment, you can install Red Hat Identity Management (IdM) to provide DNS and Certificate Authority (CA) services, or you configure IdM to use an existing DNS and CA infrastructure.
			</div><div class="para">
				You can install IdM servers, replicas, and clients manually or by using Ansible Playbooks. Additionally, you can use a Kickstart file to automatically join a client to an IdM domain during the system installation.
			</div></div></div></div><hr></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Providing feedback on Red Hat documentation</h2></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting feedback through Jira (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://issues.redhat.com/projects/RHELDOCS/issues">Jira</a> website.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> in the top navigation bar
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> at the bottom of the dialogue.
				</li></ol></div></section><section class="chapter" id="preparing-the-system-for-ipa-server-installation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Preparing the system for IdM server installation</h2></div></div></div><p>
			The following sections list the requirements to install an Identity Management (IdM) server. Before the installation, make sure your system meets these requirements.
		</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h3 class="title">1.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You need <code class="literal">root</code> privileges to install an Identity Management (IdM) server on your host.
					</li></ul></div></section><section class="section" id="hardware-recomendations_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.2. Hardware recommendations</h3></div></div></div><p class="_abstract _abstract">
				RAM is the most important hardware feature to size properly. Make sure your system has enough RAM available. Typical RAM requirements are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For 10,000 users and 100 groups: at least 4 GB of RAM and 4 GB swap space
					</li><li class="listitem">
						For 100,000 users and 50,000 groups: at least 16 GB of RAM and 4 GB of swap space
					</li></ul></div><p>
				For larger deployments, it is more effective to increase the RAM than to increase disk space because much of the data is stored in cache. In general, adding more RAM leads to better performance for larger deployments due to caching.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					A basic user entry or a simple host entry with a certificate is approximately 5—​10 kB in size.
				</p></div></rh-alert></section><section class="section" id="system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.3. Custom configuration requirements for IdM</h3></div></div></div><p>
				Install an Identity Management (IdM) server on a clean system without any custom configuration for services such as DNS, Kerberos, Apache, or Directory Server.
			</p><p>
				The IdM server installation overwrites system files to set up the IdM domain. IdM backs up the original system files to <code class="literal">/var/lib/ipa/sysrestore/</code>. When an IdM server is uninstalled at the end of the lifecycle, these files are restored.
			</p><section class="section" id="ipv6_requirements_in_idm"><div class="titlepage"><div><div><h4 class="title">1.3.1. IPv6 requirements in IdM</h4></div></div></div><p>
					The IdM system must have the IPv6 protocol enabled in the kernel. If IPv6 is disabled, then the CLDAP plug-in used by the IdM services fails to initialize.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						IPv6 does not have to be enabled on the network.
					</p></div></rh-alert></section><section class="section" id="support_for_encryption_types_in_idm"><div class="titlepage"><div><div><h4 class="title">1.3.2. Support for encryption types in IdM</h4></div></div></div><p>
					Red Hat Enterprise Linux (RHEL) uses Version 5 of the Kerberos protocol, which supports encryption types such as Advanced Encryption Standard (AES), Camellia, and Data Encryption Standard (DES).
				</p><div class="formalpara"><p class="title"><strong>List of supported encryption types</strong></p><p>
						While the Kerberos libraries on IdM servers and clients might support more encryption types, the IdM Kerberos Distribution Center (KDC) only supports the following encryption types:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">aes256-cts:normal</code>
						</li><li class="listitem">
							<code class="literal">aes256-cts:special</code> (default)
						</li><li class="listitem">
							<code class="literal">aes128-cts:normal</code>
						</li><li class="listitem">
							<code class="literal">aes128-cts:special</code> (default)
						</li><li class="listitem">
							<code class="literal">aes128-sha2:normal</code>
						</li><li class="listitem">
							<code class="literal">aes128-sha2:special</code>
						</li><li class="listitem">
							<code class="literal">aes256-sha2:normal</code>
						</li><li class="listitem">
							<code class="literal">aes256-sha2:special</code>
						</li><li class="listitem">
							<code class="literal">camellia128-cts-cmac:normal</code>
						</li><li class="listitem">
							<code class="literal">camellia128-cts-cmac:special</code>
						</li><li class="listitem">
							<code class="literal">camellia256-cts-cmac:normal</code>
						</li><li class="listitem">
							<code class="literal">camellia256-cts-cmac:special</code>
						</li></ul></div><div class="formalpara"><p class="title"><strong>RC4 encryption types are disabled by default</strong></p><p>
						The following RC4 encryption types have been disabled by default in RHEL 9, as they are considered less secure than the newer AES-128 and AES-256 encryption types:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">arcfour-hmac:normal</code>
						</li><li class="listitem">
							<code class="literal">arcfour-hmac:special</code>
						</li></ul></div><p>
					For more information about manually enabling RC4 support for compatibility with legacy Active Directory environments, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_trust_between_idm_and_ad/ensuring-support-for-common-encryption-types-in-ad-and-rhel_installing-trust-between-idm-and-ad">Ensuring support for common encryption types in AD and RHEL</a>.
				</p><div class="formalpara"><p class="title"><strong>Support for DES and 3DES encryption has been removed</strong></p><p>
						Due to security reasons, support for the DES algorithm was deprecated in RHEL 7. Single-DES (DES) and triple-DES (3DES) encryption types were removed from RHEL 8 and are not used in RHEL 9.
					</p></div></section><section class="section" id="support_for_system_wide_cryptographic_policies_in_idm"><div class="titlepage"><div><div><h4 class="title">1.3.3. Support for system-wide cryptographic policies in IdM</h4></div></div></div><p>
					IdM uses the <code class="literal">DEFAULT</code> system-wide cryptographic policy. This policy offers secure settings for current threat models. It allows the TLS 1.2 and 1.3 protocols, as well as the IKEv2 and SSH2 protocols. The RSA keys and Diffie-Hellman parameters are accepted if they are at least 2048 bits long. This policy does not allow DES, 3DES, RC4, DSA, TLS v1.0, and other weaker algorithms.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						You cannot install an IdM server while using the <code class="literal">FUTURE</code> system-wide cryptographic policy. When installing an IdM server, ensure you are using the <code class="literal">DEFAULT</code> system-wide cryptographic policy.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening">System-wide cryptographic policies</a>
						</li></ul></div></section><section class="section" id="fips_compliance"><div class="titlepage"><div><div><h4 class="title">1.3.4. FIPS compliance</h4></div></div></div><p>
					You can install a new IdM server or replica on a system with the Federal Information Processing Standard (FIPS) mode enabled. The only exception is a system on which the <code class="literal">FIPS:OSPP</code> cryptographic subpolicy is enabled.
				</p><p>
					To install IdM with FIPS, first enable FIPS mode on the host, then install IdM. The IdM installation script detects if FIPS is enabled and configures IdM to only use encryption types that are compliant with FIPS 140-3:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">aes128-sha2:normal</code>
						</li><li class="listitem">
							<code class="literal">aes128-sha2:special</code>
						</li><li class="listitem">
							<code class="literal">aes256-sha2:normal</code>
						</li><li class="listitem">
							<code class="literal">aes256-sha2:special</code>
						</li></ul></div><p>
					For an IdM environment to be FIPS-compliant, <span class="strong strong"><strong>all</strong></span> IdM replicas must have FIPS mode enabled.
				</p><p>
					Red Hat recommends that you enable FIPS in IdM clients as well, especially if you might promote those clients to IdM replicas. Ultimately, it is up to administrators to determine how they meet FIPS requirements; Red Hat does not enforce FIPS criteria.
				</p><div class="formalpara"><p class="title"><strong>Migration to FIPS-compliant IdM</strong></p><p>
						You cannot migrate an existing IdM installation from a non-FIPS environment to a FIPS-compliant installation. This is not a technical problem but a legal and regulatory restriction.
					</p></div><p>
					To operate a FIPS-compliant system, all cryptographic key material must be created in FIPS mode. Furthermore, the cryptographic key material must never leave the FIPS environment unless it is securely wrapped and never unwrapped in non-FIPS environments.
				</p><p>
					If your scenario requires a migration of a non-FIPS IdM realm to a FIPS-compliant one, you must:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							create a new IdM realm in FIPS mode
						</li><li class="listitem">
							perform data migration from the non-FIPS realm to the new FIPS-mode realm with a filter that blocks all key material
						</li></ol></div><p>
					The migration filter must block:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							KDC master key, keytabs, and all related Kerberos key material
						</li><li class="listitem">
							user passwords
						</li><li class="listitem">
							all certificates including CA, service, and user certificates
						</li><li class="listitem">
							OTP tokens
						</li><li class="listitem">
							SSH keys and fingerprints
						</li><li class="listitem">
							DNSSEC KSK and ZSK
						</li><li class="listitem">
							all vault entries
						</li><li class="listitem">
							AD trust-related key material
						</li></ul></div><p>
					Effectively, the new FIPS installation is a different installation. Even with rigorous filtering, such a migration may not pass a FIPS 140 certification. Your FIPS auditor may flag this migration.
				</p><div class="formalpara"><p class="title"><strong>Support for cross-forest trust with FIPS mode enabled</strong></p><p>
						To establish a cross-forest trust with an Active Directory (AD) domain while FIPS mode is enabled, you must authenticate with an AD administrative account. You cannot establish a trust using a shared secret while FIPS mode is enabled.
					</p></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						RADIUS authentication is not FIPS compliant. Do not install IdM on a server with FIPS mode enabled if you require RADIUS authentication.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To enable FIPS mode in the RHEL operating system, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening#switching-the-system-to-fips-mode_using-the-system-wide-cryptographic-policies">Switching the system to FIPS mode</a> in the <span class="emphasis"><em>Security Hardening</em></span> guide.
						</li><li class="listitem">
							For more details on FIPS 140-2, see the <a class="link" href="https://csrc.nist.gov/publications/detail/fips/140/2/final">Security Requirements for Cryptographic Modules</a> on the National Institute of Standards and Technology (NIST) web site.
						</li></ul></div></section></section><section class="section" id="assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.4. Time service requirements for IdM</h3></div></div></div><p class="_abstract _abstract">
				The following sections discuss using <code class="literal">chronyd</code> to keep your IdM hosts in sync with a central time source:
			</p><section class="section" id="con_how-idm-uses-chronyd-for-synchronization_assembly_time-service-requirements-for-idm"><div class="titlepage"><div><div><h4 class="title">1.4.1. How IdM uses <code class="literal">chronyd</code> for synchronization</h4></div></div></div><p class="_abstract _abstract">
					You can use <code class="literal">chronyd</code> to keep your IdM hosts in sync with a central time source as described here.
				</p><p>
					Kerberos, the underlying authentication mechanism in IdM, uses time stamps as part of its protocol. Kerberos authentication fails if the system time of an IdM client differs by more than five minutes from the system time of the Key Distribution Center (KDC).
				</p><p>
					To ensure that IdM servers and clients stay in sync with a central time source, IdM installation scripts automatically configure <code class="literal">chronyd</code> Network Time Protocol (NTP) client software.
				</p><p>
					If you do not pass any NTP options to the IdM installation command, the installer searches for <code class="literal">_ntp._udp</code> DNS service (SRV) records that point to the NTP server in your network and configures <code class="literal">chrony</code> with that IP address. If you do not have any <code class="literal">_ntp._udp</code> SRV records, <code class="literal">chronyd</code> uses the configuration shipped with the <code class="literal">chrony</code> package.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						Because <code class="literal">ntpd</code> has been deprecated in favor of <code class="literal">chronyd</code> in RHEL 8, IdM servers are no longer configured as Network Time Protocol (NTP) servers and are only configured as NTP clients. The RHEL 7 <code class="literal">NTP Server</code> IdM server role has also been deprecated in RHEL 8.
					</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization">Implementation of NTP</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization">Using the Chrony suite to configure NTP</a>
						</li></ul></div></section><section class="section" id="ref_list-of-ntp-configuration-options-for-idm-installation-commands_assembly_time-service-requirements-for-idm"><div class="titlepage"><div><div><h4 class="title">1.4.2. List of NTP configuration options for IdM installation commands</h4></div></div></div><p class="_abstract _abstract">
					You can use <code class="literal">chronyd</code> to keep your IdM hosts in sync with a central time source.
				</p><p>
					You can specify the following options with any of the IdM installation commands (<code class="literal">ipa-server-install</code>, <code class="literal">ipa-replica-install</code>, <code class="literal">ipa-client-install</code>) to configure <code class="literal">chronyd</code> client software during setup.
				</p><rh-table id="idm140559998743456"><table class="lt-4-cols lt-7-rows"><caption>Table 1.1. List of NTP configuration options for IdM installation commands</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 67%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140560000036864" scope="col">Option</th><th align="left" valign="top" id="idm140560000035776" scope="col">Behavior</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140560000036864"> <p>
									<code class="literal">--ntp-server</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140560000035776"> <p>
									Use it to specify one NTP server. You can use it multiple times to specify multiple servers.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140560000036864"> <p>
									<code class="literal">--ntp-pool</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140560000035776"> <p>
									Use it to specify a pool of multiple NTP servers resolved as one hostname.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140560000036864"> <p>
									<code class="literal">-N</code>, <code class="literal">--no-ntp</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140560000035776"> <p>
									Do not configure, start, or enable <code class="literal">chronyd</code>.
								</p>
								 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization">Implementation of NTP</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization">Using the Chrony suite to configure NTP</a>
						</li></ul></div></section><section class="section" id="proc_ensuring-idm-can-reference-your-ntp-time-server_assembly_time-service-requirements-for-idm"><div class="titlepage"><div><div><h4 class="title">1.4.3. Ensuring IdM can reference your NTP time server</h4></div></div></div><p class="_abstract _abstract">
					This procedure verifies you have the necessary configurations in place for IdM to be able to synchronize with your Network Time Protocol (NTP) time server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have configured an NTP time server in your environment. In this example, the hostname of the previously configured time server is <code class="literal">ntpserver.example.com</code>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Perform a DNS service (SRV) record search for NTP servers in your environment.
						</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>dig +short -t SRV _ntp._udp.example.com</strong></span>
0 100 123 <span class="strong strong"><strong>ntpserver</strong></span>.example.com.</pre></li><li class="listitem">
							If the previous <code class="literal">dig</code> search does not return your time server, add a <code class="literal">_ntp._udp</code> SRV record that points to your time server on port <code class="literal">123</code>. This process depends on your DNS solution.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify that DNS returns an entry for your time server on port <code class="literal">123</code> when you perform a search for <code class="literal">_ntp._udp</code> SRV records.
						</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>dig +short -t SRV _ntp._udp.example.com</strong></span>
0 100 123 <span class="strong strong"><strong>ntpserver</strong></span>.example.com.</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization">Implementation of NTP</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization">Using the Chrony suite to configure NTP</a>
						</li></ul></div></section><section class="section _additional-resources" id="additional_resources"><div class="titlepage"><div><div><h4 class="title">1.4.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization">Implementation of NTP</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization">Using the Chrony suite to configure NTP</a>
						</li></ul></div></section></section><section class="section" id="host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.5. Host name and DNS requirements for IdM</h3></div></div></div><p class="_abstract _abstract">
				The host name and DNS requirements for server and replica systems are outlined below and also how to verify that the systems meet the requirements.
			</p><p>
				These requirements apply to all Identity Management (IdM) servers, those with integrated DNS and those without integrated DNS.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					DNS records are vital for nearly all IdM domain functions, including running LDAP directory services, Kerberos, and Active Directory integration. Be extremely cautious and ensure that:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You have a tested and functional DNS service available
						</li><li class="listitem">
							The service is properly configured
						</li></ul></div><p>
					This requirement applies to IdM servers with <span class="strong strong"><strong>and</strong></span> without integrated DNS.
				</p></div></rh-alert><div class="variablelist"><dl class="variablelist"><dt><span class="term">Verify the server host name</span></dt><dd><p class="simpara">
							The host name must be a fully qualified domain name, such as <code class="literal"><span class="emphasis"><em>server.idm.example.com</em></span></code>.
						</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
								Do not use single-label domain names, for example <code class="literal">.company</code>: the IdM domain must be composed of one or more subdomains and a top level domain, for example <code class="literal">example.com</code> or <code class="literal">company.example.com</code>.
							</p></div></rh-alert><p class="simpara">
							The fully qualified domain name must meet the following conditions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									It is a valid DNS name, which means only numbers, alphabetic characters, and hyphens (-) are allowed. Other characters, such as underscores (_), in the host name cause DNS failures.
								</li><li class="listitem">
									It is all lower-case. No capital letters are allowed.
								</li><li class="listitem">
									It does not resolve to the loopback address. It must resolve to the system’s public IP address, not to <code class="literal">127.0.0.1</code>.
								</li></ul></div><p class="simpara">
							To verify the host name, use the <code class="literal">hostname</code> utility on the system where you want to install:
						</p><pre class="literallayout"># <span class="strong strong"><strong>hostname</strong></span>
server.idm.example.com</pre><p class="simpara">
							The output of <code class="literal">hostname</code> must not be <code class="literal">localhost</code> or <code class="literal">localhost6</code>.
						</p></dd><dt><span class="term">Verify the forward and reverse DNS configuration</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Obtain the IP address of the server.
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											The <code class="literal command">ip addr show</code> command displays both the IPv4 and IPv6 addresses. In the following example, the relevant IPv6 address is <code class="literal">2001:DB8::1111</code> because its scope is global:
										</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ip addr show</strong></span>
...
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
	link/ether 00:1a:4a:10:4e:33 brd ff:ff:ff:ff:ff:ff
	inet <span class="strong strong"><strong>192.0.2.1</strong></span>/24 brd 192.0.2.255 scope global dynamic eth0
		valid_lft 106694sec preferred_lft 106694sec
	inet6 <span class="strong strong"><strong>2001:DB8::1111</strong></span>/32 scope global dynamic
 		valid_lft 2591521sec preferred_lft 604321sec
	inet6 fe80::56ee:75ff:fe2b:def6/64 scope link
	       valid_lft forever preferred_lft forever
...</pre></li></ol></div></li><li class="listitem"><p class="simpara">
									Verify the forward DNS configuration using the <code class="literal">dig</code> utility.
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											Run the command <code class="literal command">dig +short <span class="emphasis"><em>server.idm.example.com</em></span> A</code>. The returned IPv4 address must match the IP address returned by <code class="literal">ip addr show</code>:
										</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>dig +short <span class="emphasis"><em>server.idm.example.com</em></span> A</strong></span>
192.0.2.1</pre></li><li class="listitem"><p class="simpara">
											Run the command <code class="literal command">dig +short <span class="emphasis"><em>server.idm.example.com</em></span> AAAA</code>. If it returns an address, it must match the IPv6 address returned by <code class="literal">ip addr show</code>:
										</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>dig +short <span class="emphasis"><em>server.idm.example.com</em></span> AAAA</strong></span>
2001:DB8::1111</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
												If <code class="literal">dig</code> does not return any output for the AAAA record, it does not indicate incorrect configuration. No output only means that no IPv6 address is configured in DNS for the system. If you do not intend to use the IPv6 protocol in your network, you can proceed with the installation in this situation.
											</p></div></rh-alert></li></ol></div></li><li class="listitem"><p class="simpara">
									Verify the reverse DNS configuration (PTR records). Use the <code class="literal">dig</code> utility and add the IP address.
								</p><p class="simpara">
									If the commands below display a different host name or no host name, the reverse DNS configuration is incorrect.
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
											Run the command <code class="literal command">dig +short -x <span class="emphasis"><em>IPv4_address</em></span></code>. The output must display the server host name. For example:
										</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>dig +short -x <span class="emphasis"><em>192.0.2.1</em></span></strong></span>
server.idm.example.com</pre></li><li class="listitem"><p class="simpara">
											If the command <code class="literal command">dig +short -x <span class="emphasis"><em>server.idm.example.com</em></span> AAAA</code> in the previous step returned an IPv6 address, use <code class="literal">dig</code> to query the IPv6 address too. The output must display the server host name. For example:
										</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>dig +short -x <span class="emphasis"><em>2001:DB8::1111</em></span></strong></span>
server.idm.example.com</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
												If <code class="literal command">dig +short <span class="emphasis"><em>server.idm.example.com</em></span> AAAA</code> in the previous step did not display any IPv6 address, querying the AAAA record does not output anything. In this case, this is normal behavior and does not indicate incorrect configuration.
											</p></div></rh-alert><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
												If a reverse DNS (PTR record) search returns multiple host names, <code class="literal">httpd</code> and other software associated with IdM may show unpredictable behavior. Red Hat strongly recommends configuring only one PTR record per IP.
											</p></div></rh-alert></li></ol></div></li></ol></div></dd><dt><span class="term">Verify the standards-compliance of DNS forwarders (required for integrated DNS only)</span></dt><dd><p class="simpara">
							Ensure that all DNS forwarders you want to use with the IdM DNS server comply with the Extension Mechanisms for DNS (EDNS0) and DNS Security Extensions (DNSSEC) standards. To do this, inspect the output of the following command for each forwarder separately:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>dig +dnssec @<span class="emphasis"><em>IP_address_of_the_DNS_forwarder</em></span> . SOA</strong></span></pre><p class="simpara">
							The expected output displayed by the command contains the following information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Status: <code class="literal">NOERROR</code>
								</li><li class="listitem">
									Flags: <code class="literal">ra</code>
								</li><li class="listitem">
									EDNS flags: <code class="literal">do</code>
								</li><li class="listitem">
									The <code class="literal">RRSIG</code> record must be present in the <code class="literal">ANSWER</code> section
								</li></ul></div><p class="simpara">
							If any of these items is missing from the output, inspect the documentation for your DNS forwarder and verify that EDNS0 and DNSSEC are supported and enabled. In the latest versions of the BIND server, the <code class="literal option">dnssec-enable yes;</code> option must be set in the <code class="literal">/etc/named.conf</code> file.
						</p><p class="simpara">
							Example of the expected output produced by <code class="literal">dig</code>:
						</p><pre class="literallayout">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, <span class="strong strong"><strong>status: NOERROR</strong></span>, id: 48655
;; <span class="strong strong"><strong>flags:</strong></span> qr rd <span class="strong strong"><strong>ra</strong></span> ad; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, <span class="strong strong"><strong>flags: do;</strong></span> udp: 4096

;; ANSWER SECTION:
. 31679 IN SOA a.root-servers.net. nstld.verisign-grs.com. 2015100701 1800 900 604800 86400
. 31679 IN <span class="strong strong"><strong>RRSIG SOA</strong></span> 8 0 86400 20151017170000 20151007160000 62530 . GNVz7SQs [...]</pre></dd><dt><span class="term">Verify the <code class="literal">/etc/hosts</code> file</span></dt><dd><p class="simpara">
							Verify that the <code class="literal">/etc/hosts</code> file fulfills one of the following conditions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The file does not contain an entry for the host. It only lists the IPv4 and IPv6 localhost entries for the host.
								</li><li class="listitem"><p class="simpara">
									The file contains an entry for the host and the file fulfills all the following conditions:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											The first two entries are the IPv4 and IPv6 localhost entries.
										</li><li class="listitem">
											The next entry specifies the IdM server IPv4 address and host name.
										</li><li class="listitem">
											The <code class="literal">FQDN</code> of the IdM server comes before the short name of the IdM server.
										</li><li class="listitem">
											The IdM server host name is not part of the localhost entry.
										</li></ul></div><p class="simpara">
									The following is an example of a correctly configured <code class="literal">/etc/hosts</code> file:
								</p></li></ul></div><pre class="literallayout">127.0.0.1   localhost localhost.localdomain \
localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain \
localhost6 localhost6.localdomain6
192.0.2.1	server.idm.example.com	server
2001:DB8::1111	server.idm.example.com	server</pre></dd></dl></div></section><section class="section" id="port-requirements-for-idm_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.6. Port requirements for IdM</h3></div></div></div><p class="_abstract _abstract">
				Identity Management (IdM) uses several <a class="link" href="#tab_ipa-ports_preparing-the-system-for-ipa-server-installation" title="Table 1.2. IdM ports">ports</a> to communicate with its services. These ports must be open and available for incoming connections to the IdM server for IdM to work. They must not be currently used by another service or blocked by a <a class="link" href="#tab_firewalld-services_preparing-the-system-for-ipa-server-installation" title="Table 1.3. firewalld services">firewall</a>.
			</p><rh-table id="tab_ipa-ports_preparing-the-system-for-ipa-server-installation"><table class="lt-4-cols lt-7-rows"><caption>Table 1.2. IdM ports</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559992162704" scope="col">Service</th><th align="left" valign="top" id="idm140559992161616" scope="col">Ports</th><th align="left" valign="top" id="idm140559992160528" scope="col">Protocol</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559992162704"> <p>
								HTTP/HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559992161616"> <p>
								80, 443
							</p>
							 </td><td align="left" valign="top" headers="idm140559992160528"> <p>
								TCP
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992162704"> <p>
								LDAP/LDAPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559992161616"> <p>
								389, 636
							</p>
							 </td><td align="left" valign="top" headers="idm140559992160528"> <p>
								TCP
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992162704"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559992161616"> <p>
								88, 464
							</p>
							 </td><td align="left" valign="top" headers="idm140559992160528"> <p>
								TCP and UDP
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992162704"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559992161616"> <p>
								53
							</p>
							 </td><td align="left" valign="top" headers="idm140559992160528"> <p>
								TCP and UDP (optional)
							</p>
							 </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					IdM uses ports 80 and 389. This is a secure practice because of the following safeguards:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							IdM normally redirects requests that arrive on port 80 to port 443. Port 80 (HTTP) is only used to provide Online Certificate Status Protocol (OCSP) responses and Certificate Revocation Lists (CRL). Both are digitally signed and therefore secured against man-in-the-middle attacks.
						</li><li class="listitem">
							Port 389 (LDAP) uses STARTTLS and Generic Security Services API (GSSAPI) for encryption.
						</li></ul></div></div></rh-alert><p>
				In addition, ports 8080, 8443, and 749 must be free as they are used internally. Do not open these ports and instead leave them blocked by a firewall.
			</p><rh-table id="tab_firewalld-services_preparing-the-system-for-ipa-server-installation"><table class="lt-4-cols lt-7-rows"><caption>Table 1.3. firewalld services</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559999785856" scope="col">Service name</th><th align="left" valign="top" id="idm140559995006224" scope="col">For details, see:</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559999785856"> <p>
								<code class="literal">freeipa-ldap</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559995006224"> <p>
								<code class="literal">/usr/lib/firewalld/services/freeipa-ldap.xml</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559999785856"> <p>
								<code class="literal">freeipa-ldaps</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559995006224"> <p>
								<code class="literal">/usr/lib/firewalld/services/freeipa-ldaps.xml</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559999785856"> <p>
								<code class="literal">dns</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559995006224"> <p>
								<code class="literal">/usr/lib/firewalld/services/dns.xml</code>
							</p>
							 </td></tr></tbody></table></rh-table></section><section class="section" id="opening-the-ports-required-by-idm_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.7. Opening the ports required by IdM</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">firewalld</code> service is running.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To find out if <code class="literal">firewalld</code> is currently running:
							</p><pre class="screen"># systemctl status firewalld.service</pre></li><li class="listitem"><p class="simpara">
								To start <code class="literal">firewalld</code> and configure it to start automatically when the system boots:
							</p><pre class="screen"># systemctl start firewalld.service
# systemctl enable firewalld.service</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Open the required ports using the <code class="literal">firewall-cmd</code> utility. Choose one of the following options:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add the individual ports to the firewall by using the <code class="literal command">firewall-cmd --add-port</code> command. For example, to open the ports in the default zone:
							</p><pre class="screen"># firewall-cmd --permanent --add-port={80/tcp,443/tcp,389/tcp,636/tcp,88/tcp,88/udp,464/tcp,464/udp,53/tcp,53/udp}</pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">firewalld</code> services to the firewall by using the <code class="literal command">firewall-cmd --add-service</code> command. For example, to open the ports in the default zone:
							</p><pre class="screen"># firewall-cmd --permanent --add-service={freeipa-4,dns}</pre><p class="simpara">
								For details on using <code class="literal">firewall-cmd</code> to open ports on a system, see the <span class="strong strong"><strong>firewall-cmd</strong></span>(1) man page.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">firewall-cmd</code> configuration to ensure that the change takes place immediately:
					</p><pre class="screen"># firewall-cmd --reload</pre><p class="simpara">
						Note that reloading <code class="literal">firewalld</code> on a system in production can cause DNS connection time outs. If required, to avoid the risk of time outs and to make the changes persistent on the running system, use the <code class="literal">--runtime-to-permanent</code> option of the <code class="literal">firewall-cmd</code> command, for example:
					</p><pre class="screen"># firewall-cmd --runtime-to-permanent</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Log in to a host on the client subnet and use the <code class="literal">nmap</code> or <code class="literal">nc</code> utilities to connect to the opened ports or run a port scan.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								For example, to scan the ports that are required for TCP traffic:
							</p><pre class="screen">$ nmap -p 80,443,389,636,88,464,53 server.idm.example.com
[...]
PORT    STATE SERVICE
53/tcp  open  domain
80/tcp  open  http
88/tcp  open  kerberos-sec
389/tcp open  ldap
443/tcp open  https
464/tcp open  kpasswd5
636/tcp open  ldapssl</pre></li><li class="listitem"><p class="simpara">
								To scan the ports that are required for UDP traffic:
							</p><pre class="screen"># nmap -sU -p 88,464,53 server.idm.example.com
[...]
PORT    STATE         SERVICE
53/udp  open          domain
88/udp  open|filtered kerberos-sec
464/udp open|filtered kpasswd5</pre></li></ul></div></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					You also have to open network-based firewalls for both incoming and outgoing traffic.
				</p></div></rh-alert></section><section class="section" id="installing-packages-required-for-an-idm-server_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.8. Installing packages required for an IdM server</h3></div></div></div><p>
				The following procedure shows how to download the packages necessary for setting up the IdM environment of your choice.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have a newly installed RHEL system.
					</li><li class="listitem"><p class="simpara">
						You have made the required repositories available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								If your RHEL system is not running in the cloud, you have registered your system with the Red Hat Subscription Manager (RHSM). For details, see <a class="link" href="https://docs.redhat.com/en/documentation/subscription_central/1-latest">Subscription Central</a>. You have also enabled the <code class="literal">BaseOS</code> and <code class="literal">AppStream</code> repositories that IdM uses:
							</p><pre class="literallayout"># <span class="strong strong"><strong>subscription-manager repos --enable=rhel-9-for-x86_64-baseos-rpms</strong></span>
# <span class="strong strong"><strong>subscription-manager repos --enable=rhel-9-for-x86_64-appstream-rpms</strong></span></pre><p class="simpara">
								For details on how to enable and disable specific repositories using RHSM, see <a class="link" href="https://docs.redhat.com/en/documentation/subscription_central/1-latest">Subscription Central</a>.
							</p></li><li class="listitem">
								If your RHEL system is running in the cloud, skip the registration. The required repositories are already available via the Red Hat Update Infrastructure (RHUI).
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Choose one of the following options, depending on your IdM requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								To download the packages necessary for installing an IdM server without an integrated DNS:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install ipa-server</strong></span></pre></li><li class="listitem"><p class="simpara">
								To download the packages necessary for installing an IdM server with an integrated DNS:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install ipa-server ipa-server-dns</strong></span></pre></li><li class="listitem"><p class="simpara">
								To download the packages necessary for installing an IdM server that has a trust agreement with Active Directory:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install ipa-server ipa-server-trust-ad samba-client</strong></span></pre></li></ul></div></li></ul></div></section><section class="section" id="proc_setting-the-correct-file-mode-creation-mask-for-idm-installation_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.9. Setting the correct file mode creation mask for IdM installation</h3></div></div></div><p class="_abstract _abstract">
				The Identity Management (IdM) installation process requires that the file mode creation mask (<code class="literal">umask</code>) is set to <code class="literal">0022</code> for the <code class="literal">root</code> account. This allows users other than <code class="literal">root</code> to read files created during the installation. If a different <code class="literal">umask</code> is set, the installation of an IdM server will display a warning. If you continue with the installation, some functions of the server will not perform properly. For example, you will be unable to install an IdM replica from this server. After the installation, you can set the <code class="literal">umask</code> back to its original value.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <code class="literal">root</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the current <code class="literal">umask</code>:
					</p><pre class="screen"># umask
0027</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">umask</code> to <code class="literal">0022</code>:
					</p><pre class="screen"># umask 0022</pre></li><li class="listitem"><p class="simpara">
						Optional: After the IdM installation is complete, set the <code class="literal">umask</code> back to its original value:
					</p><pre class="screen"># umask 0027</pre></li></ol></div></section><section class="section" id="proc_ensuring-that-fapolicyd-rules-do-not-block-idm-installation_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.10. Ensuring that fapolicyd rules do not block IdM installation</h3></div></div></div><p>
				If you are using the <code class="literal">fapolicyd</code> software framework on your RHEL host to control the execution of applications based on a user-defined policy, the installation of the Identity Management (IdM) server can fail. As the installation and operation requires the Java program to complete successfully, ensure that Java and Java classes are not blocked by any <code class="literal">fapolicyd</code> rules.
			</p><p>
				For more information, see the <a class="link" href="https://access.redhat.com/solutions/5567781">fapolicy restrictions causing IdM installation failures</a> KCS solution.
			</p></section><section class="section" id="ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation"><div class="titlepage"><div><div><h3 class="title">1.11. Options for the IdM installation commands</h3></div></div></div><p class="_abstract _abstract">
				Commands such as <code class="literal">ipa-server-install</code>, <code class="literal">ipa-replica-install</code>, <code class="literal">ipa-dns-install</code> and <code class="literal">ipa-ca-install</code> have numerous options you can use to supply additional information for an interactive installation. You can also use these options to script an unattended installation.
			</p><p>
				The following tables display some of the most common options for different components. Options for a specific component are shared across multiple commands. For example, you can use the <code class="literal">--ca-subject</code> option with both the <code class="literal">ipa-ca-install</code> and <code class="literal">ipa-server-install</code> commands.
			</p><p>
				For an exhaustive list of options, see the <code class="literal">ipa-server-install(1)</code>, <code class="literal">ipa-replica-install(1)</code>, <code class="literal">ipa-dns-install(1)</code> and <code class="literal">ipa-ca-install(1)</code> man pages.
			</p><rh-table id="idm140559999716656"><table class="lt-4-cols lt-7-rows"><caption>Table 1.4. General options: available for ipa-server-install and ipa-replica-install</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 67%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559992209504" scope="col">Argument</th><th align="left" valign="top" id="idm140559992208416" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">-d</code>, <code class="literal">--debug</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								Enables debug logging for more verbose output.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">-U</code>, <code class="literal">--unattended</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								Enables an unattended installation session that does not prompt for user input.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">--hostname=<span class="emphasis"><em>server.idm.example.com</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								The fully-qualified domain name of the IdM server machine. Only numbers, lowercase alphabetic characters, and hyphens (-) are allowed.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">--ip-address <span class="emphasis"><em>127.0.0.1</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								Specifies the IP address of the server. This option only accepts IP addresses associated with the local interface.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">--dirsrv-config-file <span class="emphasis"><em>&lt;LDIF_file_name&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								The path to an LDIF file used to modify the configuration of the directory server instance.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">-n <span class="emphasis"><em>example.com</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								The name of the LDAP server domain to use for the IdM domain. This is usually based on the IdM server’s hostname.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">-p <span class="emphasis"><em>&lt;directory_manager_password&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								The password of the superuser, <code class="literal">cn=Directory Manager</code>, for the LDAP service.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">-a <span class="emphasis"><em>&lt;ipa_admin_password&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								The password for the <code class="literal">admin</code> IdM administrator account to authenticate to the Kerberos realm. For <code class="literal">ipa-replica-install</code>, use <code class="literal">-w</code> instead.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">-r <span class="emphasis"><em>&lt;KERBEROS_REALM_NAME&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								The name of the Kerberos realm to create for the IdM domain in uppercase, such as <code class="literal">EXAMPLE.COM</code>. For <code class="literal">ipa-replica-install</code>, this specifies the name of a Kerberos realm of an existing IdM deployment.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">--setup-dns</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								Tells the installation script to set up a DNS service within the IdM domain.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992209504"> <p>
								<code class="literal">--setup-ca</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559992208416"> <p>
								Install and configure a CA on this replica. If a CA is not configured, certificate operations are forwarded to another replica with a CA installed. For <code class="literal">ipa-server-install</code>, a CA is installed by default and you do not need to use this option.
							</p>
							 </td></tr></tbody></table></rh-table><rh-table id="idm140559992136176"><table class="lt-4-cols lt-7-rows"><caption>Table 1.5. CA options: available for ipa-ca-install and ipa-server-install</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 67%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559994723696" scope="col">Argument</th><th align="left" valign="top" id="idm140559994722608" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559994723696"> <p>
								<code class="literal">--random-serial-numbers</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559994722608"> <p>
								Enables Random Serial Numbers version 3 (RSNv3) for the IdM CA. When enabled, the CA generates fully random serial numbers for certificates and requests in PKI without range management.
							</p>
							 <p>
								IMPORTANT: RSNv3 is supported only for new IdM CA installations. If enabled, it is required to use RSNv3 on all PKI services.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994723696"> <p>
								<code class="literal">--ca-subject=<span class="emphasis"><em>&lt;SUBJECT&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559994722608"> <p>
								Specifies the CA certificate subject Distinguished Name (default: CN=Certificate Authority,O=REALM.NAME). Relative Distinguished Names (RDN) are in LDAP order, with the most specific RDN first.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994723696"> <p>
								<code class="literal">--subject-base=<span class="emphasis"><em>&lt;SUBJECT&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559994722608"> <p>
								Specifies the subject base for certificates issued by IdM (default O=REALM.NAME). Relative Distinguished Names (RDN) are in LDAP order, with the most specific RDN first.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994723696"> <p>
								<code class="literal">--external-ca</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559994722608"> <p>
								Generates a certificate signing request to be signed by an external CA.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994723696"> <p>
								<code class="literal">--ca-signing-algorithm=<span class="emphasis"><em>&lt;ALGORITHM&gt;</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559994722608"> <p>
								Specifies the signing algorithm of the IdM CA certificate. Possible values are SHA1withRSA, SHA256withRSA, SHA512withRSA. The default is SHA256withRSA. Use this option with <code class="literal">--external-ca</code> if the external CA does not support the default signing algorithm.
							</p>
							 </td></tr></tbody></table></rh-table><rh-table id="idm140559995028240"><table class="lt-4-cols lt-7-rows"><caption>Table 1.6. DNS options: available for ipa-dns-install, or for ipa-server-install and ipa-replica-install when using --setup-dns</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 67%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559996236096" scope="col">Argument</th><th align="left" valign="top" id="idm140559996235008" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559996236096"> <p>
								<code class="literal">--forwarder=<span class="emphasis"><em>192.0.2.1</em></span></code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559996235008"> <p>
								Specifies a DNS forwarder to use with the DNS service. To specify more than one forwarder, use this option multiple times.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559996236096"> <p>
								<code class="literal">--no-forwarders</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559996235008"> <p>
								Uses root servers with the DNS service instead of forwarders.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559996236096"> <p>
								<code class="literal">--no-reverse</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559996235008"> <p>
								Does not create a reverse DNS zone when the DNS domain is set up. If a reverse DNS zone is already configured, then that existing reverse DNS zone is used.
							</p>
							 <p>
								If this option is not used, then the default value is <code class="literal">true</code>. This instructs the installation script to configure reverse DNS.
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">ipa-server-install(1)</code> and <code class="literal">ipa-replica-install(1)</code> man pages on your system
					</li><li class="listitem">
						<code class="literal">ipa-dns-install(1)</code> and <code class="literal">ipa-ca-install(1)</code> man pages on your system
					</li></ul></div></section></section><section class="chapter" id="installing-an-ipa-server-with-integrated-dns_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Installing an IdM server: With integrated DNS, with an integrated CA as the root CA</h2></div></div></div><p class="_abstract _abstract">
			Installing a new Identity Management (IdM) server with integrated DNS has the following advantages:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					You can automate much of the maintenance and DNS record management using native IdM tools. For example, DNS SRV records are automatically created during the setup, and later on are automatically updated.
				</li><li class="listitem">
					You can configure global forwarders during the installation of the IdM server for a stable external internet connection. Global forwarders are also useful for trusts with Active Directory.
				</li><li class="listitem">
					You can set up a DNS reverse zone to prevent emails from your domain to be considered spam by email servers outside of the IdM domain.
				</li></ul></div><p>
			Installing IdM with integrated DNS has certain limitations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					IdM DNS is not meant to be used as a general-purpose DNS server. Some of the advanced DNS functions are not supported. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index#dns-services-available-in-an-ipa-server_planning-dns">DNS services available in an IdM server</a>.
				</li></ul></div><p>
			This chapter describes how you can install a new IdM server with an integrated certificate authority (CA) as the root CA.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				The default configuration for the <span class="strong strong"><strong>ipa-server-install</strong></span> command is an integrated CA as the root CA. If no CA option, for example <code class="literal option">--external-ca</code> or <code class="literal option">--ca-less</code> is specified, the IdM server is installed with an integrated CA.
			</p></div></rh-alert><section class="section" id="installing-ipa-server-with-dns-interactive-install_install-server-with-dns"><div class="titlepage"><div><div><h3 class="title">2.1. Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				During the interactive installation using the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <span class="strong strong"><strong>ipa-server-install</strong></span> utility.
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						The script prompts to configure an integrated DNS service. Enter <code class="literal">yes</code>.
					</p><pre class="screen">Do you want to configure integrated DNS (BIND)? [no]: <code class="literal">yes</code></pre></li><li class="listitem"><p class="simpara">
						The script prompts for several required settings and offers recommended default values in brackets.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To accept a default value, press <kbd class="keycap">Enter</kbd>.
							</li><li class="listitem"><p class="simpara">
								To provide a custom value, enter the required value.
							</p><pre class="screen">Server host name [server.idm.example.com]:
Please confirm the domain name [idm.example.com]:
Please provide a realm name [IDM.EXAMPLE.COM]:</pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Plan these names carefully. You will not be able to change them after the installation is complete.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Enter the passwords for the Directory Server superuser (<code class="literal">cn=Directory Manager</code>) and for the Identity Management (IdM) administration system user account (<code class="literal">admin</code>).
					</p><pre class="screen">Directory Manager password:
IPA admin password:</pre></li><li class="listitem"><p class="simpara">
						The script prompts for per-server DNS forwarders.
					</p><pre class="screen">Do you want to configure DNS forwarders? [yes]:</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To configure per-server DNS forwarders, enter <code class="literal">yes</code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										For the forwarding policy default settings, see the <code class="literal option">--forward-policy</code> description in the <span class="strong strong"><strong>ipa-dns-install</strong></span>(1) man page.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you do not want to use DNS forwarding, enter <code class="literal">no</code>.
							</p><p class="simpara">
								With no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						The script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.
					</p><pre class="screen">Do you want to search for missing reverse zones? [yes]:</pre><p class="simpara">
						If you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.
					</p><pre class="screen">Do you want to create reverse zone for IP 192.0.2.1 [yes]:
Please specify the reverse zone name [2.0.192.in-addr.arpa.]:
Using reverse zone(s) 2.0.192.in-addr.arpa.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Using IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Enter <code class="literal">yes</code> to confirm the server configuration.
					</p><pre class="screen">Continue to configure the system with these values? [no]: <code class="literal">yes</code></pre></li><li class="listitem">
						The installation script now configures the server. Wait for the operation to complete.
					</li><li class="listitem"><p class="simpara">
						After the installation script completes, update your DNS records in the following way:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Repeat this step each time after an IdM DNS server is installed.
								</p></div></rh-alert></li><li class="listitem">
								Add an <code class="literal">_ntp._udp</code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.
							</li></ol></div></li></ol></div></section><section class="section" id="installing-an-ipa-server-with-integrated-dns-non-interactive-installation_install-server-with-dns"><div class="titlepage"><div><div><h3 class="title">2.2. Non-interactive installation</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <span class="strong strong"><strong>ipa-server-install</strong></span> utility with the options to supply all the required information. The minimum required options for non-interactive installation are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">--realm</code> to provide the Kerberos realm name
							</li><li class="listitem">
								<code class="literal">--ds-password</code> to provide the password for the Directory Manager (DM), the Directory Server super user
							</li><li class="listitem">
								<code class="literal">--admin-password</code> to provide the password for <code class="literal">admin</code>, the Identity Management (IdM) administrator
							</li><li class="listitem">
								<code class="literal">--unattended</code> to let the installation process select default options for the host name and domain name
							</li></ul></div><p class="simpara">
						To install a server with integrated DNS, add also these options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">--setup-dns</code> to configure integrated DNS
							</li><li class="listitem">
								<code class="literal">--forwarder</code> or <code class="literal">--no-forwarders</code>, depending on whether you want to configure DNS forwarders or not
							</li><li class="listitem">
								<code class="literal">--auto-reverse</code> or <code class="literal">--no-reverse</code>, depending on whether you want to configure automatic detection of the reverse DNS zones that must be created in the IdM DNS or no reverse zone auto-detection
							</li></ul></div><p class="simpara">
						For example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --realm <span class="emphasis"><em>IDM.EXAMPLE.COM</em></span> --ds-password <span class="emphasis"><em>DM_password</em></span> --admin-password <span class="emphasis"><em>admin_password</em></span> --unattended --setup-dns --forwarder <span class="emphasis"><em>192.0.2.1</em></span> --no-reverse</strong></span></pre></li><li class="listitem"><p class="simpara">
						After the installation script completes, update your DNS records in the following way:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Repeat this step each time after an IdM DNS server is installed.
								</p></div></rh-alert></li><li class="listitem">
								Add an <code class="literal">_ntp._udp</code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.
							</li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For a complete list of options accepted by <span class="strong strong"><strong>ipa-server-install</strong></span>, run the <code class="literal">ipa-server-install --help</code> command.
					</li><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/tuning_performance_in_identity_management/failover-load-balancing-high-availability_tuning-performance-in-idm#failover-load-balancing-high-availability_tuning-performance-in-idm">Failover, load-balancing, and high-availability in IdM</a>.
					</li></ul></div></section></section><section class="chapter" id="installing-an-ipa-server-with-external-ca_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Installing an IdM server: With integrated DNS, with an external CA as the root CA</h2></div></div></div><p class="_abstract _abstract">
			Installing a new Identity Management (IdM) server with integrated DNS has the following advantages:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					You can automate much of the maintenance and DNS record management using native IdM tools. For example, DNS SRV records are automatically created during the setup, and later on are automatically updated.
				</li><li class="listitem">
					You can configure global forwarders during the installation of the IdM server for a stable external internet connection. Global forwarders are also useful for trusts with Active Directory.
				</li><li class="listitem">
					You can set up a DNS reverse zone to prevent emails from your domain to be considered spam by email servers outside of the IdM domain.
				</li></ul></div><p>
			Installing IdM with integrated DNS has certain limitations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					IdM DNS is not meant to be used as a general-purpose DNS server. Some of the advanced DNS functions are not supported. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index#dns-services-available-in-an-ipa-server_planning-dns">DNS services available in an IdM server</a>.
				</li></ul></div><p>
			This chapter describes how you can install a new IdM server with an external certificate authority (CA) as the root CA.
		</p><section class="section" id="installing-an-ipa-server-with-an-external-ca-as-the-root-ca_install-server-external-ca"><div class="titlepage"><div><div><h3 class="title">3.1. Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				During the interactive installation using the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
			</p><p>
				Follow this procedure to install a server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						With integrated DNS
					</li><li class="listitem">
						With an external certificate authority (CA) as the root CA
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have determined the type of the external CA to specify with the <code class="literal option">--external-ca-type</code> option. See the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code>(1) man page for details.
					</li><li class="listitem"><p class="simpara">
						If you are using a Microsoft Certificate Services certificate authority (MS CS CA) as your external CA: you have determined the certificate profile or template to specify with the <code class="literal">--external-ca-profile</code> option. By default, the <code class="literal">SubCA</code> template is used.
					</p><p class="simpara">
						For more information about the <code class="literal option">--external-ca-type</code> and <code class="literal option">--external-ca-profile</code> options, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca">Options used when installing an IdM CA with an external CA as the root CA</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <span class="strong strong"><strong>ipa-server-install</strong></span> utility with the <code class="literal">--external-ca</code> option.
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --external-ca</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you are using the Microsoft Certificate Services (MS CS) CA, also use the <code class="literal">--external-ca-type</code> option and, optionally, the <code class="literal">--external-ca-profile</code> option:
							</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-server-install --external-ca --external-ca-type=ms-cs --external-ca-profile=<span class="emphasis"><em>&lt;oid&gt;/&lt;name&gt;/default</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								If you are not using MS CS to generate the signing certificate for your IdM CA, no other option may be necessary:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --external-ca</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						The script prompts to configure an integrated DNS service. Enter <code class="literal">yes</code> or <code class="literal">no</code>. In this procedure, we are installing a server with integrated DNS.
					</p><pre class="screen">Do you want to configure integrated DNS (BIND)? [no]: <code class="literal">yes</code></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If you want to install a server without integrated DNS, the installation script will not prompt you for DNS configuration as described in the steps below. See <a class="xref" href="#installing-an-ipa-server-without-integrated-dns_installing-identity-management" title="Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA">Chapter 5, <em>Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA</em></a> for details on the steps for installing a server without DNS.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						The script prompts for several required settings and offers recommended default values in brackets.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To accept a default value, press <kbd class="keycap">Enter</kbd>.
							</li><li class="listitem"><p class="simpara">
								To provide a custom value, enter the required value.
							</p><pre class="screen">Server host name [<code class="literal"><span class="emphasis"><em>server.idm.example.com</em></span></code>]:
Please confirm the domain name [<code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>]:
Please provide a realm name [<code class="literal"><span class="emphasis"><em>IDM.EXAMPLE.COM</em></span></code>]:</pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Plan these names carefully. You will not be able to change them after the installation is complete.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Enter the passwords for the Directory Server superuser (<code class="literal">cn=Directory Manager</code>) and for the Identity Management (IdM) administration system user account (<code class="literal">admin</code>).
					</p><pre class="screen">Directory Manager password:
IPA admin password:</pre></li><li class="listitem"><p class="simpara">
						The script prompts for per-server DNS forwarders.
					</p><pre class="screen">Do you want to configure DNS forwarders? [yes]:</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To configure per-server DNS forwarders, enter <code class="literal">yes</code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										For the forwarding policy default settings, see the <code class="literal option">--forward-policy</code> description in the <span class="strong strong"><strong>ipa-dns-install</strong></span>(1) man page.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you do not want to use DNS forwarding, enter <code class="literal">no</code>.
							</p><p class="simpara">
								With no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						The script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.
					</p><pre class="screen">Do you want to search for missing reverse zones? [yes]:</pre><p class="simpara">
						If you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.
					</p><pre class="screen">Do you want to create reverse zone for IP 192.0.2.1 [yes]:
Please specify the reverse zone name [2.0.192.in-addr.arpa.]:
Using reverse zone(s) 2.0.192.in-addr.arpa.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Using IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Enter <code class="literal">yes</code> to confirm the server configuration.
					</p><pre class="screen">Continue to configure the system with these values? [no]: <code class="literal">yes</code></pre></li><li class="listitem"><p class="simpara">
						During the configuration of the Certificate System instance, the utility prints the location of the certificate signing request (CSR): <code class="literal">/root/ipa.csr</code>:
					</p><pre class="screen">...

Configuring certificate server (pki-tomcatd): Estimated time 3 minutes 30 seconds
  [1/8]: creating certificate server user
  [2/8]: configuring certificate server instance
The next step is to get /root/ipa.csr signed by your CA and re-run /sbin/ipa-server-install as:
/sbin/ipa-server-install --external-cert-file=/path/to/signed_certificate --external-cert-file=/path/to/external_ca_certificate</pre><p class="simpara">
						When this happens:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Submit the CSR located in <code class="literal">/root/ipa.csr</code> to the external CA. The process differs depending on the service to be used as the external CA.
							</li><li class="listitem"><p class="simpara">
								Retrieve the issued certificate and the CA certificate chain for the issuing CA in a base 64-encoded blob (either a PEM file or a Base_64 certificate from a Windows CA). Again, the process differs for every certificate service. Usually, a download link on a web page or in the notification email allows the administrator to download all the required certificates.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Be sure to get the full certificate chain for the CA, not just the CA certificate.
								</p></div></rh-alert></li><li class="listitem"><p class="simpara">
								Run <code class="literal">ipa-server-install</code> again, this time specifying the locations and names of the newly-issued CA certificate and the CA chain files. For example:
							</p><pre class="screen"># ipa-server-install --external-cert-file=<span class="emphasis"><em>/tmp/servercert20170601.pem</em></span> --external-cert-file=<span class="emphasis"><em>/tmp/cacert.pem</em></span></pre></li></ol></div></li><li class="listitem">
						The installation script now configures the server. Wait for the operation to complete.
					</li><li class="listitem"><p class="simpara">
						After the installation script completes, update your DNS records in the following way:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Repeat this step each time after an IdM DNS server is installed.
								</p></div></rh-alert></li><li class="listitem">
								Add an <code class="literal">_ntp._udp</code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.
							</li></ol></div></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal command">ipa-server-install --external-ca</code> command can sometimes fail with the following error:
				</p><pre class="literallayout">ipa         : CRITICAL failed to configure ca instance Command '/usr/sbin/pkispawn -s CA -f /tmp/<span class="emphasis"><em>configuration_file</em></span>' returned non-zero exit status 1
Configuration of CA failed</pre><p>
					This failure occurs when the <code class="literal">*_proxy</code> environmental variables are set. For a solution of the problem, see <a class="link" href="#troubleshooting-external-ca-installation-fails" title="3.2. Troubleshooting: External CA installation fails">Troubleshooting: External CA installation fails</a>.
				</p></div></rh-alert></section><section class="section" id="troubleshooting-external-ca-installation-fails"><div class="titlepage"><div><div><h3 class="title">3.2. Troubleshooting: External CA installation fails</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal command">ipa-server-install --external-ca</code> command fails with the following error:
			</p><pre class="literallayout">ipa         : CRITICAL failed to configure ca instance Command '/usr/sbin/pkispawn -s CA -f /tmp/<span class="emphasis"><em>configuration_file</em></span>' returned non-zero exit status 1
Configuration of CA failed</pre><p>
				The <code class="literal command">env|grep proxy</code> command displays variables such as the following:
			</p><pre class="literallayout"># <span class="strong strong"><strong>env|grep proxy</strong></span>
http_proxy=http://example.com:8080
ftp_proxy=http://example.com:8080
https_proxy=http://example.com:8080</pre><h5 id="what_this_means">What this means:</h5><p>
				The <code class="literal">*_proxy</code> environmental variables are preventing the server from being installed.
			</p><h5 id="to_fix_the_problem">To fix the problem:</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the following shell script to unset the <code class="literal">*_proxy</code> environmental variables:
					</p><pre class="literallayout"># <span class="strong strong"><strong>for i in ftp http https; do unset ${i}_proxy; done</strong></span></pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal">pkidestroy</code> utility to remove the unsuccessful certificate authority (CA) subsystem installation:
					</p><pre class="literallayout"># <span class="strong strong"><strong>pkidestroy -s CA -i pki-tomcat; rm -rf /var/log/pki/pki-tomcat /etc/sysconfig/pki-tomcat /etc/sysconfig/pki/tomcat/pki-tomcat /var/lib/pki/pki-tomcat /etc/pki/pki-tomcat /root/ipa.csr</strong></span></pre></li><li class="listitem"><p class="simpara">
						Remove the failed Identity Management (IdM) server installation:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --uninstall</strong></span></pre></li><li class="listitem">
						Retry running <code class="literal command">ipa-server-install --external-ca</code>.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/tuning_performance_in_identity_management/failover-load-balancing-high-availability_tuning-performance-in-idm#failover-load-balancing-high-availability_tuning-performance-in-idm">Failover, load-balancing, and high-availability in IdM</a>
					</li></ul></div></section></section><section class="chapter" id="installing-an-ipa-server-without-a-ca_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Installing an IdM server: With integrated DNS, without a CA</h2></div></div></div><p class="_abstract _abstract">
			Installing a new Identity Management (IdM) server with integrated DNS has the following advantages:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					You can automate much of the maintenance and DNS record management using native IdM tools. For example, DNS SRV records are automatically created during the setup, and later on are automatically updated.
				</li><li class="listitem">
					You can configure global forwarders during the installation of the IdM server for a stable external internet connection. Global forwarders are also useful for trusts with Active Directory.
				</li><li class="listitem">
					You can set up a DNS reverse zone to prevent emails from your domain to be considered spam by email servers outside of the IdM domain.
				</li></ul></div><p>
			Installing IdM with integrated DNS has certain limitations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					IdM DNS is not meant to be used as a general-purpose DNS server. Some of the advanced DNS functions are not supported. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index#dns-services-available-in-an-ipa-server_planning-dns">DNS services available in an IdM server</a>.
				</li></ul></div><p>
			This chapter describes how you can install a new IdM server without a certificate authority (CA).
		</p><section class="section" id="certificates-required-to-install-ipa-server-no-ca_install-server-no-ca"><div class="titlepage"><div><div><h3 class="title">4.1. Certificates required to install an IdM server without a CA</h3></div></div></div><p class="_abstract _abstract">
				You need to provide the certificates required to install an Identity Management (IdM) server without a certificate authority (CA). By using the command-line options described, you can provide these certificates to the <code class="literal">ipa-server-install</code> utility.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					You cannot install a server or replica using self-signed third-party server certificates because the imported certificate files must contain the full CA certificate chain of the CA that issued the LDAP and Apache server certificates.
				</p></div></rh-alert><div class="variablelist"><dl class="variablelist"><dt><span class="term">The LDAP server certificate and private key</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">--dirsrv-cert-file</code> for the certificate and private key files for the LDAP server certificate
								</li><li class="listitem">
									<code class="literal option">--dirsrv-pin</code> for the password to access the private key in the files specified in <code class="literal option">--dirsrv-cert-file</code>
								</li></ul></div></dd><dt><span class="term">The Apache server certificate and private key</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">--http-cert-file</code> for the certificate and private key files for the Apache server certificate
								</li><li class="listitem">
									<code class="literal option">--http-pin</code> for the password to access the private key in the files specified in <code class="literal option">--http-cert-file</code>
								</li></ul></div></dd><dt><span class="term">The full CA certificate chain of the CA that issued the LDAP and Apache server certificates</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">--dirsrv-cert-file</code> and <code class="literal option">--http-cert-file</code> for the certificate files with the full CA certificate chain or a part of it
								</li></ul></div></dd></dl></div><p>
				You can provide the files specified in the <code class="literal option">--dirsrv-cert-file</code> and <code class="literal option">--http-cert-file</code> options in the following formats:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Privacy-Enhanced Mail (PEM) encoded certificate (RFC 7468). Note that the Identity Management installer accepts concatenated PEM-encoded objects.
					</li><li class="listitem">
						Distinguished Encoding Rules (DER)
					</li><li class="listitem">
						PKCS #7 certificate chain objects
					</li><li class="listitem">
						PKCS #8 private key objects
					</li><li class="listitem">
						PKCS #12 archives
					</li></ul></div><p>
				You can specify the <code class="literal option">--dirsrv-cert-file</code> and <code class="literal option">--http-cert-file</code> options multiple times to specify multiple files.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The certificate files to complete the full CA certificate chain (not needed in some environments)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">--ca-cert-file</code> for the file or files containing the CA certificate of the CA that issued the LDAP, Apache Server, and Kerberos KDC certificates. Use this option if the CA certificate is not present in the certificate files provided by the other options.
								</li></ul></div></dd></dl></div><p>
				The files provided using <code class="literal option">--dirsrv-cert-file</code> and <code class="literal option">--http-cert-file</code> combined with the file provided using <code class="literal option">--ca-cert-file</code> must contain the full CA certificate chain of the CA that issued the LDAP and Apache server certificates.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The Kerberos key distribution center (KDC) PKINIT certificate and private key</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									If you have a PKINIT certificate, use the following 2 options:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal option">--pkinit-cert-file</code> for the Kerberos KDC SSL certificate and private key
										</li><li class="listitem">
											<code class="literal option">--pkinit-pin</code> for the password to access the Kerberos KDC private key in the files specified in <code class="literal option">--pkinit-cert-file</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									If you do not have a PKINIT certificate and want to configure the IdM server with a local KDC with a self-signed certificate, use the following option:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal option">--no-pkinit</code> for disabling pkinit setup steps
										</li></ul></div></li></ul></div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For details on what the certificate file formats these options accept, see the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code>(1) man page.
					</li><li class="listitem">
						For details on PKINIT extensions required to create a RHEL IdM PKINIT certificate, see <a class="link" href="https://access.redhat.com/solutions/6280501">RHEL IdM PKINIT KDC certificate and extensions</a>.
					</li></ul></div></section><section class="section" id="installing-ipa-server-with-dns-interactive-install_install-server-no-ca"><div class="titlepage"><div><div><h3 class="title">4.2. Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				During the interactive installation using the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility and provide all the required certificates. For example:
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-server-install \</strong></span>
    <span class="strong strong"><strong>--http-cert-file <span class="emphasis"><em>/tmp/server.crt</em></span> \</strong></span>
    <span class="strong strong"><strong>--http-cert-file <span class="emphasis"><em>/tmp/server.key</em></span> \</strong></span>
    <span class="strong strong"><strong>--http-pin <span class="emphasis"><em>secret</em></span> \</strong></span>
    <span class="strong strong"><strong>--dirsrv-cert-file <span class="emphasis"><em>/tmp/server.crt</em></span> \</strong></span>
    <span class="strong strong"><strong>--dirsrv-cert-file <span class="emphasis"><em>/tmp/server.key</em></span> \</strong></span>
    <span class="strong strong"><strong>--dirsrv-pin <span class="emphasis"><em>secret</em></span> \</strong></span>
    <span class="strong strong"><strong>--ca-cert-file <span class="emphasis"><em>ca.crt</em></span></strong></span></pre><p class="simpara">
						See <a class="link" href="#certificates-required-to-install-ipa-server-no-ca_install-server-no-ca" title="4.1. Certificates required to install an IdM server without a CA">Certificates required to install an IdM server without a CA</a> for details on the provided certificates.
					</p></li><li class="listitem"><p class="simpara">
						The script prompts to configure an integrated DNS service. Enter <code class="literal">yes</code> or <code class="literal">no</code>. In this procedure, we are installing a server with integrated DNS.
					</p><pre class="screen">Do you want to configure integrated DNS (BIND)? [no]: <code class="literal">yes</code></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If you want to install a server without integrated DNS, the installation script will not prompt you for DNS configuration as described in the steps below. See <a class="link" href="#installing-an-ipa-server-without-integrated-dns_installing-identity-management" title="Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA">Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA</a> for details on the steps for installing a server without DNS.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						The script prompts for several required settings and offers recommended default values in brackets.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To accept a default value, press <kbd class="keycap">Enter</kbd>.
							</li><li class="listitem"><p class="simpara">
								To provide a custom value, enter the required value.
							</p><pre class="screen">Server host name [server.idm.example.com]:
Please confirm the domain name [idm.example.com]:
Please provide a realm name [IDM.EXAMPLE.COM]:</pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Plan these names carefully. You will not be able to change them after the installation is complete.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Enter the passwords for the Directory Server superuser (<code class="literal">cn=Directory Manager</code>) and for the Identity Management (IdM) administration system user account (<code class="literal">admin</code>).
					</p><pre class="screen">Directory Manager password:
IPA admin password:</pre></li><li class="listitem"><p class="simpara">
						The script prompts for per-server DNS forwarders.
					</p><pre class="screen">Do you want to configure DNS forwarders? [yes]:</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To configure per-server DNS forwarders, enter <code class="literal">yes</code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										For the forwarding policy default settings, see the <code class="literal option">--forward-policy</code> description in the <span class="strong strong"><strong>ipa-dns-install</strong></span>(1) man page.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								If you do not want to use DNS forwarding, enter <code class="literal">no</code>.
							</p><p class="simpara">
								With no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						The script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.
					</p><pre class="screen">Do you want to search for missing reverse zones? [yes]:</pre><p class="simpara">
						If you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.
					</p><pre class="screen">Do you want to create reverse zone for IP 192.0.2.1 [yes]:
Please specify the reverse zone name [2.0.192.in-addr.arpa.]:
Using reverse zone(s) 2.0.192.in-addr.arpa.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Using IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Enter <code class="literal">yes</code> to confirm the server configuration.
					</p><pre class="screen">Continue to configure the system with these values? [no]: <code class="literal">yes</code></pre></li><li class="listitem">
						The installation script now configures the server. Wait for the operation to complete.
					</li><li class="listitem"><p class="simpara">
						After the installation script completes, update your DNS records in the following way:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Repeat this step each time after an IdM DNS server is installed.
								</p></div></rh-alert></li><li class="listitem">
								Add an <code class="literal">_ntp._udp</code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.
							</li></ol></div></li></ol></div></section></section><section class="chapter" id="installing-an-ipa-server-without-integrated-dns_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA</h2></div></div></div><p class="_abstract _abstract">
			This chapter describes how you can install a new Identity Management (IdM) server without integrated DNS.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Red Hat strongly recommends installing IdM-integrated DNS for basic usage within the IdM deployment: When the IdM server also manages DNS, there is tight integration between DNS and native IdM tools which enables automating some of the DNS record management.
			</p><p>
				For more details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-your-dns-services-and-host-names-planning-identity-management">Planning your DNS services and host names</a>.
			</p></div></rh-alert><section class="section" id="installing-an-ipa-server-without-integrated-dns-interactive-installation_installing-an-ipa-server-without-integrated-dns"><div class="titlepage"><div><div><h3 class="title">5.1. Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				During the interactive installation using the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
			</p><p>
				This procedure installs a server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Without integrated DNS
					</li><li class="listitem">
						With integrated Identity Management (IdM) certificate authority (CA) as the root CA, which is the default CA configuration
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal">ipa-server-install</code> utility.
					</p><pre class="screen"># ipa-server-install</pre></li><li class="listitem"><p class="simpara">
						The script prompts to configure an integrated DNS service. Press <kbd class="keycap">Enter</kbd> to select the default <code class="literal">no</code> option.
					</p><pre class="screen">Do you want to configure integrated DNS (BIND)? [no]:</pre></li><li class="listitem"><p class="simpara">
						The script prompts for several required settings and offers recommended default values in brackets.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To accept a default value, press <kbd class="keycap">Enter</kbd>.
							</li><li class="listitem"><p class="simpara">
								To provide a custom value, enter the required value.
							</p><pre class="screen">Server host name [server.idm.example.com]:
Please confirm the domain name [idm.example.com]:
Please provide a realm name [IDM.EXAMPLE.COM]:</pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Plan these names carefully. You will not be able to change them after the installation is complete.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Enter the passwords for the Directory Server superuser (<code class="literal">cn=Directory Manager</code>) and for the IdM administration system user account (<code class="literal">admin</code>).
					</p><pre class="screen">Directory Manager password:
IPA admin password:</pre></li><li class="listitem"><p class="simpara">
						The script prompts for several required settings and offers recommended default values in brackets.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To accept a default value, press <kbd class="keycap">Enter</kbd>.
							</li><li class="listitem"><p class="simpara">
								To provide a custom value, enter the required value.
							</p><pre class="screen">NetBIOS domain name [EXAMPLE]:
Do you want to configure chrony with NTP server or pool address? [no]:</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Enter <code class="literal">yes</code> to confirm the server configuration.
					</p><pre class="screen">Continue to configure the system with these values? [no]: <code class="literal">yes</code></pre></li><li class="listitem">
						The installation script now configures the server. Wait for the operation to complete.
					</li><li class="listitem"><p class="simpara">
						The installation script produces a file with DNS resource records: <code class="literal">the /tmp/ipa.system.records.UFRPto.db</code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.
					</p><pre class="literallayout">...
Restarting the KDC
<span class="strong strong"><strong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db</strong></span>
<span class="strong strong"><strong>Restarting the web server</strong></span>
...</pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The server installation is not complete until you add the DNS records to the existing DNS servers.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For more information about the DNS resource records you must add to your DNS system, see <a class="link" href="#ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns" title="5.3. IdM DNS records for external DNS systems">IdM DNS records for external DNS systems</a>.
					</li></ul></div></section><section class="section" id="installing-an-ipa-server-without-integrated-dns-non-interactive-installation_installing-an-ipa-server-without-integrated-dns"><div class="titlepage"><div><div><h3 class="title">5.2. Non-interactive installation</h3></div></div></div><p class="_abstract _abstract">
				This procedure installs a server without integrated DNS or with integrated Identity Management (IdM) certificate authority (CA) as the root CA, which is the default CA configuration.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility with the options to supply all the required information. The minimum required options for non-interactive installation are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">--realm</code> to provide the Kerberos realm name
							</li><li class="listitem">
								<code class="literal">--ds-password</code> to provide the password for the Directory Manager (DM), the Directory Server super user
							</li><li class="listitem">
								<code class="literal">--admin-password</code> to provide the password for <code class="literal">admin</code>, the IdM administrator
							</li><li class="listitem">
								<code class="literal">--unattended</code> to let the installation process select default options for the host name and domain name
							</li></ul></div><p class="simpara">
						For example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --realm <span class="emphasis"><em>IDM.EXAMPLE.COM</em></span> --ds-password <span class="emphasis"><em>DM_password</em></span> --admin-password <span class="emphasis"><em>admin_password</em></span> --unattended</strong></span></pre></li><li class="listitem"><p class="simpara">
						The installation script produces a file with DNS resource records: <code class="literal">the /tmp/ipa.system.records.UFRPto.db</code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.
					</p><pre class="literallayout">...
Restarting the KDC
<span class="strong strong"><strong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db</strong></span>
<span class="strong strong"><strong>Restarting the web server</strong></span>
...</pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The server installation is not complete until you add the DNS records to the existing DNS servers.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For more information about the DNS resource records you must add to your DNS system, see <a class="link" href="#ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns" title="5.3. IdM DNS records for external DNS systems">IdM DNS records for external DNS systems</a>.
					</li><li class="listitem">
						For a complete list of options accepted by <span class="strong strong"><strong>ipa-server-install</strong></span>, run the <code class="literal">ipa-server-install --help</code> command.
					</li></ul></div></section><section class="section" id="ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns"><div class="titlepage"><div><div><h3 class="title">5.3. IdM DNS records for external DNS systems</h3></div></div></div><p class="_abstract _abstract">
				After installing an IdM server without integrated DNS, you must add LDAP and Kerberos DNS resource records for the IdM server to your external DNS system.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script generates a file containing the list of DNS resource records with a file name in the format <code class="literal">/tmp/ipa.system.records.<span class="emphasis"><em>&lt;random_characters&gt;</em></span>.db</code> and prints instructions to add those records:
			</p><pre class="literallayout">Please add records in this file to your DNS system: <span class="strong strong"><strong>/tmp/ipa.system.records.6zdjqxh3.db</strong></span></pre><p>
				This is an example of the contents of the file:
			</p><pre class="literallayout">_kerberos-master._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos-master._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos.example.com. 86400 IN TXT "EXAMPLE.COM"
_kpasswd._tcp.example.com. 86400 IN SRV 0 100 464 server.example.com.
_kpasswd._udp.example.com. 86400 IN SRV 0 100 464 server.example.com.
_ldap._tcp.example.com. 86400 IN SRV 0 100 389 server.example.com.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					After adding the LDAP and Kerberos DNS resource records for the IdM server to your DNS system, ensure that the DNS management tools have not added PTR records for <code class="literal">ipa-ca</code>. The presence of PTR records for <code class="literal">ipa-ca</code> in your DNS could cause subsequent IdM replica installations to fail.
				</p></div></rh-alert></section></section><section class="chapter" id="assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Installing an IdM server: Without integrated DNS, with an external CA as the root CA</h2></div></div></div><p class="_abstract _abstract">
			This chapter describes how you can install a new Identity Management (IdM) server, without integrated DNS, that uses an external certificate authority (CA) as the root CA.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Red Hat strongly recommends installing IdM-integrated DNS for basic usage within the IdM deployment: When the IdM server also manages DNS, there is tight integration between DNS and native IdM tools which enables automating some of the DNS record management.
			</p><p>
				For more details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-your-dns-services-and-host-names-planning-identity-management">Planning your DNS services and host names</a>.
			</p></div></rh-alert><section class="section" id="options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca"><div class="titlepage"><div><div><h3 class="title">6.1. Options used when installing an IdM CA with an external CA as the root CA</h3></div></div></div><p>
				You may want to install an Identity Management IdM certificate authority (CA) with an external CA as the root CA if one of the following conditions applies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You are installing a new IdM server or replica by using the <code class="literal">ipa-server-install</code> command.
					</li><li class="listitem">
						You are installing the CA component into an existing IdM server by using the <code class="literal">ipa-ca-install</code> command.
					</li></ul></div><p>
				You can use following options for both commands that you can use for creating a certificate signing request (CSR) during the installation of an IdM CA with an external CA as the root CA.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">--external-ca-type=<span class="emphasis"><em>TYPE</em></span></span></dt><dd>
							Type of the external CA. Possible values are <code class="literal"><span class="emphasis"><em>generic</em></span></code> and <code class="literal"><span class="emphasis"><em>ms-cs</em></span></code>. The default value is <code class="literal"><span class="emphasis"><em>generic</em></span></code>. Use <code class="literal"><span class="emphasis"><em>ms-cs</em></span></code> to include a template name required by Microsoft Certificate Services (MS CS) in the generated CSR. To use a non-default profile, use the <code class="literal">--external-ca-profile</code> option in conjunction with <code class="literal">--external-ca-type=ms-cs</code>.
						</dd><dt><span class="term">--external-ca-profile=<span class="emphasis"><em>PROFILE_SPEC</em></span></span></dt><dd><p class="simpara">
							Specify the certificate profile or template that you want the MS CS to apply when issuing the certificate for your IdM CA.
						</p><p class="simpara">
							Note that the <code class="literal">--external-ca-profile</code> option can only be used if <code class="literal">--external-ca-type</code> is ms-cs.
						</p><p class="simpara">
							You can identify the MS CS template in one of the following ways:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal"><span class="emphasis"><em>&lt;oid&gt;:&lt;majorVersion&gt;[:&lt;minorVersion&gt;]</em></span></code>. You can specify a certificate template by its object identifier (OID) and major version. You can optionally also specify the minor version.
								</li><li class="listitem">
									<code class="literal"><span class="emphasis"><em>&lt;name&gt;</em></span></code>. You can specify a certificate template by its name. The name cannot contain any <span class="strong strong"><strong>:</strong></span> characters and cannot be an OID, otherwise the OID-based template specifier syntax takes precedence.
								</li><li class="listitem">
									<code class="literal"><span class="emphasis"><em>default</em></span></code>. If you use this specifier, the template name <code class="literal"><span class="emphasis"><em>SubCA</em></span></code> is used.
								</li></ul></div></dd></dl></div><p>
				In certain scenarios, the Active Directory (AD) administrator can use the <code class="literal">Subordinate Certification Authority</code> (SCA) template, which is a built-in template in AD CS, to create a unique template to better suit the needs of the organization. The new template can, for example, have a customized validity period and customized extensions. The associated Object Identifier (OID) can be found in the AD <code class="literal">Certificates Template</code> console.
			</p><p>
				If the AD administrator has disabled the original, built-in template, you must specify the OID or name of the new template when requesting a certificate for your IdM CA. Ask your AD administrator to provide you with the name or OID of the new template.
			</p><p>
				If the original SCA AD CS template is still enabled, you can use it by specifying <code class="literal">--external-ca-type=ms-cs</code> without additionally using the <code class="literal">--external-ca-profile</code> option. In this case, the <code class="literal">subCA</code> external CA profile is used, which is the default IdM template corresponding to the SCA AD CS template.
			</p></section><section class="section" id="proc_installing-an-ipa-server-without-dns-with-external-ca-interactive-installation_assembly_installing-an-ipa-server-without-dns-with-external-ca"><div class="titlepage"><div><div><h3 class="title">6.2. Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				During the interactive installation using the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
			</p><p>
				Follow this procedure to install a server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Without integrated DNS
					</li><li class="listitem">
						With an external certificate authority (CA) as the root CA
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have determined the type of the external CA to specify with the <code class="literal option">--external-ca-type</code> option. See the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code>(1) man page for details.
					</li><li class="listitem"><p class="simpara">
						If you are using a Microsoft Certificate Services certificate authority (MS CS CA) as your external CA: you have determined the certificate profile or template to specify with the <code class="literal">--external-ca-profile</code> option. By default, the <code class="literal">SubCA</code> template is used.
					</p><p class="simpara">
						For more information about the <code class="literal option">--external-ca-type</code> and <code class="literal option">--external-ca-profile</code> options, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca">Options used when installing an IdM CA with an external CA as the root CA</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <span class="strong strong"><strong>ipa-server-install</strong></span> utility with the <code class="literal">--external-ca</code> option.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you are using the Microsoft Certificate Services (MS CS) CA, also use the <code class="literal">--external-ca-type</code> option and, optionally, the <code class="literal">--external-ca-profile</code> option:
							</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-server-install --external-ca --external-ca-type=ms-cs --external-ca-profile=<span class="emphasis"><em>&lt;oid&gt;/&lt;name&gt;/default</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								If you are not using MS CS to generate the signing certificate for your IdM CA, no other option may be necessary:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --external-ca</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						The script prompts to configure an integrated DNS service. Press <kbd class="keycap">Enter</kbd> to select the default <code class="literal">no</code> option.
					</p><pre class="literallayout">Do you want to configure integrated DNS (BIND)? [no]:</pre></li><li class="listitem"><p class="simpara">
						The script prompts for several required settings and offers recommended default values in brackets.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To accept a default value, press <kbd class="keycap">Enter</kbd>.
							</li><li class="listitem"><p class="simpara">
								To provide a custom value, enter the required value.
							</p><pre class="literallayout">Server host name [<code class="literal"><span class="emphasis"><em>server.idm.example.com</em></span></code>]:
Please confirm the domain name [<code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>]:
Please provide a realm name [<code class="literal"><span class="emphasis"><em>IDM.EXAMPLE.COM</em></span></code>]:</pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Plan these names carefully. You will not be able to change them after the installation is complete.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Enter the passwords for the Directory Server superuser (<code class="literal">cn=Directory Manager</code>) and for the IdM administration system user account (<code class="literal">admin</code>).
					</p><pre class="literallayout">Directory Manager password:
IPA admin password:</pre></li><li class="listitem"><p class="simpara">
						Enter <code class="literal">yes</code> to confirm the server configuration.
					</p><pre class="literallayout">Continue to configure the system with these values? [no]: <code class="literal">yes</code></pre></li><li class="listitem"><p class="simpara">
						During the configuration of the Certificate System instance, the utility prints the location of the certificate signing request (CSR): <code class="literal">/root/ipa.csr</code>:
					</p><pre class="literallayout">...

Configuring certificate server (pki-tomcatd): Estimated time 3 minutes 30 seconds
  [1/8]: creating certificate server user
  [2/8]: configuring certificate server instance
The next step is to get /root/ipa.csr signed by your CA and re-run /sbin/ipa-server-install as:
/sbin/ipa-server-install --external-cert-file=/path/to/signed_certificate --external-cert-file=/path/to/external_ca_certificate</pre><p class="simpara">
						When this happens:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Submit the CSR located in <code class="literal">/root/ipa.csr</code> to the external CA. The process differs depending on the service to be used as the external CA.
							</li><li class="listitem"><p class="simpara">
								Retrieve the issued certificate and the CA certificate chain for the issuing CA in a base 64-encoded blob (either a PEM file or a Base_64 certificate from a Windows CA). Again, the process differs for every certificate service. Usually, a download link on a web page or in the notification email allows the administrator to download all the required certificates.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Be sure to get the full certificate chain for the CA, not just the CA certificate.
								</p></div></rh-alert></li><li class="listitem"><p class="simpara">
								Run <code class="literal">ipa-server-install</code> again, this time specifying the locations and names of the newly-issued CA certificate and the CA chain files. For example:
							</p><pre class="literallayout"># ipa-server-install --external-cert-file=<span class="emphasis"><em>/tmp/servercert20170601.pem</em></span> --external-cert-file=<span class="emphasis"><em>/tmp/cacert.pem</em></span></pre></li></ol></div></li><li class="listitem">
						The installation script now configures the server. Wait for the operation to complete.
					</li><li class="listitem"><p class="simpara">
						The installation script produces a file with DNS resource records: <code class="literal">the /tmp/ipa.system.records.UFRPto.db</code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.
					</p><pre class="literallayout">...
Restarting the KDC
<span class="strong strong"><strong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db</strong></span>
<span class="strong strong"><strong>Restarting the web server</strong></span>
...</pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The server installation is not complete until you add the DNS records to the existing DNS servers.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For more information about the DNS resource records you must add to your DNS system, see <a class="link" href="#ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca" title="6.4. IdM DNS records for external DNS systems">IdM DNS records for external DNS systems</a>.
					</li><li class="listitem"><p class="simpara">
						The <code class="literal command">ipa-server-install --external-ca</code> command can sometimes fail with the following error:
					</p><pre class="literallayout">ipa         : CRITICAL failed to configure ca instance Command '/usr/sbin/pkispawn -s CA -f /tmp/pass:quotes[<span class="emphasis"><em>configuration_file</em></span>]' returned non-zero exit status 1
Configuration of CA failed</pre><p class="simpara">
						This failure occurs when the <code class="literal">*_proxy</code> environmental variables are set. For a solution of the problem, see <a class="link" href="#troubleshooting-external-ca-installation-fails" title="3.2. Troubleshooting: External CA installation fails">Troubleshooting: External CA installation fails</a>.
					</p></li></ul></div></section><section class="section" id="proc_installing-an-ipa-server-non-interactive-installation-without-dns-with-external-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca"><div class="titlepage"><div><div><h3 class="title">6.3. Non-interactive installation</h3></div></div></div><p class="_abstract _abstract">
				This procedure installs a server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Without integrated DNS
					</li><li class="listitem">
						With an external certificate authority (CA) as the root CA
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">ipa-server-install</code> installation script creates a log file at <code class="literal">/var/log/ipaserver-install.log</code>. If the installation fails, the log can help you identify the problem.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have determined the type of the external CA to specify with the <code class="literal option">--external-ca-type</code> option. See the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code>(1) man page for details.
					</li><li class="listitem"><p class="simpara">
						If you are using a Microsoft Certificate Services certificate authority (MS CS CA) as your external CA: you have determined the certificate profile or template to specify with the <code class="literal">--external-ca-profile</code> option. By default, the <code class="literal">SubCA</code> template is used.
					</p><p class="simpara">
						For more information about the <code class="literal option">--external-ca-type</code> and <code class="literal option">--external-ca-profile</code> options, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca">Options used when installing an IdM CA with an external CA as the root CA</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal"><span class="strong strong"><strong>ipa-server-install</strong></span></code> utility with the options to supply all the required information. The minimum required options for non-interactive installation of an IdM server with an external CA as the root CA are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">--external-ca</code> to specify an external CA is the root CA
							</li><li class="listitem">
								<code class="literal">--realm</code> to provide the Kerberos realm name
							</li><li class="listitem">
								<code class="literal">--ds-password</code> to provide the password for the Directory Manager (DM), the Directory Server super user
							</li><li class="listitem">
								<code class="literal">--admin-password</code> to provide the password for <code class="literal">admin</code>, the IdM administrator
							</li><li class="listitem"><p class="simpara">
								<code class="literal">--unattended</code> to let the installation process select default options for the host name and domain name
							</p><p class="simpara">
								For example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-server-install --external-ca --realm <span class="emphasis"><em>IDM.EXAMPLE.COM</em></span> --ds-password <span class="emphasis"><em>DM_password</em></span> --admin-password <span class="emphasis"><em>admin_password</em></span> --unattended</strong></span></pre></li></ul></div><p class="simpara">
						If you are using a Microsoft Certificate Services (MS CS) CA, also use the <code class="literal">--external-ca-type</code> option and, optionally, the <code class="literal">--external-ca-profile</code> option. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca">Options used when installing an IdM CA with an external CA as the root CA</a>.
					</p></li><li class="listitem"><p class="simpara">
						During the configuration of the Certificate System instance, the utility prints the location of the certificate signing request (CSR): <code class="literal">/root/ipa.csr</code>:
					</p><pre class="literallayout">...

Configuring certificate server (pki-tomcatd). Estimated time: 3 minutes
  [1/11]: configuring certificate server instance
The next step is to get /root/ipa.csr signed by your CA and re-run /usr/sbin/ipa-server-install as:
/usr/sbin/ipa-server-install --external-cert-file=/path/to/signed_certificate --external-cert-file=/path/to/external_ca_certificate
The ipa-server-install command was successful</pre><p class="simpara">
						When this happens:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Submit the CSR located in <code class="literal">/root/ipa.csr</code> to the external CA. The process differs depending on the service to be used as the external CA.
							</li><li class="listitem"><p class="simpara">
								Retrieve the issued certificate and the CA certificate chain for the issuing CA in a base 64-encoded blob (either a PEM file or a Base_64 certificate from a Windows CA). Again, the process differs for every certificate service. Usually, a download link on a web page or in the notification email allows the administrator to download all the required certificates.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									Be sure to get the full certificate chain for the CA, not just the CA certificate.
								</p></div></rh-alert></li><li class="listitem"><p class="simpara">
								Run <code class="literal">ipa-server-install</code> again, this time specifying the locations and names of the newly-issued CA certificate and the CA chain files. For example:
							</p><pre class="literallayout"># ipa-server-install --external-cert-file=<span class="emphasis"><em>/tmp/servercert20170601.pem</em></span> --external-cert-file=<span class="emphasis"><em>/tmp/cacert.pem</em></span> --realm <span class="emphasis"><em>IDM.EXAMPLE.COM</em></span> --ds-password <span class="emphasis"><em>DM_password</em></span> --admin-password <span class="emphasis"><em>admin_password</em></span> --unattended</pre></li></ol></div></li><li class="listitem">
						The installation script now configures the server. Wait for the operation to complete.
					</li><li class="listitem"><p class="simpara">
						The installation script produces a file with DNS resource records: the <code class="literal">/tmp/ipa.system.records.UFRPto.db</code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.
					</p><pre class="literallayout">...
Restarting the KDC
<span class="strong strong"><strong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db</strong></span>
<span class="strong strong"><strong>Restarting the web server</strong></span>
...</pre></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The server installation is not complete until you add the DNS records to the existing DNS servers.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For more information about the DNS resource records you must add to your DNS system, see <a class="link" href="#ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca" title="6.4. IdM DNS records for external DNS systems">IdM DNS records for external DNS systems</a>.
					</li></ul></div></section><section class="section" id="ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca"><div class="titlepage"><div><div><h3 class="title">6.4. IdM DNS records for external DNS systems</h3></div></div></div><p class="_abstract _abstract">
				After installing an IdM server without integrated DNS, you must add LDAP and Kerberos DNS resource records for the IdM server to your external DNS system.
			</p><p>
				The <code class="literal">ipa-server-install</code> installation script generates a file containing the list of DNS resource records with a file name in the format <code class="literal">/tmp/ipa.system.records.<span class="emphasis"><em>&lt;random_characters&gt;</em></span>.db</code> and prints instructions to add those records:
			</p><pre class="literallayout">Please add records in this file to your DNS system: <span class="strong strong"><strong>/tmp/ipa.system.records.6zdjqxh3.db</strong></span></pre><p>
				This is an example of the contents of the file:
			</p><pre class="literallayout">_kerberos-master._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos-master._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.
_kerberos.example.com. 86400 IN TXT "EXAMPLE.COM"
_kpasswd._tcp.example.com. 86400 IN SRV 0 100 464 server.example.com.
_kpasswd._udp.example.com. 86400 IN SRV 0 100 464 server.example.com.
_ldap._tcp.example.com. 86400 IN SRV 0 100 389 server.example.com.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					After adding the LDAP and Kerberos DNS resource records for the IdM server to your DNS system, ensure that the DNS management tools have not added PTR records for <code class="literal">ipa-ca</code>. The presence of PTR records for <code class="literal">ipa-ca</code> in your DNS could cause subsequent IdM replica installations to fail.
				</p></div></rh-alert></section></section><section class="chapter" id="proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Installing an IdM server or replica with custom database settings from an LDIF file</h2></div></div></div><p class="_abstract _abstract">
			You can install an IdM server and IdM replicas with custom settings for the Directory Server database. The following procedure shows you how to create an LDAP Data Interchange Format (LDIF) file with database settings, and how to pass those settings to the IdM server and replica installation commands.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have determined custom Directory Server settings that improve the performance of your IdM environment. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/tuning_performance_in_identity_management/adjusting-idm-directory-server-performance_tuning-performance-in-idm">Adjusting IdM Directory Server performance</a>.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Create a text file in LDIF format with your custom database settings. Separate LDAP attribute modifications with a dash (-). This example sets non-default values for the idle timeout and maximum file descriptors.
				</p><pre class="literallayout">dn: cn=config
changetype: modify
replace: nsslapd-idletimeout
<span class="strong strong"><strong>nsslapd-idletimeout=1800</strong></span>
-
replace: nsslapd-maxdescriptors
<span class="strong strong"><strong>nsslapd-maxdescriptors=8192</strong></span></pre></li><li class="listitem"><p class="simpara">
					Use the <code class="literal">--dirsrv-config-file</code> parameter to pass the LDIF file to the installation script.
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							To install an IdM server:
						</p><pre class="literallayout"># ipa-server-install --dirsrv-config-file <span class="emphasis"><em>filename.ldif</em></span></pre></li><li class="listitem"><p class="simpara">
							To install an IdM replica:
						</p><pre class="literallayout"># ipa-replica-install --dirsrv-config-file <span class="emphasis"><em>filename.ldif</em></span></pre></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management#ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation">Options for the <code class="literal">ipa-server-install</code> and <code class="literal">ipa-replica-install</code> commands</a>
				</li></ul></div></section><section class="chapter" id="troubleshooting-idm-server-installation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Troubleshooting IdM server installation</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe how to gather information about a failing IdM server installation, and how to resolve common installation issues.
		</p><section class="section" id="reviewing-idm-server-installation-error-logs_troubleshooting-idm-server-installation"><div class="titlepage"><div><div><h3 class="title">8.1. Reviewing IdM server installation error logs</h3></div></div></div><p class="_abstract _abstract">
				When you install an Identity Management (IdM) server, debugging information is appended to the following log files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal filename">/var/log/ipaserver-install.log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/httpd/error_log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/access</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/errors</code>
					</li></ul></div><p>
				The last lines of the log files report success or failure, and the <code class="literal">ERROR</code> and <code class="literal">DEBUG</code> entries provide additional context.
			</p><p>
				To troubleshoot a failing IdM server installation, review the errors at the end of the log files and use this information to resolve any corresponding issues.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges to display the contents of IdM log files.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">tail</code> command to display the last lines of a log file. The following example displays the last 10 lines of <code class="literal filename">/var/log/ipaserver-install.log</code>.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo tail -n 10 /var/log/ipaserver-install.log</strong></span>
[sudo] password for user:
value = gen.send(prev_value)
File "/usr/lib/python3.6/site-packages/ipapython/install/common.py", line 65, in _install
for unused in self._installer(self.parent):
File "/usr/lib/python3.6/site-packages/ipaserver/install/server/<span class="emphasis"><em>init</em></span>.py", line 564, in main
master_install(self)
File "/usr/lib/python3.6/site-packages/ipaserver/install/server/install.py", line 291, in decorated
raise ScriptError()

2020-05-27T22:59:41Z DEBUG The ipa-server-install command failed, exception: ScriptError:
2020-05-27T22:59:41Z ERROR The ipa-server-install command failed. See /var/log/ipaserver-install.log for more information</pre></li><li class="listitem"><p class="simpara">
						To review a log file interactively, open the end of the log file using the <code class="literal">less</code> utility and use the <kbd class="keycap">↑</kbd> and <kbd class="keycap">↓</kbd> arrow keys to navigate. The following example opens the <code class="literal filename">/var/log/ipaserver-install.log</code> file interactively.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/ipaserver-install.log</strong></span></pre></li><li class="listitem"><p class="simpara">
						Gather additional troubleshooting information by repeating this review process with the remaining log files.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/httpd/error_log</strong></span>

[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/access</strong></span>

[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/errors</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are unable to resolve a failing IdM server installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="reviewing-idm-ca-installation-errors-idm-server-installation"><div class="titlepage"><div><div><h3 class="title">8.2. Reviewing IdM CA installation errors</h3></div></div></div><p class="_abstract _abstract">
				When you install the Certificate Authority (CA) service on an Identity Management (IdM) server, debugging information is appended to the following locations (in order of recommended priority):
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559994860816" scope="col">Location</th><th align="left" valign="top" id="idm140559995230080" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559994860816"> <p>
								<code class="literal filename">/var/log/pki/pki-ca-spawn.<span class="emphasis"><em>$TIME_OF_INSTALLATION</em></span>.log</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559995230080"> <p>
								High-level issues and Python traces for the <code class="literal">pkispawn</code> installation process
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994860816"> <p>
								<code class="literal">journalctl -u pki-tomcatd@pki-tomcat</code> output
							</p>
							 </td><td align="left" valign="top" headers="idm140559995230080"> <p>
								Errors from the <code class="literal">pki-tomcatd@pki-tomcat</code> service
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994860816"> <p>
								<code class="literal filename">/var/log/pki/pki-tomcat/ca/debug.<span class="emphasis"><em>$DATE</em></span>.log</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559995230080"> <p>
								Large JAVA stacktraces of activity in the core of the Public Key Infrastructure (PKI) product
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994860816"> <p>
								<code class="literal filename">/var/log/pki/pki-tomcat/ca/signedAudit/ca_audit</code> log file
							</p>
							 </td><td align="left" valign="top" headers="idm140559995230080"> <p>
								Audit log of the PKI product
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559994860816"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal filename">/var/log/pki/pki-tomcat/ca/system</code>
									</li><li class="listitem">
										<code class="literal filename">/var/log/pki/pki-tomcat/ca/transactions</code>
									</li><li class="listitem">
										<code class="literal filename">/var/log/pki/pki-tomcat/catalina.<span class="emphasis"><em>$DATE</em></span>.log</code>
									</li></ul></div>
							 </td><td align="left" valign="top" headers="idm140559995230080"> <p>
								Low-level debug data of certificate operations for service principals, hosts, and other entities that use certificates
							</p>
							 </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If a full IdM server installation fails while installing the optional CA component, no details about the CA are logged; a message is logged in the <code class="literal">/var/log/ipaserver-install.log</code> file indicating that the overall installation process failed. Red Hat recommends reviewing the log files listed above for details specific to the CA installation failure.
				</p><p>
					The only exception to this behavior is when you are installing the CA service and the root CA is an external CA. If there is an issue with the certificate from the external CA, errors are logged in <code class="literal">/var/log/ipaserver-install.log</code>.
				</p></div></rh-alert><p>
				To troubleshoot a failing IdM CA installation, review the errors at the end of these log files and use this information to resolve any corresponding issues.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges to display the contents of IdM log files.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To review a log file interactively, open the end of the log file using the <code class="literal">less</code> utility and use the <kbd class="keycap">↑</kbd> and <kbd class="keycap">↓</kbd> arrow keys to navigate, while searching for <code class="literal">ScriptError</code> entries. The following example opens <code class="literal filename">/var/log/pki/pki-ca-spawn.<span class="emphasis"><em>$TIME_OF_INSTALLATION</em></span>.log</code>.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/pki/pki-ca-spawn.<span class="emphasis"><em>20200527185902</em></span>.log</strong></span></pre></li><li class="listitem">
						Gather additional troubleshooting information by repeating this review process with all the log files listed above.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are unable to resolve a failing IdM server installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="removing-a-partial-idm-server-installation_troubleshooting-idm-server-installation"><div class="titlepage"><div><div><h3 class="title">8.3. Removing a partial IdM server installation</h3></div></div></div><p class="_abstract _abstract">
				If an IdM server installation fails, some configuration files can be left behind. Additional attempts to install the IdM server fail and the installation script reports that IPA is already configured.
			</p><div class="formalpara"><p class="title"><strong>Example system with existing partial IdM configuration</strong></p><p>

</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-server-install</strong></span>

The log file for this installation can be found in /var/log/ipaserver-install.log
<span class="strong strong"><strong>IPA server is already configured on this system.</strong></span>
If you want to reinstall the IPA server, <span class="strong strong"><strong>please uninstall it first using 'ipa-server-install --uninstall'</strong></span>.
The ipa-server-install command failed. See /var/log/ipaserver-install.log for more information</pre>

				<p></p></div><p>
				To resolve this issue, uninstall the partial IdM server configuration and retry the installation process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Uninstall the IdM server software from the host you are trying to configure as an IdM server.
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-server-install --uninstall</strong></span></pre></li><li class="listitem"><p class="simpara">
						If you continue to experience difficulty installing an IdM server because of repeated failed installations, reinstall the operating system.
					</p><p class="simpara">
						One of the requirements for installing an IdM server is a clean system without any customization. Failed installations may have compromised the integrity of the host by unexpectedly modifying system files.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For additional details on uninstalling an IdM server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_identity_management/uninstalling-an-ipa-server_installing-identity-management">Uninstalling an IdM server</a>.
					</li><li class="listitem">
						If installation attempts fail after repeated uninstallation attempts, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section _additional-resources" id="additional_resources_2"><div class="titlepage"><div><div><h3 class="title">8.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#troubleshooting-idm-replica-installation_installing-identity-management" title="Chapter 21. Troubleshooting IdM replica installation">Troubleshooting IdM replica installation</a>
					</li><li class="listitem">
						<a class="link" href="#troubleshooting-idm-client-installation_installing-identity-management" title="Chapter 15. Troubleshooting IdM client installation">Troubleshooting IdM client installation</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#backing-up-and-restoring-idm_planning-identity-management">Backing up and restoring IdM</a>
					</li></ul></div></section></section><section class="chapter" id="uninstalling-an-ipa-server_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Uninstalling an IdM server</h2></div></div></div><p>
			Follow this procedure to uninstall an Identity Management (IdM) server named <span class="strong strong"><strong>server123.idm.example.com</strong></span> (server123). In the procedure, you first ensure that other servers are running critical services and that the topology will continue to be redundant before performing the uninstallation.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have <code class="literal">root</code> access to server123.
				</li><li class="listitem">
					You have an IdM administrator’s credentials.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					If your IdM environment uses integrated DNS, ensure that server123 is not the only <code class="literal">enabled</code> DNS server:
				</p><pre class="literallayout">[root@server123 ~]# <span class="strong strong"><strong>ipa server-role-find --role 'DNS server'</strong></span>
----------------------
2 server roles matched
----------------------
  <span class="strong strong"><strong>Server name: server456.idm.example.com</strong></span>
  Role name: DNS server
  <span class="strong strong"><strong>Role status: enabled</strong></span>
[...]
----------------------------
Number of entries returned 2
----------------------------</pre><p class="simpara">
					If server123 is the only remaining DNS server in the topology, add the DNS server role to another IdM server. For more information, see the <code class="literal">ipa-dns-install(1)</code> man page on your system.
				</p></li><li class="listitem"><p class="simpara">
					If your IdM environment uses an integrated certificate authority (CA):
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Ensure that server123 is not the only <code class="literal">enabled</code> CA server:
						</p><pre class="literallayout">[root@server123 ~]# <span class="strong strong"><strong>ipa server-role-find --role 'CA server'</strong></span>
----------------------
2 server roles matched
----------------------
  Server name: server123.idm.example.com
  Role name: CA server
  Role status: enabled

  <span class="strong strong"><strong>Server name: r8server.idm.example.com</strong></span>
  Role name: CA server
  <span class="strong strong"><strong>Role status: enabled</strong></span>
----------------------------
Number of entries returned 2
----------------------------</pre><p class="simpara">
							If server123 is the only remaining CA server in the topology, add the CA server role to another IdM server. For more information, see the <code class="literal">ipa-ca-install(1)</code> man page on your system.
						</p></li><li class="listitem"><p class="simpara">
							If you have enabled vaults in your IdM environment, ensure that server123.idm.example.com is not the only <code class="literal">enabled</code> Key Recovery Authority (KRA) server:
						</p><pre class="literallayout">[root@server123 ~]# <span class="strong strong"><strong>ipa server-role-find --role 'KRA server'</strong></span>
----------------------
2 server roles matched
----------------------
  Server name: server123.idm.example.com
  Role name: KRA server
  Role status: enabled

  <span class="strong strong"><strong>Server name: r8server.idm.example.com</strong></span>
  Role name: KRA server
  <span class="strong strong"><strong>Role status: enabled</strong></span>
----------------------------
Number of entries returned 2
----------------------------</pre><p class="simpara">
							If server123 is the only remaining KRA server in the topology, add the KRA server role to another IdM server. For more information, see <code class="literal">man ipa-kra-install(1)</code>.
						</p></li><li class="listitem"><p class="simpara">
							Ensure that server123.idm.example.com is not the CA renewal server:
						</p><pre class="literallayout">[root@server123 ~]# <span class="strong strong"><strong>ipa config-show | grep 'CA renewal'</strong></span>
  <span class="strong strong"><strong>IPA CA renewal master: r8server.idm.example.com</strong></span></pre><p class="simpara">
							If server123 is the CA renewal server, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#changing-ca-renewal_ipa-ca-renewal">Changing and resetting IdM CA renewal server</a> for more information about how to move the CA renewal server role to another server.
						</p></li><li class="listitem"><p class="simpara">
							Ensure that server123.idm.example.com is not the current certificate revocation list (CRL) publisher:
						</p><pre class="literallayout">[root@server123 ~]# <span class="strong strong"><strong>ipa-crlgen-manage status</strong></span>
<span class="strong strong"><strong>CRL generation: disabled</strong></span></pre><p class="simpara">
							If the output shows that CRL generation is enabled on server123, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/generating-crl-on-the-idm-ca-server_managing-certificates-in-idm">Generating CRL on an IdM CA server</a> for more information about how to move the CRL publisher role to another server.
						</p></li></ol></div></li><li class="listitem"><p class="simpara">
					Connect to another IdM server in the topology:
				</p><pre class="literallayout">$ <span class="strong strong"><strong>ssh idm_user@server456</strong></span></pre></li><li class="listitem"><p class="simpara">
					On the server, obtain the IdM administrator’s credentials:
				</p><pre class="literallayout">[idm_user@server456 ~]$ <span class="strong strong"><strong>kinit admin</strong></span></pre></li><li class="listitem"><p class="simpara">
					View the DNA ID ranges assigned to the servers in the topology:
				</p><pre class="literallayout">[idm_user@server456 ~]$ <span class="strong strong"><strong>ipa-replica-manage dnarange-show</strong></span>
server123.idm.example.com: 1001-1500
server456.idm.example.com: 1501-2000
[...]</pre><p class="simpara">
					The output shows that a DNA ID range is assigned to both server123 and server456.
				</p></li><li class="listitem"><p class="simpara">
					If server123 is the only IdM server in the topology with a DNA ID range assigned, create a test IdM user on server456 to ensure that the server has a DNA ID range assigned:
				</p><pre class="literallayout">[idm_user@server456 ~]$ <span class="strong strong"><strong>ipa user-add test_idm_user</strong></span></pre></li><li class="listitem"><p class="simpara">
					Delete server123.idm.example.com from the topology:
				</p><pre class="literallayout">[idm_user@server456 ~]$ <span class="strong strong"><strong>ipa server-del server123.idm.example.com</strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						If deleting server123 would lead to a disconnected topology, the script warns you about it. For information about how to create a replication agreement between the remaining replicas so that the deletion can proceed, see <a class="link" href="#proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology" title="23.5. Setting up replication between two servers using the CLI">Setting up replication between two servers using the CLI</a>.
					</p></div></rh-alert><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						Running the <code class="literal">ipa server-del</code> command removes all replication data and agreements related to server123 for both the <code class="literal">domain</code> and <code class="literal">ca</code> suffixes. This is in contrast to Domain Level 0 IdM topologies, where you initially had to remove these data by using the <code class="literal">ipa-replica-manage del <span class="emphasis"><em>server123</em></span></code> command. Domain Level 0 IdM topologies are those running on RHEL 7.2 and earlier. Use the <code class="literal">ipa domainlevel-get</code> command to view the current domain level.
					</p></div></rh-alert></li><li class="listitem"><p class="simpara">
					Return to server123.idm.example.com and uninstall the existing IdM installation:
				</p><pre class="literallayout">[root@server123 ~]# <span class="strong strong"><strong>ipa-server-install --uninstall</strong></span>
...
Are you sure you want to continue with the uninstall procedure? [no]: true</pre></li><li class="listitem">
					Ensure that all name server (NS) DNS records pointing to server123.idm.example.com are deleted from your DNS zones. This applies regardless of whether you use integrated DNS managed by IdM or external DNS. For more information about how to delete DNS records from IdM, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/working_with_dns_in_identity_management/managing-dns-records-in-idm_working-with-dns-in-identity-management#deleting-dns-records-in-the-idm-cli_managing-dns-records-in-idm">Deleting DNS records in the IdM CLI</a>.
				</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/linux_domain_identity_authentication_and_policy_guide/domain-level">Displaying and raising the domain level</a> in RHEL 7 documentation
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/planning-the-replica-topology_planning-identity-management">Planning the replica topology</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#ca-renewal-server_ipa-ca-renewal">Explanation of IdM CA renewal server</a><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/generating-crl-on-the-idm-ca-server_managing-certificates-in-idm">Generating CRL on an IdM CA server</a>
				</li></ul></div></section><section class="chapter" id="renaming-an-idm-server_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Renaming an IdM server</h2></div></div></div><p class="_abstract _abstract">
			You cannot change the host name of an existing Identity Management (IdM) server. However, you can replace the server with a replica of a different name.
		</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Install a new replica that will replace the existing server, ensuring the replica has the required host name and IP address. For details, see <a class="link" href="#installing-an-ipa-replica_installing-identity-management" title="Chapter 20. Installing an IdM replica">Installing an IdM replica</a>.
				</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						If the server you are uninstalling is the certificate revocation list (CRL) publisher server, make another server the CRL publisher server before proceeding.
					</p><p>
						For details on how this is done in the context of a migration procedure, see the following sections:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/migrating_to_identity_management_on_rhel_9/assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers_migrating-to-idm-on-rhel-9#stopping-crl-generation-on-rhel8-IdM-CA-server_assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers">Stopping CRL generation on a RHEL 8 IdM CA server</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/migrating_to_identity_management_on_rhel_9/assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers_migrating-to-idm-on-rhel-9#starting-crl-generation-on-the-new-rhel-9-idm-ca-server_assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers">Starting CRL generation on the new RHEL 9 IdM CA server</a>
							</li></ul></div></div></rh-alert></li><li class="listitem"><p class="simpara">
					Stop the existing IdM server instance.
				</p><pre class="literallayout">[root@old_server ~]# <span class="strong strong"><strong>ipactl stop</strong></span></pre></li><li class="listitem">
					Uninstall the existing server as described in <a class="link" href="#uninstalling-an-ipa-server_installing-identity-management" title="Chapter 9. Uninstalling an IdM server">Uninstalling an IdM server</a>.
				</li></ol></div></section><section class="chapter" id="update-downgrade-ipa_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Updating and downgrading IdM</h2></div></div></div><section class="section" id="updating_idm_packages"><div class="titlepage"><div><div><h3 class="title">11.1. Updating IdM packages</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">dnf</code> utility to update the Identity Management (IdM) packages on the system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure you have applied all previously released errata relevant to the RHEL system. For more information, see the <a class="link" href="https://access.redhat.com/articles/11258">How do I apply package updates to my RHEL system?</a> KCS article.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Select one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								To update all IdM packages that are relevant for your profile and that have updates available:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf upgrade ipa-</strong></span>*</pre></li><li class="listitem"><p class="simpara">
								To install or update packages to match the latest version available for your profile from any enabled repository:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf distro-sync ipa-</strong></span>*</pre></li></ul></div></li></ul></div><p>
				After you update the IdM packages on at least one server, all other servers in the topology receive the updated schema, even if you do not update their packages. This ensures that any new entries which use the new schema can be replicated among the other servers.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					When updating multiple IdM servers, wait at least 10 minutes after updating one server before updating another server. However, the actual time required for a server’s successful update depends on the topology deployed, the latency of the connections, and the number of changes generated by the update.
				</p><p>
					When two or more servers are updated simultaneously or with only short intervals between the upgrades, there is not enough time to replicate the post-upgrade data changes throughout the topology, which can result in conflicting replication events.
				</p></div></rh-alert><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Red Hat recommends upgrading to the next version only. For example, if you want to upgrade to IdM for RHEL 9.4, we recommend upgrading from IdM for RHEL 9.3. Upgrading from earlier versions can cause problems.
				</p></div></rh-alert></section><section class="section" id="downgrading-idm-packages_installing-identity-management"><div class="titlepage"><div><div><h3 class="title">11.2. Downgrading IdM packages</h3></div></div></div><p>
				Red Hat does not support downgrading Identity Management.
			</p></section><section class="section _additional-resources" id="additional_resources_3"><div class="titlepage"><div><div><h3 class="title">11.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">dnf(8)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="preparing-the-system-for-ipa-client-installation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Preparing the system for IdM client installation</h2></div></div></div><p>
			Ensure your system meets the following conditions before you install an Identity Management (IdM) client.
		</p><section class="section" id="supported-versions-of-rhel-for-installing-idm-clients_preparing-the-system-for-ipa-client-installation"><div class="titlepage"><div><div><h3 class="title">12.1. Supported versions of RHEL for installing IdM clients</h3></div></div></div><p>
				An Identity Management deployment in which IdM servers are running on the latest minor version of Red Hat Enterprise Linux 9 supports clients that are running on the latest minor versions of:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						RHEL 7
					</li><li class="listitem">
						RHEL 8
					</li><li class="listitem">
						RHEL 9
					</li></ul></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">NOTE</span></dt><dd>
							While other client systems, for example Ubuntu, can work with IdM 9 servers, Red Hat does not provide support for these clients.
						</dd></dl></div></section><section class="section" id="dns-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation"><div class="titlepage"><div><div><h3 class="title">12.2. DNS requirements for IdM clients</h3></div></div></div><p class="_abstract _abstract">
				Client installer by default tries to search for <code class="literal">_ldap._tcp.DOMAIN</code> DNS SRV records for all domains that are parent to its hostname. For example, if a client machine has a hostname <code class="literal">client1.idm.example.com</code>, the installer will try to retrieve an IdM server hostname from <code class="literal">_ldap._tcp.idm.example.com</code>, <code class="literal">_ldap._tcp.example.com</code> and <code class="literal">_ldap._tcp.com</code> DNS SRV records, respectively. The discovered domain is then used to configure client components (for example, SSSD and Kerberos 5 configuration) on the machine.
			</p><p>
				However, the hostnames of IdM clients are not required to be part of the primary DNS domain. If the client machine hostname is not in a subdomain of an IdM server, pass the IdM domain as the <code class="literal">--domain</code> option of the <code class="literal">ipa-client-install</code> command. In that case, after the installation of the client, both SSSD and Kerberos components will have the domain set in their configuration files and will use it to autodiscover IdM servers.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For details on DNS requirements in IdM, see <a class="link" href="#host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation" title="1.5. Host name and DNS requirements for IdM">Host name and DNS requirements for IdM</a>.
					</li></ul></div></section><section class="section" id="port-requirements-for-ipa-clients_preparing-the-system-for-ipa-client-installation"><div class="titlepage"><div><div><h3 class="title">12.3. Port requirements for IdM clients</h3></div></div></div><p class="_abstract _abstract">
				Identity Management (IdM) clients connect to a number of ports on IdM servers to communicate with their services.
			</p><p>
				On IdM client, these ports must be open <span class="emphasis"><em>in the outgoing direction</em></span>. If you are using a firewall that does not filter outgoing packets, such as <code class="literal">firewalld</code>, the ports are already available in the outgoing direction.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For information about which specific ports are used, see <a class="link" href="#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation" title="1.6. Port requirements for IdM">Port requirements for IdM</a>.
					</li></ul></div></section><section class="section" id="ipv6-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation"><div class="titlepage"><div><div><h3 class="title">12.4. IPv6 requirements for IdM clients</h3></div></div></div><p class="_abstract _abstract">
				Identity Management (IdM) does not require the <code class="literal">IPv6</code> protocol to be enabled in the kernel of the host that you want to enroll into IdM. For example, if your internal network only uses the <code class="literal">IPv4</code> protocol, you can configure the System Security Services Daemon (SSSD) to only use <code class="literal">IPv4</code> to communicate with the IdM server. You can do this by inserting the following line into the <code class="literal">[domain/<span class="emphasis"><em>NAME</em></span>]</code> section of the <code class="literal">/etc/sssd/sssd.conf</code> file:
			</p><pre class="literallayout"><code class="literal">lookup_family_order = ipv4_only</code></pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For more information about the <code class="literal">lookup_family_order</code> option, see the <code class="literal">sssd.conf(5)</code> man page on your system.
					</li></ul></div></section><section class="section" id="proc_installing-packages-required-for-an-idm-client_preparing-the-system-for-ipa-client-installation"><div class="titlepage"><div><div><h3 class="title">12.5. Installing packages required for an IdM client</h3></div></div></div><p class="_abstract _abstract">
				Installing the <code class="literal">ipa-client</code> package automatically installs other required packages as dependencies, such as the System Security Services Daemon (SSSD) packages.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install the <code class="literal">ipa-client</code> package:
					</li></ul></div><pre class="literallayout"># dnf install ipa-client</pre></section></section><section class="chapter" id="assembly_installing-an-idm-client_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Installing an IdM client</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe how to configure a system as an Identity Management (IdM) client by using the <code class="literal">ipa-client-install</code> utility. Configuring a system as an IdM client enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.
		</p><p>
			To install an Identity Management (IdM) client successfully, you must provide credentials that can be used to enroll the client.
		</p><section class="section" id="prerequisites_2"><div class="titlepage"><div><div><h3 class="title">13.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have prepared the system for IdM client installation. For details, see <a class="link" href="#preparing-the-system-for-ipa-client-installation_installing-identity-management" title="Chapter 12. Preparing the system for IdM client installation">Preparing the system for IdM client installation</a>.
					</li></ul></div></section><section class="section" id="proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.2. Installing a client by using user credentials: Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to install an Identity Management (IdM) client interactively by using the credentials of an authorized user to enroll the system into the domain.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure you have the credentials of a user authorized to enroll clients into the IdM domain. This could be, for example, a <code class="literal">hostadmin</code> user with the Enrollment Administrator role.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal">ipa-client-install</code> utility on the system that you want to configure as an IdM client.
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --mkhomedir</strong></span></pre><p class="simpara">
						Add the <code class="literal option">--enable-dns-updates</code> option to update the DNS records with the IP address of the client system if either of the following conditions applies:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The IdM server the client will be enrolled with was installed with integrated DNS
							</li><li class="listitem">
								The DNS server on the network accepts DNS entry updates with the GSS-TSIG protocol
							</li></ul></div><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --enable-dns-updates --mkhomedir</strong></span></pre><p class="simpara">
						Enabling DNS updates is useful if your client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								has a dynamic IP address issued using the Dynamic Host Configuration Protocol
							</li><li class="listitem">
								has a static IP address but it has just been allocated and the IdM server does not know about it
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The installation script attempts to obtain all the required settings, such as DNS records, automatically.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values and displays them. Enter <code class="literal">yes</code> to confirm.
							</p><pre class="screen">Client hostname: client.example.com
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: server.example.com
BaseDN: dc=example,dc=com

Continue to configure the system with these values? [no]: <span class="strong strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">
								To install the system with different values, enter <code class="literal">no</code>. Then run <code class="literal">ipa-client-install</code> again, and specify the required values by adding command-line options to <code class="literal">ipa-client-install</code>, for example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">--hostname</code>
									</li><li class="listitem">
										<code class="literal">--realm</code>
									</li><li class="listitem">
										<code class="literal">--domain</code>
									</li><li class="listitem">
										<code class="literal">--server</code>
									</li><li class="listitem">
										<code class="literal">--mkhomedir</code>
									</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									The fully qualified domain name must be a valid DNS name:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											Only numbers, alphabetic characters, and hyphens (<code class="literal">-</code>) are allowed. For example, underscores are not allowed and can cause DNS failures.
										</li><li class="listitem">
											The host name must be all lower-case. No capital letters are allowed.
										</li></ul></div></div></rh-alert></li><li class="listitem">
								If the script fails to obtain some settings automatically, it prompts you for the values.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The script prompts for a user whose identity will be used to enroll the client. This could be, for example, a <code class="literal">hostadmin</code> user with the Enrollment Administrator role:
					</p><pre class="literallayout">User authorized to enroll computers: <code class="literal">hostadmin</code>
Password for <code class="literal">hostadmin</code>@<code class="literal">EXAMPLE.COM</code>:</pre></li><li class="listitem"><p class="simpara">
						The installation script now configures the client. Wait for the operation to complete.
					</p><pre class="screen">Client configuration complete.</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For details on how the client installation script searches for the DNS records, see the <code class="literal">DNS Autodiscovery</code> section in the <code class="literal">ipa-client-install</code>(1) man page.
					</li></ul></div></section><section class="section" id="proc_installing-a-client-by-using-a-one-time-password-interactive-installation_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.3. Installing a client by using a one-time password: Interactive installation</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to install an Identity Management (IdM) client interactively by using a one-time password to enroll the system into the domain.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On a server in the domain, add the future client system as an IdM host. Use the <code class="literal option">--random</code> option with the <code class="literal command">ipa host-add</code> command to generate a one-time random password for the enrollment.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal">ipa host-add &lt;client_fqdn&gt;</code> command requires that the client FQDN is resolvable through DNS. If it is not resolvable, provide the IdM client system’s IP address using the <code class="literal">--ip address</code> option or alternatively, use the <code class="literal">--force</code> option.
						</p></div></rh-alert><pre class="literallayout">$ <span class="strong strong"><strong>ipa host-add <span class="emphasis"><em>client.example.com</em></span> --random</strong></span>
 --------------------------------------------------
 Added host "client.example.com"
 --------------------------------------------------
  Host name: client.example.com
  Random password: <span class="strong strong"><strong>W5YpARl=7M.n</strong></span>
  Password: True
  Keytab: False
  Managed by: server.example.com</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The generated password will become invalid after you use it to enroll the machine into the IdM domain. It will be replaced with a proper host keytab after the enrollment is finished.
						</p></div></rh-alert></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal">ipa-client-install</code> utility on the system that you want to configure as an IdM client.
					</p><p class="simpara">
						Use the <code class="literal option">--password</code> option to provide the one-time random password. Because the password often contains special characters, enclose it in single quotes (').
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --mkhomedir --password=<span class="emphasis"><em>password</em></span></strong></span></pre><p class="simpara">
						Add the <code class="literal option">--enable-dns-updates</code> option to update the DNS records with the IP address of the client system if either of the following conditions applies:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The IdM server the client will be enrolled with was installed with integrated DNS
							</li><li class="listitem">
								The DNS server on the network accepts DNS entry updates with the GSS-TSIG protocol
							</li></ul></div><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --password 'W5YpARl=7M.n' --enable-dns-updates --mkhomedir</strong></span></pre><p class="simpara">
						Enabling DNS updates is useful if your client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								has a dynamic IP address issued using the Dynamic Host Configuration Protocol
							</li><li class="listitem">
								has a static IP address but it has just been allocated and the IdM server does not know about it
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The installation script attempts to obtain all the required settings, such as DNS records, automatically.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values and displays them. Enter <code class="literal">yes</code> to confirm.
							</p><pre class="literallayout">Client hostname: client.example.com
Realm: EXAMPLE.COM
DNS Domain: example.com
IPA Server: server.example.com
BaseDN: dc=example,dc=com

Continue to configure the system with these values? [no]: <span class="strong strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">
								To install the system with different values, enter <code class="literal">no</code>. Then run <code class="literal">ipa-client-install</code> again, and specify the required values by adding command-line options to <code class="literal">ipa-client-install</code>, for example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">--hostname</code>
									</li><li class="listitem">
										<code class="literal">--realm</code>
									</li><li class="listitem">
										<code class="literal">--domain</code>
									</li><li class="listitem">
										<code class="literal">--server</code>
									</li><li class="listitem">
										<code class="literal">--mkhomedir</code>
									</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									The fully qualified domain name must be a valid DNS name:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											Only numbers, alphabetic characters, and hyphens (<code class="literal">-</code>) are allowed. For example, underscores are not allowed and can cause DNS failures.
										</li><li class="listitem">
											The host name must be all lower-case. No capital letters are allowed.
										</li></ul></div></div></rh-alert></li><li class="listitem">
								If the script fails to obtain some settings automatically, it prompts you for the values.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The installation script now configures the client. Wait for the operation to complete.
					</p><pre class="literallayout">Client configuration complete.</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For details on how the client installation script searches for the DNS records, see the <code class="literal">DNS Autodiscovery</code> section in the <code class="literal">ipa-client-install</code>(1) man page.
					</li></ul></div></section><section class="section" id="installing-ipa-client-non-interactive-install_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.4. Installing a client: Non-interactive installation</h3></div></div></div><p class="_abstract _abstract">
				For a non-interactive installation, you must provide all required information to the <code class="literal">ipa-client-install</code> utility using command-line options. The following sections describe the minimum required options for a non-interactive installation.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Options for the intended authentication method for client enrollment</span></dt><dd><p class="simpara">
							The available options are:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal option">--principal</code> and <code class="literal option">--password</code> to specify the credentials of a user authorized to enroll clients
								</li><li class="listitem">
									<code class="literal option">--random</code> to specify a one-time random password generated for the client
								</li><li class="listitem">
									<code class="literal option">--keytab</code> to specify the keytab from a previous enrollment
								</li></ul></div></dd><dt><span class="term">The option for unattended installation</span></dt><dd><p class="simpara">
							The <code class="literal option">--unattended</code> option lets the installation run without requiring user confirmation.
						</p><p class="simpara">
							If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values. If the script cannot discover the values automatically, provide them using command-line options, such as:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<code class="literal option">--hostname</code> to specify a static fully qualified domain name (FQDN) for the client machine.
								</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
										The FQDN must be a valid DNS name:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												Only numbers, alphabetic characters, and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
											</li><li class="listitem">
												The host name must be all lower-case. No capital letters are allowed.
											</li></ul></div></div></rh-alert></li><li class="listitem">
									<code class="literal option">--domain</code> to specify the primary DNS domain of an existing IdM deployment, such as <code class="literal">example.com</code>. The name is a lowercase version of the IdM Kerberos realm name.
								</li><li class="listitem">
									<code class="literal option">--server</code> to specify the FQDN of the IdM server to connect to. When this option is used, DNS autodiscovery for Kerberos is disabled and a fixed list of KDC and Admin servers is configured. Under normal circumstances, this option is not needed as the list of servers is retrieved from the primary IdM DNS domain.
								</li><li class="listitem">
									<code class="literal option">--realm</code> to specify the Kerberos realm of an existing IdM deployment. Usually it is an uppercase version of the primary DNS domain used by the IdM installation. Under normal circumstances, this option is not needed as the realm name is retrieved from the IdM server.
								</li></ul></div></dd></dl></div><p>
				An example of a basic <span class="strong strong"><strong>ipa-client-install</strong></span> command for non-interactive installation:
			</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --password '<span class="emphasis"><em>W5YpARl=7M.n</em></span>' --mkhomedir --unattended</strong></span></pre><p>
				 <br>
			</p><p>
				An example of an <span class="strong strong"><strong>ipa-client-install</strong></span> command for non-interactive installation with more options specified:
			</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --password '<span class="emphasis"><em>W5YpARl=7M.n</em></span>' --domain <span class="emphasis"><em>idm.example.com</em></span> --server <span class="emphasis"><em>server.idm.example.com</em></span> --realm <span class="emphasis"><em>IDM.EXAMPLE.COM</em></span> --mkhomedir --unattended</strong></span></pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For a complete list of options accepted by <code class="literal command">ipa-client-install</code>, see the <span class="strong strong"><strong>ipa-client-install</strong></span>(1) man page.
					</li></ul></div></section><section class="section" id="removing-pre-ipa-configuration-after-installing-client_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.5. Removing pre-IdM configuration after installing a client</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">ipa-client-install</code> script does not remove any previous LDAP and System Security Services Daemon (SSSD) configuration from the <code class="literal">/etc/openldap/ldap.conf</code> and <code class="literal">/etc/sssd/sssd.conf</code> files. If you modified the configuration in these files before installing the client, the script adds the new client values, but comments them out. For example:
			</p><pre class="literallayout">BASE   dc=example,dc=com
URI    ldap://ldap.example.com

#URI ldaps://server.example.com # modified by IPA
#BASE dc=ipa,dc=example,dc=com # modified by IPA</pre><p>
				To apply the new Identity Management (IdM)} configuration values:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Open <code class="literal">/etc/openldap/ldap.conf</code> and <code class="literal">/etc/sssd/sssd.conf</code>.
					</li><li class="listitem">
						Delete the previous configuration.
					</li><li class="listitem">
						Uncomment the new IdM configuration.
					</li><li class="listitem">
						Server processes that rely on system-wide LDAP configuration might require a restart to apply the changes. Applications that use <code class="literal">openldap</code> libraries typically import the configuration when started.
					</li></ol></div></section><section class="section" id="testing-an-ipa-client_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.6. Testing an IdM client</h3></div></div></div><p class="_abstract _abstract">
				The command-line interface informs you that the <code class="literal command">ipa-client-install</code> was successful, but you can also do your own test.
			</p><p>
				To test that the Identity Management (IdM) client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default <code class="literal">admin</code> user:
			</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>id admin</strong></span>
uid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)</pre><p>
				To test that authentication works correctly, <code class="literal command">su</code> to a root user from a non-root user:
			</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>su -</strong></span>
Last login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0
[root@client ~]#</pre></section><section class="section" id="connection-requests-during-an-ipa-client-installation_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.7. Connections performed during an IdM client installation</h3></div></div></div><p class="_abstract _abstract">
				<a class="link" href="#tab-requests-client-installation_assembly_installing-an-idm-client" title="Table 13.1. Requests performed during an IdM client installation">Requests performed during an IdM client installation</a> lists the operations performed by <code class="literal">ipa-client-install</code>, the Identity Management (IdM) client installation tool.
			</p><rh-table id="tab-requests-client-installation_assembly_installing-an-idm-client"><table class="lt-4-cols lt-7-rows"><caption>Table 13.1. Requests performed during an IdM client installation</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559983433472" scope="col">Operation</th><th align="left" valign="top" id="idm140559983432384" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559983431296" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559983433472"> <p>
								DNS resolution against the DNS resolvers configured on the client system
							</p>
							 </td><td align="left" valign="top" headers="idm140559983432384"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559983431296"> <p>
								To discover the IP addresses of IdM servers; (optionally) to add A/AAAA and SSHFP records
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559983433472"> <p>
								Requests to ports 88 (TCP/TCP6 and UDP/UDP6) on an IdM replica
							</p>
							 </td><td align="left" valign="top" headers="idm140559983432384"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559983431296"> <p>
								To obtain a Kerberos ticket
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559983433472"> <p>
								JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559983432384"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559983431296"> <p>
								IdM client enrollment; retrieval of CA certificate chain if LDAP method fails; request for a certificate issuance if required
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559983433472"> <p>
								Requests over TCP/TCP6 to ports 389 on IdM servers, using SASL GSSAPI authentication, plain LDAP, or both
							</p>
							 </td><td align="left" valign="top" headers="idm140559983432384"> <p>
								LDAP
							</p>
							 </td><td align="left" valign="top" headers="idm140559983431296"> <p>
								IdM client enrollment; identity retrieval by SSSD processes; Kerberos key retrieval for the host principal
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559983433472"> <p>
								Network time protocol (NTP) discovery and resolution (optionally)
							</p>
							 </td><td align="left" valign="top" headers="idm140559983432384"> <p>
								NTP
							</p>
							 </td><td align="left" valign="top" headers="idm140559983431296"> <p>
								To synchronize time between the client system and an NTP server
							</p>
							 </td></tr></tbody></table></rh-table></section><section class="section" id="ipa-client-communication-with-server_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.8. IdM client’s communications with the server during post-installation deployment</h3></div></div></div><p class="_abstract _abstract">
				The client side of Identity Management (IdM) framework is implemented with two different applications:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">ipa</code> command-line interface (CLI)
					</li><li class="listitem">
						(<span class="emphasis"><em>optional</em></span>) the browser-based Web UI
					</li></ul></div><p>
				<a class="link" href="#tab-ipa-operations_assembly_installing-an-idm-client" title="Table 13.2. CLI post-installation operations">CLI post-installation operations</a> shows the operations performed by the CLI during an IdM client post-installation deployment. <a class="link" href="#tab-browser-operations_assembly_installing-an-idm-client" title="Table 13.3. Web UI post-installation operations">Web UI post-installation operations</a> shows the operations performed by the Web UI during an IdM client post-installation deployment.
			</p><rh-table id="tab-ipa-operations_assembly_installing-an-idm-client"><table class="lt-4-cols lt-7-rows"><caption>Table 13.2. CLI post-installation operations</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559992649152" scope="col">Operation</th><th align="left" valign="top" id="idm140559992648064" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559992646976" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559992649152"> <p>
								DNS resolution against the DNS resolvers configured on the client system
							</p>
							 </td><td align="left" valign="top" headers="idm140559992648064"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559992646976"> <p>
								To discover the IP addresses of IdM servers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992649152"> <p>
								Requests to ports 88 (TCP/TCP6 and UDP/UDP6) and 464 (TCP/TCP6 and UDP/UDP6) on an IdM replica
							</p>
							 </td><td align="left" valign="top" headers="idm140559992648064"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559992646976"> <p>
								To obtain a Kerberos ticket; change a Kerberos password; authenticate to the IdM Web UI
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559992649152"> <p>
								JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559992648064"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559992646976"> <p>
								any <code class="literal command">ipa</code> utility usage
							</p>
							 </td></tr></tbody></table></rh-table><rh-table id="tab-browser-operations_assembly_installing-an-idm-client"><table class="lt-4-cols lt-7-rows"><caption>Table 13.3. Web UI post-installation operations</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559983850256" scope="col">Operation</th><th align="left" valign="top" id="idm140559983849168" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559983848080" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559983850256"> <p>
								JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559983849168"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559983848080"> <p>
								To retrieve the IdM Web UI pages
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#sssd-deployment-operations_assembly_installing-an-idm-client" title="13.9. SSSD communication patterns">SSSD communication patterns</a> for more information about how the <code class="literal systemitem">SSSD</code> daemon communicates with the services available on the IdM and Active Directory servers.
					</li><li class="listitem">
						<a class="link" href="#certmonger-deployment-operations_assembly_installing-an-idm-client" title="13.10. Certmonger communication patterns">Certmonger communication patterns</a> for more information about how the <code class="literal systemitem">certmonger</code> daemon communicates with the services available on the IdM and Active Directory servers.
					</li></ul></div></section><section class="section" id="sssd-deployment-operations_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.9. SSSD communication patterns</h3></div></div></div><p class="_abstract _abstract">
				The System Security Services Daemon (SSSD) is a system service to access remote directories and authentication mechanisms. If configured on an Identity Management IdM client, it connects to the IdM server, which provides authentication, authorization and other identity and policy information. If the IdM server is in a trust relationships with Active Directory (AD), SSSD also connects to AD to perform authentication for AD users using the Kerberos protocol. By default, SSSD uses Kerberos to authenticate any non-local user. In special situations, SSSD might be configured to use the LDAP protocol instead.
			</p><p>
				The SSSD can be configured to communicate with multiple servers. The tables below show common communication patterns for SSSD in IdM.
			</p><rh-table id="tab-sssd-deployment-operations-clients_assembly_installing-an-idm-client"><table class="lt-4-cols lt-7-rows"><caption>Table 13.4. Communication patterns of SSSD on IdM clients when talking to IdM servers</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559987835952" scope="col">Operation</th><th align="left" valign="top" id="idm140559987834864" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559987833776" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559987835952"> <p>
								DNS resolution against the DNS resolvers configured on the client system
							</p>
							 </td><td align="left" valign="top" headers="idm140559987834864"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559987833776"> <p>
								To discover the IP addresses of IdM servers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559987835952"> <p>
								Requests to ports 88 (TCP/TCP6 and UDP/UDP6), 464 (TCP/TCP6 and UDP/UDP6), and 749 (TCP/TCP6) on an Identity Management replica and Active Directory domain controllers
							</p>
							 </td><td align="left" valign="top" headers="idm140559987834864"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559987833776"> <p>
								To obtain a Kerberos ticket; to change a Kerberos password
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559987835952"> <p>
								Requests over TCP/TCP6 to ports 389 on IdM servers, using SASL GSSAPI authentication, plain LDAP, or both
							</p>
							 </td><td align="left" valign="top" headers="idm140559987834864"> <p>
								LDAP
							</p>
							 </td><td align="left" valign="top" headers="idm140559987833776"> <p>
								To obtain information about IdM users and hosts, download HBAC and sudo rules, automount maps, the SELinux user context, public SSH keys, and other information stored in IdM LDAP
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559987835952"> <p>
								(optionally) In case of smart-card authentication, requests to the Online Certificate Status Protocol (OCSP) responder, if it is configured. This often is done via port 80, but it depends on the actual value of the OCSP responder URL in a client certificate.
							</p>
							 </td><td align="left" valign="top" headers="idm140559987834864"> <p>
								HTTP
							</p>
							 </td><td align="left" valign="top" headers="idm140559987833776"> <p>
								To obtain information about the status of the certificate installed in the smart card
							</p>
							 </td></tr></tbody></table></rh-table><rh-table id="tab-sssd-deployment-operations-trust-controllers_assembly_installing-an-idm-client"><table class="lt-4-cols lt-7-rows"><caption>Table 13.5. Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559986131776" scope="col">Operation</th><th align="left" valign="top" id="idm140559986130688" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559986129600" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559986131776"> <p>
								DNS resolution against the DNS resolvers configured on the client system
							</p>
							 </td><td align="left" valign="top" headers="idm140559986130688"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559986129600"> <p>
								To discover the IP addresses of IdM servers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986131776"> <p>
								Requests to ports 88 (TCP/TCP6 and UDP/UDP6), 464 (TCP/TCP6 and UDP/UDP6), and 749 (TCP/TCP6) on an Identity Management replica and Active Directory domain controllers
							</p>
							 </td><td align="left" valign="top" headers="idm140559986130688"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559986129600"> <p>
								To obtain a Kerberos ticket; change a Kerberos password; administer Kerberos remotely
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986131776"> <p>
								Requests to ports 389 (TCP/TCP6 and UDP/UDP6) and 3268 (TCP/TCP6)
							</p>
							 </td><td align="left" valign="top" headers="idm140559986130688"> <p>
								LDAP
							</p>
							 </td><td align="left" valign="top" headers="idm140559986129600"> <p>
								To query Active Directory user and group information; to discover Active Directory domain controllers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986131776"> <p>
								(optionally) In case of smart-card authentication, requests to the Online Certificate Status Protocol (OCSP) responder, if it is configured. This often is done via port 80, but it depends on the actual value of the OCSP responder URL in a client certificate.
							</p>
							 </td><td align="left" valign="top" headers="idm140559986130688"> <p>
								HTTP
							</p>
							 </td><td align="left" valign="top" headers="idm140559986129600"> <p>
								To obtain information about the status of the certificate installed in the smart card
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#ipa-client-communication-with-server_assembly_installing-an-idm-client" title="13.8. IdM client’s communications with the server during post-installation deployment">IdM client’s communications with the server during post-installation deployment</a>
					</li></ul></div></section><section class="section" id="certmonger-deployment-operations_assembly_installing-an-idm-client"><div class="titlepage"><div><div><h3 class="title">13.10. Certmonger communication patterns</h3></div></div></div><p class="_abstract _abstract">
				<code class="literal">Certmonger</code> is a daemon running on Identity Management (IdM) servers and IdM clients to allow a timely renewal of SSL certificates associated with the services on the host. The <a class="xref" href="#tab-certmonger-deployment-operations_assembly_installing-an-idm-client" title="Table 13.6. Certmonger communication patterns">Table 13.6, “Certmonger communication patterns”</a> shows the operations performed by the <code class="literal">certmonger</code> utility on IdM servers.
			</p><rh-table id="tab-certmonger-deployment-operations_assembly_installing-an-idm-client"><table class="lt-4-cols lt-7-rows"><caption>Table 13.6. Certmonger communication patterns</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559984465888" scope="col">Operation</th><th align="left" valign="top" id="idm140559984464800" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559984463712" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559984465888"> <p>
								DNS resolution against the DNS resolvers configured on the client system
							</p>
							 </td><td align="left" valign="top" headers="idm140559984464800"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559984463712"> <p>
								To discover the IP addresses of IdM servers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559984465888"> <p>
								Requests to ports 88 (TCP/TCP6 and UDP/UDP6) and 464 (TCP/TCP6 and UDP/UDP6) on an IdM replica
							</p>
							 </td><td align="left" valign="top" headers="idm140559984464800"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559984463712"> <p>
								To obtain a Kerberos ticket
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559984465888"> <p>
								JSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559984464800"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559984463712"> <p>
								To request new certificates
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559984465888"> <p>
								Access over port 8080 (TCP/TCP6) on the IdM server
							</p>
							 </td><td align="left" valign="top" headers="idm140559984464800"> <p>
								HTTP
							</p>
							 </td><td align="left" valign="top" headers="idm140559984463712"> <p>
								To obtain an Online Certificate Status Protocol (OCSP) responder and certificate status
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559984465888"> <p>
								(on the first installed server or on the server where certificate tracking has been transferred) Access over port 8443 (TCP/TCP6) on the IdM server
							</p>
							 </td><td align="left" valign="top" headers="idm140559984464800"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559984463712"> <p>
								To administer the Certificate Authority on the IdM server (only during IdM server and replica installation). <code class="literal">certmonger</code> on the server contacts only its own local server on ports 8080 and 8443 for CA-related certificate renewal.
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#ipa-client-communication-with-server_assembly_installing-an-idm-client" title="13.8. IdM client’s communications with the server during post-installation deployment">IdM client’s communications with the server during post-installation deployment</a>
					</li></ul></div></section></section><section class="chapter" id="installing-an-ipa-client-with-kickstart_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Installing an IdM client with Kickstart</h2></div></div></div><p class="_abstract _abstract">
			A Kickstart enrollment automatically adds a new system to the Identity Management (IdM) domain at the time Red Hat Enterprise Linux is installed.
		</p><section class="section" id="installing-a-client-with-kickstart_client-kickstart"><div class="titlepage"><div><div><h3 class="title">14.1. Installing a client with Kickstart</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to use a Kickstart file to install an Identity Management (IdM) client.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Do not start the <code class="literal">sshd</code> service prior to the kickstart enrollment. Starting <code class="literal">sshd</code> before enrolling the client generates the SSH keys automatically, but the Kickstart file in <a class="xref" href="#kickstart-file-for-client-installation_client-kickstart" title="14.2. Kickstart file for client installation">Section 14.2, “Kickstart file for client installation”</a> uses a script for the same purpose, which is the preferred solution.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Pre-create the host entry on the IdM server, and set a temporary password for the entry:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ipa host-add <span class="emphasis"><em>client.example.com</em></span> --password=<span class="emphasis"><em>secret</em></span></strong></span></pre><p class="simpara">
						The password is used by Kickstart to authenticate during the client installation and expires after the first authentication attempt. After the client is successfully installed, it authenticates using its keytab.
					</p></li><li class="listitem">
						Create a Kickstart file with the contents described in <a class="xref" href="#kickstart-file-for-client-installation_client-kickstart" title="14.2. Kickstart file for client installation">Section 14.2, “Kickstart file for client installation”</a>. Make sure that network is configured properly in the Kickstart file using the <code class="literal">network</code> command.
					</li><li class="listitem">
						Use the Kickstart file to install the IdM client.
					</li></ol></div></section><section class="section" id="kickstart-file-for-client-installation_client-kickstart"><div class="titlepage"><div><div><h3 class="title">14.2. Kickstart file for client installation</h3></div></div></div><p class="_abstract _abstract">
				You can use a Kickstart file to install an Identity Management (IdM) client. The contents of the Kickstart file must meet certain requirements as outlined here.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The <code class="literal package">ipa-client</code> package in the list of packages to install</span></dt><dd><p class="simpara">
							Add the <code class="literal">ipa-client</code> package to the %packages section of the Kickstart file. For example:
						</p><pre class="literallayout">%packages
...
<code class="literal">ipa-client</code>
...</pre></dd><dt><span class="term">Post-installation instructions for the IdM client</span></dt><dd><p class="simpara">
							The post-installation instructions must include:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									An instruction for ensuring SSH keys are generated before enrollment
								</li><li class="listitem"><p class="simpara">
									An instruction to run the <code class="literal">ipa-client-install</code> utility, while specifying:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											All the required information to access and configure the IdM domain services
										</li><li class="listitem">
											The password which you set when pre-creating the client host on the IdM server. in <a class="xref" href="#installing-a-client-with-kickstart_client-kickstart" title="14.1. Installing a client with Kickstart">Section 14.1, “Installing a client with Kickstart”</a>.
										</li></ul></div></li></ul></div><p class="simpara">
							For example, the post-installation instructions for a Kickstart installation that uses a one-time password and retrieves the required options from the command line rather than via DNS can look like this:
						</p><pre class="literallayout">%post --log=/root/ks-post.log

# Generate SSH keys; ipa-client-install uploads them to the IdM server by default
/usr/libexec/openssh/sshd-keygen rsa

# Run the client install script
/usr/sbin/ipa-client-install --hostname=<span class="emphasis"><em>client.example.com</em></span> --domain=<span class="emphasis"><em>EXAMPLE.COM</em></span> --enable-dns-updates --mkhomedir -w <span class="emphasis"><em>secret</em></span> --realm=<span class="emphasis"><em>EXAMPLE.COM</em></span> --server=<span class="emphasis"><em>server.example.com</em></span></pre></dd></dl></div><p>
				Optionally, you can also include other options in the Kickstart file, such as:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For a non-interactive installation, add the <code class="literal option">--unattended</code> option to <code class="literal">ipa-client-install</code>.
					</li><li class="listitem"><p class="simpara">
						To let the client installation script request a certificate for the machine:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Add the <code class="literal option">--request-cert</code> option to <code class="literal">ipa-client-install</code>.
							</li><li class="listitem"><p class="simpara">
								Set the system bus address to <code class="literal">/dev/null</code> for both the <code class="literal">getcert</code> and <code class="literal">ipa-client-install</code> utility in the Kickstart <code class="literal">chroot</code> environment. To do this, add these lines to the post-installation instructions in the Kickstart file before the <code class="literal">ipa-client-install</code> instruction:
							</p><pre class="literallayout"># env DBUS_SYSTEM_BUS_ADDRESS=unix:path=/dev/null getcert list
# env DBUS_SYSTEM_BUS_ADDRESS=unix:path=/dev/null ipa-client-install</pre></li></ul></div></li></ul></div></section><section class="section" id="testing-an-ipa-client_client-kickstart"><div class="titlepage"><div><div><h3 class="title">14.3. Testing an IdM client</h3></div></div></div><p class="_abstract _abstract">
				The command-line interface informs you that the <code class="literal command">ipa-client-install</code> was successful, but you can also do your own test.
			</p><p>
				To test that the Identity Management (IdM) client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default <code class="literal">admin</code> user:
			</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>id admin</strong></span>
uid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)</pre><p>
				To test that authentication works correctly, <code class="literal command">su</code> to a root user from a non-root user:
			</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>su -</strong></span>
Last login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0
[root@client ~]#</pre></section></section><section class="chapter" id="troubleshooting-idm-client-installation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Troubleshooting IdM client installation</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe how to gather information about a failing IdM client installation, and how to resolve common installation issues.
		</p><section class="section" id="reviewing-idm-client-installation-errors_troubleshooting-idm-client-installation"><div class="titlepage"><div><div><h3 class="title">15.1. Reviewing IdM client installation errors</h3></div></div></div><p class="_abstract _abstract">
				When you install an Identity Management (IdM) client, debugging information is appended to <code class="literal filename">/var/log/ipaclient-install.log</code>. If a client installation fails, the installer logs the failure and rolls back changes to undo any modifications to the host. The reason for the installation failure may not be at the end of the log file, as the installer also logs the roll back procedure.
			</p><p>
				To troubleshoot a failing IdM client installation, review lines labeled <code class="literal">ScriptError</code> in the <code class="literal filename">/var/log/ipaclient-install.log</code> file and use this information to resolve any corresponding issues.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges to display the contents of IdM log files.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">grep</code> utility to retrieve any occurrences of the keyword <code class="literal">ScriptError</code> from the <code class="literal filename">/var/log/ipaserver-install.log</code> file.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo grep ScriptError /var/log/ipaclient-install.log</strong></span>
[sudo] password for user:
2020-05-28T18:24:50Z DEBUG The ipa-client-install command failed, exception: <span class="strong strong"><strong>ScriptError</strong></span>: One of password / principal / keytab is required.</pre></li><li class="listitem"><p class="simpara">
						To review a log file interactively, open the end of the log file using the <code class="literal">less</code> utility and use the <kbd class="keycap">↑</kbd> and <kbd class="keycap">↓</kbd> arrow keys to navigate.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/ipaclient-install.log</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are unable to resolve a failing IdM client installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the client.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="resolving-issues-if-the-client-installation-fails-to-update-dns-records_troubleshooting-idm-client-installation"><div class="titlepage"><div><div><h3 class="title">15.2. Resolving issues if the client installation fails to update DNS records</h3></div></div></div><p class="_abstract _abstract">
				The IdM client installer issues <code class="literal">nsupdate</code> commands to create PTR, SSHFP, and additional DNS records. However, the installation process fails if the client is unable to update DNS records after installing and configuring the client software.
			</p><p>
				To fix this problem, verify the configuration and review DNS errors in <code class="literal filename">/var/log/client-install.log</code>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are using IdM DNS as the DNS solution for your IdM environment
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that dynamic updates for the DNS zone the client is in are enabled:
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>ipa dnszone-mod idm.example.com. --dynamic-update=TRUE</strong></span></pre></li><li class="listitem"><p class="simpara">
						Ensure that the IdM server running the DNS service has port 53 opened for both TCP and UDP protocols.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo firewall-cmd --permanent --add-port=53/tcp --add-port=53/udp</strong></span>
[sudo] password for user:
success
[user@server ~]$ <span class="strong strong"><strong>firewall-cmd --runtime-to-permanent</strong></span>
success</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">grep</code> utility to retrieve the contents of <code class="literal">nsupdate</code> commands from <code class="literal filename">/var/log/client-install.log</code> to see which DNS record updates are failing.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo grep nsupdate /var/log/ipaclient-install.log</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are unable to resolve a failing installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the client.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="resolving-issues-if-the-client-installation-fails-to-join-the-idm-kerberos-realm_troubleshooting-idm-client-installation"><div class="titlepage"><div><div><h3 class="title">15.3. Resolving issues if the client installation fails to join the IdM Kerberos realm</h3></div></div></div><p class="_abstract _abstract">
				The IdM client installation process fails if the client is unable to join the IdM Kerberos realm.
			</p><pre class="literallayout">Joining realm failed: Failed to add key to the keytab
child exited with 11

Installation failed. Rolling back changes.</pre><p>
				This failure can be caused by an empty Kerberos keytab.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Removing system files requires <code class="literal">root</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Remove <code class="literal filename">/etc/krb5.keytab</code>.
					</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>sudo rm /etc/krb5.keytab</strong></span>
[sudo] password for user:
[user@client ~]$ ls /etc/krb5.keytab
ls: cannot access '/etc/krb5.keytab': No such file or directory</pre></li><li class="listitem">
						Retry the IdM client installation.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are unable to resolve a failing installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the client.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section _additional-resources" id="additional_resources_4"><div class="titlepage"><div><div><h3 class="title">15.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To troubleshoot installing the first IdM server, see <a class="link" href="#troubleshooting-idm-server-installation_installing-identity-management" title="Chapter 8. Troubleshooting IdM server installation">Troubleshooting IdM server installation</a>.
					</li><li class="listitem">
						To troubleshoot installing an IdM replica, see <a class="link" href="#troubleshooting-idm-replica-installation_installing-identity-management" title="Chapter 21. Troubleshooting IdM replica installation">Troubleshooting IdM replica installation</a>.
					</li></ul></div></section></section><section class="chapter" id="re-enrolling-an-ipa-client_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Re-enrolling an IdM client</h2></div></div></div><p>
			If a client machine has been destroyed and lost connection with the IdM servers, for example due to the client’s hardware failure, and you still have its keytab, you can re-enroll the client. In this scenario, you want to get the client back in the IdM environment with the same hostname.
		</p><section class="section" id="client-reenrollment-idm_re-enrolling-client"><div class="titlepage"><div><div><h3 class="title">16.1. Client re-enrollment in IdM</h3></div></div></div><p class="_abstract _abstract">
				If a client machine has been destroyed and lost connection with the IdM servers, for example due to the client’s hardware failure, and you still have its keytab, you can re-enroll the client. In this scenario, you want to get the client back in the IdM environment with the same hostname.
			</p><p>
				During the re-enrollment, the client generates a new Kerberos key and SSH keys, but the identity of the client in the LDAP database remains unchanged. After the re-enrollment, the host has its keys and other information in the same LDAP object with the same <code class="literal">FQDN</code> as previously, before the machine’s loss of connection with the IdM servers.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					You can only re-enroll clients whose domain entry is still active. If you uninstalled a client (using <code class="literal command">ipa-client-install --uninstall</code>) or disabled its host entry (using <code class="literal command">ipa host-disable</code>), you cannot re-enroll it.
				</p></div></rh-alert><p>
				You cannot re-enroll a client after you have renamed it. This is because in IdM, the key attribute of the client’s entry in LDAP is the client’s hostname, its <code class="literal">FQDN</code>. As opposed to re-enrolling a client, during which the client’s LDAP object remains unchanged, the outcome of renaming a client is that the client has its keys and other information in a different LDAP object with a new <code class="literal">FQDN</code>. Therefore, the only way to rename a client is to uninstall the host from IdM, change the host’s hostname, and install it as an IdM client with a new name. For details on how to rename a client, see <a class="link" href="#renaming-ipa-client-systems_installing-identity-management" title="Chapter 18. Renaming IdM client systems">Renaming IdM client systems</a>.
			</p><div class="formalpara"><p class="title"><strong>What happens during client re-enrollment</strong></p><p>
					During re-enrollment, IdM:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Revokes the original host certificate
					</li><li class="listitem">
						Creates new SSH keys
					</li><li class="listitem">
						Generates a new keytab
					</li></ul></div></section><section class="section" id="re-enrolling-a-client-by-using-user-credentials-interactive-re-enrollment_re-enrolling-client"><div class="titlepage"><div><div><h3 class="title">16.2. Re-enrolling a client by using user credentials: Interactive re-enrollment</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to re-enroll an Identity Management (IdM) client interactively by using the credentials of an authorized user.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Re-create the client machine with the same host name.
					</li><li class="listitem"><p class="simpara">
						Run the <code class="literal command">ipa-client-install --force-join</code> command on the client machine:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --force-join</strong></span></pre></li><li class="listitem"><p class="simpara">
						The script prompts for a user whose identity will be used to re-enroll the client. This could be, for example, a <code class="literal">hostadmin</code> user with the Enrollment Administrator role:
					</p><pre class="literallayout">User authorized to enroll computers: <code class="literal">hostadmin</code>
Password for <code class="literal">hostadmin</code>@<code class="literal">EXAMPLE.COM</code>:</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						For a more detailed procedure on enrolling clients by using an authorized user’s credentials, see <a class="link" href="#proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client" title="13.2. Installing a client by using user credentials: Interactive installation">Installing a client by using user credentials: Interactive installation</a>.
					</li></ul></div></section><section class="section" id="re-enrolling-idm-client-using-keytab-non-interactive_re-enrolling-client"><div class="titlepage"><div><div><h3 class="title">16.3. Re-enrolling a client by using the client keytab: Non-interactive re-enrollment</h3></div></div></div><p>
				You can re-enroll an Identity Management (IdM) client non-interactively by using the <code class="literal">krb5.keytab</code> keytab file of the client system from the previous deployment. For example, re-enrollment using the client keytab is appropriate for an automated installation.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have backed up the keytab of the client from the previous deployment on another system.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Re-create the client machine with the same host name.
					</li><li class="listitem"><p class="simpara">
						Copy the keytab file from the backup location to the re-created client machine, for example its <code class="literal">/tmp/</code> directory.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Do not put the keytab in the <code class="literal">/etc/krb5.keytab</code> file as old keys are removed from this location during the execution of the <code class="literal">ipa-client-install</code> installation script.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ipa-client-install</code> utility to re-enroll the client. Specify the keytab location with the <code class="literal option">--keytab</code> option:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-client-install --keytab /tmp/krb5.keytab</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The keytab specified in the <code class="literal option">--keytab</code> option is only used when authenticating to initiate the re-enrollment. During the re-enrollment, IdM generates a new keytab for the client.
						</p></div></rh-alert></li></ol></div></section><section class="section" id="testing-an-ipa-client_re-enrolling-client"><div class="titlepage"><div><div><h3 class="title">16.4. Testing an IdM client</h3></div></div></div><p class="_abstract _abstract">
				The command-line interface informs you that the <code class="literal command">ipa-client-install</code> was successful, but you can also do your own test.
			</p><p>
				To test that the Identity Management (IdM) client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default <code class="literal">admin</code> user:
			</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>id admin</strong></span>
uid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)</pre><p>
				To test that authentication works correctly, <code class="literal command">su</code> to a root user from a non-root user:
			</p><pre class="literallayout">[user@client ~]$ <span class="strong strong"><strong>su -</strong></span>
Last login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0
[root@client ~]#</pre></section></section><section class="chapter" id="uninstalling-an-ipa-client_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Uninstalling an IdM client</h2></div></div></div><p class="_abstract _abstract">
			As an administrator, you can remove an Identity Management (IdM) client from the environment.
		</p><section class="section" id="uninstalling-an-ipa-client-procedure_installing-identity-management"><div class="titlepage"><div><div><h3 class="title">17.1. Uninstalling an IdM client</h3></div></div></div><p class="_abstract _abstract">
				Uninstalling a client removes the client from the Identity Management (IdM) domain, along with all of the specific IdM configuration of system services, such as System Security Services Daemon (SSSD). This restores the previous configuration of the client system.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the <code class="literal command">ipa-client-install --uninstall</code> command:
					</p><pre class="literallayout">[root@client ~]# <span class="strong strong"><strong>ipa-client-install --uninstall</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Check that you cannot obtain a Kerberos ticket-granting ticket (TGT) for an IdM user:
					</p><pre class="literallayout">[root@client ~]# <span class="strong strong"><strong>kinit admin</strong></span>
kinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials
[root@client ~]#</pre><p class="simpara">
						If a Kerberos TGT ticket has been returned successfully, follow the additional uninstallation steps in <a class="link" href="#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management" title="17.2. Uninstalling an IdM client: additional steps after multiple past installations">Uninstalling an IdM client: additional steps after multiple past installations</a>.
					</p></li><li class="listitem"><p class="simpara">
						On the client, remove old Kerberos principals from each identified keytab other than <code class="literal">/etc/krb5.keytab</code>:
					</p><pre class="literallayout">[root@client ~]# <span class="strong strong"><strong>ipa-rmkeytab -k <span class="emphasis"><em>/path/to/keytab</em></span> -r EXAMPLE.COM</strong></span></pre></li><li class="listitem"><p class="simpara">
						On an IdM server, remove all DNS entries for the client host from IdM:
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa dnsrecord-del</strong></span>
Record name: old-client-name
Zone name: idm.example.com
No option to delete specific record provided.
Delete all? Yes/No (default No): true
------------------------
Deleted record "old-client-name"</pre></li><li class="listitem"><p class="simpara">
						On the IdM server, remove the client host entry from the IdM LDAP server. This removes all services and revokes all certificates issued for that host:
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa host-del client.idm.example.com</strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Removing the client host entry from the IdM LDAP server is crucial if you think you might re-enroll the client in the future, with a different IP address or a different hostname.
						</p></div></rh-alert></li></ol></div></section><section class="section" id="uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management"><div class="titlepage"><div><div><h3 class="title">17.2. Uninstalling an IdM client: additional steps after multiple past installations</h3></div></div></div><p class="_abstract _abstract">
				If you install and uninstall a host as an Identity Management (IdM) client multiple times, the uninstallation procedure might not restore the pre-IdM Kerberos configuration.
			</p><p>
				In this situation, you must manually remove the IdM Kerberos configuration. In extreme cases, you must reinstall the operating system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have used the <code class="literal">ipa-client-install --uninstall</code> command to uninstall the IdM client configuration from the host. However, you can still obtain a Kerberos ticket-granting ticket (TGT) for an IdM user from the IdM server.
					</li><li class="listitem">
						You have checked that the <code class="literal">/var/lib/ipa-client/sysrestore</code> directory is empty and hence you cannot restore the prior-to-IdM-client configuration of the system using the files in the directory.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the <code class="literal">/etc/krb5.conf.ipa</code> file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If the contents of the <code class="literal">/etc/krb5.conf.ipa</code> file are the same as the contents of the <code class="literal">krb5.conf</code> file prior to the installation of the IdM client, you can:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Remove the <code class="literal">/etc/krb5.conf</code> file:
									</p><pre class="literallayout"># <span class="strong strong"><strong>rm /etc/krb5.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
										Rename the <code class="literal">/etc/krb5.conf.ipa</code> file into <code class="literal">/etc/krb5.conf</code>:
									</p><pre class="literallayout"># <span class="strong strong"><strong>mv /etc/krb5.conf.ipa /etc/krb5.conf</strong></span></pre></li></ol></div></li><li class="listitem">
								If the contents of the <code class="literal">/etc/krb5.conf.ipa</code> file are not the same as the contents of the <code class="literal">krb5.conf</code> file prior to the installation of the IdM client, you can at least restore the Kerberos configuration to the state directly after the installation of the operating system:
							</li></ul></div><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
								Re-install the <code class="literal">krb5-libs</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf reinstall krb5-libs</strong></span></pre><p class="simpara">
								As a dependency, this command will also re-install the <code class="literal">krb5-workstation</code> package and the original version of the <code class="literal">/etc/krb5.conf</code> file.
							</p></li></ol></div></li><li class="listitem">
						Remove the <code class="literal">var/log/ipaclient-install.log</code> file if present.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Try to obtain IdM user credentials. This should fail:
					</p><pre class="literallayout">[root@r8server ~]# <span class="strong strong"><strong>kinit admin</strong></span>
kinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials
[root@r8server ~]#</pre></li></ul></div><p>
				The <code class="literal">/etc/krb5.conf</code> file is now restored to its factory state. As a result, you cannot obtain a Kerberos TGT for an IdM user on the host.
			</p></section></section><section class="chapter" id="renaming-ipa-client-systems_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Renaming IdM client systems</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe how to change the host name of an Identity Management (IdM) client system.
		</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
				Renaming a client is a manual procedure. Do not perform it unless changing the host name is absolutely required.
			</p></div></rh-alert><p>
			Renaming an IdM client involves:
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					Preparing the host. For details, see <a class="link" href="#preparing-an-idm-client-for-its-renaming_renaming-clients" title="18.1. Preparing an IdM client for its renaming">Preparing an IdM client for its renaming</a>.
				</li><li class="listitem">
					Uninstalling the IdM client from the host. For details, see <a class="link" href="#uninstalling-an-ipa-client-procedure_renaming-clients" title="18.2. Uninstalling an IdM client">Uninstalling a client</a>.
				</li><li class="listitem">
					Renaming the host. For details, see <a class="link" href="#renaming-the-ipa-client-system_renaming-clients" title="18.4. Renaming the host system">Renaming a client</a>.
				</li><li class="listitem">
					Installing the IdM client on the host with the new name. For details, see <a class="link" href="#re-installing-an-idm-client_renaming-clients" title="18.5. Re-installing an IdM client">Reinstalling a client</a>.
				</li><li class="listitem">
					Configuring the host after the IdM client installation. For details, see <a class="link" href="#re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients" title="18.6. Re-adding services, re-generating certificates, and re-adding host groups">Re-adding services, re-generating certificates, and re-adding host groups</a>.
				</li></ol></div><section class="section" id="preparing-an-idm-client-for-its-renaming_renaming-clients"><div class="titlepage"><div><div><h3 class="title">18.1. Preparing an IdM client for its renaming</h3></div></div></div><p class="_abstract _abstract">
				Before uninstalling the current client, make note of certain settings for the client. You will apply this configuration after re-enrolling the machine with a new host name.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Identify which services are running on the machine:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Use the <code class="literal command">ipa service-find</code> command, and identify services with certificates in the output:
							</p><pre class="literallayout">$ <span class="strong strong"><strong>ipa service-find <span class="emphasis"><em>old-client-name.example.com</em></span></strong></span></pre></li><li class="listitem">
								In addition, each host has a default <span class="emphasis"><em>host service</em></span> which does not appear in the <code class="literal command">ipa service-find</code> output. The service principal for the host service, also called a <span class="emphasis"><em>host principal</em></span>, is <code class="literal">host/<span class="emphasis"><em>old-client-name.example.com</em></span></code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						For all service principals displayed by <code class="literal command">ipa service-find <span class="emphasis"><em>old-client-name.example.com</em></span></code>, determine the location of the corresponding keytabs on the <code class="literal"><span class="emphasis"><em>old-client-name.example.com</em></span></code> system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>find / -name "*.keytab"</strong></span></pre><p class="simpara">
						Each service on the client system has a Kerberos principal in the form <span class="emphasis"><em>service_name/host_name@REALM</em></span>, such as <code class="literal">ldap/<span class="emphasis"><em>old-client-name.example.com@EXAMPLE.COM</em></span></code>.
					</p></li><li class="listitem"><p class="simpara">
						Identify all host groups to which the machine belongs.
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa hostgroup-find <span class="emphasis"><em>old-client-name.example.com</em></span></strong></span></pre></li></ul></div></section><section class="section" id="uninstalling-an-ipa-client-procedure_renaming-clients"><div class="titlepage"><div><div><h3 class="title">18.2. Uninstalling an IdM client</h3></div></div></div><p class="_abstract _abstract">
				Uninstalling a client removes the client from the Identity Management (IdM) domain, along with all of the specific IdM configuration of system services, such as System Security Services Daemon (SSSD). This restores the previous configuration of the client system.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the <code class="literal command">ipa-client-install --uninstall</code> command:
					</p><pre class="literallayout">[root@client ~]# <span class="strong strong"><strong>ipa-client-install --uninstall</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Check that you cannot obtain a Kerberos ticket-granting ticket (TGT) for an IdM user:
					</p><pre class="literallayout">[root@client ~]# <span class="strong strong"><strong>kinit admin</strong></span>
kinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials
[root@client ~]#</pre><p class="simpara">
						If a Kerberos TGT ticket has been returned successfully, follow the additional uninstallation steps in <a class="link" href="#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients" title="18.3. Uninstalling an IdM client: additional steps after multiple past installations">Uninstalling an IdM client: additional steps after multiple past installations</a>.
					</p></li><li class="listitem"><p class="simpara">
						On the client, remove old Kerberos principals from each identified keytab other than <code class="literal">/etc/krb5.keytab</code>:
					</p><pre class="literallayout">[root@client ~]# <span class="strong strong"><strong>ipa-rmkeytab -k <span class="emphasis"><em>/path/to/keytab</em></span> -r EXAMPLE.COM</strong></span></pre></li><li class="listitem"><p class="simpara">
						On an IdM server, remove all DNS entries for the client host from IdM:
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa dnsrecord-del</strong></span>
Record name: old-client-name
Zone name: idm.example.com
No option to delete specific record provided.
Delete all? Yes/No (default No): true
------------------------
Deleted record "old-client-name"</pre></li><li class="listitem"><p class="simpara">
						On the IdM server, remove the client host entry from the IdM LDAP server. This removes all services and revokes all certificates issued for that host:
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa host-del client.idm.example.com</strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Removing the client host entry from the IdM LDAP server is crucial if you think you might re-enroll the client in the future, with a different IP address or a different hostname.
						</p></div></rh-alert></li></ol></div></section><section class="section" id="uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients"><div class="titlepage"><div><div><h3 class="title">18.3. Uninstalling an IdM client: additional steps after multiple past installations</h3></div></div></div><p class="_abstract _abstract">
				If you install and uninstall a host as an Identity Management (IdM) client multiple times, the uninstallation procedure might not restore the pre-IdM Kerberos configuration.
			</p><p>
				In this situation, you must manually remove the IdM Kerberos configuration. In extreme cases, you must reinstall the operating system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have used the <code class="literal">ipa-client-install --uninstall</code> command to uninstall the IdM client configuration from the host. However, you can still obtain a Kerberos ticket-granting ticket (TGT) for an IdM user from the IdM server.
					</li><li class="listitem">
						You have checked that the <code class="literal">/var/lib/ipa-client/sysrestore</code> directory is empty and hence you cannot restore the prior-to-IdM-client configuration of the system using the files in the directory.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the <code class="literal">/etc/krb5.conf.ipa</code> file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If the contents of the <code class="literal">/etc/krb5.conf.ipa</code> file are the same as the contents of the <code class="literal">krb5.conf</code> file prior to the installation of the IdM client, you can:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Remove the <code class="literal">/etc/krb5.conf</code> file:
									</p><pre class="literallayout"># <span class="strong strong"><strong>rm /etc/krb5.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
										Rename the <code class="literal">/etc/krb5.conf.ipa</code> file into <code class="literal">/etc/krb5.conf</code>:
									</p><pre class="literallayout"># <span class="strong strong"><strong>mv /etc/krb5.conf.ipa /etc/krb5.conf</strong></span></pre></li></ol></div></li><li class="listitem">
								If the contents of the <code class="literal">/etc/krb5.conf.ipa</code> file are not the same as the contents of the <code class="literal">krb5.conf</code> file prior to the installation of the IdM client, you can at least restore the Kerberos configuration to the state directly after the installation of the operating system:
							</li></ul></div><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
								Re-install the <code class="literal">krb5-libs</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf reinstall krb5-libs</strong></span></pre><p class="simpara">
								As a dependency, this command will also re-install the <code class="literal">krb5-workstation</code> package and the original version of the <code class="literal">/etc/krb5.conf</code> file.
							</p></li></ol></div></li><li class="listitem">
						Remove the <code class="literal">var/log/ipaclient-install.log</code> file if present.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Try to obtain IdM user credentials. This should fail:
					</p><pre class="literallayout">[root@r8server ~]# <span class="strong strong"><strong>kinit admin</strong></span>
kinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials
[root@r8server ~]#</pre></li></ul></div><p>
				The <code class="literal">/etc/krb5.conf</code> file is now restored to its factory state. As a result, you cannot obtain a Kerberos TGT for an IdM user on the host.
			</p></section><section class="section" id="renaming-the-ipa-client-system_renaming-clients"><div class="titlepage"><div><div><h3 class="title">18.4. Renaming the host system</h3></div></div></div><p class="_abstract _abstract">
				Rename the machine as required. For example:
			</p><pre class="literallayout"># <span class="strong strong"><strong>hostnamectl set-hostname <span class="emphasis"><em>new-client-name.example.com</em></span></strong></span></pre><p>
				You can now re-install the Identity Management (IdM) client to the IdM domain with the new host name.
			</p></section><section class="section" id="re-installing-an-idm-client_renaming-clients"><div class="titlepage"><div><div><h3 class="title">18.5. Re-installing an IdM client</h3></div></div></div><p class="_abstract _abstract">
				Install an client on your renamed host following the procedure described in <a class="link" href="#assembly_installing-an-idm-client_installing-identity-management" title="Chapter 13. Installing an IdM client">Installing a client</a>.
			</p></section><section class="section" id="re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients"><div class="titlepage"><div><div><h3 class="title">18.6. Re-adding services, re-generating certificates, and re-adding host groups</h3></div></div></div><div class="orderedlist _abstract"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist _abstract" type="1"><li class="listitem"><p class="simpara">
						On the Identity Management (IdM) server, add a new keytab for every service identified in the <a class="link" href="#preparing-an-idm-client-for-its-renaming_renaming-clients" title="18.1. Preparing an IdM client for its renaming">Preparing an IdM client for its renaming</a>.
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa service-add <span class="emphasis"><em>service_name/new-client-name</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Generate certificates for services that had a certificate assigned in the <a class="link" href="#preparing-an-idm-client-for-its-renaming_renaming-clients" title="18.1. Preparing an IdM client for its renaming">Preparing an IdM client for its renaming</a>. You can do this:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Using the IdM administration tools
							</li><li class="listitem">
								Using the <code class="literal">certmonger</code> utility
							</li></ul></div></li><li class="listitem">
						Re-add the client to the host groups identified in the <a class="link" href="#preparing-an-idm-client-for-its-renaming_renaming-clients" title="18.1. Preparing an IdM client for its renaming">Preparing an IdM client for its renaming</a>.
					</li></ol></div></section></section><section class="chapter" id="preparing-the-system-for-ipa-replica-installation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Preparing the system for an IdM replica installation</h2></div></div></div><p class="_abstract _abstract">
			The following links list the requirements to install an Identity Management (IdM) replica. Before the installation, make sure your system meets these requirements.
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					Ensure <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management">the target system meets the general requirements for IdM server installation</a>.
				</li><li class="listitem">
					Ensure <a class="link" href="#replica-version-requirements_preparing-the-system-for-ipa-replica-installation" title="19.1. Replica version requirements">the target system meets the additional, version requirements for IdM replica installation</a>.
				</li><li class="listitem">
					Optional: If you are adding a RHEL 9 Identity Management (IdM) replica on which FIPS mode is enabled to a RHEL 8 IdM deployment in FIPS mode, <a class="link" href="#ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation" title="19.3. Ensuring FIPS compliance for a RHEL 9 replica joining a RHEL 8 IdM environment">ensure that the replica has the correct encryption types enabled</a>.
				</li><li class="listitem"><p class="simpara">
					Authorize the target system for enrollment into the IdM domain. For more information, see one of the following sections that best fits your needs:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation" title="19.4. Authorizing the installation of a replica on an IdM client">Authorizing the installation of a replica on an IdM client</a>
						</li><li class="listitem">
							<a class="link" href="#authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation" title="19.5. Authorizing the installation of a replica on a system that is not enrolled into IdM">Authorizing the installation of a replica on a system that is not enrolled into IdM</a>
						</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index">Planning the replica topology</a>
				</li></ul></div><section class="section" id="replica-version-requirements_preparing-the-system-for-ipa-replica-installation"><div class="titlepage"><div><div><h3 class="title">19.1. Replica version requirements</h3></div></div></div><p class="_abstract _abstract">
				An IdM replica must be running the same or later version of IdM as other servers. For example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an IdM server installed on Red Hat Enterprise Linux 9 and it uses IdM 4.x packages.
					</li><li class="listitem">
						You must install the replica also on Red Hat Enterprise Linux 9 and use IdM version 4.x or later.
					</li></ul></div><p>
				This ensures that configuration can be properly copied from the server to the replica.
			</p><p>
				For details on how to display the IdM software version, see <a class="link" href="#display-software-version_preparing-the-system-for-ipa-replica-installation" title="19.2. Methods for displaying IdM software version">Methods for displaying IdM software version</a>.
			</p></section><section class="section" id="display-software-version_preparing-the-system-for-ipa-replica-installation"><div class="titlepage"><div><div><h3 class="title">19.2. Methods for displaying IdM software version</h3></div></div></div><p class="_abstract _abstract">
				You can display the IdM version number with:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The IdM WebUI
					</li><li class="listitem">
						<code class="literal">ipa</code> commands
					</li><li class="listitem">
						<code class="literal">rpm</code> commands
					</li></ul></div><p>
				 
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Displaying version through the WebUI</span></dt><dd><p class="simpara">
							In the IdM WebUI, the software version can be displayed by choosing <code class="literal">About</code> from the username menu at the upper-right.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/eb58b78de07ba06d846be6f76ae67a2e/idm-version-check.png" alt="Checking IdM Software Version"></div></div></dd><dt><span class="term">Displaying version with <code class="literal">ipa</code> commands</span></dt><dd><p class="simpara">
							From the command line, use the <code class="literal">ipa --version</code> command.
						</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa --version</strong></span>
<span class="strong strong"><strong>VERSION: 4.8.0</strong></span>, API_VERSION: 2.233</pre></dd><dt><span class="term">Displaying version with <code class="literal">rpm</code> commands</span></dt><dd><p class="simpara">
							If IdM services are not operating properly, you can use the <code class="literal">rpm</code> utility to determine the version number of the <code class="literal">ipa-server</code> package that is currently installed.
						</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>rpm -q ipa-server</strong></span>
<span class="strong strong"><strong>ipa-server-4.8.0-11</strong></span>.module+el8.1.0+4247+9f3fd721.x86_64</pre></dd></dl></div></section><section class="section" id="ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation"><div class="titlepage"><div><div><h3 class="title">19.3. Ensuring FIPS compliance for a RHEL 9 replica joining a RHEL 8 IdM environment</h3></div></div></div><p>
				If RHEL Identity Management (IdM) was originally installed on a RHEL 8.6 or earlier system, then the <code class="literal">AES HMAC-SHA1</code> encryption types it uses are not supported by RHEL 9 in FIPS mode by default. To add a RHEL 9 replica in FIPS mode to the deployment, you must enable these encryption keys on the RHEL 9. For more information, see the <a class="link" href="https://access.redhat.com/solutions/7003853">AD Domain Users unable to login in to the FIPS-compliant environment</a> KCS solution.
			</p></section><section class="section" id="authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation"><div class="titlepage"><div><div><h3 class="title">19.4. Authorizing the installation of a replica on an IdM client</h3></div></div></div><p class="_abstract _abstract">
				When <a class="link" href="#installing-an-ipa-replica_installing-identity-management" title="Chapter 20. Installing an IdM replica">installing a replica</a> on an existing Identity Management (IdM) client by running the <code class="literal">ipa-replica-install</code> utility, choose <span class="strong strong"><strong>Method 1</strong></span> or <span class="strong strong"><strong>Method 2</strong></span> below to authorize the replica installation. Choose <span class="strong strong"><strong>Method 1</strong></span> if one of the following applies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You want a senior system administrator to perform the initial part of the procedure and a junior administrator to perform the rest.
					</li><li class="listitem">
						You want to automate your replica installation.
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					As of RHEL 9.5, during the installation of an IdM replica, checking if the provided Kerberos principal has the required privilege also extends to checking user ID overrides. As a result, you can deploy a replica using the credentials of an AD administrator that is configured to act as an IdM administrator.
				</p></div></rh-alert><div class="variablelist"><dl class="variablelist"><dt><span class="term">Method 1: the <code class="literal">ipaservers</code> host group</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Log in to any IdM host as IdM admin:
								</p><pre class="literallayout">$ <span class="strong strong"><strong>kinit admin</strong></span></pre></li><li class="listitem"><p class="simpara">
									Add the client machine to the <code class="literal">ipaservers</code> host group:
								</p><pre class="literallayout">$ <span class="strong strong"><strong>ipa hostgroup-add-member ipaservers --hosts <span class="emphasis"><em>client.idm.example.com</em></span></strong></span>
  Host-group: ipaservers
  Description: IPA server hosts
  Member hosts: server.idm.example.com, client.idm.example.com
-------------------------
Number of members added 1
-------------------------</pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Membership in the <code class="literal">ipaservers</code> group grants the machine elevated privileges similar to the administrator’s credentials. Therefore, in the next step, the <code class="literal">ipa-replica-install</code> utility can be run on the host successfully by a junior system administrator.
							</p></div></rh-alert></dd><dt><span class="term">Method 2: a privileged user’s credentials</span></dt><dd><p class="simpara">
							Choose one of the following methods to authorize the replica installation by providing a privileged user’s credentials:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Let Identity Management (IdM) prompt you for the credentials interactively after you start the <code class="literal">ipa-replica-install</code> utility. This is the default behavior.
								</li><li class="listitem"><p class="simpara">
									Log in to the client as a privileged user immediately before running the <code class="literal">ipa-replica-install</code> utility. The default privileged user is <code class="literal">admin</code>:
								</p><pre class="literallayout">$ <span class="strong strong"><strong>kinit admin</strong></span></pre></li></ul></div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						To start the installation procedure, see <a class="link" href="#installing-an-ipa-replica_installing-identity-management" title="Chapter 20. Installing an IdM replica">Installing an IdM replica</a>.
					</li><li class="listitem">
						You can use an Ansible playbook to install IdM replicas. For more information, see <a class="link" href="#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management" title="Chapter 26. Installing an Identity Management replica using an Ansible playbook">Installing an Identity Management replica using an Ansible playbook</a>.
					</li></ul></div></section><section class="section" id="authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation"><div class="titlepage"><div><div><h3 class="title">19.5. Authorizing the installation of a replica on a system that is not enrolled into IdM</h3></div></div></div><p class="_abstract _abstract">
				When <a class="link" href="#installing-an-ipa-replica_installing-identity-management" title="Chapter 20. Installing an IdM replica">installing a replica</a> on a system that is not enrolled in the Identity Management (IdM) domain, the <code class="literal">ipa-replica-install</code> utility first enrolls the system as a client and then installs the replica components. For this scenario, choose <span class="strong strong"><strong>Method 1</strong></span> or <span class="strong strong"><strong>Method 2</strong></span> below to authorize the replica installation. Choose <span class="strong strong"><strong>Method 1</strong></span> if one of the following applies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You want a senior system administrator to perform the initial part of the procedure and a junior administrator to perform the rest.
					</li><li class="listitem">
						You want to automate your replica installation.
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					As of RHEL 9.5, during the installation of an IdM replica, checking if the provided Kerberos principal has the required privilege also extends to checking user ID overrides. As a result, you can deploy a replica using the credentials of an AD administrator that is configured to act as an IdM administrator.
				</p></div></rh-alert><div class="variablelist"><dl class="variablelist"><dt><span class="term">Method 1: a random password generated on an IdM server</span></dt><dd><p class="simpara">
							Enter the following commands on any server in the domain:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Log in as the administrator.
								</p><pre class="literallayout">$ <span class="strong strong"><strong>kinit admin</strong></span></pre></li><li class="listitem"><p class="simpara">
									Add the external system as an IdM host. Use the <code class="literal option">--random</code> option with the <code class="literal command">ipa host-add</code> command to generate a random one-time password to be used for the subsequent replica installation.
								</p><pre class="literallayout">$ <span class="strong strong"><strong>ipa host-add replica.example.com --random</strong></span>
--------------------------------------------------
Added host "replica.example.com"
--------------------------------------------------
  Host name: replica.example.com
  Random password: W5YpARl=7M.n
  Password: True
  Keytab: False
  Managed by: server.example.com</pre><p class="simpara">
									The generated password will become invalid after you use it to enroll the machine into the IdM domain. It will be replaced with a proper host keytab after the enrollment is finished.
								</p></li><li class="listitem"><p class="simpara">
									Add the system to the <code class="literal">ipaservers</code> host group.
								</p><pre class="literallayout">$ <span class="strong strong"><strong>ipa hostgroup-add-member ipaservers --hosts <span class="emphasis"><em>replica.example.com</em></span></strong></span>
  Host-group: ipaservers
  Description: IPA server hosts
  Member hosts: server.example.com, replica.example.com
-------------------------
Number of members added 1
-------------------------</pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Membership in the <code class="literal">ipaservers</code> group grants the machine elevated privileges similar to the administrator’s credentials. Therefore, in the next step, the <code class="literal">ipa-replica-install</code> utility can be run on the host successfully by a junior system administrator that provides the generated random password.
							</p></div></rh-alert></dd><dt><span class="term">Method 2: a privileged user’s credentials</span></dt><dd><p class="simpara">
							Using this method, you authorize the replica installation by providing a privileged user’s credentials. The default privileged user is <code class="literal">admin</code>.
						</p><p class="simpara">
							No action is required prior to running the IdM replica installation utility. Add the principal name and password options (<code class="literal">--principal <span class="emphasis"><em>admin</em></span> --admin-password <span class="emphasis"><em>password</em></span></code>) to the <code class="literal">ipa-replica-install</code> command directly during the installation.
						</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						To start the installation procedure, see <a class="link" href="#installing-an-ipa-replica_installing-identity-management" title="Chapter 20. Installing an IdM replica">Installing an IdM replica</a>.
					</li><li class="listitem">
						You can use an Ansible playbook to install IdM replicas. For more information, see <a class="link" href="#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management" title="Chapter 26. Installing an Identity Management replica using an Ansible playbook">Installing an Identity Management replica using an Ansible playbook</a>.
					</li></ul></div></section></section><section class="chapter" id="installing-an-ipa-replica_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Installing an IdM replica</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe how to install an Identity Management (IdM) replica interactively, by using the command-line interface (CLI). The replica installation process copies the configuration of the existing server and installs the replica based on that configuration.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Red Hat recommends <a class="link" href="#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management" title="Chapter 26. Installing an Identity Management replica using an Ansible playbook">using Ansible roles to install replicas</a>. By using Ansible roles, you can consistently install and customize multiple replicas.
			</p><p>
				Interactive and non-interactive methods that do not use Ansible are useful in topologies where, for example, the replica preparation is delegated to a user or a third party. You can also use these methods in geographically distributed topologies where you do not have access from the Ansible controller node.
			</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You are installing one IdM replica at a time. The installation of multiple replicas at the same time is not supported.
				</li><li class="listitem"><p class="simpara">
					Ensure your system is <a class="link" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" title="Chapter 19. Preparing the system for an IdM replica installation">prepared for IdM replica installation</a>.
				</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						If this preparation is not performed, installing an IdM replica will fail.
					</p></div></rh-alert></li></ul></div><p>
			For the individual types of replica installation procedures, see:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="xref" href="#installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica" title="20.1. Installing an IdM replica with integrated DNS and a CA">Section 20.1, “Installing an IdM replica with integrated DNS and a CA”</a>
				</li><li class="listitem">
					<a class="xref" href="#installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica" title="20.2. Installing an IdM replica with integrated DNS and no CA">Section 20.2, “Installing an IdM replica with integrated DNS and no CA”</a>
				</li><li class="listitem">
					<a class="xref" href="#installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica" title="20.3. Installing an IdM replica without integrated DNS and with a CA">Section 20.3, “Installing an IdM replica without integrated DNS and with a CA”</a>
				</li><li class="listitem">
					<a class="xref" href="#installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica" title="20.4. Installing an IdM replica without integrated DNS and without a CA">Section 20.4, “Installing an IdM replica without integrated DNS and without a CA”</a>
				</li><li class="listitem">
					<a class="xref" href="#installing-an-idm-hidden-replica_install-replica" title="20.5. Installing an IdM hidden replica">Section 20.5, “Installing an IdM hidden replica”</a>
				</li></ul></div><p>
			To troubleshoot the replica installation procedure, see:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="xref" href="#troubleshooting-idm-replica-installation_installing-identity-management" title="Chapter 21. Troubleshooting IdM replica installation">Chapter 21, <em>Troubleshooting IdM replica installation</em></a>
				</li></ul></div><p>
			After the installation, see:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="xref" href="#testing-an-ipa-replica_install-replica" title="20.6. Testing an IdM replica">Section 20.6, “Testing an IdM replica”</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#backing-up-and-restoring-idm_planning-identity-management">Backing Up and Restoring IdM</a>
				</li></ul></div><section class="section" id="installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica"><div class="titlepage"><div><div><h3 class="title">20.1. Installing an IdM replica with integrated DNS and a CA</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to install an Identity Management (IdM) replica:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						With integrated DNS
					</li><li class="listitem">
						With a certificate authority (CA)
					</li></ul></div><p>
				You can do this to, for example, replicate the CA service for resiliency after installing an IdM server with an integrated CA.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					When configuring a replica with a CA, the CA configuration of the replica must mirror the CA configuration of the other server.
				</p><p>
					For example, if the server includes an integrated IdM CA as the root CA, the new replica must also be installed with an integrated CA as the root CA. No other CA configuration is available in this case.
				</p><p>
					Including the <code class="literal">--setup-ca</code> option in the <code class="literal">ipa-replica-install</code> command copies the CA configuration of the initial server.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure your system is <a class="link" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" title="Chapter 19. Preparing the system for an IdM replica installation">prepared for an IdM replica installation</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter <code class="literal">ipa-replica-install</code> with these options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">--setup-dns</code> to configure the replica as a DNS server
							</li><li class="listitem"><p class="simpara">
								<code class="literal">--forwarder</code> to specify a per-server forwarder, or <code class="literal">--no-forwarder</code> if you do not want to use any per-server forwarders. To specify multiple per-server forwarders for failover reasons, use <code class="literal">--forwarder</code> multiple times.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									The <code class="literal">ipa-replica-install</code> utility accepts a number of other options related to DNS settings, such as <code class="literal option">--no-reverse</code> or <code class="literal option">--no-host-dns</code>. For more information about them, see the <code class="literal">ipa-replica-install</code>(1) man page.
								</p></div></rh-alert></li><li class="listitem">
								<code class="literal">--setup-ca</code> to include a CA on the replica
							</li></ul></div><p class="simpara">
						For example, to set up a replica with an integrated DNS server and a CA that forwards all DNS requests not managed by the IdM servers to the DNS server running on IP 192.0.2.1:
					</p><pre class="screen"># <span class="strong strong"><strong>ipa-replica-install --setup-dns --forwarder <span class="emphasis"><em>192.0.2.1</em></span> --setup-ca</strong></span></pre></li><li class="listitem"><p class="simpara">
						After the installation completes, add a DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal">idm.example.com</code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Repeat this step each time after you install an IdM DNS server.
						</p></div></rh-alert></li></ol></div></section><section class="section" id="installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica"><div class="titlepage"><div><div><h3 class="title">20.2. Installing an IdM replica with integrated DNS and no CA</h3></div></div></div><p>
				Follow this procedure to install an Identity Management (IdM) replica:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						With integrated DNS
					</li><li class="listitem">
						Without a certificate authority (CA) in an IdM environment in which a CA is already installed. The replica will forward all certificate operations to the IdM server with a CA installed.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure your system is <a class="link" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" title="Chapter 19. Preparing the system for an IdM replica installation">prepared for an IdM replica installation</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter <code class="literal">ipa-replica-install</code> with these options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal option">--setup-dns</code> to configure the replica as a DNS server
							</li><li class="listitem">
								<code class="literal">--forwarder</code> to specify a per-server forwarder, or <code class="literal">--no-forwarder</code> if you do not want to use any per-server forwarders. To specify multiple per-server forwarders for failover reasons, use <code class="literal">--forwarder</code> multiple times.
							</li></ul></div><p class="simpara">
						For example, to set up a replica with an integrated DNS server that forwards all DNS requests not managed by the IdM servers to the DNS server running on IP 192.0.2.1:
					</p><pre class="screen"># ipa-replica-install --setup-dns --forwarder <span class="emphasis"><em>192.0.2.1</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal">ipa-replica-install</code> utility accepts a number of other options related to DNS settings, such as <code class="literal option">--no-reverse</code> or <code class="literal option">--no-host-dns</code>. For more information about them, see the <code class="literal">ipa-replica-install</code>(1) man page.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						After the installation completes, add a DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal">idm.example.com</code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Repeat this step each time after you install an IdM DNS server.
						</p></div></rh-alert></li></ol></div></section><section class="section" id="installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica"><div class="titlepage"><div><div><h3 class="title">20.3. Installing an IdM replica without integrated DNS and with a CA</h3></div></div></div><p>
				Follow this procedure to install an Identity Management (IdM) replica:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Without integrated DNS
					</li><li class="listitem">
						With a certificate authority (CA)
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					When configuring a replica with a CA, the CA configuration of the replica must mirror the CA configuration of the other server.
				</p><p>
					For example, if the server includes an integrated IdM CA as the root CA, the new replica must also be installed with an integrated CA as the root CA. No other CA configuration is available in this case.
				</p><p>
					Including the <code class="literal">--setup-ca</code> option in the <code class="literal">ipa-replica-install</code> command copies the CA configuration of the initial server.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure your system is <a class="link" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" title="Chapter 19. Preparing the system for an IdM replica installation">prepared for an IdM replica installation</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter <code class="literal">ipa-replica-install</code> with the <code class="literal option">--setup-ca</code> option.
					</p><pre class="screen"># ipa-replica-install --setup-ca</pre></li><li class="listitem"><p class="simpara">
						Add the newly created IdM DNS service records to your DNS server:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Export the IdM DNS service records into a file in the <code class="literal">nsupdate</code> format:
							</p><pre class="screen">$ ipa dns-update-system-records --dry-run --out dns_records_file.nsupdate</pre></li><li class="listitem">
								Submit a DNS update request to your DNS server using the <code class="literal">nsupdate</code> utility and the <span class="strong strong"><strong>dns_records_file.nsupdate</strong></span> file. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/linux_domain_identity_authentication_and_policy_guide/dns-updates-external#dns-update-external-nsupdate">Updating External DNS Records Using nsupdate</a> in RHEL 7 documentation. Alternatively, refer to your DNS server documentation for adding DNS records.
							</li></ol></div></li></ol></div></section><section class="section" id="installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica"><div class="titlepage"><div><div><h3 class="title">20.4. Installing an IdM replica without integrated DNS and without a CA</h3></div></div></div><p>
				Follow this procedure to install an Identity Management (IdM) replica:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Without integrated DNS
					</li><li class="listitem">
						Without a certificate authority (CA) by providing the required certificates manually. The assumption here is that the first server was installed without a CA.
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					You cannot install a server or replica using self-signed third-party server certificates because the imported certificate files must contain the full CA certificate chain of the CA that issued the LDAP and Apache server certificates.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure your system is <a class="link" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" title="Chapter 19. Preparing the system for an IdM replica installation">prepared for an IdM replica installation</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enter <code class="literal">ipa-replica-install</code>, and provide the required certificate files by adding these options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal option">--dirsrv-cert-file</code>
							</li><li class="listitem">
								<code class="literal option">--dirsrv-pin</code>
							</li><li class="listitem">
								<code class="literal option">--http-cert-file</code>
							</li><li class="listitem">
								<code class="literal option">--http-pin</code>
							</li></ul></div><p class="simpara">
						For details about the files that are provided using these options, see <a class="xref" href="#certificates-required-to-install-ipa-server-no-ca_install-server-no-ca" title="4.1. Certificates required to install an IdM server without a CA">Section 4.1, “Certificates required to install an IdM server without a CA”</a>.
					</p><p class="simpara">
						For example:
					</p><pre class="screen"># <span class="strong strong"><strong>ipa-replica-install \</strong></span>
    <span class="strong strong"><strong>--dirsrv-cert-file <span class="emphasis"><em>/tmp/server.crt</em></span> \</strong></span>
    <span class="strong strong"><strong>--dirsrv-cert-file <span class="emphasis"><em>/tmp/server.key</em></span> \</strong></span>
    <span class="strong strong"><strong>--dirsrv-pin <span class="emphasis"><em>secret</em></span> \</strong></span>
    <span class="strong strong"><strong>--http-cert-file <span class="emphasis"><em>/tmp/server.crt</em></span> \</strong></span>
    <span class="strong strong"><strong>--http-cert-file <span class="emphasis"><em>/tmp/server.key</em></span> \</strong></span>
    <span class="strong strong"><strong>--http-pin <span class="emphasis"><em>secret</em></span></strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Do not add the <code class="literal option">--ca-cert-file</code> option. The <code class="literal">ipa-replica-install</code> utility takes this part of the certificate information automatically from the first server you installed.
						</p></div></rh-alert></li></ul></div></section><section class="section" id="installing-an-idm-hidden-replica_install-replica"><div class="titlepage"><div><div><h3 class="title">20.5. Installing an IdM hidden replica</h3></div></div></div><p class="_abstract _abstract">
				A hidden (unadvertised) replica is an Identity Management (IdM) server that has all services running and available. However, it has no SRV records in DNS, and LDAP server roles are not enabled. Therefore, clients cannot use service discovery to detect these hidden replicas.
			</p><p>
				For further details about hidden replicas, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-the-replica-topology_planning-identity-management#the-hidden-replica-mode_planning-the-replica-topology">The hidden replica mode</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure your system is <a class="link" href="#preparing-the-system-for-ipa-replica-installation_installing-identity-management" title="Chapter 19. Preparing the system for an IdM replica installation">prepared for an IdM replica installation</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To install a hidden replica, use the following command:
					</p><pre class="literallayout">ipa-replica-install --hidden-replica</pre></li></ul></div><p>
				Note that the command installs a replica without DNS SRV records and with disabled LDAP server roles.
			</p><p>
				You can also change the mode of existing replica to hidden. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_managing-replication-topology_installing-identity-management#demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology">Demotion and promotion of hidden replicas</a>
			</p></section><section class="section" id="testing-an-ipa-replica_install-replica"><div class="titlepage"><div><div><h3 class="title">20.6. Testing an IdM replica</h3></div></div></div><p class="_abstract _abstract">
				After creating a replica, check if the replica replicates data as expected. You can use the following procedure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a user on the new replica:
					</p><pre class="literallayout">[admin@new_replica ~]$ <span class="strong strong"><strong>ipa user-add <span class="emphasis"><em>test_user</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Make sure the user is visible on another replica:
					</p><pre class="literallayout">[admin@another_replica ~]$ <span class="strong strong"><strong>ipa user-show <span class="emphasis"><em>test_user</em></span></strong></span></pre></li></ol></div></section><section class="section" id="connection-requests-during-an-ipa-replica-installation_install-replica"><div class="titlepage"><div><div><h3 class="title">20.7. Connections performed during an IdM replica installation</h3></div></div></div><p class="_abstract _abstract">
				<a class="link" href="#tab-requests-replica-installation_install-replica" title="Table 20.1. Requests performed during an IdM replica installation">Requests performed during an IdM replica installation</a> lists the operations performed by <code class="literal">ipa-replica-install</code>, the Identity Management (IdM) replica installation tool.
			</p><rh-table id="tab-requests-replica-installation_install-replica"><table class="lt-4-cols lt-7-rows"><caption>Table 20.1. Requests performed during an IdM replica installation</caption><colgroup><col style="width: 38%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 38%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559988017392" scope="col">Operation</th><th align="left" valign="top" id="idm140559988016304" scope="col">Protocol used</th><th align="left" valign="top" id="idm140559988015216" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559988017392"> <p>
								DNS resolution against the DNS resolvers configured on the client system
							</p>
							 </td><td align="left" valign="top" headers="idm140559988016304"> <p>
								DNS
							</p>
							 </td><td align="left" valign="top" headers="idm140559988015216"> <p>
								To discover the IP addresses of IdM servers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988017392"> <p>
								Requests to ports 88 (TCP/TCP6 and UDP/UDP6) on the discovered IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559988016304"> <p>
								Kerberos
							</p>
							 </td><td align="left" valign="top" headers="idm140559988015216"> <p>
								To obtain a Kerberos ticket
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988017392"> <p>
								JSON-RPC calls to the IdM Apache-based web-service on the discovered or configured IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559988016304"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559988015216"> <p>
								IdM client enrollment; replica keys retrieval and certificate issuance if required
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988017392"> <p>
								Requests over TCP/TCP6 to port 389 on the IdM server, using SASL GSSAPI authentication, plain LDAP, or both
							</p>
							 </td><td align="left" valign="top" headers="idm140559988016304"> <p>
								LDAP
							</p>
							 </td><td align="left" valign="top" headers="idm140559988015216"> <p>
								IdM client enrollment; CA certificate chain retrieval; LDAP data replication
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988017392"> <p>
								Requests over TCP/TCP6 to port 22 on IdM server
							</p>
							 </td><td align="left" valign="top" headers="idm140559988016304"> <p>
								SSH
							</p>
							 </td><td align="left" valign="top" headers="idm140559988015216"> <p>
								To check if the connection is working
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988017392"> <p>
								(optionally) Access over port 8443 (TCP/TCP6) on the IdM servers
							</p>
							 </td><td align="left" valign="top" headers="idm140559988016304"> <p>
								HTTPS
							</p>
							 </td><td align="left" valign="top" headers="idm140559988015216"> <p>
								To administer the Certificate Authority on the IdM server (only during IdM server and replica installation)
							</p>
							 </td></tr></tbody></table></rh-table></section></section><section class="chapter" id="troubleshooting-idm-replica-installation_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Troubleshooting IdM replica installation</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe the process for gathering information about a failing IdM replica installation, and how to resolve some common installation issues.
		</p><section class="section" id="ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation"><div class="titlepage"><div><div><h3 class="title">21.1. IdM replica installation error log files</h3></div></div></div><p>
				When you install an Identity Management (IdM) replica, debugging information is appended to the following log files on the <span class="strong strong"><strong>replica</strong></span>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal filename">/var/log/ipareplica-install.log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/ipareplica-conncheck.log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/ipaclient-install.log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/httpd/error_log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/access</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/errors</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/ipaserver-install.log</code>
					</li></ul></div><p>
				The replica installation process also appends debugging information to the following log files on the IdM <span class="strong strong"><strong>server</strong></span> the replica is contacting:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal filename">/var/log/httpd/error_log</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/access</code>
					</li><li class="listitem">
						<code class="literal filename">/var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/errors</code>
					</li></ul></div><p>
				The last line of each log file reports success or failure, and <code class="literal">ERROR</code> and <code class="literal">DEBUG</code> entries provide additional context.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation" title="21.2. Reviewing IdM replica installation errors">Reviewing IdM replica installation errors</a>
					</li></ul></div></section><section class="section" id="reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation"><div class="titlepage"><div><div><h3 class="title">21.2. Reviewing IdM replica installation errors</h3></div></div></div><p class="_abstract _abstract">
				To troubleshoot a failing IdM replica installation, review the errors at the end of the installation error log files on the new replica and the server, and use this information to resolve any corresponding issues.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges to display the contents of IdM log files.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">tail</code> command to display the latest errors from the primary log file <code class="literal filename">/var/log/ipareplica-install.log</code>. The following example displays the last 10 lines.
					</p><pre class="literallayout">[user@replica ~]$ <span class="strong strong"><strong>sudo tail -n 10 /var/log/ipareplica-install.log</strong></span>
[sudo] password for user:
  func(installer)
File "/usr/lib/python3.6/site-packages/ipaserver/install/server/replicainstall.py", line 424, in decorated
  func(installer)
File "/usr/lib/python3.6/site-packages/ipaserver/install/server/replicainstall.py", line 785, in promote_check
  ensure_enrolled(installer)
File "/usr/lib/python3.6/site-packages/ipaserver/install/server/replicainstall.py", line 740, in ensure_enrolled
  raise ScriptError("Configuration of client side components failed!")

2020-05-28T18:24:51Z <span class="strong strong"><strong>DEBUG The ipa-replica-install command failed, exception: ScriptError: Configuration of client side components failed!</strong></span>
2020-05-28T18:24:51Z <span class="strong strong"><strong>ERROR Configuration of client side components failed!</strong></span>
2020-05-28T18:24:51Z <span class="strong strong"><strong>ERROR The ipa-replica-install command failed. See /var/log/ipareplica-install.log for more information</strong></span></pre></li><li class="listitem"><p class="simpara">
						To review the log file interactively, open the end of the log file using the <code class="literal">less</code> utility and use the <kbd class="keycap">↑</kbd> and <kbd class="keycap">↓</kbd> arrow keys to navigate.
					</p><pre class="literallayout">[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/ipareplica-install.log</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: While <code class="literal filename">/var/log/ipareplica-install.log</code> is the primary log file for a replica installation, you can gather additional troubleshooting information by repeating this review process with additional files on the replica and the server.
					</p><div class="formalpara"><p class="title"><strong>On the replica:</strong></p><p>

</p><pre class="literallayout">[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/ipareplica-conncheck.log</strong></span>
[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/ipaclient-install.log</strong></span>
[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/httpd/error_log</strong></span>
[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/access</strong></span>
[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/errors</strong></span>
[user@replica ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/ipaserver-install.log</strong></span></pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>On the server:</strong></p><p>

</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/httpd/error_log</strong></span>
[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/access</strong></span>
[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/dirsrv/slapd-<span class="emphasis"><em>INSTANCE-NAME</em></span>/errors</strong></span></pre>

						<p></p></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation" title="21.1. IdM replica installation error log files">IdM replica installation error log files</a>
					</li><li class="listitem">
						If you are unable to resolve a failing replica installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the replica and an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation"><div class="titlepage"><div><div><h3 class="title">21.3. IdM CA installation error log files</h3></div></div></div><p class="_abstract _abstract">
				Installing the Certificate Authority (CA) service on an Identity Management (IdM) replica appends debugging information to several locations on the replica and the IdM server the replica communicates with.
			</p><rh-table id="idm140560001471424"><table class="lt-4-cols lt-7-rows"><caption>Table 21.1. On the replica (in order of recommended priority):</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559986083888" scope="col">Location</th><th align="left" valign="top" id="idm140559986082800" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559986083888"> <p>
								<code class="literal filename">/var/log/pki/pki-ca-spawn.<span class="emphasis"><em>$TIME_OF_INSTALLATION</em></span>.log</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559986082800"> <p>
								High-level issues and Python traces for the <code class="literal">pkispawn</code> installation process
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986083888"> <p>
								<code class="literal">journalctl -u pki-tomcatd@pki-tomcat</code> output
							</p>
							 </td><td align="left" valign="top" headers="idm140559986082800"> <p>
								Errors from the <code class="literal">pki-tomcatd@pki-tomcat</code> service
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986083888"> <p>
								<code class="literal filename">/var/log/pki/pki-tomcat/ca/debug.<span class="emphasis"><em>$DATE</em></span>.log</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559986082800"> <p>
								Large JAVA stacktraces of activity in the core of the Public Key Infrastructure (PKI) product
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986083888"> <p>
								<code class="literal filename">/var/log/pki/pki-tomcat/ca/signedAudit/ca_audit</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140559986082800"> <p>
								Audit log of the PKI product
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559986083888"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal filename">/var/log/pki/pki-tomcat/ca/system</code>
									</li><li class="listitem">
										<code class="literal filename">/var/log/pki/pki-tomcat/ca/transactions</code>
									</li><li class="listitem">
										<code class="literal filename">/var/log/pki/pki-tomcat/catalina.<span class="emphasis"><em>$DATE</em></span>.log</code>
									</li></ul></div>
							 </td><td align="left" valign="top" headers="idm140559986082800"> <p>
								Low-level debug data of certificate operations for service principals, hosts, and other entities that use certificates
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist"><p class="title"><strong>On the server contacted by the replica:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal filename">/var/log/httpd/error_log</code> log file
					</li></ul></div><p>
				Installing the CA service on an existing IdM replica also writes debugging information to the following log file:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal filename">/var/log/ipareplica-ca-install.log</code> log file
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If a full IdM replica installation fails while installing the optional CA component, no details about the CA are logged; a message is logged in the <code class="literal">/var/log/ipareplica-install.log</code> file indicating that the overall installation process failed. Red Hat recommends reviewing the log files listed above for details specific to the CA installation failure.
				</p><p>
					The only exception to this behavior is when you are installing the CA service and the root CA is an external CA. If there is an issue with the certificate from the external CA, errors are logged in <code class="literal">/var/log/ipareplica-install.log</code>.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation" title="21.4. Reviewing IdM CA installation errors">Reviewing IdM CA installation errors</a>
					</li></ul></div></section><section class="section" id="reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation"><div class="titlepage"><div><div><h3 class="title">21.4. Reviewing IdM CA installation errors</h3></div></div></div><p class="_abstract _abstract">
				To troubleshoot a failing IdM CA installation, review the errors at the end of the CA installation error log files and use this information to resolve any corresponding issues.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges to display the contents of IdM log files.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To review a log file interactively, open the end of the log file using the <code class="literal">less</code> utility and use the <kbd class="keycap">↑</kbd> and <kbd class="keycap">↓</kbd> arrow keys to navigate, while searching for <code class="literal">ScriptError</code> entries. The following example opens <code class="literal filename">/var/log/pki/pki-ca-spawn.<span class="emphasis"><em>$TIME_OF_INSTALLATION</em></span>.log</code>.
					</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>sudo less -N +G /var/log/pki/pki-ca-spawn.<span class="emphasis"><em>20200527185902</em></span>.log</strong></span></pre></li><li class="listitem">
						Gather additional troubleshooting information by repeating this review process with all the CA installation error log files.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation" title="21.3. IdM CA installation error log files">IdM CA installation error log files</a>
					</li><li class="listitem">
						If you are unable to resolve a failing IdM server installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="removing-a-partial-idm-replica-installation_troubleshooting-idm-replica-installation"><div class="titlepage"><div><div><h3 class="title">21.5. Removing a partial IdM replica installation</h3></div></div></div><p class="_abstract _abstract">
				If an IdM replica installation fails, some configuration files may be left behind. Additional attempts to install the IdM replica can fail and the installation script reports that IPA is already configured:
			</p><div class="formalpara"><p class="title"><strong>Example system with existing partial IdM configuration</strong></p><p>

</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-replica-install</strong></span>
Your system may be partly configured.
Run /usr/sbin/ipa-server-install --uninstall to clean up.

IPA server is already configured on this system.
If you want to reinstall the IPA server, please uninstall it first using 'ipa-server-install --uninstall'.
The ipa-replica-install command failed. See /var/log/ipareplica-install.log for more information</pre>

				<p></p></div><p>
				To resolve this issue, uninstall IdM software from the replica, remove the replica from the IdM topology, and retry the installation process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Uninstall the IdM server software on the host you are trying to configure as an IdM replica.
					</p><pre class="literallayout">[root@replica ~]# <span class="strong strong"><strong>ipa-server-install --uninstall</strong></span></pre></li><li class="listitem"><p class="simpara">
						On all other servers in the topology, use the <code class="literal">ipa server-del</code> command to delete any references to the replica that did not install properly.
					</p><pre class="literallayout">[root@other-replica ~]# <span class="strong strong"><strong>ipa server-del replica.idm.example.com</strong></span></pre></li><li class="listitem">
						Attempt installing the replica.
					</li><li class="listitem"><p class="simpara">
						If you continue to experience difficulty installing an IdM replica because of repeated failed installations, reinstall the operating system.
					</p><p class="simpara">
						One of the requirements for installing an IdM replica is a clean system without any customization. Failed installations may have compromised the integrity of the host by unexpectedly modifying system files.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For additional details on uninstalling an IdM replica, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_identity_management/uninstalling-an-idm-replica_installing-identity-management">Uninstalling an IdM replica</a>.
					</li><li class="listitem">
						If installation attempts fail after repeated uninstallation attempts, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the replica and an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section" id="resolving-invalid-credential-errors_troubleshooting-idm-replica-installation"><div class="titlepage"><div><div><h3 class="title">21.6. Resolving invalid credential errors</h3></div></div></div><p class="_abstract _abstract">
				If an IdM replica installation fails with an <code class="literal">Invalid credentials</code> error, the system clocks on the hosts may be out of sync with each other:
			</p><pre class="literallayout">[27/40]: setting up initial replication
Starting replication, please wait until this has completed.
Update in progress, 15 seconds elapsed
[ldap://server.example.com:389] reports: <span class="strong strong"><strong>Update failed! Status: [49 - LDAP error: Invalid credentials]</strong></span>

[error] RuntimeError: Failed to start replication
Your system may be partly configured.
Run /usr/sbin/ipa-server-install --uninstall to clean up.

ipa.ipapython.install.cli.install_tool(CompatServerReplicaInstall): ERROR    Failed to start replication
ipa.ipapython.install.cli.install_tool(CompatServerReplicaInstall): ERROR    The ipa-replica-install command failed. See /var/log/ipareplica-install.log for more information</pre><p>
				If you use the <code class="literal">--no-ntp</code> or <code class="literal">-N</code> options to attempt the replica installation while clocks are out of sync, the installation fails because services are unable to authenticate with Kerberos.
			</p><p>
				To resolve this issue, synchronize the clocks on both hosts and retry the installation process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must have <code class="literal">root</code> privileges to change system time.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Synchronize the system clocks manually or with <code class="literal">chronyd</code>.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Synchronizing manually</span></dt><dd><p class="simpara">
									Display the system time on the server and set the replica’s time to match.
								</p><pre class="literallayout">[user@server ~]$ <span class="strong strong"><strong>date</strong></span>
Thu May 28 21:03:57 EDT 2020

[user@replica ~]$ sudo timedatectl set-time <span class="emphasis"><em>'2020-05-28 21:04:00'</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											<span class="strong strong"><strong>Synchronizing with <code class="literal">chronyd</code></strong></span>:
										</p><p class="simpara">
											See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization">Using the Chrony suite to configure NTP</a> to configure and set system time with <code class="literal">chrony</code> tools.
										</p></li></ul></div></dd></dl></div></li><li class="listitem">
						Attempt the IdM replica installation again.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are unable to resolve a failing replica installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the <a class="link" href="https://access.redhat.com/support/cases/#/">Red Hat Customer Portal</a> and provide an <code class="literal">sosreport</code> of the replica and an <code class="literal">sosreport</code> of the server.
					</li><li class="listitem">
						The <code class="literal">sosreport</code> utility collects configuration details, logs and system information from a RHEL system. For more information about the <code class="literal">sosreport</code> utility, see <a class="link" href="https://access.redhat.com/solutions/3592">What is an sosreport and how to create one in Red Hat Enterprise Linux?</a>.
					</li></ul></div></section><section class="section _additional-resources" id="additional_resources_5"><div class="titlepage"><div><div><h3 class="title">21.7. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#troubleshooting-idm-server-installation_installing-identity-management" title="Chapter 8. Troubleshooting IdM server installation">Troubleshooting the first IdM server installation</a>
					</li><li class="listitem">
						<a class="link" href="#troubleshooting-idm-client-installation_installing-identity-management" title="Chapter 15. Troubleshooting IdM client installation">Troubleshooting IdM client installation</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#backing-up-and-restoring-idm_planning-identity-management">Backing up and restoring IdM</a>
					</li></ul></div></section></section><section class="chapter" id="uninstalling-an-idm-replica_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 22. Uninstalling an IdM replica</h2></div></div></div><p>
			As an IdM administrator, you can remove an Identity Management (IdM) replica from the topology. For more information, see <a class="link" href="#uninstalling-an-ipa-server_installing-identity-management" title="Chapter 9. Uninstalling an IdM server">Uninstalling an IdM server</a>.
		</p></section><section class="chapter" id="assembly_managing-replication-topology_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 23. Managing replication topology</h2></div></div></div><p class="_abstract _abstract">
			This chapter describes how to manage replication between servers in an Identity Management (IdM) domain.
		</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/planning-the-replica-topology_planning-identity-management">Planning the replica topology</a>
				</li><li class="listitem">
					<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/installing_identity_management/uninstalling-an-ipa-server_installing-identity-management#uninstalling-an-ipa-server_installing-identity-management">Uninstalling an IdM server</a>
				</li><li class="listitem">
					<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/tuning_performance_in_identity_management/failover-load-balancing-high-availability_tuning-performance-in-idm#failover-load-balancing-high-availability_tuning-performance-in-idm">Failover, load-balancing, and high-availability in IdM</a>
				</li></ul></div><section class="section" id="assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology"><div class="titlepage"><div><div><h3 class="title">23.1. Explaining replication agreements, topology suffixes and topology segments</h3></div></div></div><p class="_abstract _abstract">
				When you create a replica, Identity Management (IdM) creates a replication agreement between the initial server and the replica. The data that is replicated is then stored in topology suffixes and when two replicas have a replication agreement between their suffixes, the suffixes form a topology segment. These concepts are explained in more detail in the following sections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" title="23.1.1. Replication agreements between IdM replicas">Replication agreements</a>
					</li><li class="listitem">
						<a class="link" href="#con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" title="23.1.2. Topology suffixes">Topology suffixes</a>
					</li><li class="listitem">
						<a class="link" href="#con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments" title="23.1.3. Topology segments">Topology segments</a>
					</li></ul></div><section class="section" id="replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments"><div class="titlepage"><div><div><h4 class="title">23.1.1. Replication agreements between IdM replicas</h4></div></div></div><p class="_abstract _abstract">
					When an administrator creates a replica based on an existing server, Identity Management (IdM) creates a <span class="emphasis"><em>replication agreement</em></span> between the initial server and the replica. The replication agreement ensures that the data and configuration is continuously replicated between the two servers.
				</p><p>
					IdM uses <span class="emphasis"><em>multiple read/write replica replication</em></span>. In this configuration, all replicas joined in a replication agreement receive and provide updates, and are therefore considered suppliers and consumers. Replication agreements are always bilateral.
				</p><div class="figure" id="idm140559984004144"><p class="title"><strong>Figure 23.1. Server and replica agreements</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/d06b1dd2052f1e330862ea59ba3cf9db/64_RHEL_IdM_0120_2.1.png" alt="An image of two servers with two sets of replication agreements between them: a data replication agreement that pertains to their Directory Server database and a certificate replication agreement that pertains to their Certificate System data"></div></div></div><p>
					IdM uses two types of replication agreements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Domain replication agreements</strong></span> replicate the identity information.
						</li><li class="listitem">
							<span class="strong strong"><strong>Certificate replication agreements</strong></span> replicate the certificate information.
						</li></ul></div><p>
					Both replication channels are independent. Two servers can have one or both types of replication agreements configured between them. For example, when server A and server B have only domain replication agreement configured, only identity information is replicated between them, not the certificate information.
				</p></section><section class="section" id="con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments"><div class="titlepage"><div><div><h4 class="title">23.1.2. Topology suffixes</h4></div></div></div><p class="_abstract _abstract">
					<span class="emphasis"><em>Topology suffixes</em></span> store the data that is replicated. IdM supports two types of topology suffixes: <code class="literal">domain</code> and <code class="literal">ca</code>. Each suffix represents a separate server, a separate replication topology.
				</p><p>
					When a replication agreement is configured, it joins two topology suffixes of the same type on two different servers.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The <code class="literal">domain</code> suffix: dc=<span class="emphasis"><em>example</em></span>,dc=<span class="emphasis"><em>com</em></span></span></dt><dd><p class="simpara">
								The <code class="literal">domain</code> suffix contains all domain-related data.
							</p><p class="simpara">
								When two replicas have a replication agreement between their <code class="literal">domain</code> suffixes, they share directory data, such as users, groups, and policies.
							</p></dd><dt><span class="term">The <code class="literal">ca</code> suffix: o=ipaca</span></dt><dd><p class="simpara">
								The <code class="literal">ca</code> suffix contains data for the Certificate System component. It is only present on servers with a certificate authority (CA) installed.
							</p><p class="simpara">
								When two replicas have a replication agreement between their <code class="literal">ca</code> suffixes, they share certificate data.
							</p></dd></dl></div><div class="figure" id="idm140559983980704"><p class="title"><strong>Figure 23.2. Topology suffixes</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/fa33c5d5e4147da3c6802434b88b38ee/topology_suffix.png" alt="topology suffix"></div></div></div><p>
					An initial topology replication agreement is set up between two servers by the <code class="literal">ipa-replica-install</code> script when installing a new replica.
				</p><div class="example" id="idm140559985812224"><p class="title"><strong>Example 23.1. Viewing topology suffixes</strong></p><div class="example-contents"><p>
						The <code class="literal command">ipa topologysuffix-find</code> command displays a list of topology suffixes:
					</p><pre class="literallayout">$ ipa topologysuffix-find
---------------------------
2 topology suffixes matched
---------------------------
  Suffix name: ca
  Managed LDAP suffix DN: o=ipaca

  Suffix name: domain
  Managed LDAP suffix DN: dc=example,dc=com
----------------------------
Number of entries returned 2
----------------------------</pre></div></div></section><section class="section" id="con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments"><div class="titlepage"><div><div><h4 class="title">23.1.3. Topology segments</h4></div></div></div><p class="_abstract _abstract">
					When two replicas have a replication agreement between their suffixes, the suffixes form a <span class="emphasis"><em>topology segment</em></span>. Each topology segment consists of a <span class="emphasis"><em>left node</em></span> and a <span class="emphasis"><em>right node</em></span>. The nodes represent the servers joined in the replication agreement.
				</p><p>
					Topology segments in IdM are always bidirectional. Each segment represents two replication agreements: from server A to server B, and from server B to server A. The data is therefore replicated in both directions.
				</p><div class="figure" id="idm140559985804112"><p class="title"><strong>Figure 23.3. Topology segments</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/9148063b300b50cc2a573ed8067a83d4/topology_segment.png" alt="topology segment"></div></div></div><div class="example" id="idm140559985800288"><p class="title"><strong>Example 23.2. Viewing topology segments</strong></p><div class="example-contents"><p>
						The <code class="literal command">ipa topologysegment-find</code> command shows the current topology segments configured for the domain or CA suffixes. For example, for the domain suffix:
					</p><pre class="literallayout">$ ipa topologysegment-find
Suffix name: domain
-----------------
1 segment matched
-----------------
  Segment name: server1.example.com-to-server2.example.com
  Left node: server1.example.com
  Right node: server2.example.com
  Connectivity: both
----------------------------
Number of entries returned 1
----------------------------</pre><p>
						In this example, domain-related data is only replicated between two servers: <code class="literal">server1.example.com</code> and <code class="literal">server2.example.com</code>.
					</p><p>
						To display details for a particular segment only, use the <code class="literal command">ipa topologysegment-show</code> command:
					</p><pre class="literallayout">$ ipa topologysegment-show
Suffix name: domain
Segment name: server1.example.com-to-server2.example.com
  Segment name: server1.example.com-to-server2.example.com
  Left node: server1.example.com
  Right node: server2.example.com
  Connectivity: both</pre></div></div></section></section><section class="section" id="con_using-the-topology-graph-to-manage-replication-topology_assembly_managing-replication-topology"><div class="titlepage"><div><div><h3 class="title">23.2. Using the topology graph to manage replication topology</h3></div></div></div><p class="_abstract _abstract">
				The topology graph in the web UI shows the relationships between the servers in the domain. Using the Web UI, you can manipulate and transform the representation of the topology.
			</p><div class="formalpara"><p class="title"><strong>Accessing the topology graph</strong></p><p>
					To access the topology graph:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Select <span class="guimenu">IPA Server</span> → <span class="guisubmenu">Topology</span> → <span class="guimenuitem">Topology Graph</span>.
					</li><li class="listitem">
						If you make any changes to the topology that are not immediately reflected in the graph, click <span class="guibutton">Refresh</span>.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Interpreting the topology graph</strong></p><p>
					Servers joined in a domain replication agreement are connected by an orange arrow. Servers joined in a CA replication agreement are connected by a blue arrow.
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Topology graph example: recommended topology</span></dt><dd><p class="simpara">
							The recommended topology example below shows one of the possible recommended topologies for four servers: each server is connected to at least two other servers, and more than one server is a CA server.
						</p><div class="figure" id="idm140559987154784"><p class="title"><strong>Figure 23.4. Recommended topology example</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/cd55705bad2dec419d9e4ca891f40024/mng_top_rec.png" alt="mng top rec"></div></div></div></dd><dt><span class="term">Topology graph example: discouraged topology</span></dt><dd><p class="simpara">
							In the discouraged topology example below, <code class="literal">server1</code> is a single point of failure. All the other servers have replication agreements with this server, but not with any of the other servers. Therefore, if <code class="literal">server1</code> fails, all the other servers will become isolated.
						</p><p class="simpara">
							Avoid creating topologies like this.
						</p><div class="figure" id="idm140559987147312"><p class="title"><strong>Figure 23.5. Discouraged topology example: Single Point of Failure</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/53e206d72acee63ae41040c834a81ded/mng_top_single.png" alt="mng top single"></div></div></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Customizing the topology view</strong></p><p>
					You can move individual topology nodes by holding and dragging the mouse:
				</p></div><div class="figure" id="idm140559987141456"><p class="title"><strong>Figure 23.6. Moving topology graph nodes</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/a21fdc688f301a69218b178065c384a6/customize_graph_1.png" alt="customize graph 1"></div></div></div><p>
				You can zoom in and zoom out the topology graph using the mouse wheel:
			</p><div class="figure" id="idm140559987137072"><p class="title"><strong>Figure 23.7. Zooming the topology graph</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/69f3d9636a9fa848d665cbb9b43e923d/customize_graph_2.png" alt="customize graph 2"></div></div></div><p>
				You can move the canvas of the topology graph by holding the left mouse button:
			</p><div class="figure" id="idm140559988380912"><p class="title"><strong>Figure 23.8. Moving the topology graph canvas</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/c4c29e9ae8eb8437036b036ec4594021/customize_graph_3.png" alt="customize graph 3"></div></div></div></section><section class="section" id="managing-topology-ui-set-up"><div class="titlepage"><div><div><h3 class="title">23.3. Setting up replication between two servers using the Web UI</h3></div></div></div><p class="_abstract _abstract">
				Using the Identity Management (IdM) Web UI, you can choose two servers and create a new replication agreement between them.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in as an IdM administrator.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the topology graph, hover your mouse over one of the server nodes.
					</p><div class="figure" id="idm140559988370576"><p class="title"><strong>Figure 23.9. Domain or CA options</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/00807abbb3a86dee58108ee47db1ede3/mng_top_domain_ca.png" alt="mng top domain ca"></div></div></div></li><li class="listitem">
						Click on the <code class="literal">domain</code> or the <code class="literal">ca</code> part of the circle depending on what type of topology segment you want to create.
					</li><li class="listitem"><p class="simpara">
						A new arrow representing the new replication agreement appears under your mouse pointer. Move your mouse to the other server node, and click on it.
					</p><div class="figure" id="idm140559988363696"><p class="title"><strong>Figure 23.10. Creating a new segment</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/dfcde024e4a284a1a5dc8c3dac8b3c55/mng_top_drag.png" alt="mng top drag"></div></div></div></li><li class="listitem">
						In the <code class="literal">Add topology segment</code> window, click <span class="guibutton">Add</span> to confirm the properties of the new segment.
					</li></ol></div><p>
				The new topology segment between the two servers joins them in a replication agreement. The topology graph now shows the updated replication topology:
			</p><div class="figure" id="idm140559988356992"><p class="title"><strong>Figure 23.11. New segment created</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/95346630b2944b155eed2bfc4f86d883/mng_top_three.png" alt="mng top three"></div></div></div></section><section class="section" id="managing-topology-ui-stop"><div class="titlepage"><div><div><h3 class="title">23.4. Stopping replication between two servers using the Web UI</h3></div></div></div><p class="_abstract _abstract">
				Using the Identity Management (IdM) Web UI, you can remove a replication agreement from servers.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in as an IdM administrator.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click on an arrow representing the replication agreement you want to remove. This highlights the arrow.
					</p><div class="figure" id="idm140559987074528"><p class="title"><strong>Figure 23.12. Topology segment highlighted</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/0e748d0749e5fc3944b347b2896460dc/mng_top_highlight.png" alt="mng top highlight"></div></div></div></li><li class="listitem">
						Click <span class="guibutton">Delete</span>.
					</li><li class="listitem"><p class="simpara">
						In the <code class="literal">Confirmation</code> window, click <span class="guibutton">OK</span>.
					</p><p class="simpara">
						IdM removes the topology segment between the two servers, which deletes their replication agreement. The topology graph now shows the updated replication topology:
					</p><div class="figure" id="idm140559987066736"><p class="title"><strong>Figure 23.13. Topology segment deleted</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/bb5fba43d75d9845fc754b18384708eb/mng_top_delete_segment.png" alt="mng top delete segment"></div></div></div></li></ol></div></section><section class="section" id="proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology"><div class="titlepage"><div><div><h3 class="title">23.5. Setting up replication between two servers using the CLI</h3></div></div></div><p class="_abstract _abstract">
				You can configure replication agreements between two servers using the <code class="literal">ipa topologysegment-add</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the IdM administrator credentials.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Create a topology segment for the two servers. When prompted, provide:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The required topology suffix: <code class="literal">domain</code> or <code class="literal">ca</code>
							</li><li class="listitem">
								The left node and the right node, representing the two servers
							</li><li class="listitem"><p class="simpara">
								[Optional] A custom name for the segment
							</p><p class="simpara">
								For example:
							</p><pre class="literallayout">$ ipa topologysegment-add
Suffix name: <span class="emphasis"><em>domain</em></span>
Left node: <span class="emphasis"><em>server1.example.com</em></span>
Right node: <span class="emphasis"><em>server2.example.com</em></span>
Segment name [server1.example.com-to-server2.example.com]: <span class="emphasis"><em>new_segment</em></span>
---------------------------
Added segment "new_segment"
---------------------------
  Segment name: new_segment
  Left node: server1.example.com
  Right node: server2.example.com
  Connectivity: both</pre><p class="simpara">
								Adding the new segment joins the servers in a replication agreement.
							</p></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the new segment is configured:
					</p><pre class="literallayout">$ ipa topologysegment-show
Suffix name: <span class="emphasis"><em>domain</em></span>
Segment name: <span class="emphasis"><em>new_segment</em></span>
  Segment name: new_segment
  Left node: server1.example.com
  Right node: server2.example.com
  Connectivity: both</pre></li></ul></div></section><section class="section" id="managing-topology-stop-cli"><div class="titlepage"><div><div><h3 class="title">23.6. Stopping replication between two servers using the CLI</h3></div></div></div><p class="_abstract _abstract">
				You can terminate replication agreements from command line using the <code class="literal">ipa topology segment-del</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the IdM administrator credentials.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						[Optional] If you do not know the name of the specific replication segment that you want to remove, display all segments available. Use the <code class="literal command">ipa topologysegment-find</code> command. When prompted, provide the required topology suffix: <code class="literal">domain</code> or <code class="literal">ca</code>. For example:
					</p><pre class="literallayout">$ ipa topologysegment-find
Suffix name: <span class="emphasis"><em>domain</em></span>
------------------
8 segments matched
------------------
  <span class="emphasis"><em>Segment name: new_segment</em></span>
  Left node: server1.example.com
  Right node: server2.example.com
  Connectivity: both

...

----------------------------
Number of entries returned 8
----------------------------</pre><p class="simpara">
						Locate the required segment in the output.
					</p></li><li class="listitem"><p class="simpara">
						Remove the topology segment joining the two servers:
					</p><pre class="literallayout">$ ipa topologysegment-del
Suffix name: <span class="emphasis"><em>domain</em></span>
Segment name: <span class="emphasis"><em>new_segment</em></span>
-----------------------------
Deleted segment "new_segment"
-----------------------------</pre><p class="simpara">
						Deleting the segment removes the replication agreement.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the segment is no longer listed:
					</p><pre class="literallayout">$ ipa topologysegment-find
Suffix name: <span class="emphasis"><em>domain</em></span>
------------------
7 segments matched
------------------
  Segment name: server2.example.com-to-server3.example.com
  Left node: server2.example.com
  Right node: server3.example.com
  Connectivity: both

...

----------------------------
Number of entries returned 7
----------------------------</pre></li></ul></div></section><section class="section" id="managing-topology-remove-ui"><div class="titlepage"><div><div><h3 class="title">23.7. Removing server from topology using the Web UI</h3></div></div></div><p class="_abstract _abstract">
				You can use Identity Management (IdM) web interface to remove a server from the topology. This action does not uninstall the server components from the host.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in as an IdM administrator.
					</li><li class="listitem">
						The server you want to remove is <span class="strong strong"><strong>not</strong></span> the only server connecting other servers with the rest of the topology; this would cause the other servers to become isolated, which is not allowed.
					</li><li class="listitem">
						The server you want to remove is <span class="strong strong"><strong>not</strong></span> your last CA or DNS server.
					</li></ul></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Removing a server is an irreversible action. If you remove a server, the only way to introduce it back into the topology is to install a new replica on the machine.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Select <span class="guimenu">IPA Server</span> → <span class="guisubmenu">Topology</span> → <span class="guimenuitem">IPA Servers</span>.
					</li><li class="listitem"><p class="simpara">
						Click on the name of the server you want to delete.
					</p><div class="figure" id="idm140559987231920"><p class="title"><strong>Figure 23.14. Selecting a server</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/968203deb86b18fe927684b18098d552/mng_top_delete.png" alt="mng top delete"></div></div></div></li><li class="listitem">
						Click <span class="guibutton">Delete Server</span>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/installing_identity_management/uninstalling-an-ipa-server_installing-identity-management#uninstalling-an-ipa-server_installing-identity-management">Uninstalling an IdM server</a>
					</li></ul></div></section><section class="section" id="viewing-available-server-roles-in-the-idm-topology-using-the-idm-web-ui_assembly_managing-replication-topology"><div class="titlepage"><div><div><h3 class="title">23.8. Viewing available server roles in the IdM topology using the IdM Web UI</h3></div></div></div><p class="_abstract _abstract">
				Based on the services installed on an IdM server, it can perform various <span class="emphasis"><em>server roles</em></span>. For example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						CA server
					</li><li class="listitem">
						DNS server
					</li><li class="listitem">
						Key recovery authority (KRA) server.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For a complete list of the supported server roles, see <span class="guimenu">IPA Server</span> → <span class="guisubmenu">Topology</span> → <span class="guimenuitem">Server Roles</span>.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Role status <code class="literal">absent</code> means that no server in the topology is performing the role.
								</li><li class="listitem">
									Role status <code class="literal">enabled</code> means that one or more servers in the topology are performing the role.
								</li></ul></div></div></rh-alert><div class="figure" id="idm140559987209808"><p class="title"><strong>Figure 23.15. Server roles in the web UI</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/f57ebfa0fb2a134e972299226fed37e1/server_role_absent.png" alt="server role absent"></div></div></div></li></ul></div></section><section class="section" id="viewing-available-server-roles-in-the-idm-topology-using-the-idm-cli_assembly_managing-replication-topology"><div class="titlepage"><div><div><h3 class="title">23.9. Viewing available server roles in the IdM topology using the IdM CLI</h3></div></div></div><p class="_abstract _abstract">
				Based on the services installed on an IdM server, it can perform various <span class="emphasis"><em>server roles</em></span>. For example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						CA server
					</li><li class="listitem">
						DNS server
					</li><li class="listitem">
						Key recovery authority (KRA) server.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display all CA servers in the topology and the current CA renewal server:
					</p><pre class="literallayout">$ ipa config-show
  ...
  IPA masters: server1.example.com, server2.example.com, server3.example.com
  <span class="emphasis"><em>IPA CA servers: server1.example.com, server2.example.com</em></span>
  <span class="emphasis"><em>IPA CA renewal master: server1.example.com</em></span></pre></li><li class="listitem"><p class="simpara">
						Alternatively, to display a list of roles enabled on a particular server, for example <span class="emphasis"><em>server.example.com</em></span>:
					</p><pre class="literallayout">$ ipa server-show
Server name: <span class="emphasis"><em>server.example.com</em></span>
  ...
  <span class="emphasis"><em>Enabled server roles: CA server, DNS server, KRA server</em></span></pre></li><li class="listitem"><p class="simpara">
						Alternatively, use the <code class="literal command">ipa server-find --servrole</code> command to search for all servers with a particular server role enabled. For example, to search for all CA servers:
					</p><pre class="literallayout">$ ipa server-find --servrole "CA server"
---------------------
2 IPA servers matched
---------------------
  Server name: server1.example.com
  ...

  Server name: server2.example.com
  ...
----------------------------
Number of entries returned 2
----------------------------</pre></li></ul></div></section><section class="section" id="server-roles-promote-to-ca"><div class="titlepage"><div><div><h3 class="title">23.10. Promoting a replica to a CA renewal server and CRL publisher server</h3></div></div></div><p class="_abstract _abstract">
				If your IdM deployment uses an embedded certificate authority (CA), one of the IdM CA servers acts as the CA renewal server, a server that manages the renewal of CA subsystem certificates. One of the IdM CA servers also acts as the IdM CRL publisher server, a server that generates certificate revocation lists.
			</p><p>
				By default, the CA renewal server and CRL publisher server roles are installed on the first server on which the system administrator installed the CA role using the <code class="literal command">ipa-server-install</code> or <code class="literal command">ipa-ca-install</code> command. You can, however, transfer either of the two roles to any other IdM server on which the CA role is enabled.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the IdM administrator credentials.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#changing-ca-renewal_ipa-ca-renewal">Change the current CA renewal server.</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/generating-crl-on-the-idm-ca-server_managing-certificates-in-idm#starting-crl-generation-on-idm-replica-server_generating-crl-on-the-idm-ca-server">Configure a replica to generate CRLs.</a>
					</li></ul></div></section><section class="section" id="demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology"><div class="titlepage"><div><div><h3 class="title">23.11. Demoting or promoting hidden replicas</h3></div></div></div><p class="_abstract _abstract">
				After a replica has been installed, you can configure whether the replica is hidden or visible.
			</p><p>
				For details about hidden replicas, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-the-replica-topology_planning-identity-management#the-hidden-replica-mode_planning-the-replica-topology">The hidden replica mode</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure that the replica is not the DNSSEC key master. If it is, move the service to another replica before making this replica hidden.
					</li><li class="listitem">
						Ensure that the replica is not a CA renewal server. If it is, move the service to another replica before making this replica hidden. For details, see
					</li></ul></div><p>
				<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#changing-ca-renewal_ipa-ca-renewal">Changing and resetting IdM CA renewal server</a>
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To hide a replica:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa server-state replica.idm.example.com --state=hidden</strong></span></pre></li><li class="listitem"><p class="simpara">
						To make a replica visible again:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa server-state replica.idm.example.com --state=enabled</strong></span></pre></li><li class="listitem"><p class="simpara">
						To view a list of all the hidden replicas in your topology:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa config-show</strong></span></pre><p class="simpara">
						If all of your replicas are enabled, the command output does not mention hidden replicas.
					</p></li></ul></div></section></section><section class="chapter" id="installing-and-running-the-ipa-healthcheck-tool_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 24. Installing and running the IdM Healthcheck tool</h2></div></div></div><p class="_abstract _abstract">
			Learn more about the IdM Healthcheck tool and how to install and run it.
		</p><section class="section" id="healthcheck-in-idm_installing-and-running-the-ipa-healthcheck-tool"><div class="titlepage"><div><div><h3 class="title">24.1. Healthcheck in IdM</h3></div></div></div><p class="_abstract _abstract">
				The Healthcheck tool in Identity Management (IdM) helps find issues that may impact the health of your IdM environment.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The Healthcheck tool is a command line tool that can be used without Kerberos authentication.
				</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Modules are Independent</strong></p><p>
					Healthcheck consists of independent modules which test for:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Replication issues
					</li><li class="listitem">
						Certificate validity
					</li><li class="listitem">
						Certificate Authority infrastructure issues
					</li><li class="listitem">
						IdM and Active Directory trust issues
					</li><li class="listitem">
						Correct file permissions and ownership settings
					</li></ul></div><div class="formalpara"><p class="title"><strong>Two output formats</strong></p><p>
					Healthcheck generates the following outputs, which you can set using the <code class="literal">output-type</code> option:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">json</code>: Machine-readable output in JSON format (default)
					</li><li class="listitem">
						<code class="literal">human</code>: Human-readable output
					</li></ul></div><p>
				You can specify a different file destination with the <code class="literal">--output-file</code> option.
			</p><div class="formalpara"><p class="title"><strong>Results</strong></p><p>
					Each Healthcheck module returns one of the following results:
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">SUCCESS</span></dt><dd>
							configured as expected
						</dd><dt><span class="term">WARNING</span></dt><dd>
							not an error, but worth keeping an eye on or evaluating
						</dd><dt><span class="term">ERROR</span></dt><dd>
							not configured as expected
						</dd><dt><span class="term">CRITICAL</span></dt><dd>
							not configured as expected, with a high possibility for impact
						</dd></dl></div></section><section class="section" id="installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool"><div class="titlepage"><div><div><h3 class="title">24.2. Installing IdM Healthcheck</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to install the IdM Healthcheck tool.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal">ipa-healthcheck</code> package:
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>dnf install ipa-healthcheck</strong></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal option">--failures-only</code> option to have <code class="literal">ipa-healthcheck</code> only report errors. A fully-functioning IdM installation returns an empty result of <code class="literal">[]</code>.
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-healthcheck --failures-only</strong></span>
<span class="strong strong"><strong>[]</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						Use <code class="literal">ipa-healthcheck --help</code> to see all supported arguments.
					</li></ul></div></section><section class="section" id="running-idm-healthcheck_installing-and-running-the-ipa-healthcheck-tool"><div class="titlepage"><div><div><h3 class="title">24.3. Running IdM Healthcheck</h3></div></div></div><p class="_abstract _abstract">
				Healthcheck can be run manually or automatically using <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/installing-and-running-the-ipa-healthcheck-tool_using-idm-healthcheck-to-monitor-your-idm-environment#log-rotation_installing-and-running-the-ipa-healthcheck-tool">log rotation</a>
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Healthcheck tool must be installed. See <a class="link" href="#installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool" title="24.2. Installing IdM Healthcheck">Installing IdM Healthcheck</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To run healthcheck manually, enter the <code class="literal command">ipa-healthcheck</code> command.
					</p><pre class="literallayout">[root@server ~]# <span class="strong strong"><strong>ipa-healthcheck</strong></span></pre></li></ul></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					For all options, see the man page: <code class="literal">man ipa-healthcheck</code>.
				</p></div></section><section class="section _additional-resources" id="additional_resources_6"><div class="titlepage"><div><div><h3 class="title">24.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						See the following sections of the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment">Using IdM Healthcheck to monitor your IdM environment</a> guide for examples of using IdM Healthcheck.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/checking-services-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Checking services</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-your-idm-and-ad-trust-configuration-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Verifying your IdM and AD trust configuration</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-certificates-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Verifying certificates</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-system-certificates-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Verifying system certificates</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/checking-disk-space-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Checking disk space</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-permissions-of-idm-configuration-files-using-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Verifying permissions of IdM configuration files</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/checking-idm-replication-using-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment">Checking replication</a>
							</li></ul></div></li></ul></div></section></section><section class="chapter" id="installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 25. Installing an Identity Management server using an Ansible playbook</h2></div></div></div><p>
			The following sections describe how to configure a system as an IdM server by using <a class="link" href="https://www.ansible.com/">Ansible</a>. Configuring a system as an IdM server establishes an IdM domain and enables the system to offer IdM services to IdM clients. The deployment is managed by the <code class="literal">ipaserver</code> Ansible role.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					You understand <a class="link" href="https://docs.ansible.com/ansible/latest/index.html">Ansible</a> and IdM concepts:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							Ansible roles
						</li><li class="listitem">
							Ansible nodes
						</li><li class="listitem">
							Ansible inventory
						</li><li class="listitem">
							Ansible tasks
						</li><li class="listitem">
							Ansible modules
						</li><li class="listitem">
							Ansible plays and playbooks
						</li></ul></div></li></ul></div><section class="section" id="ansible-and-its-advantages-for-installing-IdM_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.1. Ansible and its advantages for installing IdM</h3></div></div></div><p>
				Ansible is an automation tool used to configure systems, deploy software, and perform rolling updates. Ansible includes support for Identity Management (IdM), and you can use Ansible modules to automate installation tasks such as the setup of an IdM server, replica, client, or an entire IdM topology.
			</p><h5 id="advantages_of_using_ansible_to_install_idm">Advantages of using Ansible to install IdM</h5><p>
				The following list presents advantages of installing Identity Management using Ansible in contrast to manual installation.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You do not need to log into the managed node.
					</li><li class="listitem">
						You do not need to configure settings on each host to be deployed individually. Instead, you can have one inventory file to deploy a complete cluster.
					</li><li class="listitem">
						You can reuse an inventory file later for management tasks, for example to add users and hosts. You can reuse an inventory file even for such tasks as are not related to IdM.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://www.redhat.com/en/blog/automating-red-hat-identity-management-installation">Automating Red Hat Identity Management installation</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index">Planning Identity Management</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#preparing-the-system-for-ipa-server-installation_installing-identity-management">Preparing the system for IdM server installation</a>
					</li></ul></div></section><section class="section" id="installing-the-ansible-freeipa-package_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.2. Installing the ansible-freeipa package</h3></div></div></div><p>
				The following procedure describes how to install the the <code class="literal package">ansible-freeipa</code> roles.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure that the controller is a Red Hat Enterprise Linux system with a valid subscription. If this is not the case, see the official Ansible documentation <a class="link" href="https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html">Installation guide</a> for alternative installation instructions.
					</li><li class="listitem">
						Ensure that you can reach the managed node over the <code class="literal">SSH</code> protocol from the controller. Check that the managed node is listed in the <code class="literal">/root/.ssh/known_hosts</code> file of the controller.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Run the following procedure on the Ansible controller.
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the required repository:
					</p><pre class="literallayout"># <span class="strong strong"><strong>subscription-manager repos --enable rhel-9-for-x86_64-appstream-rpms</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the IdM Ansible roles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install ansible-freeipa</strong></span></pre></li></ol></div><p>
				The roles are installed to the <code class="literal">/usr/share/ansible/roles/</code> directory.
			</p></section><section class="section" id="ansible-roles-location-in-the-file-system_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.3. Ansible roles location in the file system</h3></div></div></div><p>
				By default, the <code class="literal">ansible-freeipa</code> roles are installed to the <code class="literal">/usr/share/ansible/roles/</code> directory. The structure of the <code class="literal">ansible-freeipa</code> package is as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">/usr/share/ansible/roles/</code> directory stores the <code class="literal">ipaserver</code>, <code class="literal">ipareplica</code>, and <code class="literal">ipaclient</code> roles on the Ansible controller. Each role directory stores examples, a basic overview, the license and documentation about the role in a <code class="literal">README.md</code> Markdown file.
					</p><pre class="literallayout">[root@server]# <span class="strong strong"><strong>ls -1 /usr/share/ansible/roles/</strong></span>
ipaclient
ipareplica
ipaserver</pre></li><li class="listitem"><p class="simpara">
						The <code class="literal">/usr/share/doc/ansible-freeipa/</code> directory stores the documentation about individual roles and the topology in <code class="literal">README.md</code> Markdown files. It also stores the <code class="literal">playbooks/</code> subdirectory.
					</p><pre class="literallayout">[root@server]# <span class="strong strong"><strong>ls -1 /usr/share/doc/ansible-freeipa/</strong></span>
playbooks
README-client.md
README.md
README-replica.md
README-server.md
README-topology.md</pre></li><li class="listitem"><p class="simpara">
						The <code class="literal">/usr/share/doc/ansible-freeipa/playbooks/</code> directory stores the example playbooks:
					</p><pre class="literallayout">[root@server]# <span class="strong strong"><strong>ls -1 /usr/share/doc/ansible-freeipa/playbooks/</strong></span>
install-client.yml
install-cluster.yml
install-replica.yml
install-server.yml
uninstall-client.yml
uninstall-cluster.yml
uninstall-replica.yml
uninstall-server.yml</pre></li></ul></div></section><section class="section" id="setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.4. Setting the parameters for a deployment with an integrated DNS and an integrated CA as the root CA</h3></div></div></div><p>
				Complete this procedure to configure the inventory file for installing an IdM server with an integrated CA as the root CA in an environment that uses the IdM integrated DNS solution.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The inventory in this procedure uses the <code class="literal">INI</code> format. You can, alternatively, use the <code class="literal">YAML</code> or <code class="literal">JSON</code> formats.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a <code class="literal">~/MyPlaybooks/</code> directory:
					</p><pre class="literallayout">$ mkdir MyPlaybooks</pre></li><li class="listitem">
						Create a <code class="literal">~/MyPlaybooks/inventory</code> file.
					</li><li class="listitem"><p class="simpara">
						Open the inventory file for editing. Specify the fully-qualified domain names (<code class="literal">FQDN</code>) of the host you want to use as an IdM server. Ensure that the <code class="literal">FQDN</code> meets the following criteria:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem">
								The host name must be all lower-case.
							</li></ul></div></li><li class="listitem">
						Specify the IdM domain and realm information.
					</li><li class="listitem"><p class="simpara">
						Specify that you want to use integrated DNS by adding the following option:
					</p><pre class="literallayout"><code class="literal">ipaserver_setup_dns=true</code></pre></li><li class="listitem"><p class="simpara">
						Specify the DNS forwarding settings. Choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Use the <code class="literal">ipaserver_auto_forwarders=true</code> option if you want the installer to use forwarders from the <code class="literal">/etc/resolv.conf</code> file. Do not use this option if the nameserver specified in the <code class="literal">/etc/resolv.conf</code> file is the localhost 127.0.0.1 address or if you are on a virtual private network and the DNS servers you are using are normally unreachable from the public internet.
							</li><li class="listitem">
								Use the <code class="literal">ipaserver_forwarders</code> option to specify your forwarders manually. The installation process adds the forwarder IP addresses to the <code class="literal">/etc/named.conf</code> file on the installed IdM server.
							</li><li class="listitem"><p class="simpara">
								Use the <code class="literal">ipaserver_no_forwarders=true</code> option to configure root DNS servers to be used instead.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									With no DNS forwarders, your environment is isolated, and names from other DNS domains in your infrastructure are not resolved.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Specify the DNS reverse record and zone settings. Choose from the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Use the <code class="literal">ipaserver_allow_zone_overlap=true</code> option to allow the creation of a (reverse) zone even if the zone is already resolvable.
							</li><li class="listitem">
								Use the <code class="literal">ipaserver_reverse_zones</code> option to specify your reverse zones manually.
							</li><li class="listitem"><p class="simpara">
								Use the <code class="literal">ipaserver_no_reverse=true</code> option if you do not want the installer to create a reverse DNS zone.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									Using IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.
								</p></div></rh-alert></li></ul></div></li><li class="listitem">
						Specify the passwords for <code class="literal">admin</code> and for the <code class="literal">Directory Manager</code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.
					</li><li class="listitem"><p class="simpara">
						Optional: Specify a custom <code class="literal">firewalld</code> zone to be used by the IdM server. If you do not set a custom zone, IdM will add its services to the default <code class="literal">firewalld</code> zone. The predefined default zone is <code class="literal">public</code>.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The specified <code class="literal">firewalld</code> zone must exist and be permanent.
						</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (excluding the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=true
ipaserver_auto_forwarders=true
[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (including the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=true
ipaserver_auto_forwarders=true
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234

[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with a custom <code class="literal">firewalld</code> zone</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=true
ipaserver_auto_forwarders=true
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234
<span class="strong strong"><strong>ipaserver_firewalld_zone=<span class="emphasis"><em>custom zone</em></span></strong></span></pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example playbook to set up an IdM server using admin and Directory Manager passwords stored in an Ansible Vault file</strong></p><p>

</p><pre class="literallayout">---
- name: Playbook to configure IPA server
  hosts: ipaserver
  become: true
  vars_files:
  - playbook_sensitive_data.yml

  roles:
  - role: ipaserver
    state: present</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example playbook to set up an IdM server using admin and Directory Manager passwords from an inventory file</strong></p><p>

</p><pre class="literallayout">---
- name: Playbook to configure IPA server
  hosts: ipaserver
  become: true

  roles:
  - role: ipaserver
    state: present</pre>

						<p></p></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						man <code class="literal">ipa-server-install(1)</code>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/ansible-freeipa/README-server.md</code>
					</li></ul></div></section><section class="section" id="setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.5. Setting the parameters for a deployment with external DNS and an integrated CA as the root CA</h3></div></div></div><p>
				Complete this procedure to configure the inventory file for installing an IdM server with an integrated CA as the root CA in an environment that uses an external DNS solution.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The inventory file in this procedure uses the <code class="literal">INI</code> format. You can, alternatively, use the <code class="literal">YAML</code> or <code class="literal">JSON</code> formats.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a <code class="literal">~/MyPlaybooks/</code> directory:
					</p><pre class="literallayout">$ mkdir MyPlaybooks</pre></li><li class="listitem">
						Create a <code class="literal">~/MyPlaybooks/inventory</code> file.
					</li><li class="listitem"><p class="simpara">
						Open the inventory file for editing. Specify the fully-qualified domain names (<code class="literal">FQDN</code>) of the host you want to use as an IdM server. Ensure that the <code class="literal">FQDN</code> meets the following criteria:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem">
								The host name must be all lower-case.
							</li></ul></div></li><li class="listitem">
						Specify the IdM domain and realm information.
					</li><li class="listitem">
						Make sure that the <code class="literal">ipaserver_setup_dns</code> option is set to <code class="literal">no</code> or that it is absent.
					</li><li class="listitem">
						Specify the passwords for <code class="literal">admin</code> and for the <code class="literal">Directory Manager</code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.
					</li><li class="listitem"><p class="simpara">
						Optional: Specify a custom <code class="literal">firewalld</code> zone to be used by the IdM server. If you do not set a custom zone, IdM will add its services to the default <code class="literal">firewalld</code> zone. The predefined default zone is <code class="literal">public</code>.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The specified <code class="literal">firewalld</code> zone must exist and be permanent.
						</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (excluding the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=no
[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (including the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=no
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234

[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with a custom <code class="literal">firewalld</code> zone</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=no
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234
<span class="strong strong"><strong>ipaserver_firewalld_zone=<span class="emphasis"><em>custom zone</em></span></strong></span></pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example playbook to set up an IdM server using admin and Directory Manager passwords stored in an Ansible Vault file</strong></p><p>

</p><pre class="literallayout">---
- name: Playbook to configure IPA server
  hosts: ipaserver
  become: true
  vars_files:
  - playbook_sensitive_data.yml

  roles:
  - role: ipaserver
    state: present</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example playbook to set up an IdM server using admin and Directory Manager passwords from an inventory file</strong></p><p>

</p><pre class="literallayout">---
- name: Playbook to configure IPA server
  hosts: ipaserver
  become: true

  roles:
  - role: ipaserver
    state: present</pre>

						<p></p></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						man <code class="literal">ipa-server-install(1)</code>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/ansible-freeipa/README-server.md</code>
					</li></ul></div></section><section class="section" id="deploying-an-IdM-server-with-an-integrated-CA-using-an-Ansible-playbook_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.6. Deploying an IdM server with an integrated CA as the root CA using an Ansible playbook</h3></div></div></div><p>
				Complete this procedure to deploy an IdM server with an integrated certificate authority (CA) as the root CA using an Ansible playbook.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.
					</li><li class="listitem"><p class="simpara">
						You have set the parameters that correspond to your scenario by choosing one of the following procedures:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible" title="25.4. Setting the parameters for a deployment with an integrated DNS and an integrated CA as the root CA">Procedure with integrated DNS</a>
							</li><li class="listitem">
								<a class="link" href="#setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible" title="25.5. Setting the parameters for a deployment with external DNS and an integrated CA as the root CA">Procedure with external DNS</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the Ansible playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-server.yml</strong></span></pre></li><li class="listitem"><p class="simpara">
						Choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If your IdM deployment uses external DNS: add the DNS resource records contained in the <code class="literal">/tmp/ipa.system.records.UFRPto.db</code> file to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.
							</p><pre class="literallayout">...
Restarting the KDC
<span class="strong strong"><strong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db</strong></span>
<span class="strong strong"><strong>Restarting the web server</strong></span>
...</pre></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The server installation is not complete until you add the DNS records to the existing DNS servers.
						</p></div></rh-alert><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If your IdM deployment uses integrated DNS:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Add DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
									</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
											Repeat this step each time after an IdM DNS server is installed.
										</p></div></rh-alert></li><li class="listitem">
										Add an <code class="literal">_ntp._udp</code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.
									</li></ul></div></li></ul></div></li></ol></div></section><section class="section" id="setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.7. Setting the parameters for a deployment with an integrated DNS and an external CA as the root CA</h3></div></div></div><p>
				Complete this procedure to configure the inventory file for installing an IdM server with an external CA as the root CA in an environment that uses the IdM integrated DNS solution.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The inventory file in this procedure uses the <code class="literal">INI</code> format. You can, alternatively, use the <code class="literal">YAML</code> or <code class="literal">JSON</code> formats.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a <code class="literal">~/MyPlaybooks/</code> directory:
					</p><pre class="literallayout">$ mkdir MyPlaybooks</pre></li><li class="listitem">
						Create a <code class="literal">~/MyPlaybooks/inventory</code> file.
					</li><li class="listitem"><p class="simpara">
						Open the inventory file for editing. Specify the fully-qualified domain names (<code class="literal">FQDN</code>) of the host you want to use as an IdM server. Ensure that the <code class="literal">FQDN</code> meets the following criteria:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem">
								The host name must be all lower-case.
							</li></ul></div></li><li class="listitem">
						Specify the IdM domain and realm information.
					</li><li class="listitem"><p class="simpara">
						Specify that you want to use integrated DNS by adding the following option:
					</p><pre class="literallayout"><code class="literal">ipaserver_setup_dns=true</code></pre></li><li class="listitem"><p class="simpara">
						Specify the DNS forwarding settings. Choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Use the <code class="literal">ipaserver_auto_forwarders=true</code> option if you want the installation process to use forwarders from the <code class="literal">/etc/resolv.conf</code> file. This option is not recommended if the nameserver specified in the <code class="literal">/etc/resolv.conf</code> file is the localhost 127.0.0.1 address or if you are on a virtual private network and the DNS servers you are using are normally unreachable from the public internet.
							</li><li class="listitem">
								Use the <code class="literal">ipaserver_forwarders</code> option to specify your forwarders manually. The installation process adds the forwarder IP addresses to the <code class="literal">/etc/named.conf</code> file on the installed IdM server.
							</li><li class="listitem"><p class="simpara">
								Use the <code class="literal">ipaserver_no_forwarders=true</code> option to configure root DNS servers to be used instead.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									With no DNS forwarders, your environment is isolated, and names from other DNS domains in your infrastructure are not resolved.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Specify the DNS reverse record and zone settings. Choose from the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Use the <code class="literal">ipaserver_allow_zone_overlap=true</code> option to allow the creation of a (reverse) zone even if the zone is already resolvable.
							</li><li class="listitem">
								Use the <code class="literal">ipaserver_reverse_zones</code> option to specify your reverse zones manually.
							</li><li class="listitem"><p class="simpara">
								Use the <code class="literal">ipaserver_no_reverse=true</code> option if you do not want the installation process to create a reverse DNS zone.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									Using IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.
								</p></div></rh-alert></li></ul></div></li><li class="listitem">
						Specify the passwords for <code class="literal">admin</code> and for the <code class="literal">Directory Manager</code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.
					</li><li class="listitem"><p class="simpara">
						Optional: Specify a custom <code class="literal">firewalld</code> zone to be used by the IdM server. If you do not set a custom zone, IdM adds its services to the default <code class="literal">firewalld</code> zone. The predefined default zone is <code class="literal">public</code>.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The specified <code class="literal">firewalld</code> zone must exist and be permanent.
						</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (excluding the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=true
ipaserver_auto_forwarders=true
[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (including the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=true
ipaserver_auto_forwarders=true
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234

[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with a custom <code class="literal">firewalld</code> zone</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=true
ipaserver_auto_forwarders=true
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234
<span class="strong strong"><strong>ipaserver_firewalld_zone=<span class="emphasis"><em>custom zone</em></span></strong></span>

[...]</pre>

						<p></p></div></li><li class="listitem"><p class="simpara">
						Create a playbook for the first step of the installation. Enter instructions for generating the certificate signing request (CSR) and copying it from the controller to the managed node.
					</p><pre class="literallayout">---
- name: Playbook to configure IPA server Step 1
  hosts: ipaserver
  become: true
  vars_files:
  - playbook_sensitive_data.yml
  vars:
    ipaserver_external_ca: true

  roles:
  - role: ipaserver
    state: present

  post_tasks:
  - name: Copy CSR /root/ipa.csr from node to "{{ groups.ipaserver[0] + '-ipa.csr' }}"
    fetch:
      src: /root/ipa.csr
      dest: "{{ groups.ipaserver[0] + '-ipa.csr' }}"
      flat: true</pre></li><li class="listitem"><p class="simpara">
						Create another playbook for the final step of the installation.
					</p><pre class="literallayout">---
- name: Playbook to configure IPA server Step 2
  hosts: ipaserver
  become: true
  vars_files:
  - playbook_sensitive_data.yml
  vars:
    ipaserver_external_cert_files:
      - "/root/servercert20240601.pem"
      - "/root/cacert.pem"

  pre_tasks:
  - name: Copy "{{ groups.ipaserver[0] }}-{{ item }}" to "/root/{{ item }}" on node
    ansible.builtin.copy:
      src: "{{ groups.ipaserver[0] }}-{{ item }}"
      dest: "/root/{{ item }}"
      force: true
    with_items:
    - servercert20240601.pem
    - cacert.pem

  roles:
  - role: ipaserver
    state: present</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						man <code class="literal">ipa-server-install(1)</code>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/ansible-freeipa/README-server.md</code>
					</li></ul></div></section><section class="section" id="setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.8. Setting the parameters for a deployment with external DNS and an external CA as the root CA</h3></div></div></div><p>
				Complete this procedure to configure the inventory file for installing an IdM server with an external CA as the root CA in an environment that uses an external DNS solution.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The inventory file in this procedure uses the <code class="literal">INI</code> format. You can, alternatively, use the <code class="literal">YAML</code> or <code class="literal">JSON</code> formats.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a <code class="literal">~/MyPlaybooks/</code> directory:
					</p><pre class="literallayout">$ mkdir MyPlaybooks</pre></li><li class="listitem">
						Create a <code class="literal">~/MyPlaybooks/inventory</code> file.
					</li><li class="listitem"><p class="simpara">
						Open the inventory file for editing. Specify the fully-qualified domain names (<code class="literal">FQDN</code>) of the host you want to use as an IdM server. Ensure that the <code class="literal">FQDN</code> meets the following criteria:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem">
								The host name must be all lower-case.
							</li></ul></div></li><li class="listitem">
						Specify the IdM domain and realm information.
					</li><li class="listitem">
						Make sure that the <code class="literal">ipaserver_setup_dns</code> option is set to <code class="literal">no</code> or that it is absent.
					</li><li class="listitem">
						Specify the passwords for <code class="literal">admin</code> and for the <code class="literal">Directory Manager</code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.
					</li><li class="listitem"><p class="simpara">
						Optional: Specify a custom <code class="literal">firewalld</code> zone to be used by the IdM server. If you do not set a custom zone, IdM will add its services to the default <code class="literal">firewalld</code> zone. The predefined default zone is <code class="literal">public</code>.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The specified <code class="literal">firewalld</code> zone must exist and be permanent.
						</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (excluding the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=no
[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with the required server information (including the passwords)</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=no
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234

[...]</pre>

						<p></p></div><div class="formalpara"><p class="title"><strong>Example of an inventory file with a custom <code class="literal">firewalld</code> zone</strong></p><p>

</p><pre class="literallayout">[ipaserver]
server.idm.example.com

[ipaserver:vars]
ipaserver_domain=idm.example.com
ipaserver_realm=IDM.EXAMPLE.COM
ipaserver_setup_dns=no
ipaadmin_password=MySecretPassword123
ipadm_password=MySecretPassword234
<span class="strong strong"><strong>ipaserver_firewalld_zone=<span class="emphasis"><em>custom zone</em></span></strong></span>

[...]</pre>

						<p></p></div></li><li class="listitem"><p class="simpara">
						Create a playbook for the first step of the installation. Enter instructions for generating the certificate signing request (CSR) and copying it from the controller to the managed node.
					</p><pre class="literallayout">---
- name: Playbook to configure IPA server Step 1
  hosts: ipaserver
  become: true
  vars_files:
  - playbook_sensitive_data.yml
  vars:
    ipaserver_external_ca: true

  roles:
  - role: ipaserver
    state: present

  post_tasks:
  - name: Copy CSR /root/ipa.csr from node to "{{ groups.ipaserver[0] + '-ipa.csr' }}"
    fetch:
      src: /root/ipa.csr
      dest: "{{ groups.ipaserver[0] + '-ipa.csr' }}"
      flat: true</pre></li><li class="listitem"><p class="simpara">
						Create another playbook for the final step of the installation.
					</p><pre class="literallayout">---
- name: Playbook to configure IPA server Step 2
  hosts: ipaserver
  become: true
  vars_files:
  - playbook_sensitive_data.yml
  vars:
    ipaserver_external_cert_files:
      - "/root/servercert20240601.pem"
      - "/root/cacert.pem"

  pre_tasks:
  - name: Copy "{{ groups.ipaserver[0] }}-{{ item }}" to "/root/{{ item }}" on node
    ansible.builtin.copy:
      src: "{{ groups.ipaserver[0] }}-{{ item }}"
      dest: "/root/{{ item }}"
      force: true
    with_items:
    - servercert20240601.pem
    - cacert.pem

  roles:
  - role: ipaserver
    state: present</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management">Installing an IdM server: Without integrated DNS, with an external CA as the root CA</a>
					</li><li class="listitem">
						man <code class="literal">ipa-server-install(1)</code>
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/ansible-freeipa/README-server.md</code>
					</li></ul></div></section><section class="section" id="deploying-an-IdM-server-with-an-external-CA-using-an-Ansible-playbook_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.9. Deploying an IdM server with an external CA as the root CA using an Ansible playbook</h3></div></div></div><p>
				Complete this procedure to deploy an IdM server with an external certificate authority (CA) as the root CA using an Ansible playbook.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.
					</li><li class="listitem"><p class="simpara">
						You have set the parameters that correspond to your scenario by choosing one of the following procedures:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible" title="25.7. Setting the parameters for a deployment with an integrated DNS and an external CA as the root CA">Procedure with integrated DNS</a>
							</li><li class="listitem">
								<a class="link" href="#setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible" title="25.8. Setting the parameters for a deployment with external DNS and an external CA as the root CA">Procedure with external DNS</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the Ansible playbook with the instructions for the first step of the installation, for example <code class="literal">install-server-step1.yml</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --vault-password-file=password_file -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-server-step1.yml</strong></span></pre></li><li class="listitem">
						Locate the <code class="literal">ipa.csr</code> certificate signing request file on the controller and submit it to the external CA.
					</li><li class="listitem">
						Place the IdM CA certificate signed by the external CA in the controller file system so that the playbook in the next step can find it.
					</li><li class="listitem"><p class="simpara">
						Run the Ansible playbook with the instructions for the final step of the installation, for example <code class="literal">install-server-step2.yml</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-server-step2.yml</strong></span></pre></li><li class="listitem"><p class="simpara">
						Choose one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If your IdM deployment uses external DNS: add the DNS resource records contained in the <code class="literal">/tmp/ipa.system.records.UFRPto.db</code> file to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.
							</p><pre class="literallayout">...
Restarting the KDC
<span class="strong strong"><strong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db</strong></span>
<span class="strong strong"><strong>Restarting the web server</strong></span>
...</pre></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							The server installation is not complete until you add the DNS records to the existing DNS servers.
						</p></div></rh-alert><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If your IdM deployment uses integrated DNS:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Add DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is <code class="literal"><span class="emphasis"><em>idm.example.com</em></span></code>, add a name server (NS) record to the <code class="literal">example.com</code> parent domain.
									</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
											Repeat this step each time after an IdM DNS server is installed.
										</p></div></rh-alert></li><li class="listitem">
										Add an <code class="literal">_ntp._udp</code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.
									</li></ul></div></li></ul></div></li></ol></div></section><section class="section" id="uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.10. Uninstalling an IdM server using an Ansible playbook</h3></div></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In an existing Identity Management (IdM) deployment, <span class="strong strong"><strong>replica</strong></span> and <span class="strong strong"><strong>server</strong></span> are interchangeable terms.
				</p></div></rh-alert><p>
				Complete this procedure to uninstall an IdM replica using an Ansible playbook. In this example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						IdM configuration is uninstalled from <span class="strong strong"><strong>server123.idm.example.com</strong></span>.
					</li><li class="listitem">
						<span class="strong strong"><strong>server123.idm.example.com</strong></span> and the associated host entry are removed from the IdM topology.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the control node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package.
							</li><li class="listitem">
								You have created an <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management">Ansible inventory file</a> with the fully-qualified domain name (FQDN) of the IdM server in the <span class="strong strong"><strong>~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span> directory.
							</li><li class="listitem">
								You have stored your <code class="literal">ipaadmin_password</code> in the <span class="strong strong"><strong>secret.yml</strong></span> Ansible vault.
							</li><li class="listitem">
								For the <code class="literal">ipaserver_remove_from_topology</code> option to work, the system must be running on RHEL 9.3 or later.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the managed node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The system is running on RHEL 9.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create your Ansible playbook file <span class="strong strong"><strong>uninstall-server.yml</strong></span> with the following content:
					</p><pre class="literallayout">---
- name: Playbook to uninstall an IdM replica
  hosts: ipaserver
  become: true

  roles:
  - role: ipaserver
    ipaserver_remove_from_domain: true
    state: absent</pre><p class="simpara">
						The <code class="literal">ipaserver_remove_from_domain</code> option unenrolls the host from the IdM topology.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If the removal of server123.idm.example.com should lead to a disconnected topology, the removal will be aborted. For more information, see <a class="link" href="#using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible" title="25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology">Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology</a>.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Uninstall the replica:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --vault-password-file=password_file -v -i &lt;path_to_inventory_directory&gt;/inventory &lt;path_to_playbooks_directory&gt;/uninstall-server.yml</strong></span></pre></li><li class="listitem">
						Ensure that all name server (NS) DNS records pointing to <span class="strong strong"><strong>server123.idm.example.com</strong></span> are deleted from your DNS zones. This applies regardless of whether you use integrated DNS managed by IdM or external DNS. For more information on how to delete DNS records from IdM, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/working_with_dns_in_identity_management/managing-dns-records-in-idm_working-with-dns-in-identity-management#deleting-dns-records-in-the-idm-cli_managing-dns-records-in-idm">Deleting DNS records in the IdM CLI</a>.
					</li></ol></div></section><section class="section" id="using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible"><div class="titlepage"><div><div><h3 class="title">25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology</h3></div></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In an existing Identity Management (IdM) deployment, <span class="strong strong"><strong>replica</strong></span> and <span class="strong strong"><strong>server</strong></span> are interchangeable terms.
				</p></div></rh-alert><p>
				Complete this procedure to uninstall an IdM replica using an Ansible playbook even if this results in a disconnected IdM topology. In the example, <span class="strong strong"><strong>server456.idm.example.com</strong></span> is used to remove the replica and the associated host entry with the FQDN of <span class="strong strong"><strong>server123.idm.example.com</strong></span> from the topology, leaving certain replicas disconnected from <span class="strong strong"><strong>server456.idm.example.com</strong></span> and the rest of the topology.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If removing a replica from the topology using only the <code class="literal">remove_server_from_domain</code> does not result in a disconnected topology, no other options are required. If the result is a disconnected topology, you must specify which part of the domain you want to preserve. In that case, you must do the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Specify the <code class="literal">ipaserver_remove_on_server</code> value.
						</li><li class="listitem">
							Set <code class="literal">ipaserver_ignore_topology_disconnect</code> to True.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the control node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								The system is running on RHEL 9.3 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package.
							</li><li class="listitem">
								You have created an <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management">Ansible inventory file</a> with the fully-qualified domain name (FQDN) of the IdM server in the <span class="strong strong"><strong>~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span> directory.
							</li><li class="listitem">
								You have stored your <code class="literal">ipaadmin_password</code> in the <span class="strong strong"><strong>secret.yml</strong></span> Ansible vault.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the managed node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The system is running on 9 or later.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create your Ansible playbook file <span class="strong strong"><strong>uninstall-server.yml</strong></span> with the following content:
					</p><pre class="literallayout">---
- name: Playbook to uninstall an IdM replica
  hosts: ipaserver
  become: true

  roles:
  - role: ipaserver
    ipaserver_remove_from_domain: true
    ipaserver_remove_on_server: server456.idm.example.com
    ipaserver_ignore_topology_disconnect: true
    state: absent</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Under normal circumstances, if the removal of server123 does not result in a disconnected topology: if the value for <code class="literal">ipaserver_remove_on_server</code> is not set, the replica on which server123 is removed is automatically determined using the replication agreements of server123.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Uninstall the replica:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --vault-password-file=password_file -v -i &lt;path_to_inventory_directory&gt;/hosts &lt;path_to_playbooks_directory&gt;/uninstall-server.yml</strong></span></pre></li><li class="listitem">
						Ensure that all name server (NS) DNS records pointing to <span class="strong strong"><strong>server123.idm.example.com</strong></span> are deleted from your DNS zones. This applies regardless of whether you use integrated DNS managed by IdM or external DNS. For more information on how to delete DNS records from IdM, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/working_with_dns_in_identity_management/managing-dns-records-in-idm_working-with-dns-in-identity-management#deleting-dns-records-in-the-idm-cli_managing-dns-records-in-idm">Deleting DNS records in the IdM CLI</a>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#inventory-basics-formats-hosts-and-groups">Inventory basics: formats, hosts, and groups</a>
					</li><li class="listitem">
						You can see sample Ansible playbooks for installing an IdM server and a list of possible variables in the <a class="link" href="https://github.com/freeipa/ansible-freeipa/tree/master/roles/ipaserver"><code class="literal">ansible-freeipa</code> upstream documentation</a>.
					</li></ul></div></section></section><section class="chapter" id="installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 26. Installing an Identity Management replica using an Ansible playbook</h2></div></div></div><p class="_abstract _abstract">
			Configuring a system as an IdM replica by using <a class="link" href="https://www.ansible.com/">Ansible</a> enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.
		</p><p>
			The deployment is managed by the <code class="literal">ipareplica</code> Ansible role. The role can use the autodiscovery mode for identifying the IdM servers, domain and other settings. However, if you deploy multiple replicas in a tier-like model, with different groups of replicas being deployed at different times, you must define specific servers or replicas for each group.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/installing_identity_management/index#installing-the-ansible-freeipa-package_server-ansible">ansible-freeipa</a> package on the Ansible control node.
				</li><li class="listitem">
					You understand the general <a class="link" href="https://docs.ansible.com/ansible/latest/index.html">Ansible</a> and IdM concepts.
				</li><li class="listitem">
					You have <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#planning-the-replica-topology_planning-identity-management">planned the replica topology in your deployment</a>.
				</li></ul></div><section class="section" id="specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible"><div class="titlepage"><div><div><h3 class="title">26.1. Specifying the base, server and client variables for installing the IdM replica</h3></div></div></div><p>
				Complete this procedure to configure the inventory file for installing an IdM replica.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have configured your Ansible control node to meet the following requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package on the Ansible controller.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the inventory file for editing. Specify the fully-qualified domain names (FQDN) of the hosts to become IdM replicas. The FQDNs must be valid DNS names:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only numbers, alphabetic characters, and hyphens (<code class="literal">-</code>) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem"><p class="simpara">
								The host name must be all lower-case.
							</p><div class="formalpara"><p class="title"><strong>Example of a simple inventory hosts file with only the replicas' FQDN defined</strong></p><p>

</p><pre class="screen">[ipareplicas]
replica1.idm.example.com
replica2.idm.example.com
replica3.idm.example.com
[...]</pre>

								<p></p></div><p class="simpara">
								If the IdM server is already deployed and the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Provide additional information in the inventory file based on how you have designed your topology:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Scenario 1</span></dt><dd><p class="simpara">
									If you want to avoid autodiscovery and have all replicas listed in the <code class="literal">[ipareplicas]</code> section use a specific IdM server, set the server in the <code class="literal">[ipaservers]</code> section of the inventory file.
								</p><div class="formalpara"><p class="title"><strong>Example inventory hosts file with the FQDN of the IdM server and replicas defined</strong></p><p>

</p><pre class="screen">[ipaservers]
server.idm.example.com

[ipareplicas]
replica1.idm.example.com
replica2.idm.example.com
replica3.idm.example.com
[...]</pre>

									<p></p></div></dd><dt><span class="term">Scenario 2</span></dt><dd><p class="simpara">
									Alternatively, if you want to avoid autodiscovery but want to deploy specific replicas with specific servers, set the servers for specific replicas individually in the <code class="literal">[ipareplicas]</code> section in the inventory file.
								</p><div class="formalpara"><p class="title"><strong>Example inventory file with a specific IdM server defined for a specific replica</strong></p><p>

</p><pre class="screen">[ipaservers]
server.idm.example.com
replica1.idm.example.com

[ipareplicas]
replica2.idm.example.com
<span class="strong strong"><strong>replica3.idm.example.com ipareplica_servers=replica1.idm.example.com</strong></span></pre>

									<p></p></div><p class="simpara">
									In the example above, <code class="literal">replica3.idm.example.com</code> uses the already deployed <code class="literal">replica1.idm.example.com</code> as its replication source.
								</p></dd><dt><span class="term">Scenario 3</span></dt><dd><p class="simpara">
									If you are deploying several replicas in one batch and time is a concern to you, multitier replica deployment can be useful for you. Define specific groups of replicas in the inventory file, for example <code class="literal">[ipareplicas_tier1]</code> and <code class="literal">[ipareplicas_tier2]</code>, and design separate plays for each group in the <code class="literal">install-replica.yml</code> playbook.
								</p><div class="formalpara"><p class="title"><strong>Example inventory file with replica tiers defined</strong></p><p>

</p><pre class="screen">[ipaservers]
server.idm.example.com

<span class="strong strong"><strong>[ipareplicas_tier1]</strong></span>
replica1.idm.example.com

<span class="strong strong"><strong>[ipareplicas_tier2]</strong></span>
replica2.idm.example.com \ ipareplica_servers=replica1.idm.example.com,server.idm.example.com</pre>

									<p></p></div><p class="simpara">
									The first entry in <code class="literal">ipareplica_servers</code> will be used. The second entry will be used as a fallback option. When using multiple tiers for deploying IdM replicas, you must have separate tasks in the playbook to first deploy replicas from tier1 and then replicas from tier2:
								</p><div class="formalpara"><p class="title"><strong>Example of a playbook file with different plays for different replica groups</strong></p><p>

</p><pre class="screen">---
- name: Playbook to configure IPA replicas (tier1)
  hosts: ipareplicas_tier1
  become: true

  roles:
  - role: ipareplica
    state: present

- name: Playbook to configure IPA replicas (tier2)
  hosts: ipareplicas_tier2
  become: true

  roles:
  - role: ipareplica
    state: present</pre>

									<p></p></div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Optional: Provide additional information regarding <code class="literal">firewalld</code> and DNS:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Scenario 1</span></dt><dd><p class="simpara">
									If you want the replica to use a specified <code class="literal">firewalld</code> zone, for example an internal one, you can specify it in the inventory file. If you do not set a custom zone, IdM will add its services to the default <code class="literal">firewalld</code> zone. The predefined default zone is <code class="literal">public</code>.
								</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
										The specified <code class="literal">firewalld</code> zone must exist and be permanent.
									</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Example of a simple inventory hosts file with a custom <code class="literal">firewalld</code> zone</strong></p><p>

</p><pre class="screen">[ipaservers]
server.idm.example.com

[ipareplicas]
replica1.idm.example.com
replica2.idm.example.com
replica3.idm.example.com
[...]

[ipareplicas:vars]
<span class="strong strong"><strong>ipareplica_firewalld_zone=<span class="emphasis"><em>custom zone</em></span></strong></span></pre>

									<p></p></div></dd><dt><span class="term">Scenario 2</span></dt><dd><p class="simpara">
									If you want the replica to host the IdM DNS service, add the <span class="strong strong"><strong>ipareplica_setup_dns=true</strong></span> line to the <code class="literal">[ipareplicas:vars]</code> section. Additionally, specify if you want to use per-server DNS forwarders:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											To configure per-server forwarders, add the <code class="literal">ipareplica_forwarders</code> variable and a list of strings to the <code class="literal">[ipareplicas:vars]</code> section, for example: <span class="strong strong"><strong>ipareplica_forwarders=192.0.2.1,192.0.2.2</strong></span>
										</li><li class="listitem">
											To configure no per-server forwarders, add the following line to the <code class="literal">[ipareplicas:vars]</code> section: <span class="strong strong"><strong>ipareplica_no_forwarders=true</strong></span>.
										</li><li class="listitem">
											To configure per-server forwarders based on the forwarders listed in the <code class="literal">/etc/resolv.conf</code> file of the replica, add the <code class="literal">ipareplica_auto_forwarders</code> variable to the <code class="literal">[ipareplicas:vars]</code> section.
										</li></ul></div><div class="formalpara"><p class="title"><strong>Example inventory file with instructions to set up DNS and per-server forwarders on the replicas</strong></p><p>

</p><pre class="screen">[ipaservers]
server.idm.example.com

[ipareplicas]
replica1.idm.example.com
replica2.idm.example.com
replica3.idm.example.com
[...]

[ipareplicas:vars]
<span class="strong strong"><strong>ipareplica_setup_dns=true</strong></span>
<span class="strong strong"><strong>ipareplica_forwarders=192.0.2.1,192.0.2.2</strong></span></pre>

									<p></p></div></dd><dt><span class="term">Scenario 3</span></dt><dd><p class="simpara">
									Specify the DNS resolver using the <code class="literal">ipaclient_configure_dns_resolve</code> and <code class="literal">ipaclient_dns_servers</code> options (if available) to simplify cluster deployments. This is especially useful if your IdM deployment is using integrated DNS:
								</p><div class="formalpara"><p class="title"><strong>An inventory file snippet specifying a DNS resolver:</strong></p><p>

</p><pre class="screen">[...]
[ipaclient:vars]
ipaclient_configure_dns_resolver=true
ipaclient_dns_servers=192.168.100.1</pre>

									<p></p></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										The <code class="literal">ipaclient_dns_servers</code> list must contain only IP addresses. Host names are not allowed.
									</p></div></rh-alert></dd></dl></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/ipareplica/README.md</code>
					</li></ul></div></section><section class="section" id="specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible"><div class="titlepage"><div><div><h3 class="title">26.2. Specifying the credentials for installing the IdM replica using an Ansible playbook</h3></div></div></div><p>
				Complete this procedure to configure the authorization for installing the IdM replica.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have configured your Ansible control node to meet the following requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package on the Ansible controller.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Specify the <span class="strong strong"><strong>password of a user authorized to deploy replicas</strong></span>, for example the IdM <code class="literal">admin</code>.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Red Hat recommends using the Ansible Vault to store the password, and referencing the Vault file from the playbook file, for example <code class="literal">install-replica.yml</code>:
							</p><div class="formalpara"><p class="title"><strong>Example playbook file using principal from inventory file and password from an Ansible Vault file</strong></p><p>

</p><pre class="literallayout">- name: Playbook to configure IPA replicas
  hosts: ipareplicas
  become: true
  vars_files:
  - <code class="literal">playbook_sensitive_data.yml</code>

  roles:
  - role: ipareplica
    state: present</pre>

								<p></p></div><p class="simpara">
								For details how to use Ansible Vault, see the official <a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/vault.html">Ansible Vault</a> documentation.
							</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Less securely, provide the credentials of <code class="literal">admin</code> directly in the inventory file. Use the <code class="literal">ipaadmin_password</code> option in the <code class="literal">[ipareplicas:vars]</code> section of the inventory file. The inventory file and the <code class="literal">install-replica.yml</code> playbook file can then look as follows:
							</p><div class="formalpara"><p class="title"><strong>Example inventory hosts.replica file</strong></p><p>

</p><pre class="literallayout">[...]
[ipareplicas:vars]
<span class="strong strong"><strong>ipaadmin_password=Secret123</strong></span></pre>

								<p></p></div><div class="formalpara"><p class="title"><strong>Example playbook using principal and password from inventory file</strong></p><p>

</p><pre class="literallayout">- name: Playbook to configure IPA replicas
  hosts: ipareplicas
  become: true

  roles:
  - role: ipareplica
    state: present</pre>

								<p></p></div></li><li class="listitem"><p class="simpara">
								Alternatively but also less securely, provide the credentials of another user authorized to deploy a replica directly in the inventory file. To specify a different authorized user, use the <code class="literal">ipaadmin_principal</code> option for the user name, and the <code class="literal">ipaadmin_password</code> option for the password. The inventory file and the <code class="literal">install-replica.yml</code> playbook file can then look as follows:
							</p><div class="formalpara"><p class="title"><strong>Example inventory hosts.replica file</strong></p><p>

</p><pre class="literallayout">[...]
[ipareplicas:vars]
<span class="strong strong"><strong>ipaadmin_principal=my_admin</strong></span>
<span class="strong strong"><strong>ipaadmin_password=my_admin_secret123</strong></span></pre>

								<p></p></div><div class="formalpara"><p class="title"><strong>Example playbook using principal and password from inventory file</strong></p><p>

</p><pre class="literallayout">- name: Playbook to configure IPA replicas
  hosts: ipareplicas
  become: true

  roles:
  - role: ipareplica
    state: present</pre>

								<p></p></div></li></ul></div></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					As of RHEL 9.5, during the installation of an IdM replica, checking if the provided Kerberos principal has the required privilege also extends to checking user ID overrides. As a result, you can deploy a replica using the credentials of an AD administrator that is configured to act as an IdM administrator.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/ipareplica/README.md</code>
					</li></ul></div></section><section class="section" id="deploying-an-IdM-replica-using-an-Ansible-playbook_replica-ansible"><div class="titlepage"><div><div><h3 class="title">26.3. Deploying an IdM replica using an Ansible playbook</h3></div></div></div><p>
				Complete this procedure to use an Ansible playbook to deploy an IdM replica.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.
					</li><li class="listitem">
						You have configured <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management#specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible">the inventory file for installing an IdM replica</a>.
					</li><li class="listitem">
						You have configured <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management#specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible">the authorization for installing the IdM replica</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Run the Ansible playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-replica.yml</strong></span></pre></li></ul></div></section><section class="section" id="uninstalling-an-idm-replica-using-an-ansible-playbook_replica-ansible"><div class="titlepage"><div><div><h3 class="title">26.4. Uninstalling an IdM replica using an Ansible playbook</h3></div></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In an existing Identity Management (IdM) deployment, <span class="strong strong"><strong>replica</strong></span> and <span class="strong strong"><strong>server</strong></span> are interchangeable terms. For information on how to uninstall an IdM server, see <a class="link" href="#uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible" title="25.10. Uninstalling an IdM server using an Ansible playbook">Uninstalling an IdM server using an Ansible playbook</a> or <a class="link" href="#using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible" title="25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology">Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/overview-of-identity-management-and-access-control-planning-identity-management#introduction-to-ipa-servers-and-clients_overview-of-idm-and-access-control">Introduction to IdM servers and clients</a>
					</li></ul></div></section></section><section class="chapter" id="installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 27. Installing an Identity Management client using an Ansible playbook</h2></div></div></div><p class="_abstract _abstract">
			Learn more about how to configure a system as an Identity Management (IdM) client by using <a class="link" href="https://www.ansible.com/">Ansible</a>. Configuring a system as an IdM client enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.
		</p><p>
			The deployment is managed by the <code class="literal">ipaclient</code> Ansible role. By default, the role uses the autodiscovery mode for identifying the IdM servers, domain and other settings. The role can be modified to have the Ansible playbook use the settings specified, for example in the inventory file.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#installing-the-ansible-freeipa-package_server-ansible">ansible-freeipa</a> package on the Ansible control node.
				</li><li class="listitem">
					You are using Ansible version 2.15 or later.
				</li><li class="listitem">
					You understand the general <a class="link" href="https://docs.ansible.com/ansible/latest/index.html">Ansible</a> and IdM concepts.
				</li></ul></div><section class="section" id="setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.1. Setting the parameters of the inventory file for the autodiscovery client installation mode</h3></div></div></div><p>
				To install an Identity Management (IdM) client using an Ansible playbook, configure the target host parameters in an inventory file, for example <code class="literal">inventory</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The information about the host
					</li><li class="listitem">
						The authorization for the task
					</li></ul></div><p>
				The inventory file can be in one of many formats, depending on the inventory plugins you have. The <code class="literal">INI-like</code> format is one of Ansible’s defaults and is used in the examples below.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To use smart cards with the graphical user interface in RHEL, ensure that you include the <code class="literal">ipaclient_mkhomedir</code> variable in your Ansible playbook.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Open your <code class="literal">inventory</code> file for editing.
					</li><li class="listitem"><p class="simpara">
						Specify the fully-qualified hostname (FQDN) of the host to become an IdM client. The fully qualified domain name must be a valid DNS name:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only numbers, alphabetic characters, and hyphens (<code class="literal">-</code>) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem">
								The host name must be all lower-case. No capital letters are allowed.
							</li></ul></div><p class="simpara">
						If the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values.
					</p><div class="formalpara"><p class="title"><strong>Example of a simple inventory hosts file with only the client FQDN defined</strong></p><p>

</p><pre class="screen">[ipaclients]
client.idm.example.com
[...]</pre>

						<p></p></div></li><li class="listitem"><p class="simpara">
						Specify the credentials for enrolling the client. The following authentication methods are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <span class="strong strong"><strong>password of a user authorized to enroll clients</strong></span>. This is the default option.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Red Hat recommends using the Ansible Vault to store the password, and referencing the Vault file from the playbook file, for example <code class="literal">install-client.yml</code>, directly:
									</p><div class="formalpara"><p class="title"><strong>Example playbook file using principal from inventory file and password from an Ansible Vault file</strong></p><p>

</p><pre class="screen">- name: Playbook to configure IPA clients with username/password
  hosts: ipaclients
  become: true
  vars_files:
  - <span class="strong strong"><strong>playbook_sensitive_data.yml</strong></span>

  roles:
  - role: ipaclient
    state: present</pre>

										<p></p></div></li><li class="listitem"><p class="simpara">
										Less securely, provide the credentials of <code class="literal">admin</code> using the <code class="literal">ipaadmin_password</code> option in the <code class="literal">[ipaclients:vars]</code> section of the <code class="literal">inventory/hosts</code> file. Alternatively, to specify a different authorized user, use the <code class="literal">ipaadmin_principal</code> option for the user name, and the <code class="literal">ipaadmin_password</code> option for the password. The <code class="literal">inventory/hosts</code> inventory file and the <code class="literal">install-client.yml</code> playbook file can then look as follows:
									</p><div class="formalpara"><p class="title"><strong>Example inventory hosts file</strong></p><p>

</p><pre class="screen">[...]
[ipaclients:vars]
<span class="strong strong"><strong>ipaadmin_principal=my_admin</strong></span>
<span class="strong strong"><strong>ipaadmin_password=Secret123</strong></span></pre>

										<p></p></div><div class="formalpara"><p class="title"><strong>Example Playbook using principal and password from inventory file</strong></p><p>

</p><pre class="screen">- name: Playbook to unconfigure IPA clients
  hosts: ipaclients
  become: true

  roles:
  - role: ipaclient
    state: true</pre>

										<p></p></div></li></ul></div></li><li class="listitem"><p class="simpara">
								The <span class="strong strong"><strong>client keytab</strong></span> from the previous enrollment if it is still available.
							</p><p class="simpara">
								This option is available if the system was previously enrolled as an Identity Management client. To use this authentication method, uncomment the <code class="literal">#ipaclient_keytab</code> option, specifying the path to the file storing the keytab, for example in the <code class="literal">[ipaclient:vars]</code> section of <code class="literal">inventory/hosts</code>.
							</p></li><li class="listitem"><p class="simpara">
								A <span class="strong strong"><strong>random, one-time password</strong></span> (OTP) to be generated during the enrollment. To use this authentication method, use the <code class="literal">ipaclient_use_otp=true</code> option in your inventory file. For example, you can uncomment the <code class="literal">ipaclient_use_otp=true</code> option in the <code class="literal">[ipaclients:vars]</code> section of the <code class="literal">inventory/hosts</code> file. Note that with OTP you must also specify one of the following options:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The <span class="strong strong"><strong>password of a user authorized to enroll clients</strong></span>, for example by providing a value for <code class="literal">ipaadmin_password</code> in the <code class="literal">[ipaclients:vars]</code> section of the <code class="literal">inventory/hosts</code> file.
									</li><li class="listitem">
										The <span class="strong strong"><strong>admin keytab</strong></span>, for example by providing a value for <code class="literal">ipaadmin_keytab</code> in the <code class="literal">[ipaclients:vars]</code> section of <code class="literal">inventory/hosts</code>.
									</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Specify the DNS resolver using the <code class="literal">ipaclient_configure_dns_resolve</code> and <code class="literal">ipaclient_dns_servers</code> options (if available) to simplify cluster deployments. This is especially useful if your IdM deployment is using integrated DNS:
					</p><div class="formalpara"><p class="title"><strong>An inventory file snippet specifying a DNS resolver:</strong></p><p>

</p><pre class="screen">[...]
[ipaclients:vars]
ipaadmin_password: "{{ ipaadmin_password }}"
ipaclient_domain=idm.example.com
ipaclient_configure_dns_resolver=true
ipaclient_dns_servers=192.168.100.1</pre>

						<p></p></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal">ipaclient_dns_servers</code> list must contain only IP addresses. Host names are not allowed.
						</p></div></rh-alert></li><li class="listitem">
						Starting with RHEL 9.3, you can also specify the <code class="literal">ipaclient_subid: true</code> option to have subid ranges configured for IdM users on the IdM level.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/ipaclient/README.md</code>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_identity_management/index#assembly_managing-subid-ranges-manually_configuring-and-managing-idm">Managing subID ranges manually</a>
					</li></ul></div></section><section class="section" id="setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.2. Setting the parameters of the inventory file when autodiscovery is not possible during client installation</h3></div></div></div><p>
				To install an Identity Management client using an Ansible playbook, configure the target host parameters in an inventory file, for example <code class="literal">inventory/hosts</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The information about the host, the IdM server and the IdM domain or the IdM realm
					</li><li class="listitem">
						The authorization for the task
					</li></ul></div><p>
				The inventory file can be in one of many formats, depending on the inventory plugins you have. The <code class="literal">INI-like</code> format is one of Ansible’s defaults and is used in the examples below.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To use smart cards with the graphical user interface in RHEL, ensure that you include the <code class="literal">ipaclient_mkhomedir</code> variable in your Ansible playbook.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Specify the fully-qualified hostname (FQDN) of the host to become an IdM client. The fully qualified domain name must be a valid DNS name:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Only numbers, alphabetic characters, and hyphens (<code class="literal">-</code>) are allowed. For example, underscores are not allowed and can cause DNS failures.
							</li><li class="listitem">
								The host name must be all lower-case. No capital letters are allowed.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Specify other options in the relevant sections of the <code class="literal">inventory/hosts</code> file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The FQDN of the servers in the <code class="literal">[ipaservers]</code> section to indicate which IdM server the client will be enrolled with
							</li><li class="listitem"><p class="simpara">
								One of the two following options:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The <code class="literal">ipaclient_domain</code> option in the <code class="literal">[ipaclients:vars]</code> section to indicate the DNS domain name of the IdM server the client will be enrolled with
									</li><li class="listitem"><p class="simpara">
										The <code class="literal">ipaclient_realm</code> option in the <code class="literal">[ipaclients:vars]</code> section to indicate the name of the Kerberos realm controlled by the IdM server
									</p><div class="formalpara"><p class="title"><strong>Example of an inventory hosts file with the client FQDN, the server FQDN and the domain defined</strong></p><p>

</p><pre class="screen">[ipaclients]
<span class="strong strong"><strong>client.idm.example.com</strong></span>

[ipaservers]
<span class="strong strong"><strong>server.idm.example.com</strong></span>

[ipaclients:vars]
<span class="strong strong"><strong>ipaclient_domain=idm.example.com</strong></span>
[...]</pre>

										<p></p></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Specify the credentials for enrolling the client. The following authentication methods are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <span class="strong strong"><strong>password of a user authorized to enroll clients</strong></span>. This is the default option.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										Red Hat recommends using the Ansible Vault to store the password, and referencing the Vault file from the playbook file, for example <code class="literal">install-client.yml</code>, directly:
									</p><div class="formalpara"><p class="title"><strong>Example playbook file using principal from inventory file and password from an Ansible Vault file</strong></p><p>

</p><pre class="screen">- name: Playbook to configure IPA clients with username/password
  hosts: ipaclients
  become: true
  vars_files:
  - <span class="strong strong"><strong>playbook_sensitive_data.yml</strong></span>

  roles:
  - role: ipaclient
    state: present</pre>

										<p></p></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Less securely, the credentials of <code class="literal">admin</code> to be provided using the <code class="literal">ipaadmin_password</code> option in the <code class="literal">[ipaclients:vars]</code> section of the <code class="literal">inventory/hosts</code> file. Alternatively, to specify a different authorized user, use the <code class="literal">ipaadmin_principal</code> option for the user name, and the <code class="literal">ipaadmin_password</code> option for the password. The <code class="literal">install-client.yml</code> playbook file can then look as follows:
							</p><div class="formalpara"><p class="title"><strong>Example inventory hosts file</strong></p><p>

</p><pre class="screen">[...]
[ipaclients:vars]
<span class="strong strong"><strong>ipaadmin_principal=my_admin</strong></span>
<span class="strong strong"><strong>ipaadmin_password=Secret123</strong></span></pre>

								<p></p></div><div class="formalpara"><p class="title"><strong>Example Playbook using principal and password from inventory file</strong></p><p>

</p><pre class="screen">- name: Playbook to unconfigure IPA clients
  hosts: ipaclients
  become: true

  roles:
  - role: ipaclient
    state: true</pre>

								<p></p></div></li><li class="listitem"><p class="simpara">
								The <span class="strong strong"><strong>client keytab</strong></span> from the previous enrollment if it is still available:
							</p><p class="simpara">
								This option is available if the system was previously enrolled as an Identity Management client. To use this authentication method, uncomment the <code class="literal">ipaclient_keytab</code> option, specifying the path to the file storing the keytab, for example in the <code class="literal">[ipaclient:vars]</code> section of <code class="literal">inventory/hosts</code>.
							</p></li><li class="listitem"><p class="simpara">
								A <span class="strong strong"><strong>random, one-time password</strong></span> (OTP) to be generated during the enrollment. To use this authentication method, use the <code class="literal">ipaclient_use_otp=true</code> option in your inventory file. For example, you can uncomment the <code class="literal">#ipaclient_use_otp=true</code> option in the <code class="literal">[ipaclients:vars]</code> section of the <code class="literal">inventory/hosts</code> file. Note that with OTP you must also specify one of the following options:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The <span class="strong strong"><strong>password of a user authorized to enroll clients</strong></span>, for example by providing a value for <code class="literal">ipaadmin_password</code> in the <code class="literal">[ipaclients:vars]</code> section of the <code class="literal">inventory/hosts</code> file.
									</li><li class="listitem">
										The <span class="strong strong"><strong>admin keytab</strong></span>, for example by providing a value for <code class="literal">ipaadmin_keytab</code> in the <code class="literal">[ipaclients:vars]</code> section of <code class="literal">inventory/hosts</code>.
									</li></ul></div></li></ul></div></li><li class="listitem">
						Starting with RHEL 9.3, you can also specify the <code class="literal">ipaclient_subid: true</code> option to have subid ranges configured for IdM users on the IdM level.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/ipaclient/README.md</code>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_identity_management/index#assembly_managing-subid-ranges-manually_configuring-and-managing-idm">Managing subID ranges manually</a>
					</li></ul></div></section><section class="section" id="authorization-options-for-idm-client-enrollment-using-an-ansible-playbook_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.3. Authorization options for IdM client enrollment using an Ansible playbook</h3></div></div></div><p>
				You can authorize IdM client enrollment by using any of the following methods:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A random, one-time password (OTP) + administrator password
					</li><li class="listitem">
						A random, one-time password (OTP) + an admin keytab
					</li><li class="listitem">
						The client keytab from the previous enrollment
					</li><li class="listitem">
						The password of a user authorized to enroll a client (<code class="literal">admin</code>) stored in an inventory file
					</li><li class="listitem">
						The password of a user authorized to enroll a client (<code class="literal">admin</code>) stored in an Ansible vault
					</li></ul></div><p>
				It is possible to have the OTP generated by an IdM administrator before the IdM client installation. In that case, you do not need any credentials for the installation other than the OTP itself.
			</p><p>
				The following are sample inventory files for these methods:
			</p><rh-table id="sample-inventory-file_client-ansible"><table class="lt-4-cols lt-7-rows"><caption>Table 27.1. Sample inventory files</caption><colgroup><col style="width: 29%; " class="col_1"><!--Empty--><col style="width: 71%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559988517808" scope="col">Authorization option</th><th align="left" valign="top" id="idm140559988516720" scope="col">Inventory file</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559988517808"> <p>
								A random, one-time password (OTP) + administrator password
							</p>
							 </td><td align="left" valign="top" headers="idm140559988516720">
<pre class="screen">[ipaclients:vars]
ipaadmin_password=Secret123
ipaclient_use_otp=true</pre>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988517808"> <p>
								A random, one-time password (OTP)
							</p>
							 </td><td align="left" valign="top" headers="idm140559988516720">
<pre class="screen">[ipaclients:vars]
ipaclient_otp=&lt;W5YpARl=7M.&gt;</pre>
							 <p>
								This scenario assumes that the OTP was already generated by an IdM <code class="literal">admin</code> before the installation.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988517808"> <p>
								A random, one-time password (OTP) + an admin keytab
							</p>
							 </td><td align="left" valign="top" headers="idm140559988516720">
<pre class="screen">[ipaclients:vars]
ipaadmin_keytab=/root/admin.keytab
ipaclient_use_otp=true</pre>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988517808"> <p>
								The client keytab from the previous enrollment
							</p>
							 </td><td align="left" valign="top" headers="idm140559988516720">
<pre class="screen">[ipaclients:vars]
ipaclient_keytab=/root/krb5.keytab</pre>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988517808"> <p>
								Password of an <code class="literal">admin</code> user stored in an inventory file
							</p>
							 </td><td align="left" valign="top" headers="idm140559988516720">
<pre class="screen">[ipaclients:vars]
ipaadmin_password=Secret123</pre>
							 </td></tr><tr><td align="left" valign="top" headers="idm140559988517808"> <p>
								Password of an <code class="literal">admin</code> user stored in an Ansible vault file
							</p>
							 </td><td align="left" valign="top" headers="idm140559988516720">
<pre class="screen">[ipaclients:vars]
[...]</pre>
							 </td></tr></tbody></table></rh-table><p>
				If you are using the password of an <code class="literal">admin</code> user stored in an Ansible vault file, the corresponding playbook file must have an additional <code class="literal">vars_files</code> directive:
			</p><rh-table id="user-password-stored-in-ansible-vault_client-ansible"><table class="lt-4-cols lt-7-rows"><caption>Table 27.2. User password stored in an Ansible vault</caption><colgroup><col style="width: 29%; " class="col_1"><!--Empty--><col style="width: 71%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140559984672848" scope="col">Inventory file</th><th align="left" valign="top" id="idm140559984671760" scope="col">Playbook file</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140559984672848">
<pre class="screen">[ipaclients:vars]
[...]</pre>
							 </td><td align="left" valign="top" headers="idm140559984671760">
<pre class="screen">- name: Playbook to configure IPA clients
  hosts: ipaclients
  become: true
  vars_files:
  - ansible_vault_file.yml

  roles:
  - role: ipaclient
    state: present</pre>
							 </td></tr></tbody></table></rh-table><p>
				In all the other authorization scenarios described above, a basic playbook file could look as follows:
			</p><pre class="literallayout">- name: Playbook to configure IPA clients
  hosts: ipaclients
  become: true

  roles:
  - role: ipaclient
    state: true</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					As of RHEL 9.2, in the two OTP authorization scenarios described above, the requesting of the administrator’s TGT by using the <code class="literal">kinit</code> command occurs on the first specified or discovered IdM server. Therefore, no additional modification of the Ansible control node is required. Before RHEL 9.2, the <code class="literal">krb5-workstation</code> package was required on the control node.
				</p></div></rh-alert></section><section class="section" id="deploying-an-IdM-client-using-an-Ansible-playbook_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.4. Deploying an IdM client using an Ansible playbook</h3></div></div></div><p>
				Complete this procedure to use an Ansible playbook to deploy an IdM client in your IdM environment.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.
					</li><li class="listitem"><p class="simpara">
						You have set the parameters of the IdM client deployment to correspond to your deployment scenario:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management#setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible">Setting the parameters of the inventory file for the autodiscovery client installation mode</a>
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management#setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible">Setting the parameters of the inventory file when autodiscovery is not possible during client installation</a>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Run the Ansible playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-client.yml</strong></span></pre></li></ul></div></section><section class="section" id="using-the-one-time-password-method-in-ansible-to-install-an-idm-client_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.5. Using the one-time password method in Ansible to install an IdM client</h3></div></div></div><p class="_abstract _abstract">
				You can generate a one-time password (OTP) for a new host in Identity Management (IdM) and use it to enroll a system into the IdM domain. This procedure describes how to use Ansible to install an IdM client after generating an OTP for it on another IdM host.
			</p><p>
				This method of installing an IdM client is convenient if two system administrators with different privileges exist in your organisation:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						One that has the credentials of an IdM administrator.
					</li><li class="listitem">
						Another that has the required Ansible credentials, including <code class="literal">root</code> access to the host to become an IdM client.
					</li></ul></div><p>
				The IdM administrator performs the first part of the procedure in which the OTP password is generated. The Ansible administrator performs the remaining part of the procedure in which the OTP is used to install an IdM client.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the IdM <code class="literal">admin</code> credentials or at least the <code class="literal">Host Enrollment</code> privilege and a permission to add DNS records in IdM.
					</li><li class="listitem">
						You have configured a user escalation method on the Ansible managed node to allow you to install an IdM client.
					</li><li class="listitem">
						If your Ansible control node is running on RHEL 8.7 or earlier, you must be able to install packages on your Ansible control node.
					</li><li class="listitem"><p class="simpara">
						You have configured your Ansible control node to meet the following requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package on the Ansible controller.
							</li><li class="listitem">
								You have created an <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management">Ansible inventory file</a> with the fully-qualified domain name (FQDN) of the IdM server.
							</li></ul></div></li><li class="listitem">
						The managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						<code class="literal">SSH</code> to an IdM host as an IdM user with a role that has the <code class="literal">Host Enrollment</code> privilege and a permission to add DNS records:
					</p><pre class="literallayout"><span class="strong strong"><strong>$ ssh admin@server.idm.example.com</strong></span></pre></li><li class="listitem"><p class="simpara">
						Generate an OTP for the new client:
					</p><pre class="literallayout">[admin@server ~]$ <span class="strong strong"><strong>ipa host-add client.idm.example.com --ip-address=172.25.250.11 --random</strong></span>
 --------------------------------------------------
 Added host "client.idm.example.com"
 --------------------------------------------------
  Host name: client.idm.example.com
  Random password: <span class="strong strong"><strong>W5YpARl=7M.n</strong></span>
  Password: True
  Keytab: False
  Managed by: server.idm.example.com</pre><p class="simpara">
						The <span class="strong strong"><strong>--ip-address=<span class="emphasis"><em>&lt;your_host_ip_address&gt;</em></span></strong></span> option adds the host to IdM DNS with the specified IP address.
					</p></li><li class="listitem"><p class="simpara">
						Exit the IdM host:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>exit</strong></span>
logout
Connection to server.idm.example.com closed.</pre></li><li class="listitem"><p class="simpara">
						On the ansible controller, update the inventory file to include the random password:
					</p><pre class="literallayout">[...]
[ipaclients]
client.idm.example.com

[ipaclients:vars]
ipaclient_domain=idm.example.com
<span class="strong strong"><strong>ipaclient_otp=W5YpARl=7M.n</strong></span>
[...]</pre></li><li class="listitem"><p class="simpara">
						If your ansible controller is running RHEL ⇐ 9.1, install the <code class="literal">kinit</code> utility provided by the <code class="literal">krb5-workstation</code> package:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>sudo dnf install krb5-workstation</strong></span></pre></li><li class="listitem"><p class="simpara">
						Run the playbook to install the client:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook -i inventory install-client.yml</strong></span></pre></li></ol></div></section><section class="section" id="testing-an-Identity-Management-after-Ansible-installation_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.6. Testing an Identity Management client after Ansible installation</h3></div></div></div><p>
				The command-line interface (CLI) informs you that the <code class="literal command">ansible-playbook</code> command was successful, but you can also do your own test.
			</p><p>
				To test that the Identity Management client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default <code class="literal">admin</code> user:
			</p><pre class="literallayout">[user@client1 ~]$ <span class="strong strong"><strong>id admin</strong></span>
uid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)</pre><p>
				To test that authentication works correctly, <code class="literal command">su -</code> as another already existing IdM user:
			</p><pre class="literallayout">[user@client1 ~]$ <span class="strong strong"><strong>su - idm_user</strong></span>
Last login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0
[idm_user@client1 ~]$</pre></section><section class="section" id="uninstalling-an-IdM-client-using-an-Ansible-playbook_client-ansible"><div class="titlepage"><div><div><h3 class="title">27.7. Uninstalling an IdM client using an Ansible playbook</h3></div></div></div><p>
				Complete this procedure to use an Ansible playbook to uninstall your host as an IdM client.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						IdM administrator credentials.
					</li><li class="listitem">
						The managed node is a Red Hat Enterprise Linux 9 system with a static IP address.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Run the Ansible playbook with the instructions to uninstall the client, for example <code class="literal">uninstall-client.yml</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/uninstall-client.yml</strong></span></pre></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The uninstallation of the client only removes the basic IdM configuration from the host but leaves the configuration files on the host in case you decide to re-install the client. In addition, the uninstallation has the following limitations:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							It does not remove the client host entry from the IdM LDAP server. The uninstallation only unenrolls the host.
						</li><li class="listitem">
							It does not remove any services residing on the client from IdM.
						</li><li class="listitem">
							It does not remove the DNS entries for the client from the IdM server.
						</li><li class="listitem">
							It does not remove the old principals for keytabs other than <code class="literal">/etc/krb5.keytab</code>.
						</li></ul></div><p>
					Note that the uninstallation does remove all certificates that were issued for the host by the IdM CA.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/uninstalling-an-ipa-client_installing-identity-management">Uninstalling an IdM client</a>
					</li></ul></div></section></section><section class="chapter" id="installing-dns-on-an-existing-idm-server_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 28. Installing DNS on an existing IdM server</h2></div></div></div><p>
			Follow this procedure to install the DNS service on an Identity Management (IdM) server that was originally installed without it.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You understand the advantages and limitations of using IdM with integrated DNS as described in <a class="link" href="#installing-an-ipa-server-with-integrated-dns_installing-identity-management" title="Chapter 2. Installing an IdM server: With integrated DNS, with an integrated CA as the root CA">Installing an IdM server: With integrated DNS, with an integrated CA as the root CA</a>.
				</li><li class="listitem">
					You have <code class="literal">root</code> access to the IdM server.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Optional: Verify that DNS is not already installed on the IdM server.
				</p><pre class="literallayout">[root@r8server ~]# <span class="strong strong"><strong>ipa server-role-show r8server.idm.example.com</strong></span>
Role name: <span class="strong strong"><strong>DNS server</strong></span>
  Server name: r8server.idm.example.com
  Role name: DNS server
  <span class="strong strong"><strong>Role status: absent</strong></span></pre><p class="simpara">
					The output confirms that IdM DNS is not available on the server.
				</p></li><li class="listitem"><p class="simpara">
					Enable the <code class="literal">idm:DL1</code> stream:
				</p><pre class="literallayout">[root@r8server ~]# <span class="strong strong"><strong>yum module enable idm:DL1</strong></span></pre></li><li class="listitem"><p class="simpara">
					Download the <code class="literal">ipa-dns-server</code> package and its dependencies:
				</p><pre class="literallayout">[root@r8server ~]# <span class="strong strong"><strong>yum module install idm:DL1/dns</strong></span></pre></li><li class="listitem"><p class="simpara">
					Start the script to install DNS on the server:
				</p><pre class="literallayout">[root@r8server ~]# <span class="strong strong"><strong>ipa-dns-install</strong></span></pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							The script prompts for per-server DNS forwarders.
						</p><pre class="screen">Do you want to configure DNS forwarders? [yes]:</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To configure per-server DNS forwarders, enter <code class="literal">yes</code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											For the forwarding policy default settings, see the <code class="literal option">--forward-policy</code> description in the <span class="strong strong"><strong>ipa-dns-install</strong></span>(1) man page.
										</li></ul></div></li><li class="listitem"><p class="simpara">
									If you do not want to use DNS forwarding, enter <code class="literal">no</code>.
								</p><p class="simpara">
									With no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							The script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.
						</p><pre class="screen">Do you want to search for missing reverse zones? [yes]:</pre><p class="simpara">
							If you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.
						</p><pre class="screen">Do you want to create reverse zone for IP 192.0.2.1 [yes]:
Please specify the reverse zone name [2.0.192.in-addr.arpa.]:
Using reverse zone(s) 2.0.192.in-addr.arpa.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Using IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.
							</p></div></rh-alert></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<code class="literal">man ipa-dns-install(1)</code>
				</li></ul></div></section><section class="chapter" id="uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 29. Uninstalling the integrated IdM DNS service from an IdM server</h2></div></div></div><p class="_abstract _abstract">
			If you have more than one server with integrated DNS in an Identity Management (IdM) deployment, you might decide to remove the integrated DNS service from one of the servers. To do this, you must first decommission the IdM server completely before re-installing IdM on it, this time without the integrated DNS.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				While you can add the DNS role to an IdM server, IdM does not provide a method to remove only the DNS role from an IdM server: the <code class="literal">ipa-dns-install</code> command does not have an <code class="literal">--uninstall</code> option.
			</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have integrated DNS installed on an IdM server.
				</li><li class="listitem">
					This is not the last integrated DNS service in your IdM topology.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Identify the redundant DNS service and follow the procedure in <a class="link" href="#uninstalling-an-ipa-server_installing-identity-management" title="Chapter 9. Uninstalling an IdM server">Uninstalling an IdM server</a> on the IdM replica that hosts this service.
				</li><li class="listitem">
					On the same host, follow the procedure in either <a class="link" href="#installing-an-ipa-server-without-integrated-dns_installing-identity-management" title="Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA">Without integrated DNS, with an integrated CA as the root CA</a> or <a class="link" href="#assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management" title="Chapter 6. Installing an IdM server: Without integrated DNS, with an external CA as the root CA">Without integrated DNS, with an external CA as the root CA</a>, depending on your use case.
				</li></ol></div></section><section class="chapter" id="adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 30. Adding the IdM CA service to an IdM server in a deployment without a CA</h2></div></div></div><p>
			If you previously installed an Identity Management (IdM) domain without the certificate authority (CA) component, you can add the IdM CA service to the domain by using the <code class="literal">ipa-ca-install</code> command. Depending on your requirements, you can select one of the following options:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="#installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca" title="30.1. Installing the first IdM CA as the root CA into an existing IdM domain">Add the IdM Certificate Server CA as the root CA.</a>
				</li><li class="listitem">
					<a class="link" href="#installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca" title="30.2. Installing the first IdM CA with an external CA as the root CA into an existing IdM domain">Add the IdM Certificate Server CA as a subordinate CA, with an external CA as the root CA.</a>
				</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				For details on the supported CA configurations, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/planning-your-ca-services_planning-identity-management">Planning your CA services</a>.
			</p></div></rh-alert><section class="section" id="installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca"><div class="titlepage"><div><div><h3 class="title">30.1. Installing the first IdM CA as the root CA into an existing IdM domain</h3></div></div></div><p>
				If you previously installed Identity Management (IdM) without the certificate authority (CA) component, you can install the CA on an IdM server subsequently. Follow this procedure to install, on the <span class="emphasis"><em>idmserver</em></span> server, an IdM CA that is not subordinate to any external root CA.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <code class="literal">root</code> permissions on <span class="emphasis"><em>idmserver</em></span>.
					</li><li class="listitem">
						The IdM server is installed on <span class="emphasis"><em>idmserver</em></span>.
					</li><li class="listitem">
						Your IdM deployment has no CA installed.
					</li><li class="listitem">
						You know the IdM <code class="literal">Directory Manager</code> password.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On <span class="emphasis"><em>idmserver</em></span>, install the IdM Certificate Server CA:
					</p><pre class="literallayout">[root@idmserver ~] <span class="strong strong"><strong>ipa-ca-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						On each IdM host in the topology, run the <code class="literal">ipa-certupdate</code> utility to update the host with the information about the new certificate from the IdM LDAP.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							If you do not run <code class="literal">ipa-certupdate</code> after generating the IdM CA certificate, the certificate will not be distributed to the other IdM machines.
						</p></div></rh-alert></li></ol></div></section><section class="section" id="installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca"><div class="titlepage"><div><div><h3 class="title">30.2. Installing the first IdM CA with an external CA as the root CA into an existing IdM domain</h3></div></div></div><p>
				If you previously installed Identity Management (IdM) without the certificate authority (CA) component, you can install the CA on an IdM server subsequently. Follow this procedure to install, on the <span class="emphasis"><em>idmserver</em></span> server, an IdM CA that is subordinate to an external root CA, with zero or several intermediate CAs in between.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <code class="literal">root</code> permissions on <span class="emphasis"><em>idmserver</em></span>.
					</li><li class="listitem">
						The IdM server is installed on <span class="emphasis"><em>idmserver</em></span>.
					</li><li class="listitem">
						Your IdM deployment has no CA installed.
					</li><li class="listitem">
						You know the IdM <code class="literal">Directory Manager</code> password.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start the installation:
					</p><pre class="literallayout">[root@idmserver ~] <span class="strong strong"><strong>ipa-ca-install --external-ca</strong></span></pre></li><li class="listitem">
						Wait till the command-line interface informs you that a certificate signing request (CSR) has been saved.
					</li><li class="listitem">
						Submit the CSR to the external CA.
					</li><li class="listitem">
						Copy the issued certificate to the IdM server.
					</li><li class="listitem"><p class="simpara">
						Continue the installation by adding the certificates and full path to the external CA files to <code class="literal">ipa-ca-install</code>:
					</p><pre class="literallayout">[root@idmserver ~]# <span class="strong strong"><strong>ipa-ca-install --external-cert-file=/root/master.crt --external-cert-file=/root/ca.crt</strong></span></pre></li><li class="listitem"><p class="simpara">
						On each IdM host in the topology, run the <code class="literal">ipa-certupdate</code> utility to update the host with the information about the new certificate from the IdM LDAP.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Failing to run <code class="literal">ipa-certupdate</code> after generating the IdM CA certificate means that the certificate will not be distributed to the other IdM machines.
						</p></div></rh-alert></li></ol></div></section></section><section class="chapter" id="adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 31. Adding the IdM CA service to an IdM server in a deployment with a CA</h2></div></div></div><p>
			If your Identity Management (IdM) environment already has the IdM certificate authority (CA) service installed but a particular IdM server, <span class="emphasis"><em>idmserver</em></span>, was installed as an IdM replica without a CA, you can add the CA service to <span class="emphasis"><em>idmserver</em></span> by using the <code class="literal">ipa-ca-install</code> command.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				This procedure is identical for both the following scenarios:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The IdM CA is a root CA.
					</li><li class="listitem">
						The IdM CA is subordinate to an external, root CA.
					</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have <code class="literal">root</code> permissions on <span class="emphasis"><em>idmserver</em></span>.
				</li><li class="listitem">
					The IdM server is installed on <span class="emphasis"><em>idmserver</em></span>.
				</li><li class="listitem">
					Your IdM deployment has a CA installed on another IdM server.
				</li><li class="listitem">
					You know the IdM <code class="literal">Directory Manager</code> password.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					On <span class="emphasis"><em>idmserver</em></span>, install the IdM Certificate Server CA:
				</p><pre class="literallayout">[root@idmserver ~] <span class="strong strong"><strong>ipa-ca-install</strong></span></pre></li></ul></div></section><section class="chapter" id="uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management"><div class="titlepage"><div><div><h2 class="title">Chapter 32. Uninstalling the IdM CA service from an IdM server</h2></div></div></div><p>
			If you have more than four Identity Management (IdM) replicas with the <span class="strong strong"><strong>CA Role</strong></span> in your topology and you run into performance problems due to redundant certificate replication, Red Hat recommends that you remove redundant CA service instances from IdM replicas. To do this, you must first decommission the affected IdM replicas completely before re-installing IdM on them, this time without the CA service.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				While you can <span class="strong strong"><strong>add</strong></span> the CA role to an IdM replica, IdM does not provide a method to <span class="strong strong"><strong>remove</strong></span> only the CA role from an IdM replica: the <code class="literal">ipa-ca-install</code> command does not have an <code class="literal">--uninstall</code> option.
			</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have the IdM CA service installed on more than four IdM servers in your topology.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Identify the redundant CA service and follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#uninstalling-an-ipa-server_installing-identity-management">Uninstalling an IdM server</a> on the IdM replica that hosts this service.
				</li><li class="listitem">
					On the same host, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#installing-an-ipa-server-without-a-ca_installing-identity-management">Installing an IdM server: With integrated DNS, without a CA</a>.
				</li></ol></div></section><div><div xml:lang="en-US" class="legalnotice" id="idm140559999367200"><h2 class="legalnotice">Legal Notice</h2><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></body></section><!----></div></article><aside id="layout" class="span-xs-12 span-sm-2 span-md-2 content-format-selectors" aria-label="Select page format" data-v-8589d091><div class="sticky-top page-layout-options" data-v-8589d091><label for="page-format" data-v-8589d091>Format</label><select id="page-format" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div><!----></aside></div><div class="btn-container hidden" data-v-8589d091><pf-button class="top-scroll-btn" icon="angle-up" icon-set="fas" icon-position="right" data-v-8589d091>Back to top</pf-button></div><!--]--><!--]--></main><rh-footer data-analytics-region="page-footer" data-v-97dd2752><a slot="logo" href="/en" data-analytics-category="Footer" data-analytics-text="Logo" data-v-97dd2752><img alt="Red Hat logo" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" loading="lazy" width="222" height="40" data-v-97dd2752></a><rh-footer-social-link slot="social-links" icon="github" data-v-97dd2752><a href="https://github.com/redhat-documentation" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="LinkedIn" data-v-97dd2752>Github</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="reddit" data-v-97dd2752><a href="https://www.reddit.com/r/redhat/" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="YouTube" data-v-97dd2752>Reddit</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="youtube" data-v-97dd2752><a href="https://www.youtube.com/@redhat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Facebook" data-v-97dd2752>Youtube</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="twitter" data-v-97dd2752><a href="https://twitter.com/RedHat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Twitter" data-v-97dd2752>Twitter</a></rh-footer-social-link><h3 slot="links" data-analytics-text="Learn" data-v-97dd2752>Learn</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://developers.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Developer resources" data-v-97dd2752>Developer resources</a></li><li data-v-97dd2752><a href="https://cloud.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Cloud learning hub" data-v-97dd2752>Cloud learning hub</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="Footer|Learn" data-analytics-text="Interactive labs" data-v-97dd2752>Interactive labs</a></li><li data-v-97dd2752><a href="https://www.redhat.com/services/training-and-certification" data-analytics-category="Footer|Learn" data-analytics-text="Training and certification" data-v-97dd2752>Training and certification</a></li><li data-v-97dd2752><a href="https://access.redhat.com/support" data-analytics-category="Footer|Learn" data-analytics-text="Customer support" data-v-97dd2752>Customer support</a></li><li data-v-97dd2752><a href="/products" data-analytics-category="Footer|Learn" data-analytics-text="See all documentation" data-v-97dd2752>See all documentation</a></li></ul><h3 slot="links" data-analytics-text="Try buy sell" data-v-97dd2752>Try, buy, &amp; sell</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/products/trials" data-analytics-category="Footer|Try buy sell" data-analytics-text="Product trial center" data-v-97dd2752>Product trial center</a></li><li data-v-97dd2752><a href="https://marketplace.redhat.com" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Marketplace" data-v-97dd2752>Red Hat Marketplace</a></li><li data-v-97dd2752><a href="https://catalog.redhat.com/" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Ecosystem Catalog" data-v-97dd2752>Red Hat Ecosystem Catalog</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/store" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Store" data-v-97dd2752>Red Hat Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/japan-buy" data-analytics-category="Footer|Try buy sell" data-analytics-text="Buy online (Japan)" data-v-97dd2752>Buy online (Japan)</a></li></ul><h3 slot="links" data-analytics-text="Communities" data-v-97dd2752>Communities</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://access.redhat.com/community" data-analytics-category="Footer|Communities" data-analytics-text="Customer Portal Community" data-v-97dd2752>Customer Portal Community</a></li><li data-v-97dd2752><a href="https://www.redhat.com/events" data-analytics-category="Footer|Communities" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/our-community-contributions" data-analytics-category="Footer|Communities" data-analytics-text="How we contribute" data-v-97dd2752>How we contribute</a></li></ul><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat Documentation" data-v-97dd2752>About Red Hat Documentation</h3><p data-v-97dd2752>We help Red Hat users innovate and achieve their goals with our products and services with content they can trust.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="Making open source more inclusive" data-v-97dd2752>Making open source more inclusive</h3><p data-v-97dd2752>Red Hat is committed to replacing problematic language in our code, documentation, and web properties. For more details, see the <a href=" https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language" data-analytics-category="Footer|Making open source more inclusive" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a>.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</h3><p data-v-97dd2752>We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.</p></rh-footer-block><rh-footer-universal slot="universal" data-v-97dd2752><h3 slot="links-primary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-primary" data-analytics-region="page-footer-bottom-primary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/company" data-analytics-category="Footer|Corporate" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/jobs" data-analytics-category="Footer|Corporate" data-analytics-text="Jobs" data-v-97dd2752>Jobs</a></li><li data-v-97dd2752><a href="https://redhat.com/en/events" data-analytics-category="Footer|Corporate" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/office-locations" data-analytics-category="Footer|Corporate" data-analytics-text="Locations" data-v-97dd2752>Locations</a></li><li data-v-97dd2752><a href="https://redhat.com/en/contact" data-analytics-category="Footer|Corporate" data-analytics-text="Contact Red Hat" data-v-97dd2752>Contact Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/blog" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/our-culture/diversity-equity-inclusion" data-analytics-category="Footer|Corporate" data-analytics-text="Diversity equity and inclusion" data-v-97dd2752>Diversity, equity, and inclusion</a></li><li data-v-97dd2752><a href="https://coolstuff.redhat.com/" data-analytics-category="Footer|Corporate" data-analytics-text="Cool Stuff Store" data-v-97dd2752>Cool Stuff Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/summit" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Summit" data-v-97dd2752>Red Hat Summit</a></li></ul><span data-v-97dd2752 data-v-5f538988></span><rh-footer-copyright slot="links-secondary" data-v-97dd2752>© 2024 Red Hat, Inc.</rh-footer-copyright><h3 slot="links-secondary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-secondary" data-analytics-region="page-footer-bottom-secondary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/privacy-policy" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Privacy statement" data-v-97dd2752>Privacy statement</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/terms-use" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Terms of use" data-v-97dd2752>Terms of use</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/all-policies-guidelines" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="All policies and guidelines" data-v-97dd2752>All policies and guidelines</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/digital-accessibility" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Digital accessibility" class="active" data-v-97dd2752>Digital accessibility</a></li><li data-v-97dd2752><span id="teconsent" data-v-97dd2752></span></li></ul></rh-footer-universal></rh-footer><div id="consent_blackbar" style="position:fixed;bottom:0;width:100%;z-index:5;padding:10px;"></div><!--]--><!--]--></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true">[["ShallowReactive",1],{"data":2,"state":931,"once":935,"_errors":936,"serverRendered":15,"path":938},["ShallowReactive",3],{"s8LoCEfG4A":4,"uUstF4AIyn":10,"Pn02PlJOas":859,"rFVLKcOK8e":930},[5,6,7,8,9],"fr-fr","en-us","ko-kr","zh-cn","ja-jp",{"name":11,"html":12,"type":-1,"toc":13,"breadcrumbs":758,"error":18,"title":766,"productName":760,"productVersions":775,"pagination":804,"redirect":840,"canonicalLinks":841,"openShiftProducts":843,"tocFromVolume":-1,"jumpLinks":858},"Installing Identity Management","\u003Cbody>\u003Cdiv xml:lang=\"en-US\" class=\"book\" id=\"idm140560016190720\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv class=\"producttitle\">\u003Cspan class=\"productname\">Red Hat Enterprise Linux\u003C/span> \u003Cspan class=\"productnumber\">9\u003C/span>\u003C/div>\u003Cdiv>\u003Ch3 class=\"subtitle\">Methods of installing IdM servers and clients\u003C/h3>\u003C/div>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"authorgroup\">\u003Cspan class=\"orgname\">Red Hat\u003C/span> \u003Cspan class=\"orgdiv\">Customer Content Services\u003C/span>\u003C/div>\u003C/div>\u003Cdiv>\u003Ca href=\"#idm140559999367200\">Legal Notice\u003C/a>\u003C/div>\u003Cdiv>\u003Cdiv class=\"abstract\">\u003Cp class=\"title\">\u003Cstrong>Abstract\u003C/strong>\u003C/p>\u003Cdiv class=\"para\">\n\t\t\t\tDepending on your environment, you can install Red Hat Identity Management (IdM) to provide DNS and Certificate Authority (CA) services, or you configure IdM to use an existing DNS and CA infrastructure.\n\t\t\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\t\tYou can install IdM servers, replicas, and clients manually or by using Ansible Playbooks. Additionally, you can use a Kickstart file to automatically join a client to an IdM domain during the system installation.\n\t\t\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003Chr/>\u003C/div>\u003Csection class=\"preface\" id=\"proc_providing-feedback-on-red-hat-documentation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Providing feedback on Red Hat documentation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWe appreciate your feedback on our documentation. Let us know how we can improve it.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Submitting feedback through Jira (account required)\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tLog in to the \u003Ca class=\"link\" href=\"https://issues.redhat.com/projects/RHELDOCS/issues\">Jira\u003C/a> website.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> in the top navigation bar\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter a descriptive title in the \u003Cspan class=\"strong strong\">\u003Cstrong>Summary\u003C/strong>\u003C/span> field.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter your suggestion for improvement in the \u003Cspan class=\"strong strong\">\u003Cstrong>Description\u003C/strong>\u003C/span> field. Include links to the relevant parts of the documentation.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> at the bottom of the dialogue.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"preparing-the-system-for-ipa-server-installation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 1. Preparing the system for IdM server installation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tThe following sections list the requirements to install an Identity Management (IdM) server. Before the installation, make sure your system meets these requirements.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"prerequisites\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.1. Prerequisites\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou need \u003Ccode class=\"literal\">root\u003C/code> privileges to install an Identity Management (IdM) server on your host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"hardware-recomendations_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.2. Hardware recommendations\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tRAM is the most important hardware feature to size properly. Make sure your system has enough RAM available. Typical RAM requirements are:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor 10,000 users and 100 groups: at least 4 GB of RAM and 4 GB swap space\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor 100,000 users and 50,000 groups: at least 16 GB of RAM and 4 GB of swap space\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor larger deployments, it is more effective to increase the RAM than to increase disk space because much of the data is stored in cache. In general, adding more RAM leads to better performance for larger deployments due to caching.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tA basic user entry or a simple host entry with a certificate is approximately 5—​10 kB in size.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.3. Custom configuration requirements for IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tInstall an Identity Management (IdM) server on a clean system without any custom configuration for services such as DNS, Kerberos, Apache, or Directory Server.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe IdM server installation overwrites system files to set up the IdM domain. IdM backs up the original system files to \u003Ccode class=\"literal\">/var/lib/ipa/sysrestore/\u003C/code>. When an IdM server is uninstalled at the end of the lifecycle, these files are restored.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"ipv6_requirements_in_idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.3.1. IPv6 requirements in IdM\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe IdM system must have the IPv6 protocol enabled in the kernel. If IPv6 is disabled, then the CLDAP plug-in used by the IdM services fails to initialize.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIPv6 does not have to be enabled on the network.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"support_for_encryption_types_in_idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.3.2. Support for encryption types in IdM\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tRed Hat Enterprise Linux (RHEL) uses Version 5 of the Kerberos protocol, which supports encryption types such as Advanced Encryption Standard (AES), Camellia, and Data Encryption Standard (DES).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>List of supported encryption types\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tWhile the Kerberos libraries on IdM servers and clients might support more encryption types, the IdM Kerberos Distribution Center (KDC) only supports the following encryption types:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes256-cts:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes256-cts:special\u003C/code> (default)\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes128-cts:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes128-cts:special\u003C/code> (default)\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes128-sha2:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes128-sha2:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes256-sha2:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes256-sha2:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">camellia128-cts-cmac:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">camellia128-cts-cmac:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">camellia256-cts-cmac:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">camellia256-cts-cmac:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>RC4 encryption types are disabled by default\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following RC4 encryption types have been disabled by default in RHEL 9, as they are considered less secure than the newer AES-128 and AES-256 encryption types:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">arcfour-hmac:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">arcfour-hmac:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tFor more information about manually enabling RC4 support for compatibility with legacy Active Directory environments, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_trust_between_idm_and_ad/ensuring-support-for-common-encryption-types-in-ad-and-rhel_installing-trust-between-idm-and-ad\">Ensuring support for common encryption types in AD and RHEL\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Support for DES and 3DES encryption has been removed\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tDue to security reasons, support for the DES algorithm was deprecated in RHEL 7. Single-DES (DES) and triple-DES (3DES) encryption types were removed from RHEL 8 and are not used in RHEL 9.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"support_for_system_wide_cryptographic_policies_in_idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.3.3. Support for system-wide cryptographic policies in IdM\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIdM uses the \u003Ccode class=\"literal\">DEFAULT\u003C/code> system-wide cryptographic policy. This policy offers secure settings for current threat models. It allows the TLS 1.2 and 1.3 protocols, as well as the IKEv2 and SSH2 protocols. The RSA keys and Diffie-Hellman parameters are accepted if they are at least 2048 bits long. This policy does not allow DES, 3DES, RC4, DSA, TLS v1.0, and other weaker algorithms.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tYou cannot install an IdM server while using the \u003Ccode class=\"literal\">FUTURE\u003C/code> system-wide cryptographic policy. When installing an IdM server, ensure you are using the \u003Ccode class=\"literal\">DEFAULT\u003C/code> system-wide cryptographic policy.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional Resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening\">System-wide cryptographic policies\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"fips_compliance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.3.4. FIPS compliance\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can install a new IdM server or replica on a system with the Federal Information Processing Standard (FIPS) mode enabled. The only exception is a system on which the \u003Ccode class=\"literal\">FIPS:OSPP\u003C/code> cryptographic subpolicy is enabled.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo install IdM with FIPS, first enable FIPS mode on the host, then install IdM. The IdM installation script detects if FIPS is enabled and configures IdM to only use encryption types that are compliant with FIPS 140-3:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes128-sha2:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes128-sha2:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes256-sha2:normal\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">aes256-sha2:special\u003C/code>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tFor an IdM environment to be FIPS-compliant, \u003Cspan class=\"strong strong\">\u003Cstrong>all\u003C/strong>\u003C/span> IdM replicas must have FIPS mode enabled.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tRed Hat recommends that you enable FIPS in IdM clients as well, especially if you might promote those clients to IdM replicas. Ultimately, it is up to administrators to determine how they meet FIPS requirements; Red Hat does not enforce FIPS criteria.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Migration to FIPS-compliant IdM\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tYou cannot migrate an existing IdM installation from a non-FIPS environment to a FIPS-compliant installation. This is not a technical problem but a legal and regulatory restriction.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\t\tTo operate a FIPS-compliant system, all cryptographic key material must be created in FIPS mode. Furthermore, the cryptographic key material must never leave the FIPS environment unless it is securely wrapped and never unwrapped in non-FIPS environments.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf your scenario requires a migration of a non-FIPS IdM realm to a FIPS-compliant one, you must:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tcreate a new IdM realm in FIPS mode\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tperform data migration from the non-FIPS realm to the new FIPS-mode realm with a filter that blocks all key material\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\t\tThe migration filter must block:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tKDC master key, keytabs, and all related Kerberos key material\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tuser passwords\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tall certificates including CA, service, and user certificates\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOTP tokens\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSSH keys and fingerprints\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDNSSEC KSK and ZSK\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tall vault entries\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAD trust-related key material\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tEffectively, the new FIPS installation is a different installation. Even with rigorous filtering, such a migration may not pass a FIPS 140 certification. Your FIPS auditor may flag this migration.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Support for cross-forest trust with FIPS mode enabled\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo establish a cross-forest trust with an Active Directory (AD) domain while FIPS mode is enabled, you must authenticate with an AD administrative account. You cannot establish a trust using a shared secret while FIPS mode is enabled.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tRADIUS authentication is not FIPS compliant. Do not install IdM on a server with FIPS mode enabled if you require RADIUS authentication.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional Resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo enable FIPS mode in the RHEL operating system, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening#switching-the-system-to-fips-mode_using-the-system-wide-cryptographic-policies\">Switching the system to FIPS mode\u003C/a> in the \u003Cspan class=\"emphasis\">\u003Cem>Security Hardening\u003C/em>\u003C/span> guide.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tFor more details on FIPS 140-2, see the \u003Ca class=\"link\" href=\"https://csrc.nist.gov/publications/detail/fips/140/2/final\">Security Requirements for Cryptographic Modules\u003C/a> on the National Institute of Standards and Technology (NIST) web site.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.4. Time service requirements for IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following sections discuss using \u003Ccode class=\"literal\">chronyd\u003C/code> to keep your IdM hosts in sync with a central time source:\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"con_how-idm-uses-chronyd-for-synchronization_assembly_time-service-requirements-for-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.4.1. How IdM uses \u003Ccode class=\"literal\">chronyd\u003C/code> for synchronization\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tYou can use \u003Ccode class=\"literal\">chronyd\u003C/code> to keep your IdM hosts in sync with a central time source as described here.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tKerberos, the underlying authentication mechanism in IdM, uses time stamps as part of its protocol. Kerberos authentication fails if the system time of an IdM client differs by more than five minutes from the system time of the Key Distribution Center (KDC).\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo ensure that IdM servers and clients stay in sync with a central time source, IdM installation scripts automatically configure \u003Ccode class=\"literal\">chronyd\u003C/code> Network Time Protocol (NTP) client software.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf you do not pass any NTP options to the IdM installation command, the installer searches for \u003Ccode class=\"literal\">_ntp._udp\u003C/code> DNS service (SRV) records that point to the NTP server in your network and configures \u003Ccode class=\"literal\">chrony\u003C/code> with that IP address. If you do not have any \u003Ccode class=\"literal\">_ntp._udp\u003C/code> SRV records, \u003Ccode class=\"literal\">chronyd\u003C/code> uses the configuration shipped with the \u003Ccode class=\"literal\">chrony\u003C/code> package.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tBecause \u003Ccode class=\"literal\">ntpd\u003C/code> has been deprecated in favor of \u003Ccode class=\"literal\">chronyd\u003C/code> in RHEL 8, IdM servers are no longer configured as Network Time Protocol (NTP) servers and are only configured as NTP clients. The RHEL 7 \u003Ccode class=\"literal\">NTP Server\u003C/code> IdM server role has also been deprecated in RHEL 8.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization\">Implementation of NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization\">Using the Chrony suite to configure NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_list-of-ntp-configuration-options-for-idm-installation-commands_assembly_time-service-requirements-for-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.4.2. List of NTP configuration options for IdM installation commands\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tYou can use \u003Ccode class=\"literal\">chronyd\u003C/code> to keep your IdM hosts in sync with a central time source.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can specify the following options with any of the IdM installation commands (\u003Ccode class=\"literal\">ipa-server-install\u003C/code>, \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>, \u003Ccode class=\"literal\">ipa-client-install\u003C/code>) to configure \u003Ccode class=\"literal\">chronyd\u003C/code> client software during setup.\n\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140559998743456\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 1.1. List of NTP configuration options for IdM installation commands\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 67%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140560000036864\" scope=\"col\">Option\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140560000035776\" scope=\"col\">Behavior\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140560000036864\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ntp-server\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140560000035776\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tUse it to specify one NTP server. You can use it multiple times to specify multiple servers.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140560000036864\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ntp-pool\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140560000035776\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tUse it to specify a pool of multiple NTP servers resolved as one hostname.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140560000036864\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-N\u003C/code>, \u003Ccode class=\"literal\">--no-ntp\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140560000035776\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tDo not configure, start, or enable \u003Ccode class=\"literal\">chronyd\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization\">Implementation of NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization\">Using the Chrony suite to configure NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_ensuring-idm-can-reference-your-ntp-time-server_assembly_time-service-requirements-for-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.4.3. Ensuring IdM can reference your NTP time server\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tThis procedure verifies you have the necessary configurations in place for IdM to be able to synchronize with your Network Time Protocol (NTP) time server.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have configured an NTP time server in your environment. In this example, the hostname of the previously configured time server is \u003Ccode class=\"literal\">ntpserver.example.com\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tPerform a DNS service (SRV) record search for NTP servers in your environment.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>dig +short -t SRV _ntp._udp.example.com\u003C/strong>\u003C/span>\n0 100 123 \u003Cspan class=\"strong strong\">\u003Cstrong>ntpserver\u003C/strong>\u003C/span>.example.com.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf the previous \u003Ccode class=\"literal\">dig\u003C/code> search does not return your time server, add a \u003Ccode class=\"literal\">_ntp._udp\u003C/code> SRV record that points to your time server on port \u003Ccode class=\"literal\">123\u003C/code>. This process depends on your DNS solution.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify that DNS returns an entry for your time server on port \u003Ccode class=\"literal\">123\u003C/code> when you perform a search for \u003Ccode class=\"literal\">_ntp._udp\u003C/code> SRV records.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>dig +short -t SRV _ntp._udp.example.com\u003C/strong>\u003C/span>\n0 100 123 \u003Cspan class=\"strong strong\">\u003Cstrong>ntpserver\u003C/strong>\u003C/span>.example.com.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization\">Implementation of NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization\">Using the Chrony suite to configure NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.4.4. Additional resources\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/considerations_in_adopting_rhel_8/infrastructure-services_considerations-in-adopting-rhel-8#implementation-of-ntp_time-synchronization\">Implementation of NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization\">Using the Chrony suite to configure NTP\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.5. Host name and DNS requirements for IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe host name and DNS requirements for server and replica systems are outlined below and also how to verify that the systems meet the requirements.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThese requirements apply to all Identity Management (IdM) servers, those with integrated DNS and those without integrated DNS.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDNS records are vital for nearly all IdM domain functions, including running LDAP directory services, Kerberos, and Active Directory integration. Be extremely cautious and ensure that:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have a tested and functional DNS service available\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe service is properly configured\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tThis requirement applies to IdM servers with \u003Cspan class=\"strong strong\">\u003Cstrong>and\u003C/strong>\u003C/span> without integrated DNS.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Verify the server host name\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe host name must be a fully qualified domain name, such as \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span>\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tDo not use single-label domain names, for example \u003Ccode class=\"literal\">.company\u003C/code>: the IdM domain must be composed of one or more subdomains and a top level domain, for example \u003Ccode class=\"literal\">example.com\u003C/code> or \u003Ccode class=\"literal\">company.example.com\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe fully qualified domain name must meet the following conditions:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIt is a valid DNS name, which means only numbers, alphabetic characters, and hyphens (-) are allowed. Other characters, such as underscores (_), in the host name cause DNS failures.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIt is all lower-case. No capital letters are allowed.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIt does not resolve to the loopback address. It must resolve to the system’s public IP address, not to \u003Ccode class=\"literal\">127.0.0.1\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo verify the host name, use the \u003Ccode class=\"literal\">hostname\u003C/code> utility on the system where you want to install:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>hostname\u003C/strong>\u003C/span>\nserver.idm.example.com\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe output of \u003Ccode class=\"literal\">hostname\u003C/code> must not be \u003Ccode class=\"literal\">localhost\u003C/code> or \u003Ccode class=\"literal\">localhost6\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Verify the forward and reverse DNS configuration\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tObtain the IP address of the server.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">ip addr show\u003C/code> command displays both the IPv4 and IPv6 addresses. In the following example, the relevant IPv6 address is \u003Ccode class=\"literal\">2001:DB8::1111\u003C/code> because its scope is global:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr show\u003C/strong>\u003C/span>\n...\n2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n\tlink/ether 00:1a:4a:10:4e:33 brd ff:ff:ff:ff:ff:ff\n\tinet \u003Cspan class=\"strong strong\">\u003Cstrong>192.0.2.1\u003C/strong>\u003C/span>/24 brd 192.0.2.255 scope global dynamic eth0\n\t\tvalid_lft 106694sec preferred_lft 106694sec\n\tinet6 \u003Cspan class=\"strong strong\">\u003Cstrong>2001:DB8::1111\u003C/strong>\u003C/span>/32 scope global dynamic\n \t\tvalid_lft 2591521sec preferred_lft 604321sec\n\tinet6 fe80::56ee:75ff:fe2b:def6/64 scope link\n\t       valid_lft forever preferred_lft forever\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tVerify the forward DNS configuration using the \u003Ccode class=\"literal\">dig\u003C/code> utility.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRun the command \u003Ccode class=\"literal command\">dig +short \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> A\u003C/code>. The returned IPv4 address must match the IP address returned by \u003Ccode class=\"literal\">ip addr show\u003C/code>:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>dig +short \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> A\u003C/strong>\u003C/span>\n192.0.2.1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRun the command \u003Ccode class=\"literal command\">dig +short \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> AAAA\u003C/code>. If it returns an address, it must match the IPv6 address returned by \u003Ccode class=\"literal\">ip addr show\u003C/code>:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>dig +short \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> AAAA\u003C/strong>\u003C/span>\n2001:DB8::1111\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">dig\u003C/code> does not return any output for the AAAA record, it does not indicate incorrect configuration. No output only means that no IPv6 address is configured in DNS for the system. If you do not intend to use the IPv6 protocol in your network, you can proceed with the installation in this situation.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tVerify the reverse DNS configuration (PTR records). Use the \u003Ccode class=\"literal\">dig\u003C/code> utility and add the IP address.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf the commands below display a different host name or no host name, the reverse DNS configuration is incorrect.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRun the command \u003Ccode class=\"literal command\">dig +short -x \u003Cspan class=\"emphasis\">\u003Cem>IPv4_address\u003C/em>\u003C/span>\u003C/code>. The output must display the server host name. For example:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>dig +short -x \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nserver.idm.example.com\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tIf the command \u003Ccode class=\"literal command\">dig +short -x \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> AAAA\u003C/code> in the previous step returned an IPv6 address, use \u003Ccode class=\"literal\">dig\u003C/code> to query the IPv6 address too. The output must display the server host name. For example:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>dig +short -x \u003Cspan class=\"emphasis\">\u003Cem>2001:DB8::1111\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nserver.idm.example.com\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal command\">dig +short \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> AAAA\u003C/code> in the previous step did not display any IPv6 address, querying the AAAA record does not output anything. In this case, this is normal behavior and does not indicate incorrect configuration.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\tIf a reverse DNS (PTR record) search returns multiple host names, \u003Ccode class=\"literal\">httpd\u003C/code> and other software associated with IdM may show unpredictable behavior. Red Hat strongly recommends configuring only one PTR record per IP.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Verify the standards-compliance of DNS forwarders (required for integrated DNS only)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure that all DNS forwarders you want to use with the IdM DNS server comply with the Extension Mechanisms for DNS (EDNS0) and DNS Security Extensions (DNSSEC) standards. To do this, inspect the output of the following command for each forwarder separately:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>dig +dnssec @\u003Cspan class=\"emphasis\">\u003Cem>IP_address_of_the_DNS_forwarder\u003C/em>\u003C/span> . SOA\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe expected output displayed by the command contains the following information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tStatus: \u003Ccode class=\"literal\">NOERROR\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFlags: \u003Ccode class=\"literal\">ra\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEDNS flags: \u003Ccode class=\"literal\">do\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">RRSIG\u003C/code> record must be present in the \u003Ccode class=\"literal\">ANSWER\u003C/code> section\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf any of these items is missing from the output, inspect the documentation for your DNS forwarder and verify that EDNS0 and DNSSEC are supported and enabled. In the latest versions of the BIND server, the \u003Ccode class=\"literal option\">dnssec-enable yes;\u003C/code> option must be set in the \u003Ccode class=\"literal\">/etc/named.conf\u003C/code> file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tExample of the expected output produced by \u003Ccode class=\"literal\">dig\u003C/code>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, \u003Cspan class=\"strong strong\">\u003Cstrong>status: NOERROR\u003C/strong>\u003C/span>, id: 48655\n;; \u003Cspan class=\"strong strong\">\u003Cstrong>flags:\u003C/strong>\u003C/span> qr rd \u003Cspan class=\"strong strong\">\u003Cstrong>ra\u003C/strong>\u003C/span> ad; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, \u003Cspan class=\"strong strong\">\u003Cstrong>flags: do;\u003C/strong>\u003C/span> udp: 4096\n\n;; ANSWER SECTION:\n. 31679 IN SOA a.root-servers.net. nstld.verisign-grs.com. 2015100701 1800 900 604800 86400\n. 31679 IN \u003Cspan class=\"strong strong\">\u003Cstrong>RRSIG SOA\u003C/strong>\u003C/span> 8 0 86400 20151017170000 20151007160000 62530 . GNVz7SQs [...]\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Verify the \u003Ccode class=\"literal\">/etc/hosts\u003C/code> file\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">/etc/hosts\u003C/code> file fulfills one of the following conditions:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe file does not contain an entry for the host. It only lists the IPv4 and IPv6 localhost entries for the host.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe file contains an entry for the host and the file fulfills all the following conditions:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe first two entries are the IPv4 and IPv6 localhost entries.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe next entry specifies the IdM server IPv4 address and host name.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">FQDN\u003C/code> of the IdM server comes before the short name of the IdM server.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe IdM server host name is not part of the localhost entry.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe following is an example of a correctly configured \u003Ccode class=\"literal\">/etc/hosts\u003C/code> file:\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"literallayout\">127.0.0.1   localhost localhost.localdomain \\\nlocalhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain \\\nlocalhost6 localhost6.localdomain6\n192.0.2.1\tserver.idm.example.com\tserver\n2001:DB8::1111\tserver.idm.example.com\tserver\u003C/pre>\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"port-requirements-for-idm_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.6. Port requirements for IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIdentity Management (IdM) uses several \u003Ca class=\"link\" href=\"#tab_ipa-ports_preparing-the-system-for-ipa-server-installation\" title=\"Table 1.2. IdM ports\">ports\u003C/a> to communicate with its services. These ports must be open and available for incoming connections to the IdM server for IdM to work. They must not be currently used by another service or blocked by a \u003Ca class=\"link\" href=\"#tab_firewalld-services_preparing-the-system-for-ipa-server-installation\" title=\"Table 1.3. firewalld services\">firewall\u003C/a>.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab_ipa-ports_preparing-the-system-for-ipa-server-installation\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 1.2. IdM ports\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992162704\" scope=\"col\">Service\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992161616\" scope=\"col\">Ports\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992160528\" scope=\"col\">Protocol\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992162704\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTP/HTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992161616\"> \u003Cp>\n\t\t\t\t\t\t\t\t80, 443\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992160528\"> \u003Cp>\n\t\t\t\t\t\t\t\tTCP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992162704\"> \u003Cp>\n\t\t\t\t\t\t\t\tLDAP/LDAPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992161616\"> \u003Cp>\n\t\t\t\t\t\t\t\t389, 636\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992160528\"> \u003Cp>\n\t\t\t\t\t\t\t\tTCP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992162704\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992161616\"> \u003Cp>\n\t\t\t\t\t\t\t\t88, 464\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992160528\"> \u003Cp>\n\t\t\t\t\t\t\t\tTCP and UDP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992162704\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992161616\"> \u003Cp>\n\t\t\t\t\t\t\t\t53\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992160528\"> \u003Cp>\n\t\t\t\t\t\t\t\tTCP and UDP (optional)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIdM uses ports 80 and 389. This is a secure practice because of the following safeguards:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIdM normally redirects requests that arrive on port 80 to port 443. Port 80 (HTTP) is only used to provide Online Certificate Status Protocol (OCSP) responses and Certificate Revocation Lists (CRL). Both are digitally signed and therefore secured against man-in-the-middle attacks.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPort 389 (LDAP) uses STARTTLS and Generic Security Services API (GSSAPI) for encryption.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIn addition, ports 8080, 8443, and 749 must be free as they are used internally. Do not open these ports and instead leave them blocked by a firewall.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab_firewalld-services_preparing-the-system-for-ipa-server-installation\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 1.3. firewalld services\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559999785856\" scope=\"col\">Service name\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559995006224\" scope=\"col\">For details, see:\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559999785856\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">freeipa-ldap\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995006224\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/firewalld/services/freeipa-ldap.xml\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559999785856\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">freeipa-ldaps\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995006224\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/firewalld/services/freeipa-ldaps.xml\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559999785856\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">dns\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995006224\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/firewalld/services/dns.xml\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003Csection class=\"section\" id=\"opening-the-ports-required-by-idm_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.7. Opening the ports required by IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">firewalld\u003C/code> service is running.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo find out if \u003Ccode class=\"literal\">firewalld\u003C/code> is currently running:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl status firewalld.service\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo start \u003Ccode class=\"literal\">firewalld\u003C/code> and configure it to start automatically when the system boots:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl start firewalld.service\n# systemctl enable firewalld.service\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the required ports using the \u003Ccode class=\"literal\">firewall-cmd\u003C/code> utility. Choose one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the individual ports to the firewall by using the \u003Ccode class=\"literal command\">firewall-cmd --add-port\u003C/code> command. For example, to open the ports in the default zone:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># firewall-cmd --permanent --add-port={80/tcp,443/tcp,389/tcp,636/tcp,88/tcp,88/udp,464/tcp,464/udp,53/tcp,53/udp}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">firewalld\u003C/code> services to the firewall by using the \u003Ccode class=\"literal command\">firewall-cmd --add-service\u003C/code> command. For example, to open the ports in the default zone:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># firewall-cmd --permanent --add-service={freeipa-4,dns}\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor details on using \u003Ccode class=\"literal\">firewall-cmd\u003C/code> to open ports on a system, see the \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd\u003C/strong>\u003C/span>(1) man page.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">firewall-cmd\u003C/code> configuration to ensure that the change takes place immediately:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># firewall-cmd --reload\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that reloading \u003Ccode class=\"literal\">firewalld\u003C/code> on a system in production can cause DNS connection time outs. If required, to avoid the risk of time outs and to make the changes persistent on the running system, use the \u003Ccode class=\"literal\">--runtime-to-permanent\u003C/code> option of the \u003Ccode class=\"literal\">firewall-cmd\u003C/code> command, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># firewall-cmd --runtime-to-permanent\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to a host on the client subnet and use the \u003Ccode class=\"literal\">nmap\u003C/code> or \u003Ccode class=\"literal\">nc\u003C/code> utilities to connect to the opened ports or run a port scan.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example, to scan the ports that are required for TCP traffic:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ nmap -p 80,443,389,636,88,464,53 server.idm.example.com\n[...]\nPORT    STATE SERVICE\n53/tcp  open  domain\n80/tcp  open  http\n88/tcp  open  kerberos-sec\n389/tcp open  ldap\n443/tcp open  https\n464/tcp open  kpasswd5\n636/tcp open  ldapssl\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo scan the ports that are required for UDP traffic:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># nmap -sU -p 88,464,53 server.idm.example.com\n[...]\nPORT    STATE         SERVICE\n53/udp  open          domain\n88/udp  open|filtered kerberos-sec\n464/udp open|filtered kpasswd5\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou also have to open network-based firewalls for both incoming and outgoing traffic.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"installing-packages-required-for-an-idm-server_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.8. Installing packages required for an IdM server\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe following procedure shows how to download the packages necessary for setting up the IdM environment of your choice.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a newly installed RHEL system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have made the required repositories available:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your RHEL system is not running in the cloud, you have registered your system with the Red Hat Subscription Manager (RHSM). For details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/subscription_central/1-latest\">Subscription Central\u003C/a>. You have also enabled the \u003Ccode class=\"literal\">BaseOS\u003C/code> and \u003Ccode class=\"literal\">AppStream\u003C/code> repositories that IdM uses:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager repos --enable=rhel-9-for-x86_64-baseos-rpms\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager repos --enable=rhel-9-for-x86_64-appstream-rpms\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor details on how to enable and disable specific repositories using RHSM, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/subscription_central/1-latest\">Subscription Central\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf your RHEL system is running in the cloud, skip the registration. The required repositories are already available via the Red Hat Update Infrastructure (RHUI).\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose one of the following options, depending on your IdM requirements:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo download the packages necessary for installing an IdM server without an integrated DNS:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install ipa-server\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo download the packages necessary for installing an IdM server with an integrated DNS:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install ipa-server ipa-server-dns\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo download the packages necessary for installing an IdM server that has a trust agreement with Active Directory:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install ipa-server ipa-server-trust-ad samba-client\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-the-correct-file-mode-creation-mask-for-idm-installation_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.9. Setting the correct file mode creation mask for IdM installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Identity Management (IdM) installation process requires that the file mode creation mask (\u003Ccode class=\"literal\">umask\u003C/code>) is set to \u003Ccode class=\"literal\">0022\u003C/code> for the \u003Ccode class=\"literal\">root\u003C/code> account. This allows users other than \u003Ccode class=\"literal\">root\u003C/code> to read files created during the installation. If a different \u003Ccode class=\"literal\">umask\u003C/code> is set, the installation of an IdM server will display a warning. If you continue with the installation, some functions of the server will not perform properly. For example, you will be unable to install an IdM replica from this server. After the installation, you can set the \u003Ccode class=\"literal\">umask\u003C/code> back to its original value.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the current \u003Ccode class=\"literal\">umask\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># umask\n0027\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">umask\u003C/code> to \u003Ccode class=\"literal\">0022\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># umask 0022\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: After the IdM installation is complete, set the \u003Ccode class=\"literal\">umask\u003C/code> back to its original value:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># umask 0027\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_ensuring-that-fapolicyd-rules-do-not-block-idm-installation_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.10. Ensuring that fapolicyd rules do not block IdM installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you are using the \u003Ccode class=\"literal\">fapolicyd\u003C/code> software framework on your RHEL host to control the execution of applications based on a user-defined policy, the installation of the Identity Management (IdM) server can fail. As the installation and operation requires the Java program to complete successfully, ensure that Java and Java classes are not blocked by any \u003Ccode class=\"literal\">fapolicyd\u003C/code> rules.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/5567781\">fapolicy restrictions causing IdM installation failures\u003C/a> KCS solution.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.11. Options for the IdM installation commands\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tCommands such as \u003Ccode class=\"literal\">ipa-server-install\u003C/code>, \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>, \u003Ccode class=\"literal\">ipa-dns-install\u003C/code> and \u003Ccode class=\"literal\">ipa-ca-install\u003C/code> have numerous options you can use to supply additional information for an interactive installation. You can also use these options to script an unattended installation.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following tables display some of the most common options for different components. Options for a specific component are shared across multiple commands. For example, you can use the \u003Ccode class=\"literal\">--ca-subject\u003C/code> option with both the \u003Ccode class=\"literal\">ipa-ca-install\u003C/code> and \u003Ccode class=\"literal\">ipa-server-install\u003C/code> commands.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor an exhaustive list of options, see the \u003Ccode class=\"literal\">ipa-server-install(1)\u003C/code>, \u003Ccode class=\"literal\">ipa-replica-install(1)\u003C/code>, \u003Ccode class=\"literal\">ipa-dns-install(1)\u003C/code> and \u003Ccode class=\"literal\">ipa-ca-install(1)\u003C/code> man pages.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140559999716656\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 1.4. General options: available for ipa-server-install and ipa-replica-install\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 67%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992209504\" scope=\"col\">Argument\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992208416\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-d\u003C/code>, \u003Ccode class=\"literal\">--debug\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables debug logging for more verbose output.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-U\u003C/code>, \u003Ccode class=\"literal\">--unattended\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables an unattended installation session that does not prompt for user input.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--hostname=\u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe fully-qualified domain name of the IdM server machine. Only numbers, lowercase alphabetic characters, and hyphens (-) are allowed.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ip-address \u003Cspan class=\"emphasis\">\u003Cem>127.0.0.1\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tSpecifies the IP address of the server. This option only accepts IP addresses associated with the local interface.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--dirsrv-config-file \u003Cspan class=\"emphasis\">\u003Cem>&lt;LDIF_file_name&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe path to an LDIF file used to modify the configuration of the directory server instance.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-n \u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe name of the LDAP server domain to use for the IdM domain. This is usually based on the IdM server’s hostname.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-p \u003Cspan class=\"emphasis\">\u003Cem>&lt;directory_manager_password&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe password of the superuser, \u003Ccode class=\"literal\">cn=Directory Manager\u003C/code>, for the LDAP service.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-a \u003Cspan class=\"emphasis\">\u003Cem>&lt;ipa_admin_password&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe password for the \u003Ccode class=\"literal\">admin\u003C/code> IdM administrator account to authenticate to the Kerberos realm. For \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>, use \u003Ccode class=\"literal\">-w\u003C/code> instead.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">-r \u003Cspan class=\"emphasis\">\u003Cem>&lt;KERBEROS_REALM_NAME&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe name of the Kerberos realm to create for the IdM domain in uppercase, such as \u003Ccode class=\"literal\">EXAMPLE.COM\u003C/code>. For \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>, this specifies the name of a Kerberos realm of an existing IdM deployment.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--setup-dns\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tTells the installation script to set up a DNS service within the IdM domain.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992209504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--setup-ca\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992208416\"> \u003Cp>\n\t\t\t\t\t\t\t\tInstall and configure a CA on this replica. If a CA is not configured, certificate operations are forwarded to another replica with a CA installed. For \u003Ccode class=\"literal\">ipa-server-install\u003C/code>, a CA is installed by default and you do not need to use this option.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"idm140559992136176\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 1.5. CA options: available for ipa-ca-install and ipa-server-install\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 67%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559994723696\" scope=\"col\">Argument\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559994722608\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994723696\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--random-serial-numbers\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994722608\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables Random Serial Numbers version 3 (RSNv3) for the IdM CA. When enabled, the CA generates fully random serial numbers for certificates and requests in PKI without range management.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tIMPORTANT: RSNv3 is supported only for new IdM CA installations. If enabled, it is required to use RSNv3 on all PKI services.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994723696\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ca-subject=\u003Cspan class=\"emphasis\">\u003Cem>&lt;SUBJECT&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994722608\"> \u003Cp>\n\t\t\t\t\t\t\t\tSpecifies the CA certificate subject Distinguished Name (default: CN=Certificate Authority,O=REALM.NAME). Relative Distinguished Names (RDN) are in LDAP order, with the most specific RDN first.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994723696\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--subject-base=\u003Cspan class=\"emphasis\">\u003Cem>&lt;SUBJECT&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994722608\"> \u003Cp>\n\t\t\t\t\t\t\t\tSpecifies the subject base for certificates issued by IdM (default O=REALM.NAME). Relative Distinguished Names (RDN) are in LDAP order, with the most specific RDN first.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994723696\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--external-ca\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994722608\"> \u003Cp>\n\t\t\t\t\t\t\t\tGenerates a certificate signing request to be signed by an external CA.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994723696\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ca-signing-algorithm=\u003Cspan class=\"emphasis\">\u003Cem>&lt;ALGORITHM&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994722608\"> \u003Cp>\n\t\t\t\t\t\t\t\tSpecifies the signing algorithm of the IdM CA certificate. Possible values are SHA1withRSA, SHA256withRSA, SHA512withRSA. The default is SHA256withRSA. Use this option with \u003Ccode class=\"literal\">--external-ca\u003C/code> if the external CA does not support the default signing algorithm.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"idm140559995028240\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 1.6. DNS options: available for ipa-dns-install, or for ipa-server-install and ipa-replica-install when using --setup-dns\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 67%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559996236096\" scope=\"col\">Argument\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559996235008\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559996236096\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--forwarder=\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559996235008\"> \u003Cp>\n\t\t\t\t\t\t\t\tSpecifies a DNS forwarder to use with the DNS service. To specify more than one forwarder, use this option multiple times.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559996236096\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--no-forwarders\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559996235008\"> \u003Cp>\n\t\t\t\t\t\t\t\tUses root servers with the DNS service instead of forwarders.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559996236096\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--no-reverse\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559996235008\"> \u003Cp>\n\t\t\t\t\t\t\t\tDoes not create a reverse DNS zone when the DNS domain is set up. If a reverse DNS zone is already configured, then that existing reverse DNS zone is used.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tIf this option is not used, then the default value is \u003Ccode class=\"literal\">true\u003C/code>. This instructs the installation script to configure reverse DNS.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipa-server-install(1)\u003C/code> and \u003Ccode class=\"literal\">ipa-replica-install(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipa-dns-install(1)\u003C/code> and \u003Ccode class=\"literal\">ipa-ca-install(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-ipa-server-with-integrated-dns_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 2. Installing an IdM server: With integrated DNS, with an integrated CA as the root CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tInstalling a new Identity Management (IdM) server with integrated DNS has the following advantages:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can automate much of the maintenance and DNS record management using native IdM tools. For example, DNS SRV records are automatically created during the setup, and later on are automatically updated.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can configure global forwarders during the installation of the IdM server for a stable external internet connection. Global forwarders are also useful for trusts with Active Directory.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can set up a DNS reverse zone to prevent emails from your domain to be considered spam by email servers outside of the IdM domain.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tInstalling IdM with integrated DNS has certain limitations:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tIdM DNS is not meant to be used as a general-purpose DNS server. Some of the advanced DNS functions are not supported. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index#dns-services-available-in-an-ipa-server_planning-dns\">DNS services available in an IdM server\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tThis chapter describes how you can install a new IdM server with an integrated certificate authority (CA) as the root CA.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tThe default configuration for the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span> command is an integrated CA as the root CA. If no CA option, for example \u003Ccode class=\"literal option\">--external-ca\u003C/code> or \u003Ccode class=\"literal option\">--ca-less\u003C/code> is specified, the IdM server is installed with an integrated CA.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"installing-ipa-server-with-dns-interactive-install_install-server-with-dns\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.1. Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring the interactive installation using the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span> utility.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to configure an integrated DNS service. Enter \u003Ccode class=\"literal\">yes\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure integrated DNS (BIND)? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for several required settings and offers recommended default values in brackets.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo accept a default value, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo provide a custom value, enter the required value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Server host name [server.idm.example.com]:\nPlease confirm the domain name [idm.example.com]:\nPlease provide a realm name [IDM.EXAMPLE.COM]:\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tPlan these names carefully. You will not be able to change them after the installation is complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the passwords for the Directory Server superuser (\u003Ccode class=\"literal\">cn=Directory Manager\u003C/code>) and for the Identity Management (IdM) administration system user account (\u003Ccode class=\"literal\">admin\u003C/code>).\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Directory Manager password:\nIPA admin password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for per-server DNS forwarders.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure DNS forwarders? [yes]:\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo configure per-server DNS forwarders, enter \u003Ccode class=\"literal\">yes\u003C/code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFor the forwarding policy default settings, see the \u003Ccode class=\"literal option\">--forward-policy\u003C/code> description in the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-dns-install\u003C/strong>\u003C/span>(1) man page.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you do not want to use DNS forwarding, enter \u003Ccode class=\"literal\">no\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWith no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to search for missing reverse zones? [yes]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to create reverse zone for IP 192.0.2.1 [yes]:\nPlease specify the reverse zone name [2.0.192.in-addr.arpa.]:\nUsing reverse zone(s) 2.0.192.in-addr.arpa.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tUsing IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">yes\u003C/code> to confirm the server configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Continue to configure the system with these values? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe installation script now configures the server. Wait for the operation to complete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the installation script completes, update your DNS records in the following way:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tRepeat this step each time after an IdM DNS server is installed.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAdd an \u003Ccode class=\"literal\">_ntp._udp\u003C/code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-ipa-server-with-integrated-dns-non-interactive-installation_install-server-with-dns\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.2. Non-interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span> utility with the options to supply all the required information. The minimum required options for non-interactive installation are:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--realm\u003C/code> to provide the Kerberos realm name\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ds-password\u003C/code> to provide the password for the Directory Manager (DM), the Directory Server super user\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--admin-password\u003C/code> to provide the password for \u003Ccode class=\"literal\">admin\u003C/code>, the Identity Management (IdM) administrator\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--unattended\u003C/code> to let the installation process select default options for the host name and domain name\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo install a server with integrated DNS, add also these options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--setup-dns\u003C/code> to configure integrated DNS\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--forwarder\u003C/code> or \u003Ccode class=\"literal\">--no-forwarders\u003C/code>, depending on whether you want to configure DNS forwarders or not\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--auto-reverse\u003C/code> or \u003Ccode class=\"literal\">--no-reverse\u003C/code>, depending on whether you want to configure automatic detection of the reverse DNS zones that must be created in the IdM DNS or no reverse zone auto-detection\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --realm \u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span> --ds-password \u003Cspan class=\"emphasis\">\u003Cem>DM_password\u003C/em>\u003C/span> --admin-password \u003Cspan class=\"emphasis\">\u003Cem>admin_password\u003C/em>\u003C/span> --unattended --setup-dns --forwarder \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> --no-reverse\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the installation script completes, update your DNS records in the following way:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tRepeat this step each time after an IdM DNS server is installed.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAdd an \u003Ccode class=\"literal\">_ntp._udp\u003C/code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a complete list of options accepted by \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>, run the \u003Ccode class=\"literal\">ipa-server-install --help\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/tuning_performance_in_identity_management/failover-load-balancing-high-availability_tuning-performance-in-idm#failover-load-balancing-high-availability_tuning-performance-in-idm\">Failover, load-balancing, and high-availability in IdM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-ipa-server-with-external-ca_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 3. Installing an IdM server: With integrated DNS, with an external CA as the root CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tInstalling a new Identity Management (IdM) server with integrated DNS has the following advantages:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can automate much of the maintenance and DNS record management using native IdM tools. For example, DNS SRV records are automatically created during the setup, and later on are automatically updated.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can configure global forwarders during the installation of the IdM server for a stable external internet connection. Global forwarders are also useful for trusts with Active Directory.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can set up a DNS reverse zone to prevent emails from your domain to be considered spam by email servers outside of the IdM domain.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tInstalling IdM with integrated DNS has certain limitations:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tIdM DNS is not meant to be used as a general-purpose DNS server. Some of the advanced DNS functions are not supported. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index#dns-services-available-in-an-ipa-server_planning-dns\">DNS services available in an IdM server\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tThis chapter describes how you can install a new IdM server with an external certificate authority (CA) as the root CA.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"installing-an-ipa-server-with-an-external-ca-as-the-root-ca_install-server-external-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.1. Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring the interactive installation using the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFollow this procedure to install a server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith an external certificate authority (CA) as the root CA\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have determined the type of the external CA to specify with the \u003Ccode class=\"literal option\">--external-ca-type\u003C/code> option. See the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code>(1) man page for details.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are using a Microsoft Certificate Services certificate authority (MS CS CA) as your external CA: you have determined the certificate profile or template to specify with the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option. By default, the \u003Ccode class=\"literal\">SubCA\u003C/code> template is used.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more information about the \u003Ccode class=\"literal option\">--external-ca-type\u003C/code> and \u003Ccode class=\"literal option\">--external-ca-profile\u003C/code> options, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca\">Options used when installing an IdM CA with an external CA as the root CA\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span> utility with the \u003Ccode class=\"literal\">--external-ca\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --external-ca\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you are using the Microsoft Certificate Services (MS CS) CA, also use the \u003Ccode class=\"literal\">--external-ca-type\u003C/code> option and, optionally, the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --external-ca --external-ca-type=ms-cs --external-ca-profile=\u003Cspan class=\"emphasis\">\u003Cem>&lt;oid&gt;/&lt;name&gt;/default\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you are not using MS CS to generate the signing certificate for your IdM CA, no other option may be necessary:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --external-ca\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to configure an integrated DNS service. Enter \u003Ccode class=\"literal\">yes\u003C/code> or \u003Ccode class=\"literal\">no\u003C/code>. In this procedure, we are installing a server with integrated DNS.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure integrated DNS (BIND)? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf you want to install a server without integrated DNS, the installation script will not prompt you for DNS configuration as described in the steps below. See \u003Ca class=\"xref\" href=\"#installing-an-ipa-server-without-integrated-dns_installing-identity-management\" title=\"Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA\">Chapter 5, \u003Cem>Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA\u003C/em>\u003C/a> for details on the steps for installing a server without DNS.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for several required settings and offers recommended default values in brackets.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo accept a default value, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo provide a custom value, enter the required value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Server host name [\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span>\u003C/code>]:\nPlease confirm the domain name [\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>]:\nPlease provide a realm name [\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span>\u003C/code>]:\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tPlan these names carefully. You will not be able to change them after the installation is complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the passwords for the Directory Server superuser (\u003Ccode class=\"literal\">cn=Directory Manager\u003C/code>) and for the Identity Management (IdM) administration system user account (\u003Ccode class=\"literal\">admin\u003C/code>).\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Directory Manager password:\nIPA admin password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for per-server DNS forwarders.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure DNS forwarders? [yes]:\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo configure per-server DNS forwarders, enter \u003Ccode class=\"literal\">yes\u003C/code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFor the forwarding policy default settings, see the \u003Ccode class=\"literal option\">--forward-policy\u003C/code> description in the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-dns-install\u003C/strong>\u003C/span>(1) man page.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you do not want to use DNS forwarding, enter \u003Ccode class=\"literal\">no\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWith no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to search for missing reverse zones? [yes]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to create reverse zone for IP 192.0.2.1 [yes]:\nPlease specify the reverse zone name [2.0.192.in-addr.arpa.]:\nUsing reverse zone(s) 2.0.192.in-addr.arpa.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tUsing IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">yes\u003C/code> to confirm the server configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Continue to configure the system with these values? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDuring the configuration of the Certificate System instance, the utility prints the location of the certificate signing request (CSR): \u003Ccode class=\"literal\">/root/ipa.csr\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">...\n\nConfiguring certificate server (pki-tomcatd): Estimated time 3 minutes 30 seconds\n  [1/8]: creating certificate server user\n  [2/8]: configuring certificate server instance\nThe next step is to get /root/ipa.csr signed by your CA and re-run /sbin/ipa-server-install as:\n/sbin/ipa-server-install --external-cert-file=/path/to/signed_certificate --external-cert-file=/path/to/external_ca_certificate\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen this happens:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSubmit the CSR located in \u003Ccode class=\"literal\">/root/ipa.csr\u003C/code> to the external CA. The process differs depending on the service to be used as the external CA.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRetrieve the issued certificate and the CA certificate chain for the issuing CA in a base 64-encoded blob (either a PEM file or a Base_64 certificate from a Windows CA). Again, the process differs for every certificate service. Usually, a download link on a web page or in the notification email allows the administrator to download all the required certificates.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tBe sure to get the full certificate chain for the CA, not just the CA certificate.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">ipa-server-install\u003C/code> again, this time specifying the locations and names of the newly-issued CA certificate and the CA chain files. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># ipa-server-install --external-cert-file=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/servercert20170601.pem\u003C/em>\u003C/span> --external-cert-file=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/cacert.pem\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe installation script now configures the server. Wait for the operation to complete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the installation script completes, update your DNS records in the following way:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tRepeat this step each time after an IdM DNS server is installed.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAdd an \u003Ccode class=\"literal\">_ntp._udp\u003C/code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal command\">ipa-server-install --external-ca\u003C/code> command can sometimes fail with the following error:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa         : CRITICAL failed to configure ca instance Command '/usr/sbin/pkispawn -s CA -f /tmp/\u003Cspan class=\"emphasis\">\u003Cem>configuration_file\u003C/em>\u003C/span>' returned non-zero exit status 1\nConfiguration of CA failed\u003C/pre>\u003Cp>\n\t\t\t\t\tThis failure occurs when the \u003Ccode class=\"literal\">*_proxy\u003C/code> environmental variables are set. For a solution of the problem, see \u003Ca class=\"link\" href=\"#troubleshooting-external-ca-installation-fails\" title=\"3.2. Troubleshooting: External CA installation fails\">Troubleshooting: External CA installation fails\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"troubleshooting-external-ca-installation-fails\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.2. Troubleshooting: External CA installation fails\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal command\">ipa-server-install --external-ca\u003C/code> command fails with the following error:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa         : CRITICAL failed to configure ca instance Command '/usr/sbin/pkispawn -s CA -f /tmp/\u003Cspan class=\"emphasis\">\u003Cem>configuration_file\u003C/em>\u003C/span>' returned non-zero exit status 1\nConfiguration of CA failed\u003C/pre>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal command\">env|grep proxy\u003C/code> command displays variables such as the following:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>env|grep proxy\u003C/strong>\u003C/span>\nhttp_proxy=http://example.com:8080\nftp_proxy=http://example.com:8080\nhttps_proxy=http://example.com:8080\u003C/pre>\u003Ch5 id=\"what_this_means\">What this means:\u003C/h5>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">*_proxy\u003C/code> environmental variables are preventing the server from being installed.\n\t\t\t\u003C/p>\u003Ch5 id=\"to_fix_the_problem\">To fix the problem:\u003C/h5>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the following shell script to unset the \u003Ccode class=\"literal\">*_proxy\u003C/code> environmental variables:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>for i in ftp http https; do unset ${i}_proxy; done\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">pkidestroy\u003C/code> utility to remove the unsuccessful certificate authority (CA) subsystem installation:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pkidestroy -s CA -i pki-tomcat; rm -rf /var/log/pki/pki-tomcat /etc/sysconfig/pki-tomcat /etc/sysconfig/pki/tomcat/pki-tomcat /var/lib/pki/pki-tomcat /etc/pki/pki-tomcat /root/ipa.csr\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the failed Identity Management (IdM) server installation:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --uninstall\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRetry running \u003Ccode class=\"literal command\">ipa-server-install --external-ca\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/tuning_performance_in_identity_management/failover-load-balancing-high-availability_tuning-performance-in-idm#failover-load-balancing-high-availability_tuning-performance-in-idm\">Failover, load-balancing, and high-availability in IdM\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-ipa-server-without-a-ca_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 4. Installing an IdM server: With integrated DNS, without a CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tInstalling a new Identity Management (IdM) server with integrated DNS has the following advantages:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can automate much of the maintenance and DNS record management using native IdM tools. For example, DNS SRV records are automatically created during the setup, and later on are automatically updated.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can configure global forwarders during the installation of the IdM server for a stable external internet connection. Global forwarders are also useful for trusts with Active Directory.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can set up a DNS reverse zone to prevent emails from your domain to be considered spam by email servers outside of the IdM domain.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tInstalling IdM with integrated DNS has certain limitations:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tIdM DNS is not meant to be used as a general-purpose DNS server. Some of the advanced DNS functions are not supported. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index#dns-services-available-in-an-ipa-server_planning-dns\">DNS services available in an IdM server\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tThis chapter describes how you can install a new IdM server without a certificate authority (CA).\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"certificates-required-to-install-ipa-server-no-ca_install-server-no-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.1. Certificates required to install an IdM server without a CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou need to provide the certificates required to install an Identity Management (IdM) server without a certificate authority (CA). By using the command-line options described, you can provide these certificates to the \u003Ccode class=\"literal\">ipa-server-install\u003C/code> utility.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot install a server or replica using self-signed third-party server certificates because the imported certificate files must contain the full CA certificate chain of the CA that issued the LDAP and Apache server certificates.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The LDAP server certificate and private key\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code> for the certificate and private key files for the LDAP server certificate\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--dirsrv-pin\u003C/code> for the password to access the private key in the files specified in \u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The Apache server certificate and private key\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--http-cert-file\u003C/code> for the certificate and private key files for the Apache server certificate\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--http-pin\u003C/code> for the password to access the private key in the files specified in \u003Ccode class=\"literal option\">--http-cert-file\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The full CA certificate chain of the CA that issued the LDAP and Apache server certificates\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code> and \u003Ccode class=\"literal option\">--http-cert-file\u003C/code> for the certificate files with the full CA certificate chain or a part of it\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tYou can provide the files specified in the \u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code> and \u003Ccode class=\"literal option\">--http-cert-file\u003C/code> options in the following formats:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPrivacy-Enhanced Mail (PEM) encoded certificate (RFC 7468). Note that the Identity Management installer accepts concatenated PEM-encoded objects.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDistinguished Encoding Rules (DER)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPKCS #7 certificate chain objects\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPKCS #8 private key objects\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPKCS #12 archives\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can specify the \u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code> and \u003Ccode class=\"literal option\">--http-cert-file\u003C/code> options multiple times to specify multiple files.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The certificate files to complete the full CA certificate chain (not needed in some environments)\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--ca-cert-file\u003C/code> for the file or files containing the CA certificate of the CA that issued the LDAP, Apache Server, and Kerberos KDC certificates. Use this option if the CA certificate is not present in the certificate files provided by the other options.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tThe files provided using \u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code> and \u003Ccode class=\"literal option\">--http-cert-file\u003C/code> combined with the file provided using \u003Ccode class=\"literal option\">--ca-cert-file\u003C/code> must contain the full CA certificate chain of the CA that issued the LDAP and Apache server certificates.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The Kerberos key distribution center (KDC) PKINIT certificate and private key\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you have a PKINIT certificate, use the following 2 options:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--pkinit-cert-file\u003C/code> for the Kerberos KDC SSL certificate and private key\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--pkinit-pin\u003C/code> for the password to access the Kerberos KDC private key in the files specified in \u003Ccode class=\"literal option\">--pkinit-cert-file\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you do not have a PKINIT certificate and want to configure the IdM server with a local KDC with a self-signed certificate, use the following option:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--no-pkinit\u003C/code> for disabling pkinit setup steps\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor details on what the certificate file formats these options accept, see the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code>(1) man page.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor details on PKINIT extensions required to create a RHEL IdM PKINIT certificate, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/6280501\">RHEL IdM PKINIT KDC certificate and extensions\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-ipa-server-with-dns-interactive-install_install-server-no-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.2. Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring the interactive installation using the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility and provide all the required certificates. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--http-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.crt\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--http-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.key\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--http-pin \u003Cspan class=\"emphasis\">\u003Cem>secret\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--dirsrv-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.crt\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--dirsrv-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.key\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--dirsrv-pin \u003Cspan class=\"emphasis\">\u003Cem>secret\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--ca-cert-file \u003Cspan class=\"emphasis\">\u003Cem>ca.crt\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSee \u003Ca class=\"link\" href=\"#certificates-required-to-install-ipa-server-no-ca_install-server-no-ca\" title=\"4.1. Certificates required to install an IdM server without a CA\">Certificates required to install an IdM server without a CA\u003C/a> for details on the provided certificates.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to configure an integrated DNS service. Enter \u003Ccode class=\"literal\">yes\u003C/code> or \u003Ccode class=\"literal\">no\u003C/code>. In this procedure, we are installing a server with integrated DNS.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure integrated DNS (BIND)? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf you want to install a server without integrated DNS, the installation script will not prompt you for DNS configuration as described in the steps below. See \u003Ca class=\"link\" href=\"#installing-an-ipa-server-without-integrated-dns_installing-identity-management\" title=\"Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA\">Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA\u003C/a> for details on the steps for installing a server without DNS.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for several required settings and offers recommended default values in brackets.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo accept a default value, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo provide a custom value, enter the required value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Server host name [server.idm.example.com]:\nPlease confirm the domain name [idm.example.com]:\nPlease provide a realm name [IDM.EXAMPLE.COM]:\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tPlan these names carefully. You will not be able to change them after the installation is complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the passwords for the Directory Server superuser (\u003Ccode class=\"literal\">cn=Directory Manager\u003C/code>) and for the Identity Management (IdM) administration system user account (\u003Ccode class=\"literal\">admin\u003C/code>).\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Directory Manager password:\nIPA admin password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for per-server DNS forwarders.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure DNS forwarders? [yes]:\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo configure per-server DNS forwarders, enter \u003Ccode class=\"literal\">yes\u003C/code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFor the forwarding policy default settings, see the \u003Ccode class=\"literal option\">--forward-policy\u003C/code> description in the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-dns-install\u003C/strong>\u003C/span>(1) man page.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you do not want to use DNS forwarding, enter \u003Ccode class=\"literal\">no\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWith no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to search for missing reverse zones? [yes]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to create reverse zone for IP 192.0.2.1 [yes]:\nPlease specify the reverse zone name [2.0.192.in-addr.arpa.]:\nUsing reverse zone(s) 2.0.192.in-addr.arpa.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tUsing IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">yes\u003C/code> to confirm the server configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Continue to configure the system with these values? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe installation script now configures the server. Wait for the operation to complete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the installation script completes, update your DNS records in the following way:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tRepeat this step each time after an IdM DNS server is installed.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAdd an \u003Ccode class=\"literal\">_ntp._udp\u003C/code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-ipa-server-without-integrated-dns_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis chapter describes how you can install a new Identity Management (IdM) server without integrated DNS.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRed Hat strongly recommends installing IdM-integrated DNS for basic usage within the IdM deployment: When the IdM server also manages DNS, there is tight integration between DNS and native IdM tools which enables automating some of the DNS record management.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-your-dns-services-and-host-names-planning-identity-management\">Planning your DNS services and host names\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"installing-an-ipa-server-without-integrated-dns-interactive-installation_installing-an-ipa-server-without-integrated-dns\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.1. Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring the interactive installation using the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure installs a server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith integrated Identity Management (IdM) certificate authority (CA) as the root CA, which is the default CA configuration\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">ipa-server-install\u003C/code> utility.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># ipa-server-install\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to configure an integrated DNS service. Press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to select the default \u003Ccode class=\"literal\">no\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure integrated DNS (BIND)? [no]:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for several required settings and offers recommended default values in brackets.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo accept a default value, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo provide a custom value, enter the required value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Server host name [server.idm.example.com]:\nPlease confirm the domain name [idm.example.com]:\nPlease provide a realm name [IDM.EXAMPLE.COM]:\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tPlan these names carefully. You will not be able to change them after the installation is complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the passwords for the Directory Server superuser (\u003Ccode class=\"literal\">cn=Directory Manager\u003C/code>) and for the IdM administration system user account (\u003Ccode class=\"literal\">admin\u003C/code>).\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Directory Manager password:\nIPA admin password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for several required settings and offers recommended default values in brackets.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo accept a default value, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo provide a custom value, enter the required value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">NetBIOS domain name [EXAMPLE]:\nDo you want to configure chrony with NTP server or pool address? [no]:\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">yes\u003C/code> to confirm the server configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Continue to configure the system with these values? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe installation script now configures the server. Wait for the operation to complete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script produces a file with DNS resource records: \u003Ccode class=\"literal\">the /tmp/ipa.system.records.UFRPto.db\u003C/code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\nRestarting the KDC\n\u003Cspan class=\"strong strong\">\u003Cstrong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Restarting the web server\u003C/strong>\u003C/span>\n...\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe server installation is not complete until you add the DNS records to the existing DNS servers.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor more information about the DNS resource records you must add to your DNS system, see \u003Ca class=\"link\" href=\"#ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns\" title=\"5.3. IdM DNS records for external DNS systems\">IdM DNS records for external DNS systems\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-ipa-server-without-integrated-dns-non-interactive-installation_installing-an-ipa-server-without-integrated-dns\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.2. Non-interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThis procedure installs a server without integrated DNS or with integrated Identity Management (IdM) certificate authority (CA) as the root CA, which is the default CA configuration.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility with the options to supply all the required information. The minimum required options for non-interactive installation are:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--realm\u003C/code> to provide the Kerberos realm name\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ds-password\u003C/code> to provide the password for the Directory Manager (DM), the Directory Server super user\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--admin-password\u003C/code> to provide the password for \u003Ccode class=\"literal\">admin\u003C/code>, the IdM administrator\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--unattended\u003C/code> to let the installation process select default options for the host name and domain name\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --realm \u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span> --ds-password \u003Cspan class=\"emphasis\">\u003Cem>DM_password\u003C/em>\u003C/span> --admin-password \u003Cspan class=\"emphasis\">\u003Cem>admin_password\u003C/em>\u003C/span> --unattended\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script produces a file with DNS resource records: \u003Ccode class=\"literal\">the /tmp/ipa.system.records.UFRPto.db\u003C/code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\nRestarting the KDC\n\u003Cspan class=\"strong strong\">\u003Cstrong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Restarting the web server\u003C/strong>\u003C/span>\n...\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe server installation is not complete until you add the DNS records to the existing DNS servers.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor more information about the DNS resource records you must add to your DNS system, see \u003Ca class=\"link\" href=\"#ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns\" title=\"5.3. IdM DNS records for external DNS systems\">IdM DNS records for external DNS systems\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a complete list of options accepted by \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>, run the \u003Ccode class=\"literal\">ipa-server-install --help\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.3. IdM DNS records for external DNS systems\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter installing an IdM server without integrated DNS, you must add LDAP and Kerberos DNS resource records for the IdM server to your external DNS system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script generates a file containing the list of DNS resource records with a file name in the format \u003Ccode class=\"literal\">/tmp/ipa.system.records.\u003Cspan class=\"emphasis\">\u003Cem>&lt;random_characters&gt;\u003C/em>\u003C/span>.db\u003C/code> and prints instructions to add those records:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Please add records in this file to your DNS system: \u003Cspan class=\"strong strong\">\u003Cstrong>/tmp/ipa.system.records.6zdjqxh3.db\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tThis is an example of the contents of the file:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">_kerberos-master._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos-master._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos.example.com. 86400 IN TXT \"EXAMPLE.COM\"\n_kpasswd._tcp.example.com. 86400 IN SRV 0 100 464 server.example.com.\n_kpasswd._udp.example.com. 86400 IN SRV 0 100 464 server.example.com.\n_ldap._tcp.example.com. 86400 IN SRV 0 100 389 server.example.com.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAfter adding the LDAP and Kerberos DNS resource records for the IdM server to your DNS system, ensure that the DNS management tools have not added PTR records for \u003Ccode class=\"literal\">ipa-ca\u003C/code>. The presence of PTR records for \u003Ccode class=\"literal\">ipa-ca\u003C/code> in your DNS could cause subsequent IdM replica installations to fail.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 6. Installing an IdM server: Without integrated DNS, with an external CA as the root CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis chapter describes how you can install a new Identity Management (IdM) server, without integrated DNS, that uses an external certificate authority (CA) as the root CA.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRed Hat strongly recommends installing IdM-integrated DNS for basic usage within the IdM deployment: When the IdM server also manages DNS, there is tight integration between DNS and native IdM tools which enables automating some of the DNS record management.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-your-dns-services-and-host-names-planning-identity-management\">Planning your DNS services and host names\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.1. Options used when installing an IdM CA with an external CA as the root CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou may want to install an Identity Management IdM certificate authority (CA) with an external CA as the root CA if one of the following conditions applies:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are installing a new IdM server or replica by using the \u003Ccode class=\"literal\">ipa-server-install\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are installing the CA component into an existing IdM server by using the \u003Ccode class=\"literal\">ipa-ca-install\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can use following options for both commands that you can use for creating a certificate signing request (CSR) during the installation of an IdM CA with an external CA as the root CA.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">--external-ca-type=\u003Cspan class=\"emphasis\">\u003Cem>TYPE\u003C/em>\u003C/span>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tType of the external CA. Possible values are \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>generic\u003C/em>\u003C/span>\u003C/code> and \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>ms-cs\u003C/em>\u003C/span>\u003C/code>. The default value is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>generic\u003C/em>\u003C/span>\u003C/code>. Use \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>ms-cs\u003C/em>\u003C/span>\u003C/code> to include a template name required by Microsoft Certificate Services (MS CS) in the generated CSR. To use a non-default profile, use the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option in conjunction with \u003Ccode class=\"literal\">--external-ca-type=ms-cs\u003C/code>.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">--external-ca-profile=\u003Cspan class=\"emphasis\">\u003Cem>PROFILE_SPEC\u003C/em>\u003C/span>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSpecify the certificate profile or template that you want the MS CS to apply when issuing the certificate for your IdM CA.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option can only be used if \u003Ccode class=\"literal\">--external-ca-type\u003C/code> is ms-cs.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can identify the MS CS template in one of the following ways:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;oid&gt;:&lt;majorVersion&gt;[:&lt;minorVersion&gt;]\u003C/em>\u003C/span>\u003C/code>. You can specify a certificate template by its object identifier (OID) and major version. You can optionally also specify the minor version.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span>\u003C/code>. You can specify a certificate template by its name. The name cannot contain any \u003Cspan class=\"strong strong\">\u003Cstrong>:\u003C/strong>\u003C/span> characters and cannot be an OID, otherwise the OID-based template specifier syntax takes precedence.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>default\u003C/em>\u003C/span>\u003C/code>. If you use this specifier, the template name \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>SubCA\u003C/em>\u003C/span>\u003C/code> is used.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tIn certain scenarios, the Active Directory (AD) administrator can use the \u003Ccode class=\"literal\">Subordinate Certification Authority\u003C/code> (SCA) template, which is a built-in template in AD CS, to create a unique template to better suit the needs of the organization. The new template can, for example, have a customized validity period and customized extensions. The associated Object Identifier (OID) can be found in the AD \u003Ccode class=\"literal\">Certificates Template\u003C/code> console.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf the AD administrator has disabled the original, built-in template, you must specify the OID or name of the new template when requesting a certificate for your IdM CA. Ask your AD administrator to provide you with the name or OID of the new template.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf the original SCA AD CS template is still enabled, you can use it by specifying \u003Ccode class=\"literal\">--external-ca-type=ms-cs\u003C/code> without additionally using the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option. In this case, the \u003Ccode class=\"literal\">subCA\u003C/code> external CA profile is used, which is the default IdM template corresponding to the SCA AD CS template.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-an-ipa-server-without-dns-with-external-ca-interactive-installation_assembly_installing-an-ipa-server-without-dns-with-external-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.2. Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring the interactive installation using the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility, you are asked to supply basic configuration of the system, for example the realm, the administrator’s password and the Directory Manager’s password.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFollow this procedure to install a server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith an external certificate authority (CA) as the root CA\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have determined the type of the external CA to specify with the \u003Ccode class=\"literal option\">--external-ca-type\u003C/code> option. See the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code>(1) man page for details.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are using a Microsoft Certificate Services certificate authority (MS CS CA) as your external CA: you have determined the certificate profile or template to specify with the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option. By default, the \u003Ccode class=\"literal\">SubCA\u003C/code> template is used.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more information about the \u003Ccode class=\"literal option\">--external-ca-type\u003C/code> and \u003Ccode class=\"literal option\">--external-ca-profile\u003C/code> options, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca\">Options used when installing an IdM CA with an external CA as the root CA\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span> utility with the \u003Ccode class=\"literal\">--external-ca\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you are using the Microsoft Certificate Services (MS CS) CA, also use the \u003Ccode class=\"literal\">--external-ca-type\u003C/code> option and, optionally, the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --external-ca --external-ca-type=ms-cs --external-ca-profile=\u003Cspan class=\"emphasis\">\u003Cem>&lt;oid&gt;/&lt;name&gt;/default\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you are not using MS CS to generate the signing certificate for your IdM CA, no other option may be necessary:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --external-ca\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts to configure an integrated DNS service. Press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to select the default \u003Ccode class=\"literal\">no\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Do you want to configure integrated DNS (BIND)? [no]:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for several required settings and offers recommended default values in brackets.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo accept a default value, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo provide a custom value, enter the required value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Server host name [\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span>\u003C/code>]:\nPlease confirm the domain name [\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>]:\nPlease provide a realm name [\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span>\u003C/code>]:\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tPlan these names carefully. You will not be able to change them after the installation is complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the passwords for the Directory Server superuser (\u003Ccode class=\"literal\">cn=Directory Manager\u003C/code>) and for the IdM administration system user account (\u003Ccode class=\"literal\">admin\u003C/code>).\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Directory Manager password:\nIPA admin password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">yes\u003C/code> to confirm the server configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Continue to configure the system with these values? [no]: \u003Ccode class=\"literal\">yes\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDuring the configuration of the Certificate System instance, the utility prints the location of the certificate signing request (CSR): \u003Ccode class=\"literal\">/root/ipa.csr\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\n\nConfiguring certificate server (pki-tomcatd): Estimated time 3 minutes 30 seconds\n  [1/8]: creating certificate server user\n  [2/8]: configuring certificate server instance\nThe next step is to get /root/ipa.csr signed by your CA and re-run /sbin/ipa-server-install as:\n/sbin/ipa-server-install --external-cert-file=/path/to/signed_certificate --external-cert-file=/path/to/external_ca_certificate\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen this happens:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSubmit the CSR located in \u003Ccode class=\"literal\">/root/ipa.csr\u003C/code> to the external CA. The process differs depending on the service to be used as the external CA.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRetrieve the issued certificate and the CA certificate chain for the issuing CA in a base 64-encoded blob (either a PEM file or a Base_64 certificate from a Windows CA). Again, the process differs for every certificate service. Usually, a download link on a web page or in the notification email allows the administrator to download all the required certificates.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tBe sure to get the full certificate chain for the CA, not just the CA certificate.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">ipa-server-install\u003C/code> again, this time specifying the locations and names of the newly-issued CA certificate and the CA chain files. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa-server-install --external-cert-file=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/servercert20170601.pem\u003C/em>\u003C/span> --external-cert-file=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/cacert.pem\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe installation script now configures the server. Wait for the operation to complete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script produces a file with DNS resource records: \u003Ccode class=\"literal\">the /tmp/ipa.system.records.UFRPto.db\u003C/code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\nRestarting the KDC\n\u003Cspan class=\"strong strong\">\u003Cstrong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Restarting the web server\u003C/strong>\u003C/span>\n...\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe server installation is not complete until you add the DNS records to the existing DNS servers.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor more information about the DNS resource records you must add to your DNS system, see \u003Ca class=\"link\" href=\"#ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca\" title=\"6.4. IdM DNS records for external DNS systems\">IdM DNS records for external DNS systems\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">ipa-server-install --external-ca\u003C/code> command can sometimes fail with the following error:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa         : CRITICAL failed to configure ca instance Command '/usr/sbin/pkispawn -s CA -f /tmp/pass:quotes[\u003Cspan class=\"emphasis\">\u003Cem>configuration_file\u003C/em>\u003C/span>]' returned non-zero exit status 1\nConfiguration of CA failed\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis failure occurs when the \u003Ccode class=\"literal\">*_proxy\u003C/code> environmental variables are set. For a solution of the problem, see \u003Ca class=\"link\" href=\"#troubleshooting-external-ca-installation-fails\" title=\"3.2. Troubleshooting: External CA installation fails\">Troubleshooting: External CA installation fails\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-an-ipa-server-non-interactive-installation-without-dns-with-external-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.3. Non-interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThis procedure installs a server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith an external certificate authority (CA) as the root CA\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script creates a log file at \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>. If the installation fails, the log can help you identify the problem.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have determined the type of the external CA to specify with the \u003Ccode class=\"literal option\">--external-ca-type\u003C/code> option. See the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code>(1) man page for details.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are using a Microsoft Certificate Services certificate authority (MS CS CA) as your external CA: you have determined the certificate profile or template to specify with the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option. By default, the \u003Ccode class=\"literal\">SubCA\u003C/code> template is used.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more information about the \u003Ccode class=\"literal option\">--external-ca-type\u003C/code> and \u003Ccode class=\"literal option\">--external-ca-profile\u003C/code> options, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca\">Options used when installing an IdM CA with an external CA as the root CA\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\u003C/code> utility with the options to supply all the required information. The minimum required options for non-interactive installation of an IdM server with an external CA as the root CA are:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--external-ca\u003C/code> to specify an external CA is the root CA\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--realm\u003C/code> to provide the Kerberos realm name\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--ds-password\u003C/code> to provide the password for the Directory Manager (DM), the Directory Server super user\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--admin-password\u003C/code> to provide the password for \u003Ccode class=\"literal\">admin\u003C/code>, the IdM administrator\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--unattended\u003C/code> to let the installation process select default options for the host name and domain name\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --external-ca --realm \u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span> --ds-password \u003Cspan class=\"emphasis\">\u003Cem>DM_password\u003C/em>\u003C/span> --admin-password \u003Cspan class=\"emphasis\">\u003Cem>admin_password\u003C/em>\u003C/span> --unattended\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are using a Microsoft Certificate Services (MS CS) CA, also use the \u003Ccode class=\"literal\">--external-ca-type\u003C/code> option and, optionally, the \u003Ccode class=\"literal\">--external-ca-profile\u003C/code> option. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca\">Options used when installing an IdM CA with an external CA as the root CA\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDuring the configuration of the Certificate System instance, the utility prints the location of the certificate signing request (CSR): \u003Ccode class=\"literal\">/root/ipa.csr\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\n\nConfiguring certificate server (pki-tomcatd). Estimated time: 3 minutes\n  [1/11]: configuring certificate server instance\nThe next step is to get /root/ipa.csr signed by your CA and re-run /usr/sbin/ipa-server-install as:\n/usr/sbin/ipa-server-install --external-cert-file=/path/to/signed_certificate --external-cert-file=/path/to/external_ca_certificate\nThe ipa-server-install command was successful\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen this happens:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSubmit the CSR located in \u003Ccode class=\"literal\">/root/ipa.csr\u003C/code> to the external CA. The process differs depending on the service to be used as the external CA.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRetrieve the issued certificate and the CA certificate chain for the issuing CA in a base 64-encoded blob (either a PEM file or a Base_64 certificate from a Windows CA). Again, the process differs for every certificate service. Usually, a download link on a web page or in the notification email allows the administrator to download all the required certificates.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tBe sure to get the full certificate chain for the CA, not just the CA certificate.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">ipa-server-install\u003C/code> again, this time specifying the locations and names of the newly-issued CA certificate and the CA chain files. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa-server-install --external-cert-file=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/servercert20170601.pem\u003C/em>\u003C/span> --external-cert-file=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/cacert.pem\u003C/em>\u003C/span> --realm \u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span> --ds-password \u003Cspan class=\"emphasis\">\u003Cem>DM_password\u003C/em>\u003C/span> --admin-password \u003Cspan class=\"emphasis\">\u003Cem>admin_password\u003C/em>\u003C/span> --unattended\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe installation script now configures the server. Wait for the operation to complete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script produces a file with DNS resource records: the \u003Ccode class=\"literal\">/tmp/ipa.system.records.UFRPto.db\u003C/code> file in the example output below. Add these records to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\nRestarting the KDC\n\u003Cspan class=\"strong strong\">\u003Cstrong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Restarting the web server\u003C/strong>\u003C/span>\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe server installation is not complete until you add the DNS records to the existing DNS servers.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor more information about the DNS resource records you must add to your DNS system, see \u003Ca class=\"link\" href=\"#ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca\" title=\"6.4. IdM DNS records for external DNS systems\">IdM DNS records for external DNS systems\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.4. IdM DNS records for external DNS systems\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter installing an IdM server without integrated DNS, you must add LDAP and Kerberos DNS resource records for the IdM server to your external DNS system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-server-install\u003C/code> installation script generates a file containing the list of DNS resource records with a file name in the format \u003Ccode class=\"literal\">/tmp/ipa.system.records.\u003Cspan class=\"emphasis\">\u003Cem>&lt;random_characters&gt;\u003C/em>\u003C/span>.db\u003C/code> and prints instructions to add those records:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Please add records in this file to your DNS system: \u003Cspan class=\"strong strong\">\u003Cstrong>/tmp/ipa.system.records.6zdjqxh3.db\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tThis is an example of the contents of the file:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">_kerberos-master._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos-master._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos._tcp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos._udp.example.com. 86400 IN SRV 0 100 88 server.example.com.\n_kerberos.example.com. 86400 IN TXT \"EXAMPLE.COM\"\n_kpasswd._tcp.example.com. 86400 IN SRV 0 100 464 server.example.com.\n_kpasswd._udp.example.com. 86400 IN SRV 0 100 464 server.example.com.\n_ldap._tcp.example.com. 86400 IN SRV 0 100 389 server.example.com.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAfter adding the LDAP and Kerberos DNS resource records for the IdM server to your DNS system, ensure that the DNS management tools have not added PTR records for \u003Ccode class=\"literal\">ipa-ca\u003C/code>. The presence of PTR records for \u003Ccode class=\"literal\">ipa-ca\u003C/code> in your DNS could cause subsequent IdM replica installations to fail.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 7. Installing an IdM server or replica with custom database settings from an LDIF file\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can install an IdM server and IdM replicas with custom settings for the Directory Server database. The following procedure shows you how to create an LDAP Data Interchange Format (LDIF) file with database settings, and how to pass those settings to the IdM server and replica installation commands.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have determined custom Directory Server settings that improve the performance of your IdM environment. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/tuning_performance_in_identity_management/adjusting-idm-directory-server-performance_tuning-performance-in-idm\">Adjusting IdM Directory Server performance\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tCreate a text file in LDIF format with your custom database settings. Separate LDAP attribute modifications with a dash (-). This example sets non-default values for the idle timeout and maximum file descriptors.\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">dn: cn=config\nchangetype: modify\nreplace: nsslapd-idletimeout\n\u003Cspan class=\"strong strong\">\u003Cstrong>nsslapd-idletimeout=1800\u003C/strong>\u003C/span>\n-\nreplace: nsslapd-maxdescriptors\n\u003Cspan class=\"strong strong\">\u003Cstrong>nsslapd-maxdescriptors=8192\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">--dirsrv-config-file\u003C/code> parameter to pass the LDIF file to the installation script.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo install an IdM server:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa-server-install --dirsrv-config-file \u003Cspan class=\"emphasis\">\u003Cem>filename.ldif\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo install an IdM replica:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa-replica-install --dirsrv-config-file \u003Cspan class=\"emphasis\">\u003Cem>filename.ldif\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management#ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation\">Options for the \u003Ccode class=\"literal\">ipa-server-install\u003C/code> and \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> commands\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"troubleshooting-idm-server-installation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 8. Troubleshooting IdM server installation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe how to gather information about a failing IdM server installation, and how to resolve common installation issues.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"reviewing-idm-server-installation-error-logs_troubleshooting-idm-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.1. Reviewing IdM server installation error logs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen you install an Identity Management (IdM) server, debugging information is appended to the following log files:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/ipaserver-install.log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/httpd/error_log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/access\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/errors\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe last lines of the log files report success or failure, and the \u003Ccode class=\"literal\">ERROR\u003C/code> and \u003Ccode class=\"literal\">DEBUG\u003C/code> entries provide additional context.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo troubleshoot a failing IdM server installation, review the errors at the end of the log files and use this information to resolve any corresponding issues.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges to display the contents of IdM log files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">tail\u003C/code> command to display the last lines of a log file. The following example displays the last 10 lines of \u003Ccode class=\"literal filename\">/var/log/ipaserver-install.log\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo tail -n 10 /var/log/ipaserver-install.log\u003C/strong>\u003C/span>\n[sudo] password for user:\nvalue = gen.send(prev_value)\nFile \"/usr/lib/python3.6/site-packages/ipapython/install/common.py\", line 65, in _install\nfor unused in self._installer(self.parent):\nFile \"/usr/lib/python3.6/site-packages/ipaserver/install/server/\u003Cspan class=\"emphasis\">\u003Cem>init\u003C/em>\u003C/span>.py\", line 564, in main\nmaster_install(self)\nFile \"/usr/lib/python3.6/site-packages/ipaserver/install/server/install.py\", line 291, in decorated\nraise ScriptError()\n\n2020-05-27T22:59:41Z DEBUG The ipa-server-install command failed, exception: ScriptError:\n2020-05-27T22:59:41Z ERROR The ipa-server-install command failed. See /var/log/ipaserver-install.log for more information\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo review a log file interactively, open the end of the log file using the \u003Ccode class=\"literal\">less\u003C/code> utility and use the \u003Ckbd class=\"keycap\">↑\u003C/kbd> and \u003Ckbd class=\"keycap\">↓\u003C/kbd> arrow keys to navigate. The following example opens the \u003Ccode class=\"literal filename\">/var/log/ipaserver-install.log\u003C/code> file interactively.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/ipaserver-install.log\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGather additional troubleshooting information by repeating this review process with the remaining log files.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/httpd/error_log\u003C/strong>\u003C/span>\n\n[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/access\u003C/strong>\u003C/span>\n\n[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/errors\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing IdM server installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"reviewing-idm-ca-installation-errors-idm-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.2. Reviewing IdM CA installation errors\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen you install the Certificate Authority (CA) service on an Identity Management (IdM) server, debugging information is appended to the following locations (in order of recommended priority):\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559994860816\" scope=\"col\">Location\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559995230080\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994860816\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-ca-spawn.\u003Cspan class=\"emphasis\">\u003Cem>$TIME_OF_INSTALLATION\u003C/em>\u003C/span>.log\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995230080\"> \u003Cp>\n\t\t\t\t\t\t\t\tHigh-level issues and Python traces for the \u003Ccode class=\"literal\">pkispawn\u003C/code> installation process\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994860816\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">journalctl -u pki-tomcatd@pki-tomcat\u003C/code> output\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995230080\"> \u003Cp>\n\t\t\t\t\t\t\t\tErrors from the \u003Ccode class=\"literal\">pki-tomcatd@pki-tomcat\u003C/code> service\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994860816\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/debug.\u003Cspan class=\"emphasis\">\u003Cem>$DATE\u003C/em>\u003C/span>.log\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995230080\"> \u003Cp>\n\t\t\t\t\t\t\t\tLarge JAVA stacktraces of activity in the core of the Public Key Infrastructure (PKI) product\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994860816\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/signedAudit/ca_audit\u003C/code> log file\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995230080\"> \u003Cp>\n\t\t\t\t\t\t\t\tAudit log of the PKI product\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559994860816\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/system\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/transactions\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/catalina.\u003Cspan class=\"emphasis\">\u003Cem>$DATE\u003C/em>\u003C/span>.log\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559995230080\"> \u003Cp>\n\t\t\t\t\t\t\t\tLow-level debug data of certificate operations for service principals, hosts, and other entities that use certificates\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf a full IdM server installation fails while installing the optional CA component, no details about the CA are logged; a message is logged in the \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code> file indicating that the overall installation process failed. Red Hat recommends reviewing the log files listed above for details specific to the CA installation failure.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe only exception to this behavior is when you are installing the CA service and the root CA is an external CA. If there is an issue with the certificate from the external CA, errors are logged in \u003Ccode class=\"literal\">/var/log/ipaserver-install.log\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tTo troubleshoot a failing IdM CA installation, review the errors at the end of these log files and use this information to resolve any corresponding issues.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges to display the contents of IdM log files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo review a log file interactively, open the end of the log file using the \u003Ccode class=\"literal\">less\u003C/code> utility and use the \u003Ckbd class=\"keycap\">↑\u003C/kbd> and \u003Ckbd class=\"keycap\">↓\u003C/kbd> arrow keys to navigate, while searching for \u003Ccode class=\"literal\">ScriptError\u003C/code> entries. The following example opens \u003Ccode class=\"literal filename\">/var/log/pki/pki-ca-spawn.\u003Cspan class=\"emphasis\">\u003Cem>$TIME_OF_INSTALLATION\u003C/em>\u003C/span>.log\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/pki/pki-ca-spawn.\u003Cspan class=\"emphasis\">\u003Cem>20200527185902\u003C/em>\u003C/span>.log\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGather additional troubleshooting information by repeating this review process with all the log files listed above.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing IdM server installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-a-partial-idm-server-installation_troubleshooting-idm-server-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.3. Removing a partial IdM server installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf an IdM server installation fails, some configuration files can be left behind. Additional attempts to install the IdM server fail and the installation script reports that IPA is already configured.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example system with existing partial IdM configuration\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install\u003C/strong>\u003C/span>\n\nThe log file for this installation can be found in /var/log/ipaserver-install.log\n\u003Cspan class=\"strong strong\">\u003Cstrong>IPA server is already configured on this system.\u003C/strong>\u003C/span>\nIf you want to reinstall the IPA server, \u003Cspan class=\"strong strong\">\u003Cstrong>please uninstall it first using 'ipa-server-install --uninstall'\u003C/strong>\u003C/span>.\nThe ipa-server-install command failed. See /var/log/ipaserver-install.log for more information\u003C/pre>\n\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTo resolve this issue, uninstall the partial IdM server configuration and retry the installation process.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUninstall the IdM server software from the host you are trying to configure as an IdM server.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --uninstall\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you continue to experience difficulty installing an IdM server because of repeated failed installations, reinstall the operating system.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOne of the requirements for installing an IdM server is a clean system without any customization. Failed installations may have compromised the integrity of the host by unexpectedly modifying system files.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor additional details on uninstalling an IdM server, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_identity_management/uninstalling-an-ipa-server_installing-identity-management\">Uninstalling an IdM server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf installation attempts fail after repeated uninstallation attempts, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_2\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.4. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#troubleshooting-idm-replica-installation_installing-identity-management\" title=\"Chapter 21. Troubleshooting IdM replica installation\">Troubleshooting IdM replica installation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#troubleshooting-idm-client-installation_installing-identity-management\" title=\"Chapter 15. Troubleshooting IdM client installation\">Troubleshooting IdM client installation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#backing-up-and-restoring-idm_planning-identity-management\">Backing up and restoring IdM\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"uninstalling-an-ipa-server_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 9. Uninstalling an IdM server\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tFollow this procedure to uninstall an Identity Management (IdM) server named \u003Cspan class=\"strong strong\">\u003Cstrong>server123.idm.example.com\u003C/strong>\u003C/span> (server123). In the procedure, you first ensure that other servers are running critical services and that the topology will continue to be redundant before performing the uninstallation.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> access to server123.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have an IdM administrator’s credentials.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tIf your IdM environment uses integrated DNS, ensure that server123 is not the only \u003Ccode class=\"literal\">enabled\u003C/code> DNS server:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server123 ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-role-find --role 'DNS server'\u003C/strong>\u003C/span>\n----------------------\n2 server roles matched\n----------------------\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Server name: server456.idm.example.com\u003C/strong>\u003C/span>\n  Role name: DNS server\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Role status: enabled\u003C/strong>\u003C/span>\n[...]\n----------------------------\nNumber of entries returned 2\n----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tIf server123 is the only remaining DNS server in the topology, add the DNS server role to another IdM server. For more information, see the \u003Ccode class=\"literal\">ipa-dns-install(1)\u003C/code> man page on your system.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tIf your IdM environment uses an integrated certificate authority (CA):\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure that server123 is not the only \u003Ccode class=\"literal\">enabled\u003C/code> CA server:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server123 ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-role-find --role 'CA server'\u003C/strong>\u003C/span>\n----------------------\n2 server roles matched\n----------------------\n  Server name: server123.idm.example.com\n  Role name: CA server\n  Role status: enabled\n\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Server name: r8server.idm.example.com\u003C/strong>\u003C/span>\n  Role name: CA server\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Role status: enabled\u003C/strong>\u003C/span>\n----------------------------\nNumber of entries returned 2\n----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf server123 is the only remaining CA server in the topology, add the CA server role to another IdM server. For more information, see the \u003Ccode class=\"literal\">ipa-ca-install(1)\u003C/code> man page on your system.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you have enabled vaults in your IdM environment, ensure that server123.idm.example.com is not the only \u003Ccode class=\"literal\">enabled\u003C/code> Key Recovery Authority (KRA) server:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server123 ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-role-find --role 'KRA server'\u003C/strong>\u003C/span>\n----------------------\n2 server roles matched\n----------------------\n  Server name: server123.idm.example.com\n  Role name: KRA server\n  Role status: enabled\n\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Server name: r8server.idm.example.com\u003C/strong>\u003C/span>\n  Role name: KRA server\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Role status: enabled\u003C/strong>\u003C/span>\n----------------------------\nNumber of entries returned 2\n----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf server123 is the only remaining KRA server in the topology, add the KRA server role to another IdM server. For more information, see \u003Ccode class=\"literal\">man ipa-kra-install(1)\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure that server123.idm.example.com is not the CA renewal server:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server123 ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa config-show | grep 'CA renewal'\u003C/strong>\u003C/span>\n  \u003Cspan class=\"strong strong\">\u003Cstrong>IPA CA renewal master: r8server.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf server123 is the CA renewal server, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#changing-ca-renewal_ipa-ca-renewal\">Changing and resetting IdM CA renewal server\u003C/a> for more information about how to move the CA renewal server role to another server.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure that server123.idm.example.com is not the current certificate revocation list (CRL) publisher:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server123 ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-crlgen-manage status\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>CRL generation: disabled\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the output shows that CRL generation is enabled on server123, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/generating-crl-on-the-idm-ca-server_managing-certificates-in-idm\">Generating CRL on an IdM CA server\u003C/a> for more information about how to move the CRL publisher role to another server.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tConnect to another IdM server in the topology:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ssh idm_user@server456\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tOn the server, obtain the IdM administrator’s credentials:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[idm_user@server456 ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tView the DNA ID ranges assigned to the servers in the topology:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[idm_user@server456 ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-replica-manage dnarange-show\u003C/strong>\u003C/span>\nserver123.idm.example.com: 1001-1500\nserver456.idm.example.com: 1501-2000\n[...]\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe output shows that a DNA ID range is assigned to both server123 and server456.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tIf server123 is the only IdM server in the topology with a DNA ID range assigned, create a test IdM user on server456 to ensure that the server has a DNA ID range assigned:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[idm_user@server456 ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa user-add test_idm_user\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tDelete server123.idm.example.com from the topology:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[idm_user@server456 ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-del server123.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIf deleting server123 would lead to a disconnected topology, the script warns you about it. For information about how to create a replication agreement between the remaining replicas so that the deletion can proceed, see \u003Ca class=\"link\" href=\"#proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology\" title=\"23.5. Setting up replication between two servers using the CLI\">Setting up replication between two servers using the CLI\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tRunning the \u003Ccode class=\"literal\">ipa server-del\u003C/code> command removes all replication data and agreements related to server123 for both the \u003Ccode class=\"literal\">domain\u003C/code> and \u003Ccode class=\"literal\">ca\u003C/code> suffixes. This is in contrast to Domain Level 0 IdM topologies, where you initially had to remove these data by using the \u003Ccode class=\"literal\">ipa-replica-manage del \u003Cspan class=\"emphasis\">\u003Cem>server123\u003C/em>\u003C/span>\u003C/code> command. Domain Level 0 IdM topologies are those running on RHEL 7.2 and earlier. Use the \u003Ccode class=\"literal\">ipa domainlevel-get\u003C/code> command to view the current domain level.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tReturn to server123.idm.example.com and uninstall the existing IdM installation:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server123 ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --uninstall\u003C/strong>\u003C/span>\n...\nAre you sure you want to continue with the uninstall procedure? [no]: true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnsure that all name server (NS) DNS records pointing to server123.idm.example.com are deleted from your DNS zones. This applies regardless of whether you use integrated DNS managed by IdM or external DNS. For more information about how to delete DNS records from IdM, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/working_with_dns_in_identity_management/managing-dns-records-in-idm_working-with-dns-in-identity-management#deleting-dns-records-in-the-idm-cli_managing-dns-records-in-idm\">Deleting DNS records in the IdM CLI\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/linux_domain_identity_authentication_and_policy_guide/domain-level\">Displaying and raising the domain level\u003C/a> in RHEL 7 documentation\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/planning-the-replica-topology_planning-identity-management\">Planning the replica topology\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#ca-renewal-server_ipa-ca-renewal\">Explanation of IdM CA renewal server\u003C/a>\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/generating-crl-on-the-idm-ca-server_managing-certificates-in-idm\">Generating CRL on an IdM CA server\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"renaming-an-idm-server_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 10. Renaming an IdM server\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou cannot change the host name of an existing Identity Management (IdM) server. However, you can replace the server with a replica of a different name.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tInstall a new replica that will replace the existing server, ensuring the replica has the required host name and IP address. For details, see \u003Ca class=\"link\" href=\"#installing-an-ipa-replica_installing-identity-management\" title=\"Chapter 20. Installing an IdM replica\">Installing an IdM replica\u003C/a>.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIf the server you are uninstalling is the certificate revocation list (CRL) publisher server, make another server the CRL publisher server before proceeding.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tFor details on how this is done in the context of a migration procedure, see the following sections:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/migrating_to_identity_management_on_rhel_9/assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers_migrating-to-idm-on-rhel-9#stopping-crl-generation-on-rhel8-IdM-CA-server_assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers\">Stopping CRL generation on a RHEL 8 IdM CA server\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/migrating_to_identity_management_on_rhel_9/assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers_migrating-to-idm-on-rhel-9#starting-crl-generation-on-the-new-rhel-9-idm-ca-server_assembly_migrating-your-idm-environment-from-rhel-8-servers-to-rhel-9-servers\">Starting CRL generation on the new RHEL 9 IdM CA server\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tStop the existing IdM server instance.\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@old_server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipactl stop\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUninstall the existing server as described in \u003Ca class=\"link\" href=\"#uninstalling-an-ipa-server_installing-identity-management\" title=\"Chapter 9. Uninstalling an IdM server\">Uninstalling an IdM server\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"update-downgrade-ipa_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 11. Updating and downgrading IdM\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Csection class=\"section\" id=\"updating_idm_packages\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.1. Updating IdM packages\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">dnf\u003C/code> utility to update the Identity Management (IdM) packages on the system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure you have applied all previously released errata relevant to the RHEL system. For more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/11258\">How do I apply package updates to my RHEL system?\u003C/a> KCS article.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo update all IdM packages that are relevant for your profile and that have updates available:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf upgrade ipa-\u003C/strong>\u003C/span>*\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo install or update packages to match the latest version available for your profile from any enabled repository:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf distro-sync ipa-\u003C/strong>\u003C/span>*\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tAfter you update the IdM packages on at least one server, all other servers in the topology receive the updated schema, even if you do not update their packages. This ensures that any new entries which use the new schema can be replicated among the other servers.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen updating multiple IdM servers, wait at least 10 minutes after updating one server before updating another server. However, the actual time required for a server’s successful update depends on the topology deployed, the latency of the connections, and the number of changes generated by the update.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tWhen two or more servers are updated simultaneously or with only short intervals between the upgrades, there is not enough time to replicate the post-upgrade data changes throughout the topology, which can result in conflicting replication events.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tRed Hat recommends upgrading to the next version only. For example, if you want to upgrade to IdM for RHEL 9.4, we recommend upgrading from IdM for RHEL 9.3. Upgrading from earlier versions can cause problems.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"downgrading-idm-packages_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.2. Downgrading IdM packages\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tRed Hat does not support downgrading Identity Management.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_3\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.3. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">dnf(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"preparing-the-system-for-ipa-client-installation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 12. Preparing the system for IdM client installation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tEnsure your system meets the following conditions before you install an Identity Management (IdM) client.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"supported-versions-of-rhel-for-installing-idm-clients_preparing-the-system-for-ipa-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.1. Supported versions of RHEL for installing IdM clients\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tAn Identity Management deployment in which IdM servers are running on the latest minor version of Red Hat Enterprise Linux 9 supports clients that are running on the latest minor versions of:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRHEL 7\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRHEL 8\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRHEL 9\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">NOTE\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tWhile other client systems, for example Ubuntu, can work with IdM 9 servers, Red Hat does not provide support for these clients.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"dns-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.2. DNS requirements for IdM clients\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tClient installer by default tries to search for \u003Ccode class=\"literal\">_ldap._tcp.DOMAIN\u003C/code> DNS SRV records for all domains that are parent to its hostname. For example, if a client machine has a hostname \u003Ccode class=\"literal\">client1.idm.example.com\u003C/code>, the installer will try to retrieve an IdM server hostname from \u003Ccode class=\"literal\">_ldap._tcp.idm.example.com\u003C/code>, \u003Ccode class=\"literal\">_ldap._tcp.example.com\u003C/code> and \u003Ccode class=\"literal\">_ldap._tcp.com\u003C/code> DNS SRV records, respectively. The discovered domain is then used to configure client components (for example, SSSD and Kerberos 5 configuration) on the machine.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tHowever, the hostnames of IdM clients are not required to be part of the primary DNS domain. If the client machine hostname is not in a subdomain of an IdM server, pass the IdM domain as the \u003Ccode class=\"literal\">--domain\u003C/code> option of the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> command. In that case, after the installation of the client, both SSSD and Kerberos components will have the domain set in their configuration files and will use it to autodiscover IdM servers.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor details on DNS requirements in IdM, see \u003Ca class=\"link\" href=\"#host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation\" title=\"1.5. Host name and DNS requirements for IdM\">Host name and DNS requirements for IdM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"port-requirements-for-ipa-clients_preparing-the-system-for-ipa-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.3. Port requirements for IdM clients\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIdentity Management (IdM) clients connect to a number of ports on IdM servers to communicate with their services.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tOn IdM client, these ports must be open \u003Cspan class=\"emphasis\">\u003Cem>in the outgoing direction\u003C/em>\u003C/span>. If you are using a firewall that does not filter outgoing packets, such as \u003Ccode class=\"literal\">firewalld\u003C/code>, the ports are already available in the outgoing direction.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor information about which specific ports are used, see \u003Ca class=\"link\" href=\"#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation\" title=\"1.6. Port requirements for IdM\">Port requirements for IdM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ipv6-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.4. IPv6 requirements for IdM clients\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIdentity Management (IdM) does not require the \u003Ccode class=\"literal\">IPv6\u003C/code> protocol to be enabled in the kernel of the host that you want to enroll into IdM. For example, if your internal network only uses the \u003Ccode class=\"literal\">IPv4\u003C/code> protocol, you can configure the System Security Services Daemon (SSSD) to only use \u003Ccode class=\"literal\">IPv4\u003C/code> to communicate with the IdM server. You can do this by inserting the following line into the \u003Ccode class=\"literal\">[domain/\u003Cspan class=\"emphasis\">\u003Cem>NAME\u003C/em>\u003C/span>]\u003C/code> section of the \u003Ccode class=\"literal\">/etc/sssd/sssd.conf\u003C/code> file:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal\">lookup_family_order = ipv4_only\u003C/code>\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor more information about the \u003Ccode class=\"literal\">lookup_family_order\u003C/code> option, see the \u003Ccode class=\"literal\">sssd.conf(5)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-packages-required-for-an-idm-client_preparing-the-system-for-ipa-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.5. Installing packages required for an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstalling the \u003Ccode class=\"literal\">ipa-client\u003C/code> package automatically installs other required packages as dependencies, such as the System Security Services Daemon (SSSD) packages.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">ipa-client\u003C/code> package:\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"literallayout\"># dnf install ipa-client\u003C/pre>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_installing-an-idm-client_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 13. Installing an IdM client\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe how to configure a system as an Identity Management (IdM) client by using the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility. Configuring a system as an IdM client enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.\n\t\t\u003C/p>\u003Cp>\n\t\t\tTo install an Identity Management (IdM) client successfully, you must provide credentials that can be used to enroll the client.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"prerequisites_2\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.1. Prerequisites\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have prepared the system for IdM client installation. For details, see \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-client-installation_installing-identity-management\" title=\"Chapter 12. Preparing the system for IdM client installation\">Preparing the system for IdM client installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.2. Installing a client by using user credentials: Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to install an Identity Management (IdM) client interactively by using the credentials of an authorized user to enroll the system into the domain.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure you have the credentials of a user authorized to enroll clients into the IdM domain. This could be, for example, a \u003Ccode class=\"literal\">hostadmin\u003C/code> user with the Enrollment Administrator role.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility on the system that you want to configure as an IdM client.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --mkhomedir\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal option\">--enable-dns-updates\u003C/code> option to update the DNS records with the IP address of the client system if either of the following conditions applies:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IdM server the client will be enrolled with was installed with integrated DNS\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe DNS server on the network accepts DNS entry updates with the GSS-TSIG protocol\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --enable-dns-updates --mkhomedir\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnabling DNS updates is useful if your client:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\thas a dynamic IP address issued using the Dynamic Host Configuration Protocol\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\thas a static IP address but it has just been allocated and the IdM server does not know about it\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script attempts to obtain all the required settings, such as DNS records, automatically.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values and displays them. Enter \u003Ccode class=\"literal\">yes\u003C/code> to confirm.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Client hostname: client.example.com\nRealm: EXAMPLE.COM\nDNS Domain: example.com\nIPA Server: server.example.com\nBaseDN: dc=example,dc=com\n\nContinue to configure the system with these values? [no]: \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo install the system with different values, enter \u003Ccode class=\"literal\">no\u003C/code>. Then run \u003Ccode class=\"literal\">ipa-client-install\u003C/code> again, and specify the required values by adding command-line options to \u003Ccode class=\"literal\">ipa-client-install\u003C/code>, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--hostname\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--realm\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--domain\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--server\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--mkhomedir\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe fully qualified domain name must be a valid DNS name:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tOnly numbers, alphabetic characters, and hyphens (\u003Ccode class=\"literal\">-\u003C/code>) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe host name must be all lower-case. No capital letters are allowed.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the script fails to obtain some settings automatically, it prompts you for the values.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for a user whose identity will be used to enroll the client. This could be, for example, a \u003Ccode class=\"literal\">hostadmin\u003C/code> user with the Enrollment Administrator role:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">User authorized to enroll computers: \u003Ccode class=\"literal\">hostadmin\u003C/code>\nPassword for \u003Ccode class=\"literal\">hostadmin\u003C/code>@\u003Ccode class=\"literal\">EXAMPLE.COM\u003C/code>:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script now configures the client. Wait for the operation to complete.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Client configuration complete.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor details on how the client installation script searches for the DNS records, see the \u003Ccode class=\"literal\">DNS Autodiscovery\u003C/code> section in the \u003Ccode class=\"literal\">ipa-client-install\u003C/code>(1) man page.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-a-client-by-using-a-one-time-password-interactive-installation_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.3. Installing a client by using a one-time password: Interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to install an Identity Management (IdM) client interactively by using a one-time password to enroll the system into the domain.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn a server in the domain, add the future client system as an IdM host. Use the \u003Ccode class=\"literal option\">--random\u003C/code> option with the \u003Ccode class=\"literal command\">ipa host-add\u003C/code> command to generate a one-time random password for the enrollment.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipa host-add &lt;client_fqdn&gt;\u003C/code> command requires that the client FQDN is resolvable through DNS. If it is not resolvable, provide the IdM client system’s IP address using the \u003Ccode class=\"literal\">--ip address\u003C/code> option or alternatively, use the \u003Ccode class=\"literal\">--force\u003C/code> option.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa host-add \u003Cspan class=\"emphasis\">\u003Cem>client.example.com\u003C/em>\u003C/span> --random\u003C/strong>\u003C/span>\n --------------------------------------------------\n Added host \"client.example.com\"\n --------------------------------------------------\n  Host name: client.example.com\n  Random password: \u003Cspan class=\"strong strong\">\u003Cstrong>W5YpARl=7M.n\u003C/strong>\u003C/span>\n  Password: True\n  Keytab: False\n  Managed by: server.example.com\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe generated password will become invalid after you use it to enroll the machine into the IdM domain. It will be replaced with a proper host keytab after the enrollment is finished.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility on the system that you want to configure as an IdM client.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal option\">--password\u003C/code> option to provide the one-time random password. Because the password often contains special characters, enclose it in single quotes (').\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --mkhomedir --password=\u003Cspan class=\"emphasis\">\u003Cem>password\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal option\">--enable-dns-updates\u003C/code> option to update the DNS records with the IP address of the client system if either of the following conditions applies:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IdM server the client will be enrolled with was installed with integrated DNS\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe DNS server on the network accepts DNS entry updates with the GSS-TSIG protocol\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --password 'W5YpARl=7M.n' --enable-dns-updates --mkhomedir\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnabling DNS updates is useful if your client:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\thas a dynamic IP address issued using the Dynamic Host Configuration Protocol\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\thas a static IP address but it has just been allocated and the IdM server does not know about it\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script attempts to obtain all the required settings, such as DNS records, automatically.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values and displays them. Enter \u003Ccode class=\"literal\">yes\u003C/code> to confirm.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Client hostname: client.example.com\nRealm: EXAMPLE.COM\nDNS Domain: example.com\nIPA Server: server.example.com\nBaseDN: dc=example,dc=com\n\nContinue to configure the system with these values? [no]: \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo install the system with different values, enter \u003Ccode class=\"literal\">no\u003C/code>. Then run \u003Ccode class=\"literal\">ipa-client-install\u003C/code> again, and specify the required values by adding command-line options to \u003Ccode class=\"literal\">ipa-client-install\u003C/code>, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--hostname\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--realm\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--domain\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--server\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--mkhomedir\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe fully qualified domain name must be a valid DNS name:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tOnly numbers, alphabetic characters, and hyphens (\u003Ccode class=\"literal\">-\u003C/code>) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe host name must be all lower-case. No capital letters are allowed.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the script fails to obtain some settings automatically, it prompts you for the values.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe installation script now configures the client. Wait for the operation to complete.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Client configuration complete.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor details on how the client installation script searches for the DNS records, see the \u003Ccode class=\"literal\">DNS Autodiscovery\u003C/code> section in the \u003Ccode class=\"literal\">ipa-client-install\u003C/code>(1) man page.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-ipa-client-non-interactive-install_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.4. Installing a client: Non-interactive installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFor a non-interactive installation, you must provide all required information to the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility using command-line options. The following sections describe the minimum required options for a non-interactive installation.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Options for the intended authentication method for client enrollment\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe available options are:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--principal\u003C/code> and \u003Ccode class=\"literal option\">--password\u003C/code> to specify the credentials of a user authorized to enroll clients\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--random\u003C/code> to specify a one-time random password generated for the client\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--keytab\u003C/code> to specify the keytab from a previous enrollment\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The option for unattended installation\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal option\">--unattended\u003C/code> option lets the installation run without requiring user confirmation.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values. If the script cannot discover the values automatically, provide them using command-line options, such as:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--hostname\u003C/code> to specify a static fully qualified domain name (FQDN) for the client machine.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tThe FQDN must be a valid DNS name:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tOnly numbers, alphabetic characters, and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe host name must be all lower-case. No capital letters are allowed.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--domain\u003C/code> to specify the primary DNS domain of an existing IdM deployment, such as \u003Ccode class=\"literal\">example.com\u003C/code>. The name is a lowercase version of the IdM Kerberos realm name.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--server\u003C/code> to specify the FQDN of the IdM server to connect to. When this option is used, DNS autodiscovery for Kerberos is disabled and a fixed list of KDC and Admin servers is configured. Under normal circumstances, this option is not needed as the list of servers is retrieved from the primary IdM DNS domain.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--realm\u003C/code> to specify the Kerberos realm of an existing IdM deployment. Usually it is an uppercase version of the primary DNS domain used by the IdM installation. Under normal circumstances, this option is not needed as the realm name is retrieved from the IdM server.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tAn example of a basic \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install\u003C/strong>\u003C/span> command for non-interactive installation:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --password '\u003Cspan class=\"emphasis\">\u003Cem>W5YpARl=7M.n\u003C/em>\u003C/span>' --mkhomedir --unattended\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\t \u003Cbr/>\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAn example of an \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install\u003C/strong>\u003C/span> command for non-interactive installation with more options specified:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --password '\u003Cspan class=\"emphasis\">\u003Cem>W5YpARl=7M.n\u003C/em>\u003C/span>' --domain \u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span> --server \u003Cspan class=\"emphasis\">\u003Cem>server.idm.example.com\u003C/em>\u003C/span> --realm \u003Cspan class=\"emphasis\">\u003Cem>IDM.EXAMPLE.COM\u003C/em>\u003C/span> --mkhomedir --unattended\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a complete list of options accepted by \u003Ccode class=\"literal command\">ipa-client-install\u003C/code>, see the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install\u003C/strong>\u003C/span>(1) man page.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-pre-ipa-configuration-after-installing-client_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.5. Removing pre-IdM configuration after installing a client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">ipa-client-install\u003C/code> script does not remove any previous LDAP and System Security Services Daemon (SSSD) configuration from the \u003Ccode class=\"literal\">/etc/openldap/ldap.conf\u003C/code> and \u003Ccode class=\"literal\">/etc/sssd/sssd.conf\u003C/code> files. If you modified the configuration in these files before installing the client, the script adds the new client values, but comments them out. For example:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">BASE   dc=example,dc=com\nURI    ldap://ldap.example.com\n\n#URI ldaps://server.example.com # modified by IPA\n#BASE dc=ipa,dc=example,dc=com # modified by IPA\u003C/pre>\u003Cp>\n\t\t\t\tTo apply the new Identity Management (IdM)} configuration values:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOpen \u003Ccode class=\"literal\">/etc/openldap/ldap.conf\u003C/code> and \u003Ccode class=\"literal\">/etc/sssd/sssd.conf\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDelete the previous configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUncomment the new IdM configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tServer processes that rely on system-wide LDAP configuration might require a restart to apply the changes. Applications that use \u003Ccode class=\"literal\">openldap\u003C/code> libraries typically import the configuration when started.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"testing-an-ipa-client_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.6. Testing an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe command-line interface informs you that the \u003Ccode class=\"literal command\">ipa-client-install\u003C/code> was successful, but you can also do your own test.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo test that the Identity Management (IdM) client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default \u003Ccode class=\"literal\">admin\u003C/code> user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>id admin\u003C/strong>\u003C/span>\nuid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)\u003C/pre>\u003Cp>\n\t\t\t\tTo test that authentication works correctly, \u003Ccode class=\"literal command\">su\u003C/code> to a root user from a non-root user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>su -\u003C/strong>\u003C/span>\nLast login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0\n[root@client ~]#\u003C/pre>\u003C/section>\u003Csection class=\"section\" id=\"connection-requests-during-an-ipa-client-installation_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.7. Connections performed during an IdM client installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\u003Ca class=\"link\" href=\"#tab-requests-client-installation_assembly_installing-an-idm-client\" title=\"Table 13.1. Requests performed during an IdM client installation\">Requests performed during an IdM client installation\u003C/a> lists the operations performed by \u003Ccode class=\"literal\">ipa-client-install\u003C/code>, the Identity Management (IdM) client installation tool.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab-requests-client-installation_assembly_installing-an-idm-client\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 13.1. Requests performed during an IdM client installation\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559983433472\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559983432384\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559983431296\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983433472\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS resolution against the DNS resolvers configured on the client system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983432384\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983431296\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo discover the IP addresses of IdM servers; (optionally) to add A/AAAA and SSHFP records\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983433472\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 88 (TCP/TCP6 and UDP/UDP6) on an IdM replica\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983432384\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983431296\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain a Kerberos ticket\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983433472\"> \u003Cp>\n\t\t\t\t\t\t\t\tJSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983432384\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983431296\"> \u003Cp>\n\t\t\t\t\t\t\t\tIdM client enrollment; retrieval of CA certificate chain if LDAP method fails; request for a certificate issuance if required\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983433472\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests over TCP/TCP6 to ports 389 on IdM servers, using SASL GSSAPI authentication, plain LDAP, or both\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983432384\"> \u003Cp>\n\t\t\t\t\t\t\t\tLDAP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983431296\"> \u003Cp>\n\t\t\t\t\t\t\t\tIdM client enrollment; identity retrieval by SSSD processes; Kerberos key retrieval for the host principal\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983433472\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetwork time protocol (NTP) discovery and resolution (optionally)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983432384\"> \u003Cp>\n\t\t\t\t\t\t\t\tNTP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983431296\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo synchronize time between the client system and an NTP server\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003Csection class=\"section\" id=\"ipa-client-communication-with-server_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.8. IdM client’s communications with the server during post-installation deployment\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe client side of Identity Management (IdM) framework is implemented with two different applications:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipa\u003C/code> command-line interface (CLI)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t(\u003Cspan class=\"emphasis\">\u003Cem>optional\u003C/em>\u003C/span>) the browser-based Web UI\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\u003Ca class=\"link\" href=\"#tab-ipa-operations_assembly_installing-an-idm-client\" title=\"Table 13.2. CLI post-installation operations\">CLI post-installation operations\u003C/a> shows the operations performed by the CLI during an IdM client post-installation deployment. \u003Ca class=\"link\" href=\"#tab-browser-operations_assembly_installing-an-idm-client\" title=\"Table 13.3. Web UI post-installation operations\">Web UI post-installation operations\u003C/a> shows the operations performed by the Web UI during an IdM client post-installation deployment.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab-ipa-operations_assembly_installing-an-idm-client\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 13.2. CLI post-installation operations\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992649152\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992648064\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559992646976\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992649152\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS resolution against the DNS resolvers configured on the client system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992648064\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992646976\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo discover the IP addresses of IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992649152\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 88 (TCP/TCP6 and UDP/UDP6) and 464 (TCP/TCP6 and UDP/UDP6) on an IdM replica\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992648064\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992646976\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain a Kerberos ticket; change a Kerberos password; authenticate to the IdM Web UI\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992649152\"> \u003Cp>\n\t\t\t\t\t\t\t\tJSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992648064\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559992646976\"> \u003Cp>\n\t\t\t\t\t\t\t\tany \u003Ccode class=\"literal command\">ipa\u003C/code> utility usage\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"tab-browser-operations_assembly_installing-an-idm-client\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 13.3. Web UI post-installation operations\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559983850256\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559983849168\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559983848080\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983850256\"> \u003Cp>\n\t\t\t\t\t\t\t\tJSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983849168\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559983848080\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo retrieve the IdM Web UI pages\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#sssd-deployment-operations_assembly_installing-an-idm-client\" title=\"13.9. SSSD communication patterns\">SSSD communication patterns\u003C/a> for more information about how the \u003Ccode class=\"literal systemitem\">SSSD\u003C/code> daemon communicates with the services available on the IdM and Active Directory servers.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#certmonger-deployment-operations_assembly_installing-an-idm-client\" title=\"13.10. Certmonger communication patterns\">Certmonger communication patterns\u003C/a> for more information about how the \u003Ccode class=\"literal systemitem\">certmonger\u003C/code> daemon communicates with the services available on the IdM and Active Directory servers.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"sssd-deployment-operations_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.9. SSSD communication patterns\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe System Security Services Daemon (SSSD) is a system service to access remote directories and authentication mechanisms. If configured on an Identity Management IdM client, it connects to the IdM server, which provides authentication, authorization and other identity and policy information. If the IdM server is in a trust relationships with Active Directory (AD), SSSD also connects to AD to perform authentication for AD users using the Kerberos protocol. By default, SSSD uses Kerberos to authenticate any non-local user. In special situations, SSSD might be configured to use the LDAP protocol instead.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe SSSD can be configured to communicate with multiple servers. The tables below show common communication patterns for SSSD in IdM.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab-sssd-deployment-operations-clients_assembly_installing-an-idm-client\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 13.4. Communication patterns of SSSD on IdM clients when talking to IdM servers\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559987835952\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559987834864\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559987833776\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987835952\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS resolution against the DNS resolvers configured on the client system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987834864\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987833776\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo discover the IP addresses of IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987835952\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 88 (TCP/TCP6 and UDP/UDP6), 464 (TCP/TCP6 and UDP/UDP6), and 749 (TCP/TCP6) on an Identity Management replica and Active Directory domain controllers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987834864\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987833776\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain a Kerberos ticket; to change a Kerberos password\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987835952\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests over TCP/TCP6 to ports 389 on IdM servers, using SASL GSSAPI authentication, plain LDAP, or both\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987834864\"> \u003Cp>\n\t\t\t\t\t\t\t\tLDAP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987833776\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain information about IdM users and hosts, download HBAC and sudo rules, automount maps, the SELinux user context, public SSH keys, and other information stored in IdM LDAP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987835952\"> \u003Cp>\n\t\t\t\t\t\t\t\t(optionally) In case of smart-card authentication, requests to the Online Certificate Status Protocol (OCSP) responder, if it is configured. This often is done via port 80, but it depends on the actual value of the OCSP responder URL in a client certificate.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987834864\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559987833776\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain information about the status of the certificate installed in the smart card\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"tab-sssd-deployment-operations-trust-controllers_assembly_installing-an-idm-client\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 13.5. Communication patterns of SSSD on IdM servers acting as trust agents when talking to Active Directory Domain Controllers\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559986131776\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559986130688\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559986129600\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986131776\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS resolution against the DNS resolvers configured on the client system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986130688\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986129600\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo discover the IP addresses of IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986131776\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 88 (TCP/TCP6 and UDP/UDP6), 464 (TCP/TCP6 and UDP/UDP6), and 749 (TCP/TCP6) on an Identity Management replica and Active Directory domain controllers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986130688\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986129600\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain a Kerberos ticket; change a Kerberos password; administer Kerberos remotely\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986131776\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 389 (TCP/TCP6 and UDP/UDP6) and 3268 (TCP/TCP6)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986130688\"> \u003Cp>\n\t\t\t\t\t\t\t\tLDAP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986129600\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo query Active Directory user and group information; to discover Active Directory domain controllers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986131776\"> \u003Cp>\n\t\t\t\t\t\t\t\t(optionally) In case of smart-card authentication, requests to the Online Certificate Status Protocol (OCSP) responder, if it is configured. This often is done via port 80, but it depends on the actual value of the OCSP responder URL in a client certificate.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986130688\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986129600\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain information about the status of the certificate installed in the smart card\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#ipa-client-communication-with-server_assembly_installing-an-idm-client\" title=\"13.8. IdM client’s communications with the server during post-installation deployment\">IdM client’s communications with the server during post-installation deployment\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"certmonger-deployment-operations_assembly_installing-an-idm-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.10. Certmonger communication patterns\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\u003Ccode class=\"literal\">Certmonger\u003C/code> is a daemon running on Identity Management (IdM) servers and IdM clients to allow a timely renewal of SSL certificates associated with the services on the host. The \u003Ca class=\"xref\" href=\"#tab-certmonger-deployment-operations_assembly_installing-an-idm-client\" title=\"Table 13.6. Certmonger communication patterns\">Table 13.6, “Certmonger communication patterns”\u003C/a> shows the operations performed by the \u003Ccode class=\"literal\">certmonger\u003C/code> utility on IdM servers.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab-certmonger-deployment-operations_assembly_installing-an-idm-client\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 13.6. Certmonger communication patterns\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559984465888\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559984464800\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559984463712\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984465888\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS resolution against the DNS resolvers configured on the client system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984464800\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984463712\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo discover the IP addresses of IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984465888\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 88 (TCP/TCP6 and UDP/UDP6) and 464 (TCP/TCP6 and UDP/UDP6) on an IdM replica\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984464800\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984463712\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain a Kerberos ticket\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984465888\"> \u003Cp>\n\t\t\t\t\t\t\t\tJSON-RPC calls to the IdM Apache-based web-service on discovered or configured IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984464800\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984463712\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo request new certificates\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984465888\"> \u003Cp>\n\t\t\t\t\t\t\t\tAccess over port 8080 (TCP/TCP6) on the IdM server\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984464800\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984463712\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain an Online Certificate Status Protocol (OCSP) responder and certificate status\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984465888\"> \u003Cp>\n\t\t\t\t\t\t\t\t(on the first installed server or on the server where certificate tracking has been transferred) Access over port 8443 (TCP/TCP6) on the IdM server\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984464800\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984463712\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo administer the Certificate Authority on the IdM server (only during IdM server and replica installation). \u003Ccode class=\"literal\">certmonger\u003C/code> on the server contacts only its own local server on ports 8080 and 8443 for CA-related certificate renewal.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#ipa-client-communication-with-server_assembly_installing-an-idm-client\" title=\"13.8. IdM client’s communications with the server during post-installation deployment\">IdM client’s communications with the server during post-installation deployment\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-ipa-client-with-kickstart_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 14. Installing an IdM client with Kickstart\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tA Kickstart enrollment automatically adds a new system to the Identity Management (IdM) domain at the time Red Hat Enterprise Linux is installed.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"installing-a-client-with-kickstart_client-kickstart\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.1. Installing a client with Kickstart\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to use a Kickstart file to install an Identity Management (IdM) client.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDo not start the \u003Ccode class=\"literal\">sshd\u003C/code> service prior to the kickstart enrollment. Starting \u003Ccode class=\"literal\">sshd\u003C/code> before enrolling the client generates the SSH keys automatically, but the Kickstart file in \u003Ca class=\"xref\" href=\"#kickstart-file-for-client-installation_client-kickstart\" title=\"14.2. Kickstart file for client installation\">Section 14.2, “Kickstart file for client installation”\u003C/a> uses a script for the same purpose, which is the preferred solution.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPre-create the host entry on the IdM server, and set a temporary password for the entry:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa host-add \u003Cspan class=\"emphasis\">\u003Cem>client.example.com\u003C/em>\u003C/span> --password=\u003Cspan class=\"emphasis\">\u003Cem>secret\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe password is used by Kickstart to authenticate during the client installation and expires after the first authentication attempt. After the client is successfully installed, it authenticates using its keytab.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a Kickstart file with the contents described in \u003Ca class=\"xref\" href=\"#kickstart-file-for-client-installation_client-kickstart\" title=\"14.2. Kickstart file for client installation\">Section 14.2, “Kickstart file for client installation”\u003C/a>. Make sure that network is configured properly in the Kickstart file using the \u003Ccode class=\"literal\">network\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse the Kickstart file to install the IdM client.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"kickstart-file-for-client-installation_client-kickstart\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.2. Kickstart file for client installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use a Kickstart file to install an Identity Management (IdM) client. The contents of the Kickstart file must meet certain requirements as outlined here.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal package\">ipa-client\u003C/code> package in the list of packages to install\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">ipa-client\u003C/code> package to the %packages section of the Kickstart file. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">%packages\n...\n\u003Ccode class=\"literal\">ipa-client\u003C/code>\n...\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Post-installation instructions for the IdM client\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe post-installation instructions must include:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tAn instruction for ensuring SSH keys are generated before enrollment\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAn instruction to run the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility, while specifying:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tAll the required information to access and configure the IdM domain services\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe password which you set when pre-creating the client host on the IdM server. in \u003Ca class=\"xref\" href=\"#installing-a-client-with-kickstart_client-kickstart\" title=\"14.1. Installing a client with Kickstart\">Section 14.1, “Installing a client with Kickstart”\u003C/a>.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the post-installation instructions for a Kickstart installation that uses a one-time password and retrieves the required options from the command line rather than via DNS can look like this:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">%post --log=/root/ks-post.log\n\n# Generate SSH keys; ipa-client-install uploads them to the IdM server by default\n/usr/libexec/openssh/sshd-keygen rsa\n\n# Run the client install script\n/usr/sbin/ipa-client-install --hostname=\u003Cspan class=\"emphasis\">\u003Cem>client.example.com\u003C/em>\u003C/span> --domain=\u003Cspan class=\"emphasis\">\u003Cem>EXAMPLE.COM\u003C/em>\u003C/span> --enable-dns-updates --mkhomedir -w \u003Cspan class=\"emphasis\">\u003Cem>secret\u003C/em>\u003C/span> --realm=\u003Cspan class=\"emphasis\">\u003Cem>EXAMPLE.COM\u003C/em>\u003C/span> --server=\u003Cspan class=\"emphasis\">\u003Cem>server.example.com\u003C/em>\u003C/span>\u003C/pre>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tOptionally, you can also include other options in the Kickstart file, such as:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a non-interactive installation, add the \u003Ccode class=\"literal option\">--unattended\u003C/code> option to \u003Ccode class=\"literal\">ipa-client-install\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo let the client installation script request a certificate for the machine:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal option\">--request-cert\u003C/code> option to \u003Ccode class=\"literal\">ipa-client-install\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the system bus address to \u003Ccode class=\"literal\">/dev/null\u003C/code> for both the \u003Ccode class=\"literal\">getcert\u003C/code> and \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility in the Kickstart \u003Ccode class=\"literal\">chroot\u003C/code> environment. To do this, add these lines to the post-installation instructions in the Kickstart file before the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> instruction:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># env DBUS_SYSTEM_BUS_ADDRESS=unix:path=/dev/null getcert list\n# env DBUS_SYSTEM_BUS_ADDRESS=unix:path=/dev/null ipa-client-install\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"testing-an-ipa-client_client-kickstart\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.3. Testing an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe command-line interface informs you that the \u003Ccode class=\"literal command\">ipa-client-install\u003C/code> was successful, but you can also do your own test.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo test that the Identity Management (IdM) client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default \u003Ccode class=\"literal\">admin\u003C/code> user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>id admin\u003C/strong>\u003C/span>\nuid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)\u003C/pre>\u003Cp>\n\t\t\t\tTo test that authentication works correctly, \u003Ccode class=\"literal command\">su\u003C/code> to a root user from a non-root user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>su -\u003C/strong>\u003C/span>\nLast login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0\n[root@client ~]#\u003C/pre>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"troubleshooting-idm-client-installation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 15. Troubleshooting IdM client installation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe how to gather information about a failing IdM client installation, and how to resolve common installation issues.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"reviewing-idm-client-installation-errors_troubleshooting-idm-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.1. Reviewing IdM client installation errors\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen you install an Identity Management (IdM) client, debugging information is appended to \u003Ccode class=\"literal filename\">/var/log/ipaclient-install.log\u003C/code>. If a client installation fails, the installer logs the failure and rolls back changes to undo any modifications to the host. The reason for the installation failure may not be at the end of the log file, as the installer also logs the roll back procedure.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo troubleshoot a failing IdM client installation, review lines labeled \u003Ccode class=\"literal\">ScriptError\u003C/code> in the \u003Ccode class=\"literal filename\">/var/log/ipaclient-install.log\u003C/code> file and use this information to resolve any corresponding issues.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges to display the contents of IdM log files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">grep\u003C/code> utility to retrieve any occurrences of the keyword \u003Ccode class=\"literal\">ScriptError\u003C/code> from the \u003Ccode class=\"literal filename\">/var/log/ipaserver-install.log\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo grep ScriptError /var/log/ipaclient-install.log\u003C/strong>\u003C/span>\n[sudo] password for user:\n2020-05-28T18:24:50Z DEBUG The ipa-client-install command failed, exception: \u003Cspan class=\"strong strong\">\u003Cstrong>ScriptError\u003C/strong>\u003C/span>: One of password / principal / keytab is required.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo review a log file interactively, open the end of the log file using the \u003Ccode class=\"literal\">less\u003C/code> utility and use the \u003Ckbd class=\"keycap\">↑\u003C/kbd> and \u003Ckbd class=\"keycap\">↓\u003C/kbd> arrow keys to navigate.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/ipaclient-install.log\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing IdM client installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"resolving-issues-if-the-client-installation-fails-to-update-dns-records_troubleshooting-idm-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.2. Resolving issues if the client installation fails to update DNS records\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe IdM client installer issues \u003Ccode class=\"literal\">nsupdate\u003C/code> commands to create PTR, SSHFP, and additional DNS records. However, the installation process fails if the client is unable to update DNS records after installing and configuring the client software.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo fix this problem, verify the configuration and review DNS errors in \u003Ccode class=\"literal filename\">/var/log/client-install.log\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are using IdM DNS as the DNS solution for your IdM environment\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that dynamic updates for the DNS zone the client is in are enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa dnszone-mod idm.example.com. --dynamic-update=TRUE\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the IdM server running the DNS service has port 53 opened for both TCP and UDP protocols.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo firewall-cmd --permanent --add-port=53/tcp --add-port=53/udp\u003C/strong>\u003C/span>\n[sudo] password for user:\nsuccess\n[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --runtime-to-permanent\u003C/strong>\u003C/span>\nsuccess\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">grep\u003C/code> utility to retrieve the contents of \u003Ccode class=\"literal\">nsupdate\u003C/code> commands from \u003Ccode class=\"literal filename\">/var/log/client-install.log\u003C/code> to see which DNS record updates are failing.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo grep nsupdate /var/log/ipaclient-install.log\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"resolving-issues-if-the-client-installation-fails-to-join-the-idm-kerberos-realm_troubleshooting-idm-client-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.3. Resolving issues if the client installation fails to join the IdM Kerberos realm\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe IdM client installation process fails if the client is unable to join the IdM Kerberos realm.\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Joining realm failed: Failed to add key to the keytab\nchild exited with 11\n\nInstallation failed. Rolling back changes.\u003C/pre>\u003Cp>\n\t\t\t\tThis failure can be caused by an empty Kerberos keytab.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRemoving system files requires \u003Ccode class=\"literal\">root\u003C/code> privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove \u003Ccode class=\"literal filename\">/etc/krb5.keytab\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo rm /etc/krb5.keytab\u003C/strong>\u003C/span>\n[sudo] password for user:\n[user@client ~]$ ls /etc/krb5.keytab\nls: cannot access '/etc/krb5.keytab': No such file or directory\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRetry the IdM client installation.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_4\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.4. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo troubleshoot installing the first IdM server, see \u003Ca class=\"link\" href=\"#troubleshooting-idm-server-installation_installing-identity-management\" title=\"Chapter 8. Troubleshooting IdM server installation\">Troubleshooting IdM server installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo troubleshoot installing an IdM replica, see \u003Ca class=\"link\" href=\"#troubleshooting-idm-replica-installation_installing-identity-management\" title=\"Chapter 21. Troubleshooting IdM replica installation\">Troubleshooting IdM replica installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"re-enrolling-an-ipa-client_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 16. Re-enrolling an IdM client\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIf a client machine has been destroyed and lost connection with the IdM servers, for example due to the client’s hardware failure, and you still have its keytab, you can re-enroll the client. In this scenario, you want to get the client back in the IdM environment with the same hostname.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"client-reenrollment-idm_re-enrolling-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.1. Client re-enrollment in IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf a client machine has been destroyed and lost connection with the IdM servers, for example due to the client’s hardware failure, and you still have its keytab, you can re-enroll the client. In this scenario, you want to get the client back in the IdM environment with the same hostname.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tDuring the re-enrollment, the client generates a new Kerberos key and SSH keys, but the identity of the client in the LDAP database remains unchanged. After the re-enrollment, the host has its keys and other information in the same LDAP object with the same \u003Ccode class=\"literal\">FQDN\u003C/code> as previously, before the machine’s loss of connection with the IdM servers.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou can only re-enroll clients whose domain entry is still active. If you uninstalled a client (using \u003Ccode class=\"literal command\">ipa-client-install --uninstall\u003C/code>) or disabled its host entry (using \u003Ccode class=\"literal command\">ipa host-disable\u003C/code>), you cannot re-enroll it.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tYou cannot re-enroll a client after you have renamed it. This is because in IdM, the key attribute of the client’s entry in LDAP is the client’s hostname, its \u003Ccode class=\"literal\">FQDN\u003C/code>. As opposed to re-enrolling a client, during which the client’s LDAP object remains unchanged, the outcome of renaming a client is that the client has its keys and other information in a different LDAP object with a new \u003Ccode class=\"literal\">FQDN\u003C/code>. Therefore, the only way to rename a client is to uninstall the host from IdM, change the host’s hostname, and install it as an IdM client with a new name. For details on how to rename a client, see \u003Ca class=\"link\" href=\"#renaming-ipa-client-systems_installing-identity-management\" title=\"Chapter 18. Renaming IdM client systems\">Renaming IdM client systems\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>What happens during client re-enrollment\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tDuring re-enrollment, IdM:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRevokes the original host certificate\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreates new SSH keys\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGenerates a new keytab\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"re-enrolling-a-client-by-using-user-credentials-interactive-re-enrollment_re-enrolling-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.2. Re-enrolling a client by using user credentials: Interactive re-enrollment\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to re-enroll an Identity Management (IdM) client interactively by using the credentials of an authorized user.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRe-create the client machine with the same host name.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal command\">ipa-client-install --force-join\u003C/code> command on the client machine:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --force-join\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe script prompts for a user whose identity will be used to re-enroll the client. This could be, for example, a \u003Ccode class=\"literal\">hostadmin\u003C/code> user with the Enrollment Administrator role:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">User authorized to enroll computers: \u003Ccode class=\"literal\">hostadmin\u003C/code>\nPassword for \u003Ccode class=\"literal\">hostadmin\u003C/code>@\u003Ccode class=\"literal\">EXAMPLE.COM\u003C/code>:\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a more detailed procedure on enrolling clients by using an authorized user’s credentials, see \u003Ca class=\"link\" href=\"#proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client\" title=\"13.2. Installing a client by using user credentials: Interactive installation\">Installing a client by using user credentials: Interactive installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"re-enrolling-idm-client-using-keytab-non-interactive_re-enrolling-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.3. Re-enrolling a client by using the client keytab: Non-interactive re-enrollment\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can re-enroll an Identity Management (IdM) client non-interactively by using the \u003Ccode class=\"literal\">krb5.keytab\u003C/code> keytab file of the client system from the previous deployment. For example, re-enrollment using the client keytab is appropriate for an automated installation.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have backed up the keytab of the client from the previous deployment on another system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRe-create the client machine with the same host name.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the keytab file from the backup location to the re-created client machine, for example its \u003Ccode class=\"literal\">/tmp/\u003C/code> directory.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tDo not put the keytab in the \u003Ccode class=\"literal\">/etc/krb5.keytab\u003C/code> file as old keys are removed from this location during the execution of the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> installation script.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipa-client-install\u003C/code> utility to re-enroll the client. Specify the keytab location with the \u003Ccode class=\"literal option\">--keytab\u003C/code> option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --keytab /tmp/krb5.keytab\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe keytab specified in the \u003Ccode class=\"literal option\">--keytab\u003C/code> option is only used when authenticating to initiate the re-enrollment. During the re-enrollment, IdM generates a new keytab for the client.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"testing-an-ipa-client_re-enrolling-client\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.4. Testing an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe command-line interface informs you that the \u003Ccode class=\"literal command\">ipa-client-install\u003C/code> was successful, but you can also do your own test.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo test that the Identity Management (IdM) client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default \u003Ccode class=\"literal\">admin\u003C/code> user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>id admin\u003C/strong>\u003C/span>\nuid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)\u003C/pre>\u003Cp>\n\t\t\t\tTo test that authentication works correctly, \u003Ccode class=\"literal command\">su\u003C/code> to a root user from a non-root user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>su -\u003C/strong>\u003C/span>\nLast login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0\n[root@client ~]#\u003C/pre>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"uninstalling-an-ipa-client_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 17. Uninstalling an IdM client\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tAs an administrator, you can remove an Identity Management (IdM) client from the environment.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"uninstalling-an-ipa-client-procedure_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.1. Uninstalling an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUninstalling a client removes the client from the Identity Management (IdM) domain, along with all of the specific IdM configuration of system services, such as System Security Services Daemon (SSSD). This restores the previous configuration of the client system.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the \u003Ccode class=\"literal command\">ipa-client-install --uninstall\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --uninstall\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Check that you cannot obtain a Kerberos ticket-granting ticket (TGT) for an IdM user:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\nkinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials\n[root@client ~]#\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf a Kerberos TGT ticket has been returned successfully, follow the additional uninstallation steps in \u003Ca class=\"link\" href=\"#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management\" title=\"17.2. Uninstalling an IdM client: additional steps after multiple past installations\">Uninstalling an IdM client: additional steps after multiple past installations\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the client, remove old Kerberos principals from each identified keytab other than \u003Ccode class=\"literal\">/etc/krb5.keytab\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-rmkeytab -k \u003Cspan class=\"emphasis\">\u003Cem>/path/to/keytab\u003C/em>\u003C/span> -r EXAMPLE.COM\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn an IdM server, remove all DNS entries for the client host from IdM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa dnsrecord-del\u003C/strong>\u003C/span>\nRecord name: old-client-name\nZone name: idm.example.com\nNo option to delete specific record provided.\nDelete all? Yes/No (default No): true\n------------------------\nDeleted record \"old-client-name\"\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the IdM server, remove the client host entry from the IdM LDAP server. This removes all services and revokes all certificates issued for that host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa host-del client.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tRemoving the client host entry from the IdM LDAP server is crucial if you think you might re-enroll the client in the future, with a different IP address or a different hostname.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.2. Uninstalling an IdM client: additional steps after multiple past installations\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you install and uninstall a host as an Identity Management (IdM) client multiple times, the uninstallation procedure might not restore the pre-IdM Kerberos configuration.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn this situation, you must manually remove the IdM Kerberos configuration. In extreme cases, you must reinstall the operating system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have used the \u003Ccode class=\"literal\">ipa-client-install --uninstall\u003C/code> command to uninstall the IdM client configuration from the host. However, you can still obtain a Kerberos ticket-granting ticket (TGT) for an IdM user from the IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have checked that the \u003Ccode class=\"literal\">/var/lib/ipa-client/sysrestore\u003C/code> directory is empty and hence you cannot restore the prior-to-IdM-client configuration of the system using the files in the directory.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the contents of the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file are the same as the contents of the \u003Ccode class=\"literal\">krb5.conf\u003C/code> file prior to the installation of the IdM client, you can:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/krb5.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRename the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file into \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mv /etc/krb5.conf.ipa /etc/krb5.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the contents of the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file are not the same as the contents of the \u003Ccode class=\"literal\">krb5.conf\u003C/code> file prior to the installation of the IdM client, you can at least restore the Kerberos configuration to the state directly after the installation of the operating system:\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRe-install the \u003Ccode class=\"literal\">krb5-libs\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf reinstall krb5-libs\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAs a dependency, this command will also re-install the \u003Ccode class=\"literal\">krb5-workstation\u003C/code> package and the original version of the \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">var/log/ipaclient-install.log\u003C/code> file if present.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTry to obtain IdM user credentials. This should fail:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@r8server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\nkinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials\n[root@r8server ~]#\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file is now restored to its factory state. As a result, you cannot obtain a Kerberos TGT for an IdM user on the host.\n\t\t\t\u003C/p>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"renaming-ipa-client-systems_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 18. Renaming IdM client systems\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe how to change the host name of an Identity Management (IdM) client system.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRenaming a client is a manual procedure. Do not perform it unless changing the host name is absolutely required.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\tRenaming an IdM client involves:\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tPreparing the host. For details, see \u003Ca class=\"link\" href=\"#preparing-an-idm-client-for-its-renaming_renaming-clients\" title=\"18.1. Preparing an IdM client for its renaming\">Preparing an IdM client for its renaming\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUninstalling the IdM client from the host. For details, see \u003Ca class=\"link\" href=\"#uninstalling-an-ipa-client-procedure_renaming-clients\" title=\"18.2. Uninstalling an IdM client\">Uninstalling a client\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tRenaming the host. For details, see \u003Ca class=\"link\" href=\"#renaming-the-ipa-client-system_renaming-clients\" title=\"18.4. Renaming the host system\">Renaming a client\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tInstalling the IdM client on the host with the new name. For details, see \u003Ca class=\"link\" href=\"#re-installing-an-idm-client_renaming-clients\" title=\"18.5. Re-installing an IdM client\">Reinstalling a client\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tConfiguring the host after the IdM client installation. For details, see \u003Ca class=\"link\" href=\"#re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients\" title=\"18.6. Re-adding services, re-generating certificates, and re-adding host groups\">Re-adding services, re-generating certificates, and re-adding host groups\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Csection class=\"section\" id=\"preparing-an-idm-client-for-its-renaming_renaming-clients\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.1. Preparing an IdM client for its renaming\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore uninstalling the current client, make note of certain settings for the client. You will apply this configuration after re-enrolling the machine with a new host name.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify which services are running on the machine:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">ipa service-find\u003C/code> command, and identify services with certificates in the output:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa service-find \u003Cspan class=\"emphasis\">\u003Cem>old-client-name.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn addition, each host has a default \u003Cspan class=\"emphasis\">\u003Cem>host service\u003C/em>\u003C/span> which does not appear in the \u003Ccode class=\"literal command\">ipa service-find\u003C/code> output. The service principal for the host service, also called a \u003Cspan class=\"emphasis\">\u003Cem>host principal\u003C/em>\u003C/span>, is \u003Ccode class=\"literal\">host/\u003Cspan class=\"emphasis\">\u003Cem>old-client-name.example.com\u003C/em>\u003C/span>\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor all service principals displayed by \u003Ccode class=\"literal command\">ipa service-find \u003Cspan class=\"emphasis\">\u003Cem>old-client-name.example.com\u003C/em>\u003C/span>\u003C/code>, determine the location of the corresponding keytabs on the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>old-client-name.example.com\u003C/em>\u003C/span>\u003C/code> system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>find / -name \"*.keytab\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach service on the client system has a Kerberos principal in the form \u003Cspan class=\"emphasis\">\u003Cem>service_name/host_name@REALM\u003C/em>\u003C/span>, such as \u003Ccode class=\"literal\">ldap/\u003Cspan class=\"emphasis\">\u003Cem>old-client-name.example.com@EXAMPLE.COM\u003C/em>\u003C/span>\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify all host groups to which the machine belongs.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa hostgroup-find \u003Cspan class=\"emphasis\">\u003Cem>old-client-name.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-an-ipa-client-procedure_renaming-clients\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.2. Uninstalling an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUninstalling a client removes the client from the Identity Management (IdM) domain, along with all of the specific IdM configuration of system services, such as System Security Services Daemon (SSSD). This restores the previous configuration of the client system.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the \u003Ccode class=\"literal command\">ipa-client-install --uninstall\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-client-install --uninstall\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Check that you cannot obtain a Kerberos ticket-granting ticket (TGT) for an IdM user:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\nkinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials\n[root@client ~]#\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf a Kerberos TGT ticket has been returned successfully, follow the additional uninstallation steps in \u003Ca class=\"link\" href=\"#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients\" title=\"18.3. Uninstalling an IdM client: additional steps after multiple past installations\">Uninstalling an IdM client: additional steps after multiple past installations\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the client, remove old Kerberos principals from each identified keytab other than \u003Ccode class=\"literal\">/etc/krb5.keytab\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-rmkeytab -k \u003Cspan class=\"emphasis\">\u003Cem>/path/to/keytab\u003C/em>\u003C/span> -r EXAMPLE.COM\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn an IdM server, remove all DNS entries for the client host from IdM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa dnsrecord-del\u003C/strong>\u003C/span>\nRecord name: old-client-name\nZone name: idm.example.com\nNo option to delete specific record provided.\nDelete all? Yes/No (default No): true\n------------------------\nDeleted record \"old-client-name\"\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the IdM server, remove the client host entry from the IdM LDAP server. This removes all services and revokes all certificates issued for that host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa host-del client.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tRemoving the client host entry from the IdM LDAP server is crucial if you think you might re-enroll the client in the future, with a different IP address or a different hostname.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.3. Uninstalling an IdM client: additional steps after multiple past installations\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you install and uninstall a host as an Identity Management (IdM) client multiple times, the uninstallation procedure might not restore the pre-IdM Kerberos configuration.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn this situation, you must manually remove the IdM Kerberos configuration. In extreme cases, you must reinstall the operating system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have used the \u003Ccode class=\"literal\">ipa-client-install --uninstall\u003C/code> command to uninstall the IdM client configuration from the host. However, you can still obtain a Kerberos ticket-granting ticket (TGT) for an IdM user from the IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have checked that the \u003Ccode class=\"literal\">/var/lib/ipa-client/sysrestore\u003C/code> directory is empty and hence you cannot restore the prior-to-IdM-client configuration of the system using the files in the directory.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the contents of the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file are the same as the contents of the \u003Ccode class=\"literal\">krb5.conf\u003C/code> file prior to the installation of the IdM client, you can:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/krb5.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRename the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file into \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mv /etc/krb5.conf.ipa /etc/krb5.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the contents of the \u003Ccode class=\"literal\">/etc/krb5.conf.ipa\u003C/code> file are not the same as the contents of the \u003Ccode class=\"literal\">krb5.conf\u003C/code> file prior to the installation of the IdM client, you can at least restore the Kerberos configuration to the state directly after the installation of the operating system:\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRe-install the \u003Ccode class=\"literal\">krb5-libs\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf reinstall krb5-libs\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAs a dependency, this command will also re-install the \u003Ccode class=\"literal\">krb5-workstation\u003C/code> package and the original version of the \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">var/log/ipaclient-install.log\u003C/code> file if present.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTry to obtain IdM user credentials. This should fail:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@r8server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\nkinit: Client 'admin@EXAMPLE.COM' not found in Kerberos database while getting initial credentials\n[root@r8server ~]#\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file is now restored to its factory state. As a result, you cannot obtain a Kerberos TGT for an IdM user on the host.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"renaming-the-ipa-client-system_renaming-clients\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.4. Renaming the host system\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tRename the machine as required. For example:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>hostnamectl set-hostname \u003Cspan class=\"emphasis\">\u003Cem>new-client-name.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tYou can now re-install the Identity Management (IdM) client to the IdM domain with the new host name.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"re-installing-an-idm-client_renaming-clients\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.5. Re-installing an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstall an client on your renamed host following the procedure described in \u003Ca class=\"link\" href=\"#assembly_installing-an-idm-client_installing-identity-management\" title=\"Chapter 13. Installing an IdM client\">Installing a client\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.6. Re-adding services, re-generating certificates, and re-adding host groups\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"orderedlist _abstract\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist _abstract\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the Identity Management (IdM) server, add a new keytab for every service identified in the \u003Ca class=\"link\" href=\"#preparing-an-idm-client-for-its-renaming_renaming-clients\" title=\"18.1. Preparing an IdM client for its renaming\">Preparing an IdM client for its renaming\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa service-add \u003Cspan class=\"emphasis\">\u003Cem>service_name/new-client-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate certificates for services that had a certificate assigned in the \u003Ca class=\"link\" href=\"#preparing-an-idm-client-for-its-renaming_renaming-clients\" title=\"18.1. Preparing an IdM client for its renaming\">Preparing an IdM client for its renaming\u003C/a>. You can do this:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUsing the IdM administration tools\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUsing the \u003Ccode class=\"literal\">certmonger\u003C/code> utility\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRe-add the client to the host groups identified in the \u003Ca class=\"link\" href=\"#preparing-an-idm-client-for-its-renaming_renaming-clients\" title=\"18.1. Preparing an IdM client for its renaming\">Preparing an IdM client for its renaming\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"preparing-the-system-for-ipa-replica-installation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 19. Preparing the system for an IdM replica installation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following links list the requirements to install an Identity Management (IdM) replica. Before the installation, make sure your system meets these requirements.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tEnsure \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management\">the target system meets the general requirements for IdM server installation\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnsure \u003Ca class=\"link\" href=\"#replica-version-requirements_preparing-the-system-for-ipa-replica-installation\" title=\"19.1. Replica version requirements\">the target system meets the additional, version requirements for IdM replica installation\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tOptional: If you are adding a RHEL 9 Identity Management (IdM) replica on which FIPS mode is enabled to a RHEL 8 IdM deployment in FIPS mode, \u003Ca class=\"link\" href=\"#ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation\" title=\"19.3. Ensuring FIPS compliance for a RHEL 9 replica joining a RHEL 8 IdM environment\">ensure that the replica has the correct encryption types enabled\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAuthorize the target system for enrollment into the IdM domain. For more information, see one of the following sections that best fits your needs:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation\" title=\"19.4. Authorizing the installation of a replica on an IdM client\">Authorizing the installation of a replica on an IdM client\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation\" title=\"19.5. Authorizing the installation of a replica on a system that is not enrolled into IdM\">Authorizing the installation of a replica on a system that is not enrolled into IdM\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index\">Planning the replica topology\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"replica-version-requirements_preparing-the-system-for-ipa-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.1. Replica version requirements\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAn IdM replica must be running the same or later version of IdM as other servers. For example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have an IdM server installed on Red Hat Enterprise Linux 9 and it uses IdM 4.x packages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must install the replica also on Red Hat Enterprise Linux 9 and use IdM version 4.x or later.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThis ensures that configuration can be properly copied from the server to the replica.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor details on how to display the IdM software version, see \u003Ca class=\"link\" href=\"#display-software-version_preparing-the-system-for-ipa-replica-installation\" title=\"19.2. Methods for displaying IdM software version\">Methods for displaying IdM software version\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"display-software-version_preparing-the-system-for-ipa-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.2. Methods for displaying IdM software version\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can display the IdM version number with:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM WebUI\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipa\u003C/code> commands\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">rpm\u003C/code> commands\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t \n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Displaying version through the WebUI\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the IdM WebUI, the software version can be displayed by choosing \u003Ccode class=\"literal\">About\u003C/code> from the username menu at the upper-right.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/eb58b78de07ba06d846be6f76ae67a2e/idm-version-check.png\" alt=\"Checking IdM Software Version\"/>\u003C/div>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Displaying version with \u003Ccode class=\"literal\">ipa\u003C/code> commands\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFrom the command line, use the \u003Ccode class=\"literal\">ipa --version\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa --version\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>VERSION: 4.8.0\u003C/strong>\u003C/span>, API_VERSION: 2.233\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Displaying version with \u003Ccode class=\"literal\">rpm\u003C/code> commands\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf IdM services are not operating properly, you can use the \u003Ccode class=\"literal\">rpm\u003C/code> utility to determine the version number of the \u003Ccode class=\"literal\">ipa-server\u003C/code> package that is currently installed.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>rpm -q ipa-server\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-4.8.0-11\u003C/strong>\u003C/span>.module+el8.1.0+4247+9f3fd721.x86_64\u003C/pre>\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.3. Ensuring FIPS compliance for a RHEL 9 replica joining a RHEL 8 IdM environment\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf RHEL Identity Management (IdM) was originally installed on a RHEL 8.6 or earlier system, then the \u003Ccode class=\"literal\">AES HMAC-SHA1\u003C/code> encryption types it uses are not supported by RHEL 9 in FIPS mode by default. To add a RHEL 9 replica in FIPS mode to the deployment, you must enable these encryption keys on the RHEL 9. For more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/7003853\">AD Domain Users unable to login in to the FIPS-compliant environment\u003C/a> KCS solution.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.4. Authorizing the installation of a replica on an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen \u003Ca class=\"link\" href=\"#installing-an-ipa-replica_installing-identity-management\" title=\"Chapter 20. Installing an IdM replica\">installing a replica\u003C/a> on an existing Identity Management (IdM) client by running the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility, choose \u003Cspan class=\"strong strong\">\u003Cstrong>Method 1\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Method 2\u003C/strong>\u003C/span> below to authorize the replica installation. Choose \u003Cspan class=\"strong strong\">\u003Cstrong>Method 1\u003C/strong>\u003C/span> if one of the following applies:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou want a senior system administrator to perform the initial part of the procedure and a junior administrator to perform the rest.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou want to automate your replica installation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAs of RHEL 9.5, during the installation of an IdM replica, checking if the provided Kerberos principal has the required privilege also extends to checking user ID overrides. As a result, you can deploy a replica using the credentials of an AD administrator that is configured to act as an IdM administrator.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Method 1: the \u003Ccode class=\"literal\">ipaservers\u003C/code> host group\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tLog in to any IdM host as IdM admin:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdd the client machine to the \u003Ccode class=\"literal\">ipaservers\u003C/code> host group:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa hostgroup-add-member ipaservers --hosts \u003Cspan class=\"emphasis\">\u003Cem>client.idm.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n  Host-group: ipaservers\n  Description: IPA server hosts\n  Member hosts: server.idm.example.com, client.idm.example.com\n-------------------------\nNumber of members added 1\n-------------------------\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tMembership in the \u003Ccode class=\"literal\">ipaservers\u003C/code> group grants the machine elevated privileges similar to the administrator’s credentials. Therefore, in the next step, the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility can be run on the host successfully by a junior system administrator.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Method 2: a privileged user’s credentials\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tChoose one of the following methods to authorize the replica installation by providing a privileged user’s credentials:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tLet Identity Management (IdM) prompt you for the credentials interactively after you start the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility. This is the default behavior.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tLog in to the client as a privileged user immediately before running the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility. The default privileged user is \u003Ccode class=\"literal\">admin\u003C/code>:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo start the installation procedure, see \u003Ca class=\"link\" href=\"#installing-an-ipa-replica_installing-identity-management\" title=\"Chapter 20. Installing an IdM replica\">Installing an IdM replica\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou can use an Ansible playbook to install IdM replicas. For more information, see \u003Ca class=\"link\" href=\"#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management\" title=\"Chapter 26. Installing an Identity Management replica using an Ansible playbook\">Installing an Identity Management replica using an Ansible playbook\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.5. Authorizing the installation of a replica on a system that is not enrolled into IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen \u003Ca class=\"link\" href=\"#installing-an-ipa-replica_installing-identity-management\" title=\"Chapter 20. Installing an IdM replica\">installing a replica\u003C/a> on a system that is not enrolled in the Identity Management (IdM) domain, the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility first enrolls the system as a client and then installs the replica components. For this scenario, choose \u003Cspan class=\"strong strong\">\u003Cstrong>Method 1\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Method 2\u003C/strong>\u003C/span> below to authorize the replica installation. Choose \u003Cspan class=\"strong strong\">\u003Cstrong>Method 1\u003C/strong>\u003C/span> if one of the following applies:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou want a senior system administrator to perform the initial part of the procedure and a junior administrator to perform the rest.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou want to automate your replica installation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAs of RHEL 9.5, during the installation of an IdM replica, checking if the provided Kerberos principal has the required privilege also extends to checking user ID overrides. As a result, you can deploy a replica using the credentials of an AD administrator that is configured to act as an IdM administrator.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Method 1: a random password generated on an IdM server\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the following commands on any server in the domain:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tLog in as the administrator.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdd the external system as an IdM host. Use the \u003Ccode class=\"literal option\">--random\u003C/code> option with the \u003Ccode class=\"literal command\">ipa host-add\u003C/code> command to generate a random one-time password to be used for the subsequent replica installation.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa host-add replica.example.com --random\u003C/strong>\u003C/span>\n--------------------------------------------------\nAdded host \"replica.example.com\"\n--------------------------------------------------\n  Host name: replica.example.com\n  Random password: W5YpARl=7M.n\n  Password: True\n  Keytab: False\n  Managed by: server.example.com\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe generated password will become invalid after you use it to enroll the machine into the IdM domain. It will be replaced with a proper host keytab after the enrollment is finished.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdd the system to the \u003Ccode class=\"literal\">ipaservers\u003C/code> host group.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa hostgroup-add-member ipaservers --hosts \u003Cspan class=\"emphasis\">\u003Cem>replica.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n  Host-group: ipaservers\n  Description: IPA server hosts\n  Member hosts: server.example.com, replica.example.com\n-------------------------\nNumber of members added 1\n-------------------------\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tMembership in the \u003Ccode class=\"literal\">ipaservers\u003C/code> group grants the machine elevated privileges similar to the administrator’s credentials. Therefore, in the next step, the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility can be run on the host successfully by a junior system administrator that provides the generated random password.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Method 2: a privileged user’s credentials\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUsing this method, you authorize the replica installation by providing a privileged user’s credentials. The default privileged user is \u003Ccode class=\"literal\">admin\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNo action is required prior to running the IdM replica installation utility. Add the principal name and password options (\u003Ccode class=\"literal\">--principal \u003Cspan class=\"emphasis\">\u003Cem>admin\u003C/em>\u003C/span> --admin-password \u003Cspan class=\"emphasis\">\u003Cem>password\u003C/em>\u003C/span>\u003C/code>) to the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> command directly during the installation.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo start the installation procedure, see \u003Ca class=\"link\" href=\"#installing-an-ipa-replica_installing-identity-management\" title=\"Chapter 20. Installing an IdM replica\">Installing an IdM replica\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou can use an Ansible playbook to install IdM replicas. For more information, see \u003Ca class=\"link\" href=\"#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management\" title=\"Chapter 26. Installing an Identity Management replica using an Ansible playbook\">Installing an Identity Management replica using an Ansible playbook\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-ipa-replica_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 20. Installing an IdM replica\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe how to install an Identity Management (IdM) replica interactively, by using the command-line interface (CLI). The replica installation process copies the configuration of the existing server and installs the replica based on that configuration.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRed Hat recommends \u003Ca class=\"link\" href=\"#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management\" title=\"Chapter 26. Installing an Identity Management replica using an Ansible playbook\">using Ansible roles to install replicas\u003C/a>. By using Ansible roles, you can consistently install and customize multiple replicas.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tInteractive and non-interactive methods that do not use Ansible are useful in topologies where, for example, the replica preparation is delegated to a user or a third party. You can also use these methods in geographically distributed topologies where you do not have access from the Ansible controller node.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou are installing one IdM replica at a time. The installation of multiple replicas at the same time is not supported.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tEnsure your system is \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-replica-installation_installing-identity-management\" title=\"Chapter 19. Preparing the system for an IdM replica installation\">prepared for IdM replica installation\u003C/a>.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIf this preparation is not performed, installing an IdM replica will fail.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tFor the individual types of replica installation procedures, see:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica\" title=\"20.1. Installing an IdM replica with integrated DNS and a CA\">Section 20.1, “Installing an IdM replica with integrated DNS and a CA”\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica\" title=\"20.2. Installing an IdM replica with integrated DNS and no CA\">Section 20.2, “Installing an IdM replica with integrated DNS and no CA”\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica\" title=\"20.3. Installing an IdM replica without integrated DNS and with a CA\">Section 20.3, “Installing an IdM replica without integrated DNS and with a CA”\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica\" title=\"20.4. Installing an IdM replica without integrated DNS and without a CA\">Section 20.4, “Installing an IdM replica without integrated DNS and without a CA”\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#installing-an-idm-hidden-replica_install-replica\" title=\"20.5. Installing an IdM hidden replica\">Section 20.5, “Installing an IdM hidden replica”\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tTo troubleshoot the replica installation procedure, see:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#troubleshooting-idm-replica-installation_installing-identity-management\" title=\"Chapter 21. Troubleshooting IdM replica installation\">Chapter 21, \u003Cem>Troubleshooting IdM replica installation\u003C/em>\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tAfter the installation, see:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"xref\" href=\"#testing-an-ipa-replica_install-replica\" title=\"20.6. Testing an IdM replica\">Section 20.6, “Testing an IdM replica”\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#backing-up-and-restoring-idm_planning-identity-management\">Backing Up and Restoring IdM\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.1. Installing an IdM replica with integrated DNS and a CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to install an Identity Management (IdM) replica:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith a certificate authority (CA)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can do this to, for example, replicate the CA service for resiliency after installing an IdM server with an integrated CA.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen configuring a replica with a CA, the CA configuration of the replica must mirror the CA configuration of the other server.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor example, if the server includes an integrated IdM CA as the root CA, the new replica must also be installed with an integrated CA as the root CA. No other CA configuration is available in this case.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIncluding the \u003Ccode class=\"literal\">--setup-ca\u003C/code> option in the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> command copies the CA configuration of the initial server.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure your system is \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-replica-installation_installing-identity-management\" title=\"Chapter 19. Preparing the system for an IdM replica installation\">prepared for an IdM replica installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> with these options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--setup-dns\u003C/code> to configure the replica as a DNS server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--forwarder\u003C/code> to specify a per-server forwarder, or \u003Ccode class=\"literal\">--no-forwarder\u003C/code> if you do not want to use any per-server forwarders. To specify multiple per-server forwarders for failover reasons, use \u003Ccode class=\"literal\">--forwarder\u003C/code> multiple times.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility accepts a number of other options related to DNS settings, such as \u003Ccode class=\"literal option\">--no-reverse\u003C/code> or \u003Ccode class=\"literal option\">--no-host-dns\u003C/code>. For more information about them, see the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>(1) man page.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--setup-ca\u003C/code> to include a CA on the replica\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, to set up a replica with an integrated DNS server and a CA that forwards all DNS requests not managed by the IdM servers to the DNS server running on IP 192.0.2.1:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-replica-install --setup-dns --forwarder \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> --setup-ca\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the installation completes, add a DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">idm.example.com\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tRepeat this step each time after you install an IdM DNS server.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.2. Installing an IdM replica with integrated DNS and no CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFollow this procedure to install an Identity Management (IdM) replica:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout a certificate authority (CA) in an IdM environment in which a CA is already installed. The replica will forward all certificate operations to the IdM server with a CA installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure your system is \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-replica-installation_installing-identity-management\" title=\"Chapter 19. Preparing the system for an IdM replica installation\">prepared for an IdM replica installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> with these options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--setup-dns\u003C/code> to configure the replica as a DNS server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--forwarder\u003C/code> to specify a per-server forwarder, or \u003Ccode class=\"literal\">--no-forwarder\u003C/code> if you do not want to use any per-server forwarders. To specify multiple per-server forwarders for failover reasons, use \u003Ccode class=\"literal\">--forwarder\u003C/code> multiple times.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, to set up a replica with an integrated DNS server that forwards all DNS requests not managed by the IdM servers to the DNS server running on IP 192.0.2.1:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># ipa-replica-install --setup-dns --forwarder \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility accepts a number of other options related to DNS settings, such as \u003Ccode class=\"literal option\">--no-reverse\u003C/code> or \u003Ccode class=\"literal option\">--no-host-dns\u003C/code>. For more information about them, see the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>(1) man page.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the installation completes, add a DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">idm.example.com\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tRepeat this step each time after you install an IdM DNS server.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.3. Installing an IdM replica without integrated DNS and with a CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFollow this procedure to install an Identity Management (IdM) replica:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith a certificate authority (CA)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen configuring a replica with a CA, the CA configuration of the replica must mirror the CA configuration of the other server.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor example, if the server includes an integrated IdM CA as the root CA, the new replica must also be installed with an integrated CA as the root CA. No other CA configuration is available in this case.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIncluding the \u003Ccode class=\"literal\">--setup-ca\u003C/code> option in the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> command copies the CA configuration of the initial server.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure your system is \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-replica-installation_installing-identity-management\" title=\"Chapter 19. Preparing the system for an IdM replica installation\">prepared for an IdM replica installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> with the \u003Ccode class=\"literal option\">--setup-ca\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># ipa-replica-install --setup-ca\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the newly created IdM DNS service records to your DNS server:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tExport the IdM DNS service records into a file in the \u003Ccode class=\"literal\">nsupdate\u003C/code> format:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ ipa dns-update-system-records --dry-run --out dns_records_file.nsupdate\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSubmit a DNS update request to your DNS server using the \u003Ccode class=\"literal\">nsupdate\u003C/code> utility and the \u003Cspan class=\"strong strong\">\u003Cstrong>dns_records_file.nsupdate\u003C/strong>\u003C/span> file. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/linux_domain_identity_authentication_and_policy_guide/dns-updates-external#dns-update-external-nsupdate\">Updating External DNS Records Using nsupdate\u003C/a> in RHEL 7 documentation. Alternatively, refer to your DNS server documentation for adding DNS records.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.4. Installing an IdM replica without integrated DNS and without a CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFollow this procedure to install an Identity Management (IdM) replica:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout integrated DNS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWithout a certificate authority (CA) by providing the required certificates manually. The assumption here is that the first server was installed without a CA.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot install a server or replica using self-signed third-party server certificates because the imported certificate files must contain the full CA certificate chain of the CA that issued the LDAP and Apache server certificates.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure your system is \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-replica-installation_installing-identity-management\" title=\"Chapter 19. Preparing the system for an IdM replica installation\">prepared for an IdM replica installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>, and provide the required certificate files by adding these options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--dirsrv-cert-file\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--dirsrv-pin\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--http-cert-file\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">--http-pin\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about the files that are provided using these options, see \u003Ca class=\"xref\" href=\"#certificates-required-to-install-ipa-server-no-ca_install-server-no-ca\" title=\"4.1. Certificates required to install an IdM server without a CA\">Section 4.1, “Certificates required to install an IdM server without a CA”\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-replica-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--dirsrv-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.crt\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--dirsrv-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.key\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--dirsrv-pin \u003Cspan class=\"emphasis\">\u003Cem>secret\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--http-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.crt\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--http-cert-file \u003Cspan class=\"emphasis\">\u003Cem>/tmp/server.key\u003C/em>\u003C/span> \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--http-pin \u003Cspan class=\"emphasis\">\u003Cem>secret\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tDo not add the \u003Ccode class=\"literal option\">--ca-cert-file\u003C/code> option. The \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> utility takes this part of the certificate information automatically from the first server you installed.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-idm-hidden-replica_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.5. Installing an IdM hidden replica\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA hidden (unadvertised) replica is an Identity Management (IdM) server that has all services running and available. However, it has no SRV records in DNS, and LDAP server roles are not enabled. Therefore, clients cannot use service discovery to detect these hidden replicas.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor further details about hidden replicas, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-the-replica-topology_planning-identity-management#the-hidden-replica-mode_planning-the-replica-topology\">The hidden replica mode\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure your system is \u003Ca class=\"link\" href=\"#preparing-the-system-for-ipa-replica-installation_installing-identity-management\" title=\"Chapter 19. Preparing the system for an IdM replica installation\">prepared for an IdM replica installation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo install a hidden replica, use the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa-replica-install --hidden-replica\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tNote that the command installs a replica without DNS SRV records and with disabled LDAP server roles.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can also change the mode of existing replica to hidden. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_managing-replication-topology_installing-identity-management#demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology\">Demotion and promotion of hidden replicas\u003C/a>\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"testing-an-ipa-replica_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.6. Testing an IdM replica\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter creating a replica, check if the replica replicates data as expected. You can use the following procedure.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a user on the new replica:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[admin@new_replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa user-add \u003Cspan class=\"emphasis\">\u003Cem>test_user\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tMake sure the user is visible on another replica:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[admin@another_replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa user-show \u003Cspan class=\"emphasis\">\u003Cem>test_user\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"connection-requests-during-an-ipa-replica-installation_install-replica\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.7. Connections performed during an IdM replica installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\u003Ca class=\"link\" href=\"#tab-requests-replica-installation_install-replica\" title=\"Table 20.1. Requests performed during an IdM replica installation\">Requests performed during an IdM replica installation\u003C/a> lists the operations performed by \u003Ccode class=\"literal\">ipa-replica-install\u003C/code>, the Identity Management (IdM) replica installation tool.\n\t\t\t\u003C/p>\u003Crh-table id=\"tab-requests-replica-installation_install-replica\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 20.1. Requests performed during an IdM replica installation\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 38%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 38%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559988017392\" scope=\"col\">Operation\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559988016304\" scope=\"col\">Protocol used\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559988015216\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988017392\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS resolution against the DNS resolvers configured on the client system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988016304\"> \u003Cp>\n\t\t\t\t\t\t\t\tDNS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988015216\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo discover the IP addresses of IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988017392\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests to ports 88 (TCP/TCP6 and UDP/UDP6) on the discovered IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988016304\"> \u003Cp>\n\t\t\t\t\t\t\t\tKerberos\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988015216\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo obtain a Kerberos ticket\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988017392\"> \u003Cp>\n\t\t\t\t\t\t\t\tJSON-RPC calls to the IdM Apache-based web-service on the discovered or configured IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988016304\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988015216\"> \u003Cp>\n\t\t\t\t\t\t\t\tIdM client enrollment; replica keys retrieval and certificate issuance if required\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988017392\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests over TCP/TCP6 to port 389 on the IdM server, using SASL GSSAPI authentication, plain LDAP, or both\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988016304\"> \u003Cp>\n\t\t\t\t\t\t\t\tLDAP\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988015216\"> \u003Cp>\n\t\t\t\t\t\t\t\tIdM client enrollment; CA certificate chain retrieval; LDAP data replication\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988017392\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequests over TCP/TCP6 to port 22 on IdM server\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988016304\"> \u003Cp>\n\t\t\t\t\t\t\t\tSSH\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988015216\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo check if the connection is working\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988017392\"> \u003Cp>\n\t\t\t\t\t\t\t\t(optionally) Access over port 8443 (TCP/TCP6) on the IdM servers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988016304\"> \u003Cp>\n\t\t\t\t\t\t\t\tHTTPS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988015216\"> \u003Cp>\n\t\t\t\t\t\t\t\tTo administer the Certificate Authority on the IdM server (only during IdM server and replica installation)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"troubleshooting-idm-replica-installation_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 21. Troubleshooting IdM replica installation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe the process for gathering information about a failing IdM replica installation, and how to resolve some common installation issues.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.1. IdM replica installation error log files\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWhen you install an Identity Management (IdM) replica, debugging information is appended to the following log files on the \u003Cspan class=\"strong strong\">\u003Cstrong>replica\u003C/strong>\u003C/span>:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/ipareplica-install.log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/ipareplica-conncheck.log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/ipaclient-install.log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/httpd/error_log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/access\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/errors\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/ipaserver-install.log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe replica installation process also appends debugging information to the following log files on the IdM \u003Cspan class=\"strong strong\">\u003Cstrong>server\u003C/strong>\u003C/span> the replica is contacting:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/httpd/error_log\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/access\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/errors\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe last line of each log file reports success or failure, and \u003Ccode class=\"literal\">ERROR\u003C/code> and \u003Ccode class=\"literal\">DEBUG\u003C/code> entries provide additional context.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation\" title=\"21.2. Reviewing IdM replica installation errors\">Reviewing IdM replica installation errors\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.2. Reviewing IdM replica installation errors\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo troubleshoot a failing IdM replica installation, review the errors at the end of the installation error log files on the new replica and the server, and use this information to resolve any corresponding issues.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges to display the contents of IdM log files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">tail\u003C/code> command to display the latest errors from the primary log file \u003Ccode class=\"literal filename\">/var/log/ipareplica-install.log\u003C/code>. The following example displays the last 10 lines.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo tail -n 10 /var/log/ipareplica-install.log\u003C/strong>\u003C/span>\n[sudo] password for user:\n  func(installer)\nFile \"/usr/lib/python3.6/site-packages/ipaserver/install/server/replicainstall.py\", line 424, in decorated\n  func(installer)\nFile \"/usr/lib/python3.6/site-packages/ipaserver/install/server/replicainstall.py\", line 785, in promote_check\n  ensure_enrolled(installer)\nFile \"/usr/lib/python3.6/site-packages/ipaserver/install/server/replicainstall.py\", line 740, in ensure_enrolled\n  raise ScriptError(\"Configuration of client side components failed!\")\n\n2020-05-28T18:24:51Z \u003Cspan class=\"strong strong\">\u003Cstrong>DEBUG The ipa-replica-install command failed, exception: ScriptError: Configuration of client side components failed!\u003C/strong>\u003C/span>\n2020-05-28T18:24:51Z \u003Cspan class=\"strong strong\">\u003Cstrong>ERROR Configuration of client side components failed!\u003C/strong>\u003C/span>\n2020-05-28T18:24:51Z \u003Cspan class=\"strong strong\">\u003Cstrong>ERROR The ipa-replica-install command failed. See /var/log/ipareplica-install.log for more information\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo review the log file interactively, open the end of the log file using the \u003Ccode class=\"literal\">less\u003C/code> utility and use the \u003Ckbd class=\"keycap\">↑\u003C/kbd> and \u003Ckbd class=\"keycap\">↓\u003C/kbd> arrow keys to navigate.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/ipareplica-install.log\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: While \u003Ccode class=\"literal filename\">/var/log/ipareplica-install.log\u003C/code> is the primary log file for a replica installation, you can gather additional troubleshooting information by repeating this review process with additional files on the replica and the server.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>On the replica:\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/ipareplica-conncheck.log\u003C/strong>\u003C/span>\n[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/ipaclient-install.log\u003C/strong>\u003C/span>\n[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/httpd/error_log\u003C/strong>\u003C/span>\n[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/access\u003C/strong>\u003C/span>\n[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/errors\u003C/strong>\u003C/span>\n[user@replica ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/ipaserver-install.log\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>On the server:\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/httpd/error_log\u003C/strong>\u003C/span>\n[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/access\u003C/strong>\u003C/span>\n[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/dirsrv/slapd-\u003Cspan class=\"emphasis\">\u003Cem>INSTANCE-NAME\u003C/em>\u003C/span>/errors\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation\" title=\"21.1. IdM replica installation error log files\">IdM replica installation error log files\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing replica installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the replica and an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.3. IdM CA installation error log files\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstalling the Certificate Authority (CA) service on an Identity Management (IdM) replica appends debugging information to several locations on the replica and the IdM server the replica communicates with.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140560001471424\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 21.1. On the replica (in order of recommended priority):\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559986083888\" scope=\"col\">Location\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559986082800\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986083888\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-ca-spawn.\u003Cspan class=\"emphasis\">\u003Cem>$TIME_OF_INSTALLATION\u003C/em>\u003C/span>.log\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986082800\"> \u003Cp>\n\t\t\t\t\t\t\t\tHigh-level issues and Python traces for the \u003Ccode class=\"literal\">pkispawn\u003C/code> installation process\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986083888\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">journalctl -u pki-tomcatd@pki-tomcat\u003C/code> output\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986082800\"> \u003Cp>\n\t\t\t\t\t\t\t\tErrors from the \u003Ccode class=\"literal\">pki-tomcatd@pki-tomcat\u003C/code> service\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986083888\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/debug.\u003Cspan class=\"emphasis\">\u003Cem>$DATE\u003C/em>\u003C/span>.log\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986082800\"> \u003Cp>\n\t\t\t\t\t\t\t\tLarge JAVA stacktraces of activity in the core of the Public Key Infrastructure (PKI) product\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986083888\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/signedAudit/ca_audit\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986082800\"> \u003Cp>\n\t\t\t\t\t\t\t\tAudit log of the PKI product\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986083888\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/system\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/ca/transactions\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/pki/pki-tomcat/catalina.\u003Cspan class=\"emphasis\">\u003Cem>$DATE\u003C/em>\u003C/span>.log\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559986082800\"> \u003Cp>\n\t\t\t\t\t\t\t\tLow-level debug data of certificate operations for service principals, hosts, and other entities that use certificates\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>On the server contacted by the replica:\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/httpd/error_log\u003C/code> log file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tInstalling the CA service on an existing IdM replica also writes debugging information to the following log file:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/var/log/ipareplica-ca-install.log\u003C/code> log file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf a full IdM replica installation fails while installing the optional CA component, no details about the CA are logged; a message is logged in the \u003Ccode class=\"literal\">/var/log/ipareplica-install.log\u003C/code> file indicating that the overall installation process failed. Red Hat recommends reviewing the log files listed above for details specific to the CA installation failure.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe only exception to this behavior is when you are installing the CA service and the root CA is an external CA. If there is an issue with the certificate from the external CA, errors are logged in \u003Ccode class=\"literal\">/var/log/ipareplica-install.log\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation\" title=\"21.4. Reviewing IdM CA installation errors\">Reviewing IdM CA installation errors\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.4. Reviewing IdM CA installation errors\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo troubleshoot a failing IdM CA installation, review the errors at the end of the CA installation error log files and use this information to resolve any corresponding issues.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges to display the contents of IdM log files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo review a log file interactively, open the end of the log file using the \u003Ccode class=\"literal\">less\u003C/code> utility and use the \u003Ckbd class=\"keycap\">↑\u003C/kbd> and \u003Ckbd class=\"keycap\">↓\u003C/kbd> arrow keys to navigate, while searching for \u003Ccode class=\"literal\">ScriptError\u003C/code> entries. The following example opens \u003Ccode class=\"literal filename\">/var/log/pki/pki-ca-spawn.\u003Cspan class=\"emphasis\">\u003Cem>$TIME_OF_INSTALLATION\u003C/em>\u003C/span>.log\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo less -N +G /var/log/pki/pki-ca-spawn.\u003Cspan class=\"emphasis\">\u003Cem>20200527185902\u003C/em>\u003C/span>.log\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGather additional troubleshooting information by repeating this review process with all the CA installation error log files.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation\" title=\"21.3. IdM CA installation error log files\">IdM CA installation error log files\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing IdM server installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-a-partial-idm-replica-installation_troubleshooting-idm-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.5. Removing a partial IdM replica installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf an IdM replica installation fails, some configuration files may be left behind. Additional attempts to install the IdM replica can fail and the installation script reports that IPA is already configured:\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example system with existing partial IdM configuration\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-replica-install\u003C/strong>\u003C/span>\nYour system may be partly configured.\nRun /usr/sbin/ipa-server-install --uninstall to clean up.\n\nIPA server is already configured on this system.\nIf you want to reinstall the IPA server, please uninstall it first using 'ipa-server-install --uninstall'.\nThe ipa-replica-install command failed. See /var/log/ipareplica-install.log for more information\u003C/pre>\n\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTo resolve this issue, uninstall IdM software from the replica, remove the replica from the IdM topology, and retry the installation process.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUninstall the IdM server software on the host you are trying to configure as an IdM replica.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@replica ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-server-install --uninstall\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn all other servers in the topology, use the \u003Ccode class=\"literal\">ipa server-del\u003C/code> command to delete any references to the replica that did not install properly.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@other-replica ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-del replica.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAttempt installing the replica.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you continue to experience difficulty installing an IdM replica because of repeated failed installations, reinstall the operating system.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOne of the requirements for installing an IdM replica is a clean system without any customization. Failed installations may have compromised the integrity of the host by unexpectedly modifying system files.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor additional details on uninstalling an IdM replica, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_identity_management/uninstalling-an-idm-replica_installing-identity-management\">Uninstalling an IdM replica\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf installation attempts fail after repeated uninstallation attempts, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the replica and an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"resolving-invalid-credential-errors_troubleshooting-idm-replica-installation\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.6. Resolving invalid credential errors\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf an IdM replica installation fails with an \u003Ccode class=\"literal\">Invalid credentials\u003C/code> error, the system clocks on the hosts may be out of sync with each other:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[27/40]: setting up initial replication\nStarting replication, please wait until this has completed.\nUpdate in progress, 15 seconds elapsed\n[ldap://server.example.com:389] reports: \u003Cspan class=\"strong strong\">\u003Cstrong>Update failed! Status: [49 - LDAP error: Invalid credentials]\u003C/strong>\u003C/span>\n\n[error] RuntimeError: Failed to start replication\nYour system may be partly configured.\nRun /usr/sbin/ipa-server-install --uninstall to clean up.\n\nipa.ipapython.install.cli.install_tool(CompatServerReplicaInstall): ERROR    Failed to start replication\nipa.ipapython.install.cli.install_tool(CompatServerReplicaInstall): ERROR    The ipa-replica-install command failed. See /var/log/ipareplica-install.log for more information\u003C/pre>\u003Cp>\n\t\t\t\tIf you use the \u003Ccode class=\"literal\">--no-ntp\u003C/code> or \u003Ccode class=\"literal\">-N\u003C/code> options to attempt the replica installation while clocks are out of sync, the installation fails because services are unable to authenticate with Kerberos.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo resolve this issue, synchronize the clocks on both hosts and retry the installation process.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must have \u003Ccode class=\"literal\">root\u003C/code> privileges to change system time.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSynchronize the system clocks manually or with \u003Ccode class=\"literal\">chronyd\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Synchronizing manually\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tDisplay the system time on the server and set the replica’s time to match.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>date\u003C/strong>\u003C/span>\nThu May 28 21:03:57 EDT 2020\n\n[user@replica ~]$ sudo timedatectl set-time \u003Cspan class=\"emphasis\">\u003Cem>'2020-05-28 21:04:00'\u003C/em>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Synchronizing with \u003Ccode class=\"literal\">chronyd\u003C/code>\u003C/strong>\u003C/span>:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/configuring-time-synchronization_configuring-basic-system-settings#using-chrony-to-configure-ntp_configuring-time-synchronization\">Using the Chrony suite to configure NTP\u003C/a> to configure and set system time with \u003Ccode class=\"literal\">chrony\u003C/code> tools.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAttempt the IdM replica installation again.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are unable to resolve a failing replica installation, and you have a Red Hat Technical Support subscription, open a Technical Support case at the \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/\">Red Hat Customer Portal\u003C/a> and provide an \u003Ccode class=\"literal\">sosreport\u003C/code> of the replica and an \u003Ccode class=\"literal\">sosreport\u003C/code> of the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sosreport\u003C/code> utility collects configuration details, logs and system information from a RHEL system. For more information about the \u003Ccode class=\"literal\">sosreport\u003C/code> utility, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592\">What is an sosreport and how to create one in Red Hat Enterprise Linux?\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_5\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.7. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#troubleshooting-idm-server-installation_installing-identity-management\" title=\"Chapter 8. Troubleshooting IdM server installation\">Troubleshooting the first IdM server installation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#troubleshooting-idm-client-installation_installing-identity-management\" title=\"Chapter 15. Troubleshooting IdM client installation\">Troubleshooting IdM client installation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#backing-up-and-restoring-idm_planning-identity-management\">Backing up and restoring IdM\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"uninstalling-an-idm-replica_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 22. Uninstalling an IdM replica\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tAs an IdM administrator, you can remove an Identity Management (IdM) replica from the topology. For more information, see \u003Ca class=\"link\" href=\"#uninstalling-an-ipa-server_installing-identity-management\" title=\"Chapter 9. Uninstalling an IdM server\">Uninstalling an IdM server\u003C/a>.\n\t\t\u003C/p>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_managing-replication-topology_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 23. Managing replication topology\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis chapter describes how to manage replication between servers in an Identity Management (IdM) domain.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/planning-the-replica-topology_planning-identity-management\">Planning the replica topology\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/installing_identity_management/uninstalling-an-ipa-server_installing-identity-management#uninstalling-an-ipa-server_installing-identity-management\">Uninstalling an IdM server\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/tuning_performance_in_identity_management/failover-load-balancing-high-availability_tuning-performance-in-idm#failover-load-balancing-high-availability_tuning-performance-in-idm\">Failover, load-balancing, and high-availability in IdM\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.1. Explaining replication agreements, topology suffixes and topology segments\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen you create a replica, Identity Management (IdM) creates a replication agreement between the initial server and the replica. The data that is replicated is then stored in topology suffixes and when two replicas have a replication agreement between their suffixes, the suffixes form a topology segment. These concepts are explained in more detail in the following sections:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments\" title=\"23.1.1. Replication agreements between IdM replicas\">Replication agreements\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments\" title=\"23.1.2. Topology suffixes\">Topology suffixes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments\" title=\"23.1.3. Topology segments\">Topology segments\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.1. Replication agreements between IdM replicas\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen an administrator creates a replica based on an existing server, Identity Management (IdM) creates a \u003Cspan class=\"emphasis\">\u003Cem>replication agreement\u003C/em>\u003C/span> between the initial server and the replica. The replication agreement ensures that the data and configuration is continuously replicated between the two servers.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIdM uses \u003Cspan class=\"emphasis\">\u003Cem>multiple read/write replica replication\u003C/em>\u003C/span>. In this configuration, all replicas joined in a replication agreement receive and provide updates, and are therefore considered suppliers and consumers. Replication agreements are always bilateral.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559984004144\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.1. Server and replica agreements\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/d06b1dd2052f1e330862ea59ba3cf9db/64_RHEL_IdM_0120_2.1.png\" alt=\"An image of two servers with two sets of replication agreements between them: a data replication agreement that pertains to their Directory Server database and a certificate replication agreement that pertains to their Certificate System data\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIdM uses two types of replication agreements:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Domain replication agreements\u003C/strong>\u003C/span> replicate the identity information.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Certificate replication agreements\u003C/strong>\u003C/span> replicate the certificate information.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tBoth replication channels are independent. Two servers can have one or both types of replication agreements configured between them. For example, when server A and server B have only domain replication agreement configured, only identity information is replicated between them, not the certificate information.\n\t\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.2. Topology suffixes\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Topology suffixes\u003C/em>\u003C/span> store the data that is replicated. IdM supports two types of topology suffixes: \u003Ccode class=\"literal\">domain\u003C/code> and \u003Ccode class=\"literal\">ca\u003C/code>. Each suffix represents a separate server, a separate replication topology.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tWhen a replication agreement is configured, it joins two topology suffixes of the same type on two different servers.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">domain\u003C/code> suffix: dc=\u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>,dc=\u003Cspan class=\"emphasis\">\u003Cem>com\u003C/em>\u003C/span>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">domain\u003C/code> suffix contains all domain-related data.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen two replicas have a replication agreement between their \u003Ccode class=\"literal\">domain\u003C/code> suffixes, they share directory data, such as users, groups, and policies.\n\t\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">ca\u003C/code> suffix: o=ipaca\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ca\u003C/code> suffix contains data for the Certificate System component. It is only present on servers with a certificate authority (CA) installed.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen two replicas have a replication agreement between their \u003Ccode class=\"literal\">ca\u003C/code> suffixes, they share certificate data.\n\t\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"figure\" id=\"idm140559983980704\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.2. Topology suffixes\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/fa33c5d5e4147da3c6802434b88b38ee/topology_suffix.png\" alt=\"topology suffix\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tAn initial topology replication agreement is set up between two servers by the \u003Ccode class=\"literal\">ipa-replica-install\u003C/code> script when installing a new replica.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"example\" id=\"idm140559985812224\">\u003Cp class=\"title\">\u003Cstrong>Example 23.1. Viewing topology suffixes\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">ipa topologysuffix-find\u003C/code> command displays a list of topology suffixes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysuffix-find\n---------------------------\n2 topology suffixes matched\n---------------------------\n  Suffix name: ca\n  Managed LDAP suffix DN: o=ipaca\n\n  Suffix name: domain\n  Managed LDAP suffix DN: dc=example,dc=com\n----------------------------\nNumber of entries returned 2\n----------------------------\u003C/pre>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.3. Topology segments\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen two replicas have a replication agreement between their suffixes, the suffixes form a \u003Cspan class=\"emphasis\">\u003Cem>topology segment\u003C/em>\u003C/span>. Each topology segment consists of a \u003Cspan class=\"emphasis\">\u003Cem>left node\u003C/em>\u003C/span> and a \u003Cspan class=\"emphasis\">\u003Cem>right node\u003C/em>\u003C/span>. The nodes represent the servers joined in the replication agreement.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTopology segments in IdM are always bidirectional. Each segment represents two replication agreements: from server A to server B, and from server B to server A. The data is therefore replicated in both directions.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559985804112\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.3. Topology segments\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/9148063b300b50cc2a573ed8067a83d4/topology_segment.png\" alt=\"topology segment\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"example\" id=\"idm140559985800288\">\u003Cp class=\"title\">\u003Cstrong>Example 23.2. Viewing topology segments\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">ipa topologysegment-find\u003C/code> command shows the current topology segments configured for the domain or CA suffixes. For example, for the domain suffix:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-find\nSuffix name: domain\n-----------------\n1 segment matched\n-----------------\n  Segment name: server1.example.com-to-server2.example.com\n  Left node: server1.example.com\n  Right node: server2.example.com\n  Connectivity: both\n----------------------------\nNumber of entries returned 1\n----------------------------\u003C/pre>\u003Cp>\n\t\t\t\t\t\tIn this example, domain-related data is only replicated between two servers: \u003Ccode class=\"literal\">server1.example.com\u003C/code> and \u003Ccode class=\"literal\">server2.example.com\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo display details for a particular segment only, use the \u003Ccode class=\"literal command\">ipa topologysegment-show\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-show\nSuffix name: domain\nSegment name: server1.example.com-to-server2.example.com\n  Segment name: server1.example.com-to-server2.example.com\n  Left node: server1.example.com\n  Right node: server2.example.com\n  Connectivity: both\u003C/pre>\u003C/div>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"con_using-the-topology-graph-to-manage-replication-topology_assembly_managing-replication-topology\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.2. Using the topology graph to manage replication topology\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe topology graph in the web UI shows the relationships between the servers in the domain. Using the Web UI, you can manipulate and transform the representation of the topology.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Accessing the topology graph\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo access the topology graph:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"guimenu\">IPA Server\u003C/span> → \u003Cspan class=\"guisubmenu\">Topology\u003C/span> → \u003Cspan class=\"guimenuitem\">Topology Graph\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you make any changes to the topology that are not immediately reflected in the graph, click \u003Cspan class=\"guibutton\">Refresh\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Interpreting the topology graph\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tServers joined in a domain replication agreement are connected by an orange arrow. Servers joined in a CA replication agreement are connected by a blue arrow.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Topology graph example: recommended topology\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe recommended topology example below shows one of the possible recommended topologies for four servers: each server is connected to at least two other servers, and more than one server is a CA server.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559987154784\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.4. Recommended topology example\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/cd55705bad2dec419d9e4ca891f40024/mng_top_rec.png\" alt=\"mng top rec\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Topology graph example: discouraged topology\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the discouraged topology example below, \u003Ccode class=\"literal\">server1\u003C/code> is a single point of failure. All the other servers have replication agreements with this server, but not with any of the other servers. Therefore, if \u003Ccode class=\"literal\">server1\u003C/code> fails, all the other servers will become isolated.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAvoid creating topologies like this.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559987147312\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.5. Discouraged topology example: Single Point of Failure\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/53e206d72acee63ae41040c834a81ded/mng_top_single.png\" alt=\"mng top single\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Customizing the topology view\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tYou can move individual topology nodes by holding and dragging the mouse:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"figure\" id=\"idm140559987141456\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.6. Moving topology graph nodes\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/a21fdc688f301a69218b178065c384a6/customize_graph_1.png\" alt=\"customize graph 1\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can zoom in and zoom out the topology graph using the mouse wheel:\n\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559987137072\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.7. Zooming the topology graph\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/69f3d9636a9fa848d665cbb9b43e923d/customize_graph_2.png\" alt=\"customize graph 2\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can move the canvas of the topology graph by holding the left mouse button:\n\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559988380912\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.8. Moving the topology graph canvas\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/c4c29e9ae8eb8437036b036ec4594021/customize_graph_3.png\" alt=\"customize graph 3\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"managing-topology-ui-set-up\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.3. Setting up replication between two servers using the Web UI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUsing the Identity Management (IdM) Web UI, you can choose two servers and create a new replication agreement between them.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in as an IdM administrator.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the topology graph, hover your mouse over one of the server nodes.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559988370576\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.9. Domain or CA options\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/00807abbb3a86dee58108ee47db1ede3/mng_top_domain_ca.png\" alt=\"mng top domain ca\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick on the \u003Ccode class=\"literal\">domain\u003C/code> or the \u003Ccode class=\"literal\">ca\u003C/code> part of the circle depending on what type of topology segment you want to create.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA new arrow representing the new replication agreement appears under your mouse pointer. Move your mouse to the other server node, and click on it.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559988363696\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.10. Creating a new segment\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/dfcde024e4a284a1a5dc8c3dac8b3c55/mng_top_drag.png\" alt=\"mng top drag\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Add topology segment\u003C/code> window, click \u003Cspan class=\"guibutton\">Add\u003C/span> to confirm the properties of the new segment.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe new topology segment between the two servers joins them in a replication agreement. The topology graph now shows the updated replication topology:\n\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559988356992\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.11. New segment created\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/95346630b2944b155eed2bfc4f86d883/mng_top_three.png\" alt=\"mng top three\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"managing-topology-ui-stop\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.4. Stopping replication between two servers using the Web UI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUsing the Identity Management (IdM) Web UI, you can remove a replication agreement from servers.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in as an IdM administrator.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick on an arrow representing the replication agreement you want to remove. This highlights the arrow.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559987074528\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.12. Topology segment highlighted\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/0e748d0749e5fc3944b347b2896460dc/mng_top_highlight.png\" alt=\"mng top highlight\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Delete\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Confirmation\u003C/code> window, click \u003Cspan class=\"guibutton\">OK\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdM removes the topology segment between the two servers, which deletes their replication agreement. The topology graph now shows the updated replication topology:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559987066736\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.13. Topology segment deleted\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/bb5fba43d75d9845fc754b18384708eb/mng_top_delete_segment.png\" alt=\"mng top delete segment\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.5. Setting up replication between two servers using the CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure replication agreements between two servers using the \u003Ccode class=\"literal\">ipa topologysegment-add\u003C/code> command.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the IdM administrator credentials.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a topology segment for the two servers. When prompted, provide:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe required topology suffix: \u003Ccode class=\"literal\">domain\u003C/code> or \u003Ccode class=\"literal\">ca\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe left node and the right node, representing the two servers\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t[Optional] A custom name for the segment\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-add\nSuffix name: \u003Cspan class=\"emphasis\">\u003Cem>domain\u003C/em>\u003C/span>\nLeft node: \u003Cspan class=\"emphasis\">\u003Cem>server1.example.com\u003C/em>\u003C/span>\nRight node: \u003Cspan class=\"emphasis\">\u003Cem>server2.example.com\u003C/em>\u003C/span>\nSegment name [server1.example.com-to-server2.example.com]: \u003Cspan class=\"emphasis\">\u003Cem>new_segment\u003C/em>\u003C/span>\n---------------------------\nAdded segment \"new_segment\"\n---------------------------\n  Segment name: new_segment\n  Left node: server1.example.com\n  Right node: server2.example.com\n  Connectivity: both\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdding the new segment joins the servers in a replication agreement.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the new segment is configured:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-show\nSuffix name: \u003Cspan class=\"emphasis\">\u003Cem>domain\u003C/em>\u003C/span>\nSegment name: \u003Cspan class=\"emphasis\">\u003Cem>new_segment\u003C/em>\u003C/span>\n  Segment name: new_segment\n  Left node: server1.example.com\n  Right node: server2.example.com\n  Connectivity: both\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"managing-topology-stop-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.6. Stopping replication between two servers using the CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can terminate replication agreements from command line using the \u003Ccode class=\"literal\">ipa topology segment-del\u003C/code> command.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the IdM administrator credentials.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t[Optional] If you do not know the name of the specific replication segment that you want to remove, display all segments available. Use the \u003Ccode class=\"literal command\">ipa topologysegment-find\u003C/code> command. When prompted, provide the required topology suffix: \u003Ccode class=\"literal\">domain\u003C/code> or \u003Ccode class=\"literal\">ca\u003C/code>. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-find\nSuffix name: \u003Cspan class=\"emphasis\">\u003Cem>domain\u003C/em>\u003C/span>\n------------------\n8 segments matched\n------------------\n  \u003Cspan class=\"emphasis\">\u003Cem>Segment name: new_segment\u003C/em>\u003C/span>\n  Left node: server1.example.com\n  Right node: server2.example.com\n  Connectivity: both\n\n...\n\n----------------------------\nNumber of entries returned 8\n----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLocate the required segment in the output.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the topology segment joining the two servers:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-del\nSuffix name: \u003Cspan class=\"emphasis\">\u003Cem>domain\u003C/em>\u003C/span>\nSegment name: \u003Cspan class=\"emphasis\">\u003Cem>new_segment\u003C/em>\u003C/span>\n-----------------------------\nDeleted segment \"new_segment\"\n-----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDeleting the segment removes the replication agreement.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the segment is no longer listed:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa topologysegment-find\nSuffix name: \u003Cspan class=\"emphasis\">\u003Cem>domain\u003C/em>\u003C/span>\n------------------\n7 segments matched\n------------------\n  Segment name: server2.example.com-to-server3.example.com\n  Left node: server2.example.com\n  Right node: server3.example.com\n  Connectivity: both\n\n...\n\n----------------------------\nNumber of entries returned 7\n----------------------------\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"managing-topology-remove-ui\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.7. Removing server from topology using the Web UI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use Identity Management (IdM) web interface to remove a server from the topology. This action does not uninstall the server components from the host.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in as an IdM administrator.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe server you want to remove is \u003Cspan class=\"strong strong\">\u003Cstrong>not\u003C/strong>\u003C/span> the only server connecting other servers with the rest of the topology; this would cause the other servers to become isolated, which is not allowed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe server you want to remove is \u003Cspan class=\"strong strong\">\u003Cstrong>not\u003C/strong>\u003C/span> your last CA or DNS server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tRemoving a server is an irreversible action. If you remove a server, the only way to introduce it back into the topology is to install a new replica on the machine.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"guimenu\">IPA Server\u003C/span> → \u003Cspan class=\"guisubmenu\">Topology\u003C/span> → \u003Cspan class=\"guimenuitem\">IPA Servers\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick on the name of the server you want to delete.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140559987231920\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.14. Selecting a server\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/968203deb86b18fe927684b18098d552/mng_top_delete.png\" alt=\"mng top delete\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Delete Server\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/installing_identity_management/uninstalling-an-ipa-server_installing-identity-management#uninstalling-an-ipa-server_installing-identity-management\">Uninstalling an IdM server\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-available-server-roles-in-the-idm-topology-using-the-idm-web-ui_assembly_managing-replication-topology\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.8. Viewing available server roles in the IdM topology using the IdM Web UI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBased on the services installed on an IdM server, it can perform various \u003Cspan class=\"emphasis\">\u003Cem>server roles\u003C/em>\u003C/span>. For example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCA server\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDNS server\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tKey recovery authority (KRA) server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor a complete list of the supported server roles, see \u003Cspan class=\"guimenu\">IPA Server\u003C/span> → \u003Cspan class=\"guisubmenu\">Topology\u003C/span> → \u003Cspan class=\"guimenuitem\">Server Roles\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRole status \u003Ccode class=\"literal\">absent\u003C/code> means that no server in the topology is performing the role.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRole status \u003Ccode class=\"literal\">enabled\u003C/code> means that one or more servers in the topology are performing the role.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"figure\" id=\"idm140559987209808\">\u003Cp class=\"title\">\u003Cstrong>Figure 23.15. Server roles in the web UI\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US/images/f57ebfa0fb2a134e972299226fed37e1/server_role_absent.png\" alt=\"server role absent\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-available-server-roles-in-the-idm-topology-using-the-idm-cli_assembly_managing-replication-topology\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.9. Viewing available server roles in the IdM topology using the IdM CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBased on the services installed on an IdM server, it can perform various \u003Cspan class=\"emphasis\">\u003Cem>server roles\u003C/em>\u003C/span>. For example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCA server\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDNS server\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tKey recovery authority (KRA) server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display all CA servers in the topology and the current CA renewal server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa config-show\n  ...\n  IPA masters: server1.example.com, server2.example.com, server3.example.com\n  \u003Cspan class=\"emphasis\">\u003Cem>IPA CA servers: server1.example.com, server2.example.com\u003C/em>\u003C/span>\n  \u003Cspan class=\"emphasis\">\u003Cem>IPA CA renewal master: server1.example.com\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, to display a list of roles enabled on a particular server, for example \u003Cspan class=\"emphasis\">\u003Cem>server.example.com\u003C/em>\u003C/span>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa server-show\nServer name: \u003Cspan class=\"emphasis\">\u003Cem>server.example.com\u003C/em>\u003C/span>\n  ...\n  \u003Cspan class=\"emphasis\">\u003Cem>Enabled server roles: CA server, DNS server, KRA server\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, use the \u003Ccode class=\"literal command\">ipa server-find --servrole\u003C/code> command to search for all servers with a particular server role enabled. For example, to search for all CA servers:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa server-find --servrole \"CA server\"\n---------------------\n2 IPA servers matched\n---------------------\n  Server name: server1.example.com\n  ...\n\n  Server name: server2.example.com\n  ...\n----------------------------\nNumber of entries returned 2\n----------------------------\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"server-roles-promote-to-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.10. Promoting a replica to a CA renewal server and CRL publisher server\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf your IdM deployment uses an embedded certificate authority (CA), one of the IdM CA servers acts as the CA renewal server, a server that manages the renewal of CA subsystem certificates. One of the IdM CA servers also acts as the IdM CRL publisher server, a server that generates certificate revocation lists.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBy default, the CA renewal server and CRL publisher server roles are installed on the first server on which the system administrator installed the CA role using the \u003Ccode class=\"literal command\">ipa-server-install\u003C/code> or \u003Ccode class=\"literal command\">ipa-ca-install\u003C/code> command. You can, however, transfer either of the two roles to any other IdM server on which the CA role is enabled.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the IdM administrator credentials.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#changing-ca-renewal_ipa-ca-renewal\">Change the current CA renewal server.\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/generating-crl-on-the-idm-ca-server_managing-certificates-in-idm#starting-crl-generation-on-idm-replica-server_generating-crl-on-the-idm-ca-server\">Configure a replica to generate CRLs.\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.11. Demoting or promoting hidden replicas\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter a replica has been installed, you can configure whether the replica is hidden or visible.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor details about hidden replicas, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/planning_identity_management/planning-the-replica-topology_planning-identity-management#the-hidden-replica-mode_planning-the-replica-topology\">The hidden replica mode\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that the replica is not the DNSSEC key master. If it is, move the service to another replica before making this replica hidden.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that the replica is not a CA renewal server. If it is, move the service to another replica before making this replica hidden. For details, see\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/ipa-ca-renewal_managing-certificates-in-idm#changing-ca-renewal_ipa-ca-renewal\">Changing and resetting IdM CA renewal server\u003C/a>\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo hide a replica:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-state replica.idm.example.com --state=hidden\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo make a replica visible again:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-state replica.idm.example.com --state=enabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo view a list of all the hidden replicas in your topology:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa config-show\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf all of your replicas are enabled, the command output does not mention hidden replicas.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-and-running-the-ipa-healthcheck-tool_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 24. Installing and running the IdM Healthcheck tool\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tLearn more about the IdM Healthcheck tool and how to install and run it.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"healthcheck-in-idm_installing-and-running-the-ipa-healthcheck-tool\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.1. Healthcheck in IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Healthcheck tool in Identity Management (IdM) helps find issues that may impact the health of your IdM environment.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe Healthcheck tool is a command line tool that can be used without Kerberos authentication.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Modules are Independent\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tHealthcheck consists of independent modules which test for:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReplication issues\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCertificate validity\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCertificate Authority infrastructure issues\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIdM and Active Directory trust issues\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCorrect file permissions and ownership settings\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Two output formats\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tHealthcheck generates the following outputs, which you can set using the \u003Ccode class=\"literal\">output-type\u003C/code> option:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">json\u003C/code>: Machine-readable output in JSON format (default)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">human\u003C/code>: Human-readable output\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can specify a different file destination with the \u003Ccode class=\"literal\">--output-file\u003C/code> option.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Results\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tEach Healthcheck module returns one of the following results:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">SUCCESS\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tconfigured as expected\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">WARNING\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tnot an error, but worth keeping an eye on or evaluating\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">ERROR\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tnot configured as expected\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">CRITICAL\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tnot configured as expected, with a high possibility for impact\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.2. Installing IdM Healthcheck\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to install the IdM Healthcheck tool.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">ipa-healthcheck\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install ipa-healthcheck\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal option\">--failures-only\u003C/code> option to have \u003Ccode class=\"literal\">ipa-healthcheck\u003C/code> only report errors. A fully-functioning IdM installation returns an empty result of \u003Ccode class=\"literal\">[]\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-healthcheck --failures-only\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>[]\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse \u003Ccode class=\"literal\">ipa-healthcheck --help\u003C/code> to see all supported arguments.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"running-idm-healthcheck_installing-and-running-the-ipa-healthcheck-tool\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.3. Running IdM Healthcheck\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tHealthcheck can be run manually or automatically using \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/installing-and-running-the-ipa-healthcheck-tool_using-idm-healthcheck-to-monitor-your-idm-environment#log-rotation_installing-and-running-the-ipa-healthcheck-tool\">log rotation\u003C/a>\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe Healthcheck tool must be installed. See \u003Ca class=\"link\" href=\"#installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool\" title=\"24.2. Installing IdM Healthcheck\">Installing IdM Healthcheck\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo run healthcheck manually, enter the \u003Ccode class=\"literal command\">ipa-healthcheck\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-healthcheck\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"_additional-resources _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tFor all options, see the man page: \u003Ccode class=\"literal\">man ipa-healthcheck\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_6\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.4. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSee the following sections of the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment\">Using IdM Healthcheck to monitor your IdM environment\u003C/a> guide for examples of using IdM Healthcheck.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/checking-services-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Checking services\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-your-idm-and-ad-trust-configuration-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Verifying your IdM and AD trust configuration\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-certificates-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Verifying certificates\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-system-certificates-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Verifying system certificates\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/checking-disk-space-using-idm-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Checking disk space\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/verifying-permissions-of-idm-configuration-files-using-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Verifying permissions of IdM configuration files\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_idm_healthcheck_to_monitor_your_idm_environment/checking-idm-replication-using-healthcheck_using-idm-healthcheck-to-monitor-your-idm-environment\">Checking replication\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 25. Installing an Identity Management server using an Ansible playbook\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tThe following sections describe how to configure a system as an IdM server by using \u003Ca class=\"link\" href=\"https://www.ansible.com/\">Ansible\u003C/a>. Configuring a system as an IdM server establishes an IdM domain and enables the system to offer IdM services to IdM clients. The deployment is managed by the \u003Ccode class=\"literal\">ipaserver\u003C/code> Ansible role.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tYou understand \u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/index.html\">Ansible\u003C/a> and IdM concepts:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAnsible roles\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAnsible nodes\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAnsible inventory\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAnsible tasks\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAnsible modules\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAnsible plays and playbooks\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"ansible-and-its-advantages-for-installing-IdM_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.1. Ansible and its advantages for installing IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tAnsible is an automation tool used to configure systems, deploy software, and perform rolling updates. Ansible includes support for Identity Management (IdM), and you can use Ansible modules to automate installation tasks such as the setup of an IdM server, replica, client, or an entire IdM topology.\n\t\t\t\u003C/p>\u003Ch5 id=\"advantages_of_using_ansible_to_install_idm\">Advantages of using Ansible to install IdM\u003C/h5>\u003Cp>\n\t\t\t\tThe following list presents advantages of installing Identity Management using Ansible in contrast to manual installation.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou do not need to log into the managed node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou do not need to configure settings on each host to be deployed individually. Instead, you can have one inventory file to deploy a complete cluster.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou can reuse an inventory file later for management tasks, for example to add users and hosts. You can reuse an inventory file even for such tasks as are not related to IdM.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.redhat.com/en/blog/automating-red-hat-identity-management-installation\">Automating Red Hat Identity Management installation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/planning_identity_management/index\">Planning Identity Management\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#preparing-the-system-for-ipa-server-installation_installing-identity-management\">Preparing the system for IdM server installation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-the-ansible-freeipa-package_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.2. Installing the ansible-freeipa package\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe following procedure describes how to install the the \u003Ccode class=\"literal package\">ansible-freeipa\u003C/code> roles.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that the controller is a Red Hat Enterprise Linux system with a valid subscription. If this is not the case, see the official Ansible documentation \u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html\">Installation guide\u003C/a> for alternative installation instructions.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that you can reach the managed node over the \u003Ccode class=\"literal\">SSH\u003C/code> protocol from the controller. Check that the managed node is listed in the \u003Ccode class=\"literal\">/root/.ssh/known_hosts\u003C/code> file of the controller.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRun the following procedure on the Ansible controller.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the required repository:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager repos --enable rhel-9-for-x86_64-appstream-rpms\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the IdM Ansible roles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install ansible-freeipa\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe roles are installed to the \u003Ccode class=\"literal\">/usr/share/ansible/roles/\u003C/code> directory.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"ansible-roles-location-in-the-file-system_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.3. Ansible roles location in the file system\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy default, the \u003Ccode class=\"literal\">ansible-freeipa\u003C/code> roles are installed to the \u003Ccode class=\"literal\">/usr/share/ansible/roles/\u003C/code> directory. The structure of the \u003Ccode class=\"literal\">ansible-freeipa\u003C/code> package is as follows:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/usr/share/ansible/roles/\u003C/code> directory stores the \u003Ccode class=\"literal\">ipaserver\u003C/code>, \u003Ccode class=\"literal\">ipareplica\u003C/code>, and \u003Ccode class=\"literal\">ipaclient\u003C/code> roles on the Ansible controller. Each role directory stores examples, a basic overview, the license and documentation about the role in a \u003Ccode class=\"literal\">README.md\u003C/code> Markdown file.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server]# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -1 /usr/share/ansible/roles/\u003C/strong>\u003C/span>\nipaclient\nipareplica\nipaserver\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/\u003C/code> directory stores the documentation about individual roles and the topology in \u003Ccode class=\"literal\">README.md\u003C/code> Markdown files. It also stores the \u003Ccode class=\"literal\">playbooks/\u003C/code> subdirectory.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server]# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -1 /usr/share/doc/ansible-freeipa/\u003C/strong>\u003C/span>\nplaybooks\nREADME-client.md\nREADME.md\nREADME-replica.md\nREADME-server.md\nREADME-topology.md\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/playbooks/\u003C/code> directory stores the example playbooks:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server]# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -1 /usr/share/doc/ansible-freeipa/playbooks/\u003C/strong>\u003C/span>\ninstall-client.yml\ninstall-cluster.yml\ninstall-replica.yml\ninstall-server.yml\nuninstall-client.yml\nuninstall-cluster.yml\nuninstall-replica.yml\nuninstall-server.yml\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.4. Setting the parameters for a deployment with an integrated DNS and an integrated CA as the root CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to configure the inventory file for installing an IdM server with an integrated CA as the root CA in an environment that uses the IdM integrated DNS solution.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe inventory in this procedure uses the \u003Ccode class=\"literal\">INI\u003C/code> format. You can, alternatively, use the \u003Ccode class=\"literal\">YAML\u003C/code> or \u003Ccode class=\"literal\">JSON\u003C/code> formats.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ mkdir MyPlaybooks\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/inventory\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the inventory file for editing. Specify the fully-qualified domain names (\u003Ccode class=\"literal\">FQDN\u003C/code>) of the host you want to use as an IdM server. Ensure that the \u003Ccode class=\"literal\">FQDN\u003C/code> meets the following criteria:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the IdM domain and realm information.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify that you want to use integrated DNS by adding the following option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal\">ipaserver_setup_dns=true\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the DNS forwarding settings. Choose one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_auto_forwarders=true\u003C/code> option if you want the installer to use forwarders from the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file. Do not use this option if the nameserver specified in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file is the localhost 127.0.0.1 address or if you are on a virtual private network and the DNS servers you are using are normally unreachable from the public internet.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_forwarders\u003C/code> option to specify your forwarders manually. The installation process adds the forwarder IP addresses to the \u003Ccode class=\"literal\">/etc/named.conf\u003C/code> file on the installed IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_no_forwarders=true\u003C/code> option to configure root DNS servers to be used instead.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tWith no DNS forwarders, your environment is isolated, and names from other DNS domains in your infrastructure are not resolved.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the DNS reverse record and zone settings. Choose from the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_allow_zone_overlap=true\u003C/code> option to allow the creation of a (reverse) zone even if the zone is already resolvable.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_reverse_zones\u003C/code> option to specify your reverse zones manually.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_no_reverse=true\u003C/code> option if you do not want the installer to create a reverse DNS zone.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tUsing IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the passwords for \u003Ccode class=\"literal\">admin\u003C/code> and for the \u003Ccode class=\"literal\">Directory Manager\u003C/code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Specify a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone to be used by the IdM server. If you do not set a custom zone, IdM will add its services to the default \u003Ccode class=\"literal\">firewalld\u003C/code> zone. The predefined default zone is \u003Ccode class=\"literal\">public\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone must exist and be permanent.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (excluding the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=true\nipaserver_auto_forwarders=true\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (including the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=true\nipaserver_auto_forwarders=true\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=true\nipaserver_auto_forwarders=true\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaserver_firewalld_zone=\u003Cspan class=\"emphasis\">\u003Cem>custom zone\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook to set up an IdM server using admin and Directory Manager passwords stored in an Ansible Vault file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server\n  hosts: ipaserver\n  become: true\n  vars_files:\n  - playbook_sensitive_data.yml\n\n  roles:\n  - role: ipaserver\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook to set up an IdM server using admin and Directory Manager passwords from an inventory file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server\n  hosts: ipaserver\n  become: true\n\n  roles:\n  - role: ipaserver\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tman \u003Ccode class=\"literal\">ipa-server-install(1)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/README-server.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.5. Setting the parameters for a deployment with external DNS and an integrated CA as the root CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to configure the inventory file for installing an IdM server with an integrated CA as the root CA in an environment that uses an external DNS solution.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe inventory file in this procedure uses the \u003Ccode class=\"literal\">INI\u003C/code> format. You can, alternatively, use the \u003Ccode class=\"literal\">YAML\u003C/code> or \u003Ccode class=\"literal\">JSON\u003C/code> formats.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ mkdir MyPlaybooks\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/inventory\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the inventory file for editing. Specify the fully-qualified domain names (\u003Ccode class=\"literal\">FQDN\u003C/code>) of the host you want to use as an IdM server. Ensure that the \u003Ccode class=\"literal\">FQDN\u003C/code> meets the following criteria:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the IdM domain and realm information.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure that the \u003Ccode class=\"literal\">ipaserver_setup_dns\u003C/code> option is set to \u003Ccode class=\"literal\">no\u003C/code> or that it is absent.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the passwords for \u003Ccode class=\"literal\">admin\u003C/code> and for the \u003Ccode class=\"literal\">Directory Manager\u003C/code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Specify a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone to be used by the IdM server. If you do not set a custom zone, IdM will add its services to the default \u003Ccode class=\"literal\">firewalld\u003C/code> zone. The predefined default zone is \u003Ccode class=\"literal\">public\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone must exist and be permanent.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (excluding the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=no\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (including the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=no\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=no\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaserver_firewalld_zone=\u003Cspan class=\"emphasis\">\u003Cem>custom zone\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook to set up an IdM server using admin and Directory Manager passwords stored in an Ansible Vault file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server\n  hosts: ipaserver\n  become: true\n  vars_files:\n  - playbook_sensitive_data.yml\n\n  roles:\n  - role: ipaserver\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook to set up an IdM server using admin and Directory Manager passwords from an inventory file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server\n  hosts: ipaserver\n  become: true\n\n  roles:\n  - role: ipaserver\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tman \u003Ccode class=\"literal\">ipa-server-install(1)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/README-server.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deploying-an-IdM-server-with-an-integrated-CA-using-an-Ansible-playbook_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.6. Deploying an IdM server with an integrated CA as the root CA using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to deploy an IdM server with an integrated certificate authority (CA) as the root CA using an Ansible playbook.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have set the parameters that correspond to your scenario by choosing one of the following procedures:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible\" title=\"25.4. Setting the parameters for a deployment with an integrated DNS and an integrated CA as the root CA\">Procedure with integrated DNS\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible\" title=\"25.5. Setting the parameters for a deployment with external DNS and an integrated CA as the root CA\">Procedure with external DNS\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-server.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your IdM deployment uses external DNS: add the DNS resource records contained in the \u003Ccode class=\"literal\">/tmp/ipa.system.records.UFRPto.db\u003C/code> file to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\nRestarting the KDC\n\u003Cspan class=\"strong strong\">\u003Cstrong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Restarting the web server\u003C/strong>\u003C/span>\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe server installation is not complete until you add the DNS records to the existing DNS servers.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your IdM deployment uses integrated DNS:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tAdd DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tRepeat this step each time after an IdM DNS server is installed.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tAdd an \u003Ccode class=\"literal\">_ntp._udp\u003C/code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.7. Setting the parameters for a deployment with an integrated DNS and an external CA as the root CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to configure the inventory file for installing an IdM server with an external CA as the root CA in an environment that uses the IdM integrated DNS solution.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe inventory file in this procedure uses the \u003Ccode class=\"literal\">INI\u003C/code> format. You can, alternatively, use the \u003Ccode class=\"literal\">YAML\u003C/code> or \u003Ccode class=\"literal\">JSON\u003C/code> formats.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ mkdir MyPlaybooks\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/inventory\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the inventory file for editing. Specify the fully-qualified domain names (\u003Ccode class=\"literal\">FQDN\u003C/code>) of the host you want to use as an IdM server. Ensure that the \u003Ccode class=\"literal\">FQDN\u003C/code> meets the following criteria:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the IdM domain and realm information.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify that you want to use integrated DNS by adding the following option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal\">ipaserver_setup_dns=true\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the DNS forwarding settings. Choose one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_auto_forwarders=true\u003C/code> option if you want the installation process to use forwarders from the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file. This option is not recommended if the nameserver specified in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file is the localhost 127.0.0.1 address or if you are on a virtual private network and the DNS servers you are using are normally unreachable from the public internet.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_forwarders\u003C/code> option to specify your forwarders manually. The installation process adds the forwarder IP addresses to the \u003Ccode class=\"literal\">/etc/named.conf\u003C/code> file on the installed IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_no_forwarders=true\u003C/code> option to configure root DNS servers to be used instead.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tWith no DNS forwarders, your environment is isolated, and names from other DNS domains in your infrastructure are not resolved.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the DNS reverse record and zone settings. Choose from the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_allow_zone_overlap=true\u003C/code> option to allow the creation of a (reverse) zone even if the zone is already resolvable.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_reverse_zones\u003C/code> option to specify your reverse zones manually.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ipaserver_no_reverse=true\u003C/code> option if you do not want the installation process to create a reverse DNS zone.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tUsing IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the passwords for \u003Ccode class=\"literal\">admin\u003C/code> and for the \u003Ccode class=\"literal\">Directory Manager\u003C/code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Specify a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone to be used by the IdM server. If you do not set a custom zone, IdM adds its services to the default \u003Ccode class=\"literal\">firewalld\u003C/code> zone. The predefined default zone is \u003Ccode class=\"literal\">public\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone must exist and be permanent.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (excluding the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=true\nipaserver_auto_forwarders=true\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (including the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=true\nipaserver_auto_forwarders=true\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=true\nipaserver_auto_forwarders=true\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaserver_firewalld_zone=\u003Cspan class=\"emphasis\">\u003Cem>custom zone\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook for the first step of the installation. Enter instructions for generating the certificate signing request (CSR) and copying it from the controller to the managed node.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server Step 1\n  hosts: ipaserver\n  become: true\n  vars_files:\n  - playbook_sensitive_data.yml\n  vars:\n    ipaserver_external_ca: true\n\n  roles:\n  - role: ipaserver\n    state: present\n\n  post_tasks:\n  - name: Copy CSR /root/ipa.csr from node to \"{{ groups.ipaserver[0] + '-ipa.csr' }}\"\n    fetch:\n      src: /root/ipa.csr\n      dest: \"{{ groups.ipaserver[0] + '-ipa.csr' }}\"\n      flat: true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate another playbook for the final step of the installation.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server Step 2\n  hosts: ipaserver\n  become: true\n  vars_files:\n  - playbook_sensitive_data.yml\n  vars:\n    ipaserver_external_cert_files:\n      - \"/root/servercert20240601.pem\"\n      - \"/root/cacert.pem\"\n\n  pre_tasks:\n  - name: Copy \"{{ groups.ipaserver[0] }}-{{ item }}\" to \"/root/{{ item }}\" on node\n    ansible.builtin.copy:\n      src: \"{{ groups.ipaserver[0] }}-{{ item }}\"\n      dest: \"/root/{{ item }}\"\n      force: true\n    with_items:\n    - servercert20240601.pem\n    - cacert.pem\n\n  roles:\n  - role: ipaserver\n    state: present\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tman \u003Ccode class=\"literal\">ipa-server-install(1)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/README-server.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.8. Setting the parameters for a deployment with external DNS and an external CA as the root CA\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to configure the inventory file for installing an IdM server with an external CA as the root CA in an environment that uses an external DNS solution.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe inventory file in this procedure uses the \u003Ccode class=\"literal\">INI\u003C/code> format. You can, alternatively, use the \u003Ccode class=\"literal\">YAML\u003C/code> or \u003Ccode class=\"literal\">JSON\u003C/code> formats.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ mkdir MyPlaybooks\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">~/MyPlaybooks/inventory\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the inventory file for editing. Specify the fully-qualified domain names (\u003Ccode class=\"literal\">FQDN\u003C/code>) of the host you want to use as an IdM server. Ensure that the \u003Ccode class=\"literal\">FQDN\u003C/code> meets the following criteria:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly alphanumeric characters and hyphens (-) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the IdM domain and realm information.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure that the \u003Ccode class=\"literal\">ipaserver_setup_dns\u003C/code> option is set to \u003Ccode class=\"literal\">no\u003C/code> or that it is absent.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSpecify the passwords for \u003Ccode class=\"literal\">admin\u003C/code> and for the \u003Ccode class=\"literal\">Directory Manager\u003C/code>. Use the Ansible Vault to store the password, and reference the Vault file from the playbook file. Alternatively and less securely, specify the passwords directly in the inventory file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Specify a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone to be used by the IdM server. If you do not set a custom zone, IdM will add its services to the default \u003Ccode class=\"literal\">firewalld\u003C/code> zone. The predefined default zone is \u003Ccode class=\"literal\">public\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone must exist and be permanent.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (excluding the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=no\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with the required server information (including the passwords)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=no\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory file with a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[ipaserver]\nserver.idm.example.com\n\n[ipaserver:vars]\nipaserver_domain=idm.example.com\nipaserver_realm=IDM.EXAMPLE.COM\nipaserver_setup_dns=no\nipaadmin_password=MySecretPassword123\nipadm_password=MySecretPassword234\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaserver_firewalld_zone=\u003Cspan class=\"emphasis\">\u003Cem>custom zone\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook for the first step of the installation. Enter instructions for generating the certificate signing request (CSR) and copying it from the controller to the managed node.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server Step 1\n  hosts: ipaserver\n  become: true\n  vars_files:\n  - playbook_sensitive_data.yml\n  vars:\n    ipaserver_external_ca: true\n\n  roles:\n  - role: ipaserver\n    state: present\n\n  post_tasks:\n  - name: Copy CSR /root/ipa.csr from node to \"{{ groups.ipaserver[0] + '-ipa.csr' }}\"\n    fetch:\n      src: /root/ipa.csr\n      dest: \"{{ groups.ipaserver[0] + '-ipa.csr' }}\"\n      flat: true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate another playbook for the final step of the installation.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to configure IPA server Step 2\n  hosts: ipaserver\n  become: true\n  vars_files:\n  - playbook_sensitive_data.yml\n  vars:\n    ipaserver_external_cert_files:\n      - \"/root/servercert20240601.pem\"\n      - \"/root/cacert.pem\"\n\n  pre_tasks:\n  - name: Copy \"{{ groups.ipaserver[0] }}-{{ item }}\" to \"/root/{{ item }}\" on node\n    ansible.builtin.copy:\n      src: \"{{ groups.ipaserver[0] }}-{{ item }}\"\n      dest: \"/root/{{ item }}\"\n      force: true\n    with_items:\n    - servercert20240601.pem\n    - cacert.pem\n\n  roles:\n  - role: ipaserver\n    state: present\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management\">Installing an IdM server: Without integrated DNS, with an external CA as the root CA\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tman \u003Ccode class=\"literal\">ipa-server-install(1)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/README-server.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deploying-an-IdM-server-with-an-external-CA-using-an-Ansible-playbook_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.9. Deploying an IdM server with an external CA as the root CA using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to deploy an IdM server with an external certificate authority (CA) as the root CA using an Ansible playbook.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have set the parameters that correspond to your scenario by choosing one of the following procedures:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible\" title=\"25.7. Setting the parameters for a deployment with an integrated DNS and an external CA as the root CA\">Procedure with integrated DNS\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible\" title=\"25.8. Setting the parameters for a deployment with external DNS and an external CA as the root CA\">Procedure with external DNS\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook with the instructions for the first step of the installation, for example \u003Ccode class=\"literal\">install-server-step1.yml\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --vault-password-file=password_file -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-server-step1.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLocate the \u003Ccode class=\"literal\">ipa.csr\u003C/code> certificate signing request file on the controller and submit it to the external CA.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPlace the IdM CA certificate signed by the external CA in the controller file system so that the playbook in the next step can find it.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook with the instructions for the final step of the installation, for example \u003Ccode class=\"literal\">install-server-step2.yml\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-server-step2.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your IdM deployment uses external DNS: add the DNS resource records contained in the \u003Ccode class=\"literal\">/tmp/ipa.system.records.UFRPto.db\u003C/code> file to the existing external DNS servers. The process of updating the DNS records varies depending on the particular DNS solution.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\nRestarting the KDC\n\u003Cspan class=\"strong strong\">\u003Cstrong>Please add records in this file to your DNS system: /tmp/ipa.system.records.UFRBto.db\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Restarting the web server\u003C/strong>\u003C/span>\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe server installation is not complete until you add the DNS records to the existing DNS servers.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your IdM deployment uses integrated DNS:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tAdd DNS delegation from the parent domain to the IdM DNS domain. For example, if the IdM DNS domain is \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>idm.example.com\u003C/em>\u003C/span>\u003C/code>, add a name server (NS) record to the \u003Ccode class=\"literal\">example.com\u003C/code> parent domain.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tRepeat this step each time after an IdM DNS server is installed.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tAdd an \u003Ccode class=\"literal\">_ntp._udp\u003C/code> service (SRV) record for your time server to your IdM DNS. The presence of the SRV record for the time server of the newly-installed IdM server in IdM DNS ensures that future replica and client installations are automatically configured to synchronize with the time server used by this primary IdM server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.10. Uninstalling an IdM server using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn an existing Identity Management (IdM) deployment, \u003Cspan class=\"strong strong\">\u003Cstrong>replica\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>server\u003C/strong>\u003C/span> are interchangeable terms.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tComplete this procedure to uninstall an IdM replica using an Ansible playbook. In this example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIdM configuration is uninstalled from \u003Cspan class=\"strong strong\">\u003Cstrong>server123.idm.example.com\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>server123.idm.example.com\u003C/strong>\u003C/span> and the associated host entry are removed from the IdM topology.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the control node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have created an \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management\">Ansible inventory file\u003C/a> with the fully-qualified domain name (FQDN) of the IdM server in the \u003Cspan class=\"strong strong\">\u003Cstrong>~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span> directory.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have stored your \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> in the \u003Cspan class=\"strong strong\">\u003Cstrong>secret.yml\u003C/strong>\u003C/span> Ansible vault.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor the \u003Ccode class=\"literal\">ipaserver_remove_from_topology\u003C/code> option to work, the system must be running on RHEL 9.3 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the managed node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe system is running on RHEL 9.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate your Ansible playbook file \u003Cspan class=\"strong strong\">\u003Cstrong>uninstall-server.yml\u003C/strong>\u003C/span> with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to uninstall an IdM replica\n  hosts: ipaserver\n  become: true\n\n  roles:\n  - role: ipaserver\n    ipaserver_remove_from_domain: true\n    state: absent\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipaserver_remove_from_domain\u003C/code> option unenrolls the host from the IdM topology.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf the removal of server123.idm.example.com should lead to a disconnected topology, the removal will be aborted. For more information, see \u003Ca class=\"link\" href=\"#using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible\" title=\"25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology\">Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUninstall the replica:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --vault-password-file=password_file -v -i &lt;path_to_inventory_directory&gt;/inventory &lt;path_to_playbooks_directory&gt;/uninstall-server.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that all name server (NS) DNS records pointing to \u003Cspan class=\"strong strong\">\u003Cstrong>server123.idm.example.com\u003C/strong>\u003C/span> are deleted from your DNS zones. This applies regardless of whether you use integrated DNS managed by IdM or external DNS. For more information on how to delete DNS records from IdM, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/working_with_dns_in_identity_management/managing-dns-records-in-idm_working-with-dns-in-identity-management#deleting-dns-records-in-the-idm-cli_managing-dns-records-in-idm\">Deleting DNS records in the IdM CLI\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn an existing Identity Management (IdM) deployment, \u003Cspan class=\"strong strong\">\u003Cstrong>replica\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>server\u003C/strong>\u003C/span> are interchangeable terms.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tComplete this procedure to uninstall an IdM replica using an Ansible playbook even if this results in a disconnected IdM topology. In the example, \u003Cspan class=\"strong strong\">\u003Cstrong>server456.idm.example.com\u003C/strong>\u003C/span> is used to remove the replica and the associated host entry with the FQDN of \u003Cspan class=\"strong strong\">\u003Cstrong>server123.idm.example.com\u003C/strong>\u003C/span> from the topology, leaving certain replicas disconnected from \u003Cspan class=\"strong strong\">\u003Cstrong>server456.idm.example.com\u003C/strong>\u003C/span> and the rest of the topology.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf removing a replica from the topology using only the \u003Ccode class=\"literal\">remove_server_from_domain\u003C/code> does not result in a disconnected topology, no other options are required. If the result is a disconnected topology, you must specify which part of the domain you want to preserve. In that case, you must do the following:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSpecify the \u003Ccode class=\"literal\">ipaserver_remove_on_server\u003C/code> value.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSet \u003Ccode class=\"literal\">ipaserver_ignore_topology_disconnect\u003C/code> to True.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the control node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe system is running on RHEL 9.3 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have created an \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management\">Ansible inventory file\u003C/a> with the fully-qualified domain name (FQDN) of the IdM server in the \u003Cspan class=\"strong strong\">\u003Cstrong>~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span> directory.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have stored your \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> in the \u003Cspan class=\"strong strong\">\u003Cstrong>secret.yml\u003C/strong>\u003C/span> Ansible vault.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the managed node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe system is running on 9 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate your Ansible playbook file \u003Cspan class=\"strong strong\">\u003Cstrong>uninstall-server.yml\u003C/strong>\u003C/span> with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to uninstall an IdM replica\n  hosts: ipaserver\n  become: true\n\n  roles:\n  - role: ipaserver\n    ipaserver_remove_from_domain: true\n    ipaserver_remove_on_server: server456.idm.example.com\n    ipaserver_ignore_topology_disconnect: true\n    state: absent\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tUnder normal circumstances, if the removal of server123 does not result in a disconnected topology: if the value for \u003Ccode class=\"literal\">ipaserver_remove_on_server\u003C/code> is not set, the replica on which server123 is removed is automatically determined using the replication agreements of server123.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUninstall the replica:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --vault-password-file=password_file -v -i &lt;path_to_inventory_directory&gt;/hosts &lt;path_to_playbooks_directory&gt;/uninstall-server.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that all name server (NS) DNS records pointing to \u003Cspan class=\"strong strong\">\u003Cstrong>server123.idm.example.com\u003C/strong>\u003C/span> are deleted from your DNS zones. This applies regardless of whether you use integrated DNS managed by IdM or external DNS. For more information on how to delete DNS records from IdM, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/working_with_dns_in_identity_management/managing-dns-records-in-idm_working-with-dns-in-identity-management#deleting-dns-records-in-the-idm-cli_managing-dns-records-in-idm\">Deleting DNS records in the IdM CLI\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#inventory-basics-formats-hosts-and-groups\">Inventory basics: formats, hosts, and groups\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou can see sample Ansible playbooks for installing an IdM server and a list of possible variables in the \u003Ca class=\"link\" href=\"https://github.com/freeipa/ansible-freeipa/tree/master/roles/ipaserver\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code> upstream documentation\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 26. Installing an Identity Management replica using an Ansible playbook\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tConfiguring a system as an IdM replica by using \u003Ca class=\"link\" href=\"https://www.ansible.com/\">Ansible\u003C/a> enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe deployment is managed by the \u003Ccode class=\"literal\">ipareplica\u003C/code> Ansible role. The role can use the autodiscovery mode for identifying the IdM servers, domain and other settings. However, if you deploy multiple replicas in a tier-like model, with different groups of replicas being deployed at different times, you must define specific servers or replicas for each group.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/installing_identity_management/index#installing-the-ansible-freeipa-package_server-ansible\">ansible-freeipa\u003C/a> package on the Ansible control node.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou understand the general \u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/index.html\">Ansible\u003C/a> and IdM concepts.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index#planning-the-replica-topology_planning-identity-management\">planned the replica topology in your deployment\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.1. Specifying the base, server and client variables for installing the IdM replica\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to configure the inventory file for installing an IdM replica.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have configured your Ansible control node to meet the following requirements:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package on the Ansible controller.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the inventory file for editing. Specify the fully-qualified domain names (FQDN) of the hosts to become IdM replicas. The FQDNs must be valid DNS names:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly numbers, alphabetic characters, and hyphens (\u003Ccode class=\"literal\">-\u003C/code>) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of a simple inventory hosts file with only the replicas' FQDN defined\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipareplicas]\nreplica1.idm.example.com\nreplica2.idm.example.com\nreplica3.idm.example.com\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the IdM server is already deployed and the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Provide additional information in the inventory file based on how you have designed your topology:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Scenario 1\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you want to avoid autodiscovery and have all replicas listed in the \u003Ccode class=\"literal\">[ipareplicas]\u003C/code> section use a specific IdM server, set the server in the \u003Ccode class=\"literal\">[ipaservers]\u003C/code> section of the inventory file.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory hosts file with the FQDN of the IdM server and replicas defined\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaservers]\nserver.idm.example.com\n\n[ipareplicas]\nreplica1.idm.example.com\nreplica2.idm.example.com\nreplica3.idm.example.com\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Scenario 2\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAlternatively, if you want to avoid autodiscovery but want to deploy specific replicas with specific servers, set the servers for specific replicas individually in the \u003Ccode class=\"literal\">[ipareplicas]\u003C/code> section in the inventory file.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory file with a specific IdM server defined for a specific replica\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaservers]\nserver.idm.example.com\nreplica1.idm.example.com\n\n[ipareplicas]\nreplica2.idm.example.com\n\u003Cspan class=\"strong strong\">\u003Cstrong>replica3.idm.example.com ipareplica_servers=replica1.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn the example above, \u003Ccode class=\"literal\">replica3.idm.example.com\u003C/code> uses the already deployed \u003Ccode class=\"literal\">replica1.idm.example.com\u003C/code> as its replication source.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Scenario 3\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you are deploying several replicas in one batch and time is a concern to you, multitier replica deployment can be useful for you. Define specific groups of replicas in the inventory file, for example \u003Ccode class=\"literal\">[ipareplicas_tier1]\u003C/code> and \u003Ccode class=\"literal\">[ipareplicas_tier2]\u003C/code>, and design separate plays for each group in the \u003Ccode class=\"literal\">install-replica.yml\u003C/code> playbook.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory file with replica tiers defined\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaservers]\nserver.idm.example.com\n\n\u003Cspan class=\"strong strong\">\u003Cstrong>[ipareplicas_tier1]\u003C/strong>\u003C/span>\nreplica1.idm.example.com\n\n\u003Cspan class=\"strong strong\">\u003Cstrong>[ipareplicas_tier2]\u003C/strong>\u003C/span>\nreplica2.idm.example.com \\ ipareplica_servers=replica1.idm.example.com,server.idm.example.com\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe first entry in \u003Ccode class=\"literal\">ipareplica_servers\u003C/code> will be used. The second entry will be used as a fallback option. When using multiple tiers for deploying IdM replicas, you must have separate tasks in the playbook to first deploy replicas from tier1 and then replicas from tier2:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of a playbook file with different plays for different replica groups\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">---\n- name: Playbook to configure IPA replicas (tier1)\n  hosts: ipareplicas_tier1\n  become: true\n\n  roles:\n  - role: ipareplica\n    state: present\n\n- name: Playbook to configure IPA replicas (tier2)\n  hosts: ipareplicas_tier2\n  become: true\n\n  roles:\n  - role: ipareplica\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Provide additional information regarding \u003Ccode class=\"literal\">firewalld\u003C/code> and DNS:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Scenario 1\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you want the replica to use a specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone, for example an internal one, you can specify it in the inventory file. If you do not set a custom zone, IdM will add its services to the default \u003Ccode class=\"literal\">firewalld\u003C/code> zone. The predefined default zone is \u003Ccode class=\"literal\">public\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tThe specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone must exist and be permanent.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of a simple inventory hosts file with a custom \u003Ccode class=\"literal\">firewalld\u003C/code> zone\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaservers]\nserver.idm.example.com\n\n[ipareplicas]\nreplica1.idm.example.com\nreplica2.idm.example.com\nreplica3.idm.example.com\n[...]\n\n[ipareplicas:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipareplica_firewalld_zone=\u003Cspan class=\"emphasis\">\u003Cem>custom zone\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Scenario 2\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you want the replica to host the IdM DNS service, add the \u003Cspan class=\"strong strong\">\u003Cstrong>ipareplica_setup_dns=true\u003C/strong>\u003C/span> line to the \u003Ccode class=\"literal\">[ipareplicas:vars]\u003C/code> section. Additionally, specify if you want to use per-server DNS forwarders:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTo configure per-server forwarders, add the \u003Ccode class=\"literal\">ipareplica_forwarders\u003C/code> variable and a list of strings to the \u003Ccode class=\"literal\">[ipareplicas:vars]\u003C/code> section, for example: \u003Cspan class=\"strong strong\">\u003Cstrong>ipareplica_forwarders=192.0.2.1,192.0.2.2\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTo configure no per-server forwarders, add the following line to the \u003Ccode class=\"literal\">[ipareplicas:vars]\u003C/code> section: \u003Cspan class=\"strong strong\">\u003Cstrong>ipareplica_no_forwarders=true\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTo configure per-server forwarders based on the forwarders listed in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file of the replica, add the \u003Ccode class=\"literal\">ipareplica_auto_forwarders\u003C/code> variable to the \u003Ccode class=\"literal\">[ipareplicas:vars]\u003C/code> section.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory file with instructions to set up DNS and per-server forwarders on the replicas\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaservers]\nserver.idm.example.com\n\n[ipareplicas]\nreplica1.idm.example.com\nreplica2.idm.example.com\nreplica3.idm.example.com\n[...]\n\n[ipareplicas:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipareplica_setup_dns=true\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipareplica_forwarders=192.0.2.1,192.0.2.2\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Scenario 3\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tSpecify the DNS resolver using the \u003Ccode class=\"literal\">ipaclient_configure_dns_resolve\u003C/code> and \u003Ccode class=\"literal\">ipaclient_dns_servers\u003C/code> options (if available) to simplify cluster deployments. This is especially useful if your IdM deployment is using integrated DNS:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>An inventory file snippet specifying a DNS resolver:\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[...]\n[ipaclient:vars]\nipaclient_configure_dns_resolver=true\nipaclient_dns_servers=192.168.100.1\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipaclient_dns_servers\u003C/code> list must contain only IP addresses. Host names are not allowed.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/ipareplica/README.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.2. Specifying the credentials for installing the IdM replica using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to configure the authorization for installing the IdM replica.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have configured your Ansible control node to meet the following requirements:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package on the Ansible controller.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the \u003Cspan class=\"strong strong\">\u003Cstrong>password of a user authorized to deploy replicas\u003C/strong>\u003C/span>, for example the IdM \u003Ccode class=\"literal\">admin\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRed Hat recommends using the Ansible Vault to store the password, and referencing the Vault file from the playbook file, for example \u003Ccode class=\"literal\">install-replica.yml\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook file using principal from inventory file and password from an Ansible Vault file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">- name: Playbook to configure IPA replicas\n  hosts: ipareplicas\n  become: true\n  vars_files:\n  - \u003Ccode class=\"literal\">playbook_sensitive_data.yml\u003C/code>\n\n  roles:\n  - role: ipareplica\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor details how to use Ansible Vault, see the official \u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/user_guide/vault.html\">Ansible Vault\u003C/a> documentation.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tLess securely, provide the credentials of \u003Ccode class=\"literal\">admin\u003C/code> directly in the inventory file. Use the \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> option in the \u003Ccode class=\"literal\">[ipareplicas:vars]\u003C/code> section of the inventory file. The inventory file and the \u003Ccode class=\"literal\">install-replica.yml\u003C/code> playbook file can then look as follows:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory hosts.replica file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[...]\n[ipareplicas:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_password=Secret123\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook using principal and password from inventory file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">- name: Playbook to configure IPA replicas\n  hosts: ipareplicas\n  become: true\n\n  roles:\n  - role: ipareplica\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlternatively but also less securely, provide the credentials of another user authorized to deploy a replica directly in the inventory file. To specify a different authorized user, use the \u003Ccode class=\"literal\">ipaadmin_principal\u003C/code> option for the user name, and the \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> option for the password. The inventory file and the \u003Ccode class=\"literal\">install-replica.yml\u003C/code> playbook file can then look as follows:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory hosts.replica file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">[...]\n[ipareplicas:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_principal=my_admin\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_password=my_admin_secret123\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook using principal and password from inventory file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"literallayout\">- name: Playbook to configure IPA replicas\n  hosts: ipareplicas\n  become: true\n\n  roles:\n  - role: ipareplica\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAs of RHEL 9.5, during the installation of an IdM replica, checking if the provided Kerberos principal has the required privilege also extends to checking user ID overrides. As a result, you can deploy a replica using the credentials of an AD administrator that is configured to act as an IdM administrator.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/ipareplica/README.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deploying-an-IdM-replica-using-an-Ansible-playbook_replica-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.3. Deploying an IdM replica using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to use an Ansible playbook to deploy an IdM replica.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have configured \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management#specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible\">the inventory file for installing an IdM replica\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have configured \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management#specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible\">the authorization for installing the IdM replica\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-replica.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-an-idm-replica-using-an-ansible-playbook_replica-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.4. Uninstalling an IdM replica using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn an existing Identity Management (IdM) deployment, \u003Cspan class=\"strong strong\">\u003Cstrong>replica\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>server\u003C/strong>\u003C/span> are interchangeable terms. For information on how to uninstall an IdM server, see \u003Ca class=\"link\" href=\"#uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible\" title=\"25.10. Uninstalling an IdM server using an Ansible playbook\">Uninstalling an IdM server using an Ansible playbook\u003C/a> or \u003Ca class=\"link\" href=\"#using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible\" title=\"25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology\">Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/overview-of-identity-management-and-access-control-planning-identity-management#introduction-to-ipa-servers-and-clients_overview-of-idm-and-access-control\">Introduction to IdM servers and clients\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 27. Installing an Identity Management client using an Ansible playbook\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tLearn more about how to configure a system as an Identity Management (IdM) client by using \u003Ca class=\"link\" href=\"https://www.ansible.com/\">Ansible\u003C/a>. Configuring a system as an IdM client enrolls it into an IdM domain and enables the system to use IdM services on IdM servers in the domain.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe deployment is managed by the \u003Ccode class=\"literal\">ipaclient\u003C/code> Ansible role. By default, the role uses the autodiscovery mode for identifying the IdM servers, domain and other settings. The role can be modified to have the Ansible playbook use the settings specified, for example in the inventory file.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#installing-the-ansible-freeipa-package_server-ansible\">ansible-freeipa\u003C/a> package on the Ansible control node.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou understand the general \u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/index.html\">Ansible\u003C/a> and IdM concepts.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.1. Setting the parameters of the inventory file for the autodiscovery client installation mode\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo install an Identity Management (IdM) client using an Ansible playbook, configure the target host parameters in an inventory file, for example \u003Ccode class=\"literal\">inventory\u003C/code>:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe information about the host\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe authorization for the task\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe inventory file can be in one of many formats, depending on the inventory plugins you have. The \u003Ccode class=\"literal\">INI-like\u003C/code> format is one of Ansible’s defaults and is used in the examples below.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo use smart cards with the graphical user interface in RHEL, ensure that you include the \u003Ccode class=\"literal\">ipaclient_mkhomedir\u003C/code> variable in your Ansible playbook.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOpen your \u003Ccode class=\"literal\">inventory\u003C/code> file for editing.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the fully-qualified hostname (FQDN) of the host to become an IdM client. The fully qualified domain name must be a valid DNS name:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly numbers, alphabetic characters, and hyphens (\u003Ccode class=\"literal\">-\u003C/code>) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case. No capital letters are allowed.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the SRV records are set properly in the IdM DNS zone, the script automatically discovers all the other required values.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of a simple inventory hosts file with only the client FQDN defined\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaclients]\nclient.idm.example.com\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the credentials for enrolling the client. The following authentication methods are available:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>password of a user authorized to enroll clients\u003C/strong>\u003C/span>. This is the default option.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRed Hat recommends using the Ansible Vault to store the password, and referencing the Vault file from the playbook file, for example \u003Ccode class=\"literal\">install-client.yml\u003C/code>, directly:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook file using principal from inventory file and password from an Ansible Vault file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">- name: Playbook to configure IPA clients with username/password\n  hosts: ipaclients\n  become: true\n  vars_files:\n  - \u003Cspan class=\"strong strong\">\u003Cstrong>playbook_sensitive_data.yml\u003C/strong>\u003C/span>\n\n  roles:\n  - role: ipaclient\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tLess securely, provide the credentials of \u003Ccode class=\"literal\">admin\u003C/code> using the \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> option in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file. Alternatively, to specify a different authorized user, use the \u003Ccode class=\"literal\">ipaadmin_principal\u003C/code> option for the user name, and the \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> option for the password. The \u003Ccode class=\"literal\">inventory/hosts\u003C/code> inventory file and the \u003Ccode class=\"literal\">install-client.yml\u003C/code> playbook file can then look as follows:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory hosts file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[...]\n[ipaclients:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_principal=my_admin\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_password=Secret123\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example Playbook using principal and password from inventory file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">- name: Playbook to unconfigure IPA clients\n  hosts: ipaclients\n  become: true\n\n  roles:\n  - role: ipaclient\n    state: true\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>client keytab\u003C/strong>\u003C/span> from the previous enrollment if it is still available.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis option is available if the system was previously enrolled as an Identity Management client. To use this authentication method, uncomment the \u003Ccode class=\"literal\">#ipaclient_keytab\u003C/code> option, specifying the path to the file storing the keytab, for example in the \u003Ccode class=\"literal\">[ipaclient:vars]\u003C/code> section of \u003Ccode class=\"literal\">inventory/hosts\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tA \u003Cspan class=\"strong strong\">\u003Cstrong>random, one-time password\u003C/strong>\u003C/span> (OTP) to be generated during the enrollment. To use this authentication method, use the \u003Ccode class=\"literal\">ipaclient_use_otp=true\u003C/code> option in your inventory file. For example, you can uncomment the \u003Ccode class=\"literal\">ipaclient_use_otp=true\u003C/code> option in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file. Note that with OTP you must also specify one of the following options:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>password of a user authorized to enroll clients\u003C/strong>\u003C/span>, for example by providing a value for \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>admin keytab\u003C/strong>\u003C/span>, for example by providing a value for \u003Ccode class=\"literal\">ipaadmin_keytab\u003C/code> in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of \u003Ccode class=\"literal\">inventory/hosts\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Specify the DNS resolver using the \u003Ccode class=\"literal\">ipaclient_configure_dns_resolve\u003C/code> and \u003Ccode class=\"literal\">ipaclient_dns_servers\u003C/code> options (if available) to simplify cluster deployments. This is especially useful if your IdM deployment is using integrated DNS:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>An inventory file snippet specifying a DNS resolver:\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[...]\n[ipaclients:vars]\nipaadmin_password: \"{{ ipaadmin_password }}\"\nipaclient_domain=idm.example.com\nipaclient_configure_dns_resolver=true\nipaclient_dns_servers=192.168.100.1\u003C/pre>\n\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipaclient_dns_servers\u003C/code> list must contain only IP addresses. Host names are not allowed.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStarting with RHEL 9.3, you can also specify the \u003Ccode class=\"literal\">ipaclient_subid: true\u003C/code> option to have subid ranges configured for IdM users on the IdM level.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/ipaclient/README.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_identity_management/index#assembly_managing-subid-ranges-manually_configuring-and-managing-idm\">Managing subID ranges manually\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.2. Setting the parameters of the inventory file when autodiscovery is not possible during client installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo install an Identity Management client using an Ansible playbook, configure the target host parameters in an inventory file, for example \u003Ccode class=\"literal\">inventory/hosts\u003C/code>:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe information about the host, the IdM server and the IdM domain or the IdM realm\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe authorization for the task\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe inventory file can be in one of many formats, depending on the inventory plugins you have. The \u003Ccode class=\"literal\">INI-like\u003C/code> format is one of Ansible’s defaults and is used in the examples below.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo use smart cards with the graphical user interface in RHEL, ensure that you include the \u003Ccode class=\"literal\">ipaclient_mkhomedir\u003C/code> variable in your Ansible playbook.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the fully-qualified hostname (FQDN) of the host to become an IdM client. The fully qualified domain name must be a valid DNS name:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly numbers, alphabetic characters, and hyphens (\u003Ccode class=\"literal\">-\u003C/code>) are allowed. For example, underscores are not allowed and can cause DNS failures.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host name must be all lower-case. No capital letters are allowed.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify other options in the relevant sections of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe FQDN of the servers in the \u003Ccode class=\"literal\">[ipaservers]\u003C/code> section to indicate which IdM server the client will be enrolled with\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOne of the two following options:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipaclient_domain\u003C/code> option in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section to indicate the DNS domain name of the IdM server the client will be enrolled with\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipaclient_realm\u003C/code> option in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section to indicate the name of the Kerberos realm controlled by the IdM server\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example of an inventory hosts file with the client FQDN, the server FQDN and the domain defined\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[ipaclients]\n\u003Cspan class=\"strong strong\">\u003Cstrong>client.idm.example.com\u003C/strong>\u003C/span>\n\n[ipaservers]\n\u003Cspan class=\"strong strong\">\u003Cstrong>server.idm.example.com\u003C/strong>\u003C/span>\n\n[ipaclients:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaclient_domain=idm.example.com\u003C/strong>\u003C/span>\n[...]\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the credentials for enrolling the client. The following authentication methods are available:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>password of a user authorized to enroll clients\u003C/strong>\u003C/span>. This is the default option.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRed Hat recommends using the Ansible Vault to store the password, and referencing the Vault file from the playbook file, for example \u003Ccode class=\"literal\">install-client.yml\u003C/code>, directly:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example playbook file using principal from inventory file and password from an Ansible Vault file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">- name: Playbook to configure IPA clients with username/password\n  hosts: ipaclients\n  become: true\n  vars_files:\n  - \u003Cspan class=\"strong strong\">\u003Cstrong>playbook_sensitive_data.yml\u003C/strong>\u003C/span>\n\n  roles:\n  - role: ipaclient\n    state: present\u003C/pre>\n\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tLess securely, the credentials of \u003Ccode class=\"literal\">admin\u003C/code> to be provided using the \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> option in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file. Alternatively, to specify a different authorized user, use the \u003Ccode class=\"literal\">ipaadmin_principal\u003C/code> option for the user name, and the \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> option for the password. The \u003Ccode class=\"literal\">install-client.yml\u003C/code> playbook file can then look as follows:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example inventory hosts file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">[...]\n[ipaclients:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_principal=my_admin\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_password=Secret123\u003C/strong>\u003C/span>\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example Playbook using principal and password from inventory file\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\n\u003Cpre class=\"screen\">- name: Playbook to unconfigure IPA clients\n  hosts: ipaclients\n  become: true\n\n  roles:\n  - role: ipaclient\n    state: true\u003C/pre>\n\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>client keytab\u003C/strong>\u003C/span> from the previous enrollment if it is still available:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis option is available if the system was previously enrolled as an Identity Management client. To use this authentication method, uncomment the \u003Ccode class=\"literal\">ipaclient_keytab\u003C/code> option, specifying the path to the file storing the keytab, for example in the \u003Ccode class=\"literal\">[ipaclient:vars]\u003C/code> section of \u003Ccode class=\"literal\">inventory/hosts\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tA \u003Cspan class=\"strong strong\">\u003Cstrong>random, one-time password\u003C/strong>\u003C/span> (OTP) to be generated during the enrollment. To use this authentication method, use the \u003Ccode class=\"literal\">ipaclient_use_otp=true\u003C/code> option in your inventory file. For example, you can uncomment the \u003Ccode class=\"literal\">#ipaclient_use_otp=true\u003C/code> option in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file. Note that with OTP you must also specify one of the following options:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>password of a user authorized to enroll clients\u003C/strong>\u003C/span>, for example by providing a value for \u003Ccode class=\"literal\">ipaadmin_password\u003C/code> in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of the \u003Ccode class=\"literal\">inventory/hosts\u003C/code> file.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>admin keytab\u003C/strong>\u003C/span>, for example by providing a value for \u003Ccode class=\"literal\">ipaadmin_keytab\u003C/code> in the \u003Ccode class=\"literal\">[ipaclients:vars]\u003C/code> section of \u003Ccode class=\"literal\">inventory/hosts\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStarting with RHEL 9.3, you can also specify the \u003Ccode class=\"literal\">ipaclient_subid: true\u003C/code> option to have subid ranges configured for IdM users on the IdM level.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/ipaclient/README.md\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_identity_management/index#assembly_managing-subid-ranges-manually_configuring-and-managing-idm\">Managing subID ranges manually\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"authorization-options-for-idm-client-enrollment-using-an-ansible-playbook_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.3. Authorization options for IdM client enrollment using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can authorize IdM client enrollment by using any of the following methods:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA random, one-time password (OTP) + administrator password\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA random, one-time password (OTP) + an admin keytab\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe client keytab from the previous enrollment\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe password of a user authorized to enroll a client (\u003Ccode class=\"literal\">admin\u003C/code>) stored in an inventory file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe password of a user authorized to enroll a client (\u003Ccode class=\"literal\">admin\u003C/code>) stored in an Ansible vault\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tIt is possible to have the OTP generated by an IdM administrator before the IdM client installation. In that case, you do not need any credentials for the installation other than the OTP itself.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following are sample inventory files for these methods:\n\t\t\t\u003C/p>\u003Crh-table id=\"sample-inventory-file_client-ansible\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 27.1. Sample inventory files\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 29%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 71%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559988517808\" scope=\"col\">Authorization option\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559988516720\" scope=\"col\">Inventory file\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988517808\"> \u003Cp>\n\t\t\t\t\t\t\t\tA random, one-time password (OTP) + administrator password\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988516720\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\nipaadmin_password=Secret123\nipaclient_use_otp=true\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988517808\"> \u003Cp>\n\t\t\t\t\t\t\t\tA random, one-time password (OTP)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988516720\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\nipaclient_otp=&lt;W5YpARl=7M.&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tThis scenario assumes that the OTP was already generated by an IdM \u003Ccode class=\"literal\">admin\u003C/code> before the installation.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988517808\"> \u003Cp>\n\t\t\t\t\t\t\t\tA random, one-time password (OTP) + an admin keytab\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988516720\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\nipaadmin_keytab=/root/admin.keytab\nipaclient_use_otp=true\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988517808\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe client keytab from the previous enrollment\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988516720\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\nipaclient_keytab=/root/krb5.keytab\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988517808\"> \u003Cp>\n\t\t\t\t\t\t\t\tPassword of an \u003Ccode class=\"literal\">admin\u003C/code> user stored in an inventory file\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988516720\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\nipaadmin_password=Secret123\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988517808\"> \u003Cp>\n\t\t\t\t\t\t\t\tPassword of an \u003Ccode class=\"literal\">admin\u003C/code> user stored in an Ansible vault file\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559988516720\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\n[...]\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tIf you are using the password of an \u003Ccode class=\"literal\">admin\u003C/code> user stored in an Ansible vault file, the corresponding playbook file must have an additional \u003Ccode class=\"literal\">vars_files\u003C/code> directive:\n\t\t\t\u003C/p>\u003Crh-table id=\"user-password-stored-in-ansible-vault_client-ansible\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 27.2. User password stored in an Ansible vault\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 29%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 71%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559984672848\" scope=\"col\">Inventory file\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140559984671760\" scope=\"col\">Playbook file\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984672848\">\n\u003Cpre class=\"screen\">[ipaclients:vars]\n[...]\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140559984671760\">\n\u003Cpre class=\"screen\">- name: Playbook to configure IPA clients\n  hosts: ipaclients\n  become: true\n  vars_files:\n  - ansible_vault_file.yml\n\n  roles:\n  - role: ipaclient\n    state: present\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tIn all the other authorization scenarios described above, a basic playbook file could look as follows:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">- name: Playbook to configure IPA clients\n  hosts: ipaclients\n  become: true\n\n  roles:\n  - role: ipaclient\n    state: true\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAs of RHEL 9.2, in the two OTP authorization scenarios described above, the requesting of the administrator’s TGT by using the \u003Ccode class=\"literal\">kinit\u003C/code> command occurs on the first specified or discovered IdM server. Therefore, no additional modification of the Ansible control node is required. Before RHEL 9.2, the \u003Ccode class=\"literal\">krb5-workstation\u003C/code> package was required on the control node.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"deploying-an-IdM-client-using-an-Ansible-playbook_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.4. Deploying an IdM client using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to use an Ansible playbook to deploy an IdM client in your IdM environment.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have set the parameters of the IdM client deployment to correspond to your deployment scenario:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management#setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible\">Setting the parameters of the inventory file for the autodiscovery client installation mode\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management#setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible\">Setting the parameters of the inventory file when autodiscovery is not possible during client installation\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/install-client.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-the-one-time-password-method-in-ansible-to-install-an-idm-client_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.5. Using the one-time password method in Ansible to install an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can generate a one-time password (OTP) for a new host in Identity Management (IdM) and use it to enroll a system into the IdM domain. This procedure describes how to use Ansible to install an IdM client after generating an OTP for it on another IdM host.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis method of installing an IdM client is convenient if two system administrators with different privileges exist in your organisation:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOne that has the credentials of an IdM administrator.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAnother that has the required Ansible credentials, including \u003Ccode class=\"literal\">root\u003C/code> access to the host to become an IdM client.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe IdM administrator performs the first part of the procedure in which the OTP password is generated. The Ansible administrator performs the remaining part of the procedure in which the OTP is used to install an IdM client.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the IdM \u003Ccode class=\"literal\">admin\u003C/code> credentials or at least the \u003Ccode class=\"literal\">Host Enrollment\u003C/code> privilege and a permission to add DNS records in IdM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have configured a user escalation method on the Ansible managed node to allow you to install an IdM client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf your Ansible control node is running on RHEL 8.7 or earlier, you must be able to install packages on your Ansible control node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have configured your Ansible control node to meet the following requirements:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package on the Ansible controller.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have created an \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management\">Ansible inventory file\u003C/a> with the fully-qualified domain name (FQDN) of the IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node is a Red Hat Enterprise Linux 9 system with a static IP address and a working package manager.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">SSH\u003C/code> to an IdM host as an IdM user with a role that has the \u003Ccode class=\"literal\">Host Enrollment\u003C/code> privilege and a permission to add DNS records:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>$ ssh admin@server.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate an OTP for the new client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[admin@server ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa host-add client.idm.example.com --ip-address=172.25.250.11 --random\u003C/strong>\u003C/span>\n --------------------------------------------------\n Added host \"client.idm.example.com\"\n --------------------------------------------------\n  Host name: client.idm.example.com\n  Random password: \u003Cspan class=\"strong strong\">\u003Cstrong>W5YpARl=7M.n\u003C/strong>\u003C/span>\n  Password: True\n  Keytab: False\n  Managed by: server.idm.example.com\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>--ip-address=\u003Cspan class=\"emphasis\">\u003Cem>&lt;your_host_ip_address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span> option adds the host to IdM DNS with the specified IP address.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExit the IdM host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>exit\u003C/strong>\u003C/span>\nlogout\nConnection to server.idm.example.com closed.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the ansible controller, update the inventory file to include the random password:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[...]\n[ipaclients]\nclient.idm.example.com\n\n[ipaclients:vars]\nipaclient_domain=idm.example.com\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaclient_otp=W5YpARl=7M.n\u003C/strong>\u003C/span>\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your ansible controller is running RHEL ⇐ 9.1, install the \u003Ccode class=\"literal\">kinit\u003C/code> utility provided by the \u003Ccode class=\"literal\">krb5-workstation\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo dnf install krb5-workstation\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook to install the client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook -i inventory install-client.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"testing-an-Identity-Management-after-Ansible-installation_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.6. Testing an Identity Management client after Ansible installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe command-line interface (CLI) informs you that the \u003Ccode class=\"literal command\">ansible-playbook\u003C/code> command was successful, but you can also do your own test.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo test that the Identity Management client can obtain information about users defined on the server, check that you are able to resolve a user defined on the server. For example, to check the default \u003Ccode class=\"literal\">admin\u003C/code> user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client1 ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>id admin\u003C/strong>\u003C/span>\nuid=1254400000(admin) gid=1254400000(admins) groups=1254400000(admins)\u003C/pre>\u003Cp>\n\t\t\t\tTo test that authentication works correctly, \u003Ccode class=\"literal command\">su -\u003C/code> as another already existing IdM user:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client1 ~]$ \u003Cspan class=\"strong strong\">\u003Cstrong>su - idm_user\u003C/strong>\u003C/span>\nLast login: Thu Oct 18 18:39:11 CEST 2018 from 192.168.122.1 on pts/0\n[idm_user@client1 ~]$\u003C/pre>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-an-IdM-client-using-an-Ansible-playbook_client-ansible\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.7. Uninstalling an IdM client using an Ansible playbook\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tComplete this procedure to use an Ansible playbook to uninstall your host as an IdM client.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIdM administrator credentials.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node is a Red Hat Enterprise Linux 9 system with a static IP address.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook with the instructions to uninstall the client, for example \u003Ccode class=\"literal\">uninstall-client.yml\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook -v -i ~/MyPlaybooks/inventory ~/MyPlaybooks/uninstall-client.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe uninstallation of the client only removes the basic IdM configuration from the host but leaves the configuration files on the host in case you decide to re-install the client. In addition, the uninstallation has the following limitations:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIt does not remove the client host entry from the IdM LDAP server. The uninstallation only unenrolls the host.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIt does not remove any services residing on the client from IdM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIt does not remove the DNS entries for the client from the IdM server.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIt does not remove the old principals for keytabs other than \u003Ccode class=\"literal\">/etc/krb5.keytab\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tNote that the uninstallation does remove all certificates that were issued for the host by the IdM CA.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/uninstalling-an-ipa-client_installing-identity-management\">Uninstalling an IdM client\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-dns-on-an-existing-idm-server_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 28. Installing DNS on an existing IdM server\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tFollow this procedure to install the DNS service on an Identity Management (IdM) server that was originally installed without it.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou understand the advantages and limitations of using IdM with integrated DNS as described in \u003Ca class=\"link\" href=\"#installing-an-ipa-server-with-integrated-dns_installing-identity-management\" title=\"Chapter 2. Installing an IdM server: With integrated DNS, with an integrated CA as the root CA\">Installing an IdM server: With integrated DNS, with an integrated CA as the root CA\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> access to the IdM server.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tOptional: Verify that DNS is not already installed on the IdM server.\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@r8server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa server-role-show r8server.idm.example.com\u003C/strong>\u003C/span>\nRole name: \u003Cspan class=\"strong strong\">\u003Cstrong>DNS server\u003C/strong>\u003C/span>\n  Server name: r8server.idm.example.com\n  Role name: DNS server\n  \u003Cspan class=\"strong strong\">\u003Cstrong>Role status: absent\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe output confirms that IdM DNS is not available on the server.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tEnable the \u003Ccode class=\"literal\">idm:DL1\u003C/code> stream:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@r8server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>yum module enable idm:DL1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tDownload the \u003Ccode class=\"literal\">ipa-dns-server\u003C/code> package and its dependencies:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@r8server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>yum module install idm:DL1/dns\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tStart the script to install DNS on the server:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@r8server ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-dns-install\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe script prompts for per-server DNS forwarders.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to configure DNS forwarders? [yes]:\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo configure per-server DNS forwarders, enter \u003Ccode class=\"literal\">yes\u003C/code>, and then follow the instructions on the command line. The installation process will add the forwarder IP addresses to the IdM LDAP.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tFor the forwarding policy default settings, see the \u003Ccode class=\"literal option\">--forward-policy\u003C/code> description in the \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-dns-install\u003C/strong>\u003C/span>(1) man page.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you do not want to use DNS forwarding, enter \u003Ccode class=\"literal\">no\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tWith no DNS forwarders, hosts in your IdM domain will not be able to resolve names from other, internal, DNS domains in your infrastructure. The hosts will only be left with public DNS servers to resolve their DNS queries.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe script prompts to check if any DNS reverse (PTR) records for the IP addresses associated with the server need to be configured.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to search for missing reverse zones? [yes]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you run the search and missing reverse zones are discovered, the script asks you whether to create the reverse zones along with the PTR records.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">Do you want to create reverse zone for IP 192.0.2.1 [yes]:\nPlease specify the reverse zone name [2.0.192.in-addr.arpa.]:\nUsing reverse zone(s) 2.0.192.in-addr.arpa.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tUsing IdM to manage reverse zones is optional. You can use an external DNS service for this purpose instead.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ccode class=\"literal\">man ipa-dns-install(1)\u003C/code>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 29. Uninstalling the integrated IdM DNS service from an IdM server\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tIf you have more than one server with integrated DNS in an Identity Management (IdM) deployment, you might decide to remove the integrated DNS service from one of the servers. To do this, you must first decommission the IdM server completely before re-installing IdM on it, this time without the integrated DNS.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tWhile you can add the DNS role to an IdM server, IdM does not provide a method to remove only the DNS role from an IdM server: the \u003Ccode class=\"literal\">ipa-dns-install\u003C/code> command does not have an \u003Ccode class=\"literal\">--uninstall\u003C/code> option.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have integrated DNS installed on an IdM server.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThis is not the last integrated DNS service in your IdM topology.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tIdentify the redundant DNS service and follow the procedure in \u003Ca class=\"link\" href=\"#uninstalling-an-ipa-server_installing-identity-management\" title=\"Chapter 9. Uninstalling an IdM server\">Uninstalling an IdM server\u003C/a> on the IdM replica that hosts this service.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tOn the same host, follow the procedure in either \u003Ca class=\"link\" href=\"#installing-an-ipa-server-without-integrated-dns_installing-identity-management\" title=\"Chapter 5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA\">Without integrated DNS, with an integrated CA as the root CA\u003C/a> or \u003Ca class=\"link\" href=\"#assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management\" title=\"Chapter 6. Installing an IdM server: Without integrated DNS, with an external CA as the root CA\">Without integrated DNS, with an external CA as the root CA\u003C/a>, depending on your use case.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 30. Adding the IdM CA service to an IdM server in a deployment without a CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIf you previously installed an Identity Management (IdM) domain without the certificate authority (CA) component, you can add the IdM CA service to the domain by using the \u003Ccode class=\"literal\">ipa-ca-install\u003C/code> command. Depending on your requirements, you can select one of the following options:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca\" title=\"30.1. Installing the first IdM CA as the root CA into an existing IdM domain\">Add the IdM Certificate Server CA as the root CA.\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca\" title=\"30.2. Installing the first IdM CA with an external CA as the root CA into an existing IdM domain\">Add the IdM Certificate Server CA as a subordinate CA, with an external CA as the root CA.\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tFor details on the supported CA configurations, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/planning_identity_management/planning-your-ca-services_planning-identity-management\">Planning your CA services\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.1. Installing the first IdM CA as the root CA into an existing IdM domain\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you previously installed Identity Management (IdM) without the certificate authority (CA) component, you can install the CA on an IdM server subsequently. Follow this procedure to install, on the \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span> server, an IdM CA that is not subordinate to any external root CA.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> permissions on \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM server is installed on \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour IdM deployment has no CA installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the IdM \u003Ccode class=\"literal\">Directory Manager\u003C/code> password.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>, install the IdM Certificate Server CA:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~] \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-ca-install\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn each IdM host in the topology, run the \u003Ccode class=\"literal\">ipa-certupdate\u003C/code> utility to update the host with the information about the new certificate from the IdM LDAP.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf you do not run \u003Ccode class=\"literal\">ipa-certupdate\u003C/code> after generating the IdM CA certificate, the certificate will not be distributed to the other IdM machines.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.2. Installing the first IdM CA with an external CA as the root CA into an existing IdM domain\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you previously installed Identity Management (IdM) without the certificate authority (CA) component, you can install the CA on an IdM server subsequently. Follow this procedure to install, on the \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span> server, an IdM CA that is subordinate to an external root CA, with zero or several intermediate CAs in between.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> permissions on \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM server is installed on \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour IdM deployment has no CA installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the IdM \u003Ccode class=\"literal\">Directory Manager\u003C/code> password.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the installation:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~] \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-ca-install --external-ca\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWait till the command-line interface informs you that a certificate signing request (CSR) has been saved.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSubmit the CSR to the external CA.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCopy the issued certificate to the IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tContinue the installation by adding the certificates and full path to the external CA files to \u003Ccode class=\"literal\">ipa-ca-install\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-ca-install --external-cert-file=/root/master.crt --external-cert-file=/root/ca.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn each IdM host in the topology, run the \u003Ccode class=\"literal\">ipa-certupdate\u003C/code> utility to update the host with the information about the new certificate from the IdM LDAP.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tFailing to run \u003Ccode class=\"literal\">ipa-certupdate\u003C/code> after generating the IdM CA certificate means that the certificate will not be distributed to the other IdM machines.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 31. Adding the IdM CA service to an IdM server in a deployment with a CA\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIf your Identity Management (IdM) environment already has the IdM certificate authority (CA) service installed but a particular IdM server, \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>, was installed as an IdM replica without a CA, you can add the CA service to \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span> by using the \u003Ccode class=\"literal\">ipa-ca-install\u003C/code> command.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tThis procedure is identical for both the following scenarios:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM CA is a root CA.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM CA is subordinate to an external, root CA.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> permissions on \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe IdM server is installed on \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYour IdM deployment has a CA installed on another IdM server.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou know the IdM \u003Ccode class=\"literal\">Directory Manager\u003C/code> password.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tOn \u003Cspan class=\"emphasis\">\u003Cem>idmserver\u003C/em>\u003C/span>, install the IdM Certificate Server CA:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~] \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-ca-install\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 32. Uninstalling the IdM CA service from an IdM server\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIf you have more than four Identity Management (IdM) replicas with the \u003Cspan class=\"strong strong\">\u003Cstrong>CA Role\u003C/strong>\u003C/span> in your topology and you run into performance problems due to redundant certificate replication, Red Hat recommends that you remove redundant CA service instances from IdM replicas. To do this, you must first decommission the affected IdM replicas completely before re-installing IdM on them, this time without the CA service.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tWhile you can \u003Cspan class=\"strong strong\">\u003Cstrong>add\u003C/strong>\u003C/span> the CA role to an IdM replica, IdM does not provide a method to \u003Cspan class=\"strong strong\">\u003Cstrong>remove\u003C/strong>\u003C/span> only the CA role from an IdM replica: the \u003Ccode class=\"literal\">ipa-ca-install\u003C/code> command does not have an \u003Ccode class=\"literal\">--uninstall\u003C/code> option.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou have the IdM CA service installed on more than four IdM servers in your topology.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tIdentify the redundant CA service and follow the procedure in \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#uninstalling-an-ipa-server_installing-identity-management\">Uninstalling an IdM server\u003C/a> on the IdM replica that hosts this service.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tOn the same host, follow the procedure in \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/installing_identity_management/index#installing-an-ipa-server-without-a-ca_installing-identity-management\">Installing an IdM server: With integrated DNS, without a CA\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"legalnotice\" id=\"idm140559999367200\">\u003Ch2 class=\"legalnotice\">Legal Notice\u003C/h2>\u003Cdiv class=\"para\">\n\t\tCopyright \u003Cspan class=\"trademark\">\u003C!--Empty-->\u003C/span>© 2024 Red Hat, Inc.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license (\"CC-BY-SA\"). An explanation of CC-BY-SA is available at \u003Ca class=\"uri\" href=\"http://creativecommons.org/licenses/by-sa/3.0/\">http://creativecommons.org/licenses/by-sa/3.0/\u003C/a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Linux\u003C/span>® is the registered trademark of Linus Torvalds in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Java\u003C/span>® is a registered trademark of Oracle and/or its affiliates.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">XFS\u003C/span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">MySQL\u003C/span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Node.js\u003C/span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe \u003Cspan class=\"trademark\">OpenStack\u003C/span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tAll other trademarks are the property of their respective owners.\n\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003C/body>",[14,21,26,118,131,144,157,174,195,199,220,224,229,247,273,319,337,359,381,395,425,451,485,519,524,587,609,660,683,718,723,728,742,747,752],{"title":11,"visible":15,"weight":16,"urlFragment":17,"anchor":18,"singlePageAnchor":18,"docTitle":19,"url":20},true,1,"index",null,"installing_identity_management","#",{"title":22,"visible":15,"weight":23,"urlFragment":24,"anchor":18,"singlePageAnchor":24,"docTitle":19,"url":25},"Providing feedback on Red Hat documentation",2,"proc_providing-feedback-on-red-hat-documentation_installing-identity-management","#proc_providing-feedback-on-red-hat-documentation_installing-identity-management",{"title":27,"visible":15,"weight":28,"urlFragment":29,"anchor":18,"singlePageAnchor":29,"sections":30,"docTitle":19,"url":117},"1. Preparing the system for IdM server installation",3,"preparing-the-system-for-ipa-server-installation_installing-identity-management",[31,35,39,61,82,87,92,97,102,107,112],{"title":32,"visible":15,"weight":16,"urlFragment":29,"anchor":33,"singlePageAnchor":33,"docTitle":19,"url":34},"1.1. Prerequisites","prerequisites","#prerequisites",{"title":36,"visible":15,"weight":23,"urlFragment":29,"anchor":37,"singlePageAnchor":37,"docTitle":19,"url":38},"1.2. Hardware recommendations","hardware-recomendations_preparing-the-system-for-ipa-server-installation","#hardware-recomendations_preparing-the-system-for-ipa-server-installation",{"title":40,"visible":15,"weight":28,"urlFragment":29,"anchor":41,"singlePageAnchor":41,"sections":42,"docTitle":19,"url":60},"1.3. Custom configuration requirements for IdM","system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation",[43,47,51,55],{"title":44,"visible":15,"weight":16,"urlFragment":29,"anchor":45,"singlePageAnchor":45,"docTitle":19,"url":46},"1.3.1. IPv6 requirements in IdM","ipv6_requirements_in_idm","#ipv6_requirements_in_idm",{"title":48,"visible":15,"weight":23,"urlFragment":29,"anchor":49,"singlePageAnchor":49,"docTitle":19,"url":50},"1.3.2. Support for encryption types in IdM","support_for_encryption_types_in_idm","#support_for_encryption_types_in_idm",{"title":52,"visible":15,"weight":28,"urlFragment":29,"anchor":53,"singlePageAnchor":53,"docTitle":19,"url":54},"1.3.3. Support for system-wide cryptographic policies in IdM","support_for_system_wide_cryptographic_policies_in_idm","#support_for_system_wide_cryptographic_policies_in_idm",{"title":56,"visible":15,"weight":57,"urlFragment":29,"anchor":58,"singlePageAnchor":58,"docTitle":19,"url":59},"1.3.4. FIPS compliance",4,"fips_compliance","#fips_compliance","#system-requirements-in-ipa_preparing-the-system-for-ipa-server-installation",{"title":62,"visible":15,"weight":57,"urlFragment":29,"anchor":63,"singlePageAnchor":63,"sections":64,"docTitle":19,"url":81},"1.4. Time service requirements for IdM","assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation",[65,69,73,77],{"title":66,"visible":15,"weight":16,"urlFragment":29,"anchor":67,"singlePageAnchor":67,"docTitle":19,"url":68},"1.4.1. How IdM uses chronyd for synchronization","con_how-idm-uses-chronyd-for-synchronization_assembly_time-service-requirements-for-idm","#con_how-idm-uses-chronyd-for-synchronization_assembly_time-service-requirements-for-idm",{"title":70,"visible":15,"weight":23,"urlFragment":29,"anchor":71,"singlePageAnchor":71,"docTitle":19,"url":72},"1.4.2. List of NTP configuration options for IdM installation commands","ref_list-of-ntp-configuration-options-for-idm-installation-commands_assembly_time-service-requirements-for-idm","#ref_list-of-ntp-configuration-options-for-idm-installation-commands_assembly_time-service-requirements-for-idm",{"title":74,"visible":15,"weight":28,"urlFragment":29,"anchor":75,"singlePageAnchor":75,"docTitle":19,"url":76},"1.4.3. Ensuring IdM can reference your NTP time server","proc_ensuring-idm-can-reference-your-ntp-time-server_assembly_time-service-requirements-for-idm","#proc_ensuring-idm-can-reference-your-ntp-time-server_assembly_time-service-requirements-for-idm",{"title":78,"visible":15,"weight":57,"urlFragment":29,"anchor":79,"singlePageAnchor":79,"docTitle":19,"url":80},"1.4.4. Additional resources","additional_resources","#additional_resources","#assembly_time-service-requirements-for-idm_preparing-the-system-for-ipa-server-installation",{"title":83,"visible":15,"weight":84,"urlFragment":29,"anchor":85,"singlePageAnchor":85,"docTitle":19,"url":86},"1.5. Host name and DNS requirements for IdM",5,"host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation","#host-name-and-dns-requirements-for-ipa_preparing-the-system-for-ipa-server-installation",{"title":88,"visible":15,"weight":89,"urlFragment":29,"anchor":90,"singlePageAnchor":90,"docTitle":19,"url":91},"1.6. Port requirements for IdM",6,"port-requirements-for-idm_preparing-the-system-for-ipa-server-installation","#port-requirements-for-idm_preparing-the-system-for-ipa-server-installation",{"title":93,"visible":15,"weight":94,"urlFragment":29,"anchor":95,"singlePageAnchor":95,"docTitle":19,"url":96},"1.7. Opening the ports required by IdM",7,"opening-the-ports-required-by-idm_preparing-the-system-for-ipa-server-installation","#opening-the-ports-required-by-idm_preparing-the-system-for-ipa-server-installation",{"title":98,"visible":15,"weight":99,"urlFragment":29,"anchor":100,"singlePageAnchor":100,"docTitle":19,"url":101},"1.8. Installing packages required for an IdM server",8,"installing-packages-required-for-an-idm-server_preparing-the-system-for-ipa-server-installation","#installing-packages-required-for-an-idm-server_preparing-the-system-for-ipa-server-installation",{"title":103,"visible":15,"weight":104,"urlFragment":29,"anchor":105,"singlePageAnchor":105,"docTitle":19,"url":106},"1.9. Setting the correct file mode creation mask for IdM installation",9,"proc_setting-the-correct-file-mode-creation-mask-for-idm-installation_preparing-the-system-for-ipa-server-installation","#proc_setting-the-correct-file-mode-creation-mask-for-idm-installation_preparing-the-system-for-ipa-server-installation",{"title":108,"visible":15,"weight":109,"urlFragment":29,"anchor":110,"singlePageAnchor":110,"docTitle":19,"url":111},"1.10. Ensuring that fapolicyd rules do not block IdM installation",10,"proc_ensuring-that-fapolicyd-rules-do-not-block-idm-installation_preparing-the-system-for-ipa-server-installation","#proc_ensuring-that-fapolicyd-rules-do-not-block-idm-installation_preparing-the-system-for-ipa-server-installation",{"title":113,"visible":15,"weight":114,"urlFragment":29,"anchor":115,"singlePageAnchor":115,"docTitle":19,"url":116},"1.11. Options for the IdM installation commands",11,"ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation","#ref_options-for-the-ipa-server-install-command_preparing-the-system-for-ipa-server-installation","#preparing-the-system-for-ipa-server-installation_installing-identity-management",{"title":119,"visible":15,"weight":57,"urlFragment":120,"anchor":18,"singlePageAnchor":120,"sections":121,"docTitle":19,"url":130},"2. Installing an IdM server: With integrated DNS, with an integrated CA as the root CA","installing-an-ipa-server-with-integrated-dns_installing-identity-management",[122,126],{"title":123,"visible":15,"weight":16,"urlFragment":120,"anchor":124,"singlePageAnchor":124,"docTitle":19,"url":125},"2.1. Interactive installation","installing-ipa-server-with-dns-interactive-install_install-server-with-dns","#installing-ipa-server-with-dns-interactive-install_install-server-with-dns",{"title":127,"visible":15,"weight":23,"urlFragment":120,"anchor":128,"singlePageAnchor":128,"docTitle":19,"url":129},"2.2. Non-interactive installation","installing-an-ipa-server-with-integrated-dns-non-interactive-installation_install-server-with-dns","#installing-an-ipa-server-with-integrated-dns-non-interactive-installation_install-server-with-dns","#installing-an-ipa-server-with-integrated-dns_installing-identity-management",{"title":132,"visible":15,"weight":84,"urlFragment":133,"anchor":18,"singlePageAnchor":133,"sections":134,"docTitle":19,"url":143},"3. Installing an IdM server: With integrated DNS, with an external CA as the root CA","installing-an-ipa-server-with-external-ca_installing-identity-management",[135,139],{"title":136,"visible":15,"weight":16,"urlFragment":133,"anchor":137,"singlePageAnchor":137,"docTitle":19,"url":138},"3.1. Interactive installation","installing-an-ipa-server-with-an-external-ca-as-the-root-ca_install-server-external-ca","#installing-an-ipa-server-with-an-external-ca-as-the-root-ca_install-server-external-ca",{"title":140,"visible":15,"weight":23,"urlFragment":133,"anchor":141,"singlePageAnchor":141,"docTitle":19,"url":142},"3.2. Troubleshooting: External CA installation fails","troubleshooting-external-ca-installation-fails","#troubleshooting-external-ca-installation-fails","#installing-an-ipa-server-with-external-ca_installing-identity-management",{"title":145,"visible":15,"weight":89,"urlFragment":146,"anchor":18,"singlePageAnchor":146,"sections":147,"docTitle":19,"url":156},"4. Installing an IdM server: With integrated DNS, without a CA","installing-an-ipa-server-without-a-ca_installing-identity-management",[148,152],{"title":149,"visible":15,"weight":16,"urlFragment":146,"anchor":150,"singlePageAnchor":150,"docTitle":19,"url":151},"4.1. Certificates required to install an IdM server without a CA","certificates-required-to-install-ipa-server-no-ca_install-server-no-ca","#certificates-required-to-install-ipa-server-no-ca_install-server-no-ca",{"title":153,"visible":15,"weight":23,"urlFragment":146,"anchor":154,"singlePageAnchor":154,"docTitle":19,"url":155},"4.2. Interactive installation","installing-ipa-server-with-dns-interactive-install_install-server-no-ca","#installing-ipa-server-with-dns-interactive-install_install-server-no-ca","#installing-an-ipa-server-without-a-ca_installing-identity-management",{"title":158,"visible":15,"weight":94,"urlFragment":159,"anchor":18,"singlePageAnchor":159,"sections":160,"docTitle":19,"url":173},"5. Installing an IdM server: Without integrated DNS, with an integrated CA as the root CA","installing-an-ipa-server-without-integrated-dns_installing-identity-management",[161,165,169],{"title":162,"visible":15,"weight":16,"urlFragment":159,"anchor":163,"singlePageAnchor":163,"docTitle":19,"url":164},"5.1. Interactive installation","installing-an-ipa-server-without-integrated-dns-interactive-installation_installing-an-ipa-server-without-integrated-dns","#installing-an-ipa-server-without-integrated-dns-interactive-installation_installing-an-ipa-server-without-integrated-dns",{"title":166,"visible":15,"weight":23,"urlFragment":159,"anchor":167,"singlePageAnchor":167,"docTitle":19,"url":168},"5.2. Non-interactive installation","installing-an-ipa-server-without-integrated-dns-non-interactive-installation_installing-an-ipa-server-without-integrated-dns","#installing-an-ipa-server-without-integrated-dns-non-interactive-installation_installing-an-ipa-server-without-integrated-dns",{"title":170,"visible":15,"weight":28,"urlFragment":159,"anchor":171,"singlePageAnchor":171,"docTitle":19,"url":172},"5.3. IdM DNS records for external DNS systems","ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns","#ref_idm-dns-records-for-external-dns-systems_installing-an-ipa-server-without-integrated-dns","#installing-an-ipa-server-without-integrated-dns_installing-identity-management",{"title":175,"visible":15,"weight":99,"urlFragment":176,"anchor":18,"singlePageAnchor":176,"sections":177,"docTitle":19,"url":194},"6. Installing an IdM server: Without integrated DNS, with an external CA as the root CA","assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management",[178,182,186,190],{"title":179,"visible":15,"weight":16,"urlFragment":176,"anchor":180,"singlePageAnchor":180,"docTitle":19,"url":181},"6.1. Options used when installing an IdM CA with an external CA as the root CA","options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca","#options-used-when-installing-an-idm-ca-with-an-external-ca-as-the-root-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca",{"title":183,"visible":15,"weight":23,"urlFragment":176,"anchor":184,"singlePageAnchor":184,"docTitle":19,"url":185},"6.2. Interactive installation","proc_installing-an-ipa-server-without-dns-with-external-ca-interactive-installation_assembly_installing-an-ipa-server-without-dns-with-external-ca","#proc_installing-an-ipa-server-without-dns-with-external-ca-interactive-installation_assembly_installing-an-ipa-server-without-dns-with-external-ca",{"title":187,"visible":15,"weight":28,"urlFragment":176,"anchor":188,"singlePageAnchor":188,"docTitle":19,"url":189},"6.3. Non-interactive installation","proc_installing-an-ipa-server-non-interactive-installation-without-dns-with-external-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca","#proc_installing-an-ipa-server-non-interactive-installation-without-dns-with-external-ca_assembly_installing-an-ipa-server-without-dns-with-external-ca",{"title":191,"visible":15,"weight":57,"urlFragment":176,"anchor":192,"singlePageAnchor":192,"docTitle":19,"url":193},"6.4. IdM DNS records for external DNS systems","ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca","#ref_idm-dns-records-for-external-dns-systems_assembly_installing-an-ipa-server-without-dns-with-external-ca","#assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management",{"title":196,"visible":15,"weight":104,"urlFragment":197,"anchor":18,"singlePageAnchor":197,"docTitle":19,"url":198},"7. Installing an IdM server or replica with custom database settings from an LDIF file","proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management","#proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management",{"title":200,"visible":15,"weight":109,"urlFragment":201,"anchor":18,"singlePageAnchor":201,"sections":202,"docTitle":19,"url":219},"8. Troubleshooting IdM server installation","troubleshooting-idm-server-installation_installing-identity-management",[203,207,211,215],{"title":204,"visible":15,"weight":16,"urlFragment":201,"anchor":205,"singlePageAnchor":205,"docTitle":19,"url":206},"8.1. Reviewing IdM server installation error logs","reviewing-idm-server-installation-error-logs_troubleshooting-idm-server-installation","#reviewing-idm-server-installation-error-logs_troubleshooting-idm-server-installation",{"title":208,"visible":15,"weight":23,"urlFragment":201,"anchor":209,"singlePageAnchor":209,"docTitle":19,"url":210},"8.2. Reviewing IdM CA installation errors","reviewing-idm-ca-installation-errors-idm-server-installation","#reviewing-idm-ca-installation-errors-idm-server-installation",{"title":212,"visible":15,"weight":28,"urlFragment":201,"anchor":213,"singlePageAnchor":213,"docTitle":19,"url":214},"8.3. Removing a partial IdM server installation","removing-a-partial-idm-server-installation_troubleshooting-idm-server-installation","#removing-a-partial-idm-server-installation_troubleshooting-idm-server-installation",{"title":216,"visible":15,"weight":57,"urlFragment":201,"anchor":217,"singlePageAnchor":217,"docTitle":19,"url":218},"8.4. Additional resources","additional_resources_2","#additional_resources_2","#troubleshooting-idm-server-installation_installing-identity-management",{"title":221,"visible":15,"weight":114,"urlFragment":222,"anchor":18,"singlePageAnchor":222,"docTitle":19,"url":223},"9. Uninstalling an IdM server","uninstalling-an-ipa-server_installing-identity-management","#uninstalling-an-ipa-server_installing-identity-management",{"title":225,"visible":15,"weight":226,"urlFragment":227,"anchor":18,"singlePageAnchor":227,"docTitle":19,"url":228},"10. Renaming an IdM server",12,"renaming-an-idm-server_installing-identity-management","#renaming-an-idm-server_installing-identity-management",{"title":230,"visible":15,"weight":231,"urlFragment":232,"anchor":18,"singlePageAnchor":232,"sections":233,"docTitle":19,"url":246},"11. Updating and downgrading IdM",13,"update-downgrade-ipa_installing-identity-management",[234,238,242],{"title":235,"visible":15,"weight":16,"urlFragment":232,"anchor":236,"singlePageAnchor":236,"docTitle":19,"url":237},"11.1. Updating IdM packages","updating_idm_packages","#updating_idm_packages",{"title":239,"visible":15,"weight":23,"urlFragment":232,"anchor":240,"singlePageAnchor":240,"docTitle":19,"url":241},"11.2. Downgrading IdM packages","downgrading-idm-packages_installing-identity-management","#downgrading-idm-packages_installing-identity-management",{"title":243,"visible":15,"weight":28,"urlFragment":232,"anchor":244,"singlePageAnchor":244,"docTitle":19,"url":245},"11.3. Additional resources","additional_resources_3","#additional_resources_3","#update-downgrade-ipa_installing-identity-management",{"title":248,"visible":15,"weight":249,"urlFragment":250,"anchor":18,"singlePageAnchor":250,"sections":251,"docTitle":19,"url":272},"12. Preparing the system for IdM client installation",14,"preparing-the-system-for-ipa-client-installation_installing-identity-management",[252,256,260,264,268],{"title":253,"visible":15,"weight":16,"urlFragment":250,"anchor":254,"singlePageAnchor":254,"docTitle":19,"url":255},"12.1. Supported versions of RHEL for installing IdM clients","supported-versions-of-rhel-for-installing-idm-clients_preparing-the-system-for-ipa-client-installation","#supported-versions-of-rhel-for-installing-idm-clients_preparing-the-system-for-ipa-client-installation",{"title":257,"visible":15,"weight":23,"urlFragment":250,"anchor":258,"singlePageAnchor":258,"docTitle":19,"url":259},"12.2. DNS requirements for IdM clients","dns-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation","#dns-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation",{"title":261,"visible":15,"weight":28,"urlFragment":250,"anchor":262,"singlePageAnchor":262,"docTitle":19,"url":263},"12.3. Port requirements for IdM clients","port-requirements-for-ipa-clients_preparing-the-system-for-ipa-client-installation","#port-requirements-for-ipa-clients_preparing-the-system-for-ipa-client-installation",{"title":265,"visible":15,"weight":57,"urlFragment":250,"anchor":266,"singlePageAnchor":266,"docTitle":19,"url":267},"12.4. IPv6 requirements for IdM clients","ipv6-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation","#ipv6-requirements-for-idm-clients_preparing-the-system-for-ipa-client-installation",{"title":269,"visible":15,"weight":84,"urlFragment":250,"anchor":270,"singlePageAnchor":270,"docTitle":19,"url":271},"12.5. Installing packages required for an IdM client","proc_installing-packages-required-for-an-idm-client_preparing-the-system-for-ipa-client-installation","#proc_installing-packages-required-for-an-idm-client_preparing-the-system-for-ipa-client-installation","#preparing-the-system-for-ipa-client-installation_installing-identity-management",{"title":274,"visible":15,"weight":275,"urlFragment":276,"anchor":18,"singlePageAnchor":276,"sections":277,"docTitle":19,"url":318},"13. Installing an IdM client",15,"assembly_installing-an-idm-client_installing-identity-management",[278,282,286,290,294,298,302,306,310,314],{"title":279,"visible":15,"weight":16,"urlFragment":276,"anchor":280,"singlePageAnchor":280,"docTitle":19,"url":281},"13.1. Prerequisites","prerequisites_2","#prerequisites_2",{"title":283,"visible":15,"weight":23,"urlFragment":276,"anchor":284,"singlePageAnchor":284,"docTitle":19,"url":285},"13.2. Installing a client by using user credentials: Interactive installation","proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client","#proc_installing-a-client-by-using-user-credentials-interactive-installation_assembly_installing-an-idm-client",{"title":287,"visible":15,"weight":28,"urlFragment":276,"anchor":288,"singlePageAnchor":288,"docTitle":19,"url":289},"13.3. Installing a client by using a one-time password: Interactive installation","proc_installing-a-client-by-using-a-one-time-password-interactive-installation_assembly_installing-an-idm-client","#proc_installing-a-client-by-using-a-one-time-password-interactive-installation_assembly_installing-an-idm-client",{"title":291,"visible":15,"weight":57,"urlFragment":276,"anchor":292,"singlePageAnchor":292,"docTitle":19,"url":293},"13.4. Installing a client: Non-interactive installation","installing-ipa-client-non-interactive-install_assembly_installing-an-idm-client","#installing-ipa-client-non-interactive-install_assembly_installing-an-idm-client",{"title":295,"visible":15,"weight":84,"urlFragment":276,"anchor":296,"singlePageAnchor":296,"docTitle":19,"url":297},"13.5. Removing pre-IdM configuration after installing a client","removing-pre-ipa-configuration-after-installing-client_assembly_installing-an-idm-client","#removing-pre-ipa-configuration-after-installing-client_assembly_installing-an-idm-client",{"title":299,"visible":15,"weight":89,"urlFragment":276,"anchor":300,"singlePageAnchor":300,"docTitle":19,"url":301},"13.6. Testing an IdM client","testing-an-ipa-client_assembly_installing-an-idm-client","#testing-an-ipa-client_assembly_installing-an-idm-client",{"title":303,"visible":15,"weight":94,"urlFragment":276,"anchor":304,"singlePageAnchor":304,"docTitle":19,"url":305},"13.7. Connections performed during an IdM client installation","connection-requests-during-an-ipa-client-installation_assembly_installing-an-idm-client","#connection-requests-during-an-ipa-client-installation_assembly_installing-an-idm-client",{"title":307,"visible":15,"weight":99,"urlFragment":276,"anchor":308,"singlePageAnchor":308,"docTitle":19,"url":309},"13.8. IdM client’s communications with the server during post-installation deployment","ipa-client-communication-with-server_assembly_installing-an-idm-client","#ipa-client-communication-with-server_assembly_installing-an-idm-client",{"title":311,"visible":15,"weight":104,"urlFragment":276,"anchor":312,"singlePageAnchor":312,"docTitle":19,"url":313},"13.9. SSSD communication patterns","sssd-deployment-operations_assembly_installing-an-idm-client","#sssd-deployment-operations_assembly_installing-an-idm-client",{"title":315,"visible":15,"weight":109,"urlFragment":276,"anchor":316,"singlePageAnchor":316,"docTitle":19,"url":317},"13.10. Certmonger communication patterns","certmonger-deployment-operations_assembly_installing-an-idm-client","#certmonger-deployment-operations_assembly_installing-an-idm-client","#assembly_installing-an-idm-client_installing-identity-management",{"title":320,"visible":15,"weight":321,"urlFragment":322,"anchor":18,"singlePageAnchor":322,"sections":323,"docTitle":19,"url":336},"14. Installing an IdM client with Kickstart",16,"installing-an-ipa-client-with-kickstart_installing-identity-management",[324,328,332],{"title":325,"visible":15,"weight":16,"urlFragment":322,"anchor":326,"singlePageAnchor":326,"docTitle":19,"url":327},"14.1. Installing a client with Kickstart","installing-a-client-with-kickstart_client-kickstart","#installing-a-client-with-kickstart_client-kickstart",{"title":329,"visible":15,"weight":23,"urlFragment":322,"anchor":330,"singlePageAnchor":330,"docTitle":19,"url":331},"14.2. Kickstart file for client installation","kickstart-file-for-client-installation_client-kickstart","#kickstart-file-for-client-installation_client-kickstart",{"title":333,"visible":15,"weight":28,"urlFragment":322,"anchor":334,"singlePageAnchor":334,"docTitle":19,"url":335},"14.3. Testing an IdM client","testing-an-ipa-client_client-kickstart","#testing-an-ipa-client_client-kickstart","#installing-an-ipa-client-with-kickstart_installing-identity-management",{"title":338,"visible":15,"weight":339,"urlFragment":340,"anchor":18,"singlePageAnchor":340,"sections":341,"docTitle":19,"url":358},"15. Troubleshooting IdM client installation",17,"troubleshooting-idm-client-installation_installing-identity-management",[342,346,350,354],{"title":343,"visible":15,"weight":16,"urlFragment":340,"anchor":344,"singlePageAnchor":344,"docTitle":19,"url":345},"15.1. Reviewing IdM client installation errors","reviewing-idm-client-installation-errors_troubleshooting-idm-client-installation","#reviewing-idm-client-installation-errors_troubleshooting-idm-client-installation",{"title":347,"visible":15,"weight":23,"urlFragment":340,"anchor":348,"singlePageAnchor":348,"docTitle":19,"url":349},"15.2. Resolving issues if the client installation fails to update DNS records","resolving-issues-if-the-client-installation-fails-to-update-dns-records_troubleshooting-idm-client-installation","#resolving-issues-if-the-client-installation-fails-to-update-dns-records_troubleshooting-idm-client-installation",{"title":351,"visible":15,"weight":28,"urlFragment":340,"anchor":352,"singlePageAnchor":352,"docTitle":19,"url":353},"15.3. Resolving issues if the client installation fails to join the IdM Kerberos realm","resolving-issues-if-the-client-installation-fails-to-join-the-idm-kerberos-realm_troubleshooting-idm-client-installation","#resolving-issues-if-the-client-installation-fails-to-join-the-idm-kerberos-realm_troubleshooting-idm-client-installation",{"title":355,"visible":15,"weight":57,"urlFragment":340,"anchor":356,"singlePageAnchor":356,"docTitle":19,"url":357},"15.4. Additional resources","additional_resources_4","#additional_resources_4","#troubleshooting-idm-client-installation_installing-identity-management",{"title":360,"visible":15,"weight":361,"urlFragment":362,"anchor":18,"singlePageAnchor":362,"sections":363,"docTitle":19,"url":380},"16. Re-enrolling an IdM client",18,"re-enrolling-an-ipa-client_installing-identity-management",[364,368,372,376],{"title":365,"visible":15,"weight":16,"urlFragment":362,"anchor":366,"singlePageAnchor":366,"docTitle":19,"url":367},"16.1. Client re-enrollment in IdM","client-reenrollment-idm_re-enrolling-client","#client-reenrollment-idm_re-enrolling-client",{"title":369,"visible":15,"weight":23,"urlFragment":362,"anchor":370,"singlePageAnchor":370,"docTitle":19,"url":371},"16.2. Re-enrolling a client by using user credentials: Interactive re-enrollment","re-enrolling-a-client-by-using-user-credentials-interactive-re-enrollment_re-enrolling-client","#re-enrolling-a-client-by-using-user-credentials-interactive-re-enrollment_re-enrolling-client",{"title":373,"visible":15,"weight":28,"urlFragment":362,"anchor":374,"singlePageAnchor":374,"docTitle":19,"url":375},"16.3. Re-enrolling a client by using the client keytab: Non-interactive re-enrollment","re-enrolling-idm-client-using-keytab-non-interactive_re-enrolling-client","#re-enrolling-idm-client-using-keytab-non-interactive_re-enrolling-client",{"title":377,"visible":15,"weight":57,"urlFragment":362,"anchor":378,"singlePageAnchor":378,"docTitle":19,"url":379},"16.4. Testing an IdM client","testing-an-ipa-client_re-enrolling-client","#testing-an-ipa-client_re-enrolling-client","#re-enrolling-an-ipa-client_installing-identity-management",{"title":382,"visible":15,"weight":383,"urlFragment":384,"anchor":18,"singlePageAnchor":384,"sections":385,"docTitle":19,"url":394},"17. Uninstalling an IdM client",19,"uninstalling-an-ipa-client_installing-identity-management",[386,390],{"title":387,"visible":15,"weight":16,"urlFragment":384,"anchor":388,"singlePageAnchor":388,"docTitle":19,"url":389},"17.1. Uninstalling an IdM client","uninstalling-an-ipa-client-procedure_installing-identity-management","#uninstalling-an-ipa-client-procedure_installing-identity-management",{"title":391,"visible":15,"weight":23,"urlFragment":384,"anchor":392,"singlePageAnchor":392,"docTitle":19,"url":393},"17.2. Uninstalling an IdM client: additional steps after multiple past installations","uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management","#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_installing-identity-management","#uninstalling-an-ipa-client_installing-identity-management",{"title":396,"visible":15,"weight":397,"urlFragment":398,"anchor":18,"singlePageAnchor":398,"sections":399,"docTitle":19,"url":424},"18. Renaming IdM client systems",20,"renaming-ipa-client-systems_installing-identity-management",[400,404,408,412,416,420],{"title":401,"visible":15,"weight":16,"urlFragment":398,"anchor":402,"singlePageAnchor":402,"docTitle":19,"url":403},"18.1. Preparing an IdM client for its renaming","preparing-an-idm-client-for-its-renaming_renaming-clients","#preparing-an-idm-client-for-its-renaming_renaming-clients",{"title":405,"visible":15,"weight":23,"urlFragment":398,"anchor":406,"singlePageAnchor":406,"docTitle":19,"url":407},"18.2. Uninstalling an IdM client","uninstalling-an-ipa-client-procedure_renaming-clients","#uninstalling-an-ipa-client-procedure_renaming-clients",{"title":409,"visible":15,"weight":28,"urlFragment":398,"anchor":410,"singlePageAnchor":410,"docTitle":19,"url":411},"18.3. Uninstalling an IdM client: additional steps after multiple past installations","uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients","#uninstalling-an-idm-client-additional-steps-after-multiple-past-installations_renaming-clients",{"title":413,"visible":15,"weight":57,"urlFragment":398,"anchor":414,"singlePageAnchor":414,"docTitle":19,"url":415},"18.4. Renaming the host system","renaming-the-ipa-client-system_renaming-clients","#renaming-the-ipa-client-system_renaming-clients",{"title":417,"visible":15,"weight":84,"urlFragment":398,"anchor":418,"singlePageAnchor":418,"docTitle":19,"url":419},"18.5. Re-installing an IdM client","re-installing-an-idm-client_renaming-clients","#re-installing-an-idm-client_renaming-clients",{"title":421,"visible":15,"weight":89,"urlFragment":398,"anchor":422,"singlePageAnchor":422,"docTitle":19,"url":423},"18.6. Re-adding services, re-generating certificates, and re-adding host groups","re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients","#re-adding-services-re-generating-certificates-and-re-adding-host-groups_renaming-clients","#renaming-ipa-client-systems_installing-identity-management",{"title":426,"visible":15,"weight":427,"urlFragment":428,"anchor":18,"singlePageAnchor":428,"sections":429,"docTitle":19,"url":450},"19. Preparing the system for an IdM replica installation",21,"preparing-the-system-for-ipa-replica-installation_installing-identity-management",[430,434,438,442,446],{"title":431,"visible":15,"weight":16,"urlFragment":428,"anchor":432,"singlePageAnchor":432,"docTitle":19,"url":433},"19.1. Replica version requirements","replica-version-requirements_preparing-the-system-for-ipa-replica-installation","#replica-version-requirements_preparing-the-system-for-ipa-replica-installation",{"title":435,"visible":15,"weight":23,"urlFragment":428,"anchor":436,"singlePageAnchor":436,"docTitle":19,"url":437},"19.2. Methods for displaying IdM software version","display-software-version_preparing-the-system-for-ipa-replica-installation","#display-software-version_preparing-the-system-for-ipa-replica-installation",{"title":439,"visible":15,"weight":28,"urlFragment":428,"anchor":440,"singlePageAnchor":440,"docTitle":19,"url":441},"19.3. Ensuring FIPS compliance for a RHEL 9 replica joining a RHEL 8 IdM environment","ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation","#ensuring-fips-compliance-for-a-rhel-9-replica-joining-a-rhel-8-idm-environment_preparing-the-system-for-ipa-replica-installation",{"title":443,"visible":15,"weight":57,"urlFragment":428,"anchor":444,"singlePageAnchor":444,"docTitle":19,"url":445},"19.4. Authorizing the installation of a replica on an IdM client","authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation","#authorizing-the-installation-of-a-replica-on-an-ipa-client_preparing-the-system-for-ipa-replica-installation",{"title":447,"visible":15,"weight":84,"urlFragment":428,"anchor":448,"singlePageAnchor":448,"docTitle":19,"url":449},"19.5. Authorizing the installation of a replica on a system that is not enrolled into IdM","authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation","#authorizing-the-installation-of-a-replica-on-a-system-that-is-not-enrolled-into-idm_preparing-the-system-for-ipa-replica-installation","#preparing-the-system-for-ipa-replica-installation_installing-identity-management",{"title":452,"visible":15,"weight":453,"urlFragment":454,"anchor":18,"singlePageAnchor":454,"sections":455,"docTitle":19,"url":484},"20. Installing an IdM replica",22,"installing-an-ipa-replica_installing-identity-management",[456,460,464,468,472,476,480],{"title":457,"visible":15,"weight":16,"urlFragment":454,"anchor":458,"singlePageAnchor":458,"docTitle":19,"url":459},"20.1. Installing an IdM replica with integrated DNS and a CA","installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica","#installing-an-idm-replica-with-integrated-dns-and-a-ca_install-replica",{"title":461,"visible":15,"weight":23,"urlFragment":454,"anchor":462,"singlePageAnchor":462,"docTitle":19,"url":463},"20.2. Installing an IdM replica with integrated DNS and no CA","installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica","#installing-an-idm-replica-with-integrated-dns-and-no-ca_install-replica",{"title":465,"visible":15,"weight":28,"urlFragment":454,"anchor":466,"singlePageAnchor":466,"docTitle":19,"url":467},"20.3. Installing an IdM replica without integrated DNS and with a CA","installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica","#installing-an-idm-replica-without-integrated-dns-and-with-a-ca_install-replica",{"title":469,"visible":15,"weight":57,"urlFragment":454,"anchor":470,"singlePageAnchor":470,"docTitle":19,"url":471},"20.4. Installing an IdM replica without integrated DNS and without a CA","installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica","#installing-an-idm-replica-without-integrated-dns-and-without-a-ca_install-replica",{"title":473,"visible":15,"weight":84,"urlFragment":454,"anchor":474,"singlePageAnchor":474,"docTitle":19,"url":475},"20.5. Installing an IdM hidden replica","installing-an-idm-hidden-replica_install-replica","#installing-an-idm-hidden-replica_install-replica",{"title":477,"visible":15,"weight":89,"urlFragment":454,"anchor":478,"singlePageAnchor":478,"docTitle":19,"url":479},"20.6. Testing an IdM replica","testing-an-ipa-replica_install-replica","#testing-an-ipa-replica_install-replica",{"title":481,"visible":15,"weight":94,"urlFragment":454,"anchor":482,"singlePageAnchor":482,"docTitle":19,"url":483},"20.7. Connections performed during an IdM replica installation","connection-requests-during-an-ipa-replica-installation_install-replica","#connection-requests-during-an-ipa-replica-installation_install-replica","#installing-an-ipa-replica_installing-identity-management",{"title":486,"visible":15,"weight":487,"urlFragment":488,"anchor":18,"singlePageAnchor":488,"sections":489,"docTitle":19,"url":518},"21. Troubleshooting IdM replica installation",23,"troubleshooting-idm-replica-installation_installing-identity-management",[490,494,498,502,506,510,514],{"title":491,"visible":15,"weight":16,"urlFragment":488,"anchor":492,"singlePageAnchor":492,"docTitle":19,"url":493},"21.1. IdM replica installation error log files","ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation","#ref_idm-replica-installation-error-log-files_troubleshooting-idm-replica-installation",{"title":495,"visible":15,"weight":23,"urlFragment":488,"anchor":496,"singlePageAnchor":496,"docTitle":19,"url":497},"21.2. Reviewing IdM replica installation errors","reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation","#reviewing-idm-replica-installation-errors_troubleshooting-idm-replica-installation",{"title":499,"visible":15,"weight":28,"urlFragment":488,"anchor":500,"singlePageAnchor":500,"docTitle":19,"url":501},"21.3. IdM CA installation error log files","ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation","#ref_idm-ca-installation-error-log-files_troubleshooting-idm-replica-installation",{"title":503,"visible":15,"weight":57,"urlFragment":488,"anchor":504,"singlePageAnchor":504,"docTitle":19,"url":505},"21.4. Reviewing IdM CA installation errors","reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation","#reviewing-idm-ca-installation-errors-idm-replica-installation_troubleshooting-idm-replica-installation",{"title":507,"visible":15,"weight":84,"urlFragment":488,"anchor":508,"singlePageAnchor":508,"docTitle":19,"url":509},"21.5. Removing a partial IdM replica installation","removing-a-partial-idm-replica-installation_troubleshooting-idm-replica-installation","#removing-a-partial-idm-replica-installation_troubleshooting-idm-replica-installation",{"title":511,"visible":15,"weight":89,"urlFragment":488,"anchor":512,"singlePageAnchor":512,"docTitle":19,"url":513},"21.6. Resolving invalid credential errors","resolving-invalid-credential-errors_troubleshooting-idm-replica-installation","#resolving-invalid-credential-errors_troubleshooting-idm-replica-installation",{"title":515,"visible":15,"weight":94,"urlFragment":488,"anchor":516,"singlePageAnchor":516,"docTitle":19,"url":517},"21.7. Additional resources","additional_resources_5","#additional_resources_5","#troubleshooting-idm-replica-installation_installing-identity-management",{"title":520,"visible":15,"weight":521,"urlFragment":522,"anchor":18,"singlePageAnchor":522,"docTitle":19,"url":523},"22. Uninstalling an IdM replica",24,"uninstalling-an-idm-replica_installing-identity-management","#uninstalling-an-idm-replica_installing-identity-management",{"title":525,"visible":15,"weight":526,"urlFragment":527,"anchor":18,"singlePageAnchor":527,"sections":528,"docTitle":19,"url":586},"23. Managing replication topology",25,"assembly_managing-replication-topology_installing-identity-management",[529,546,550,554,558,562,566,570,574,578,582],{"title":530,"visible":15,"weight":16,"urlFragment":527,"anchor":531,"singlePageAnchor":531,"sections":532,"docTitle":19,"url":545},"23.1. Explaining replication agreements, topology suffixes and topology segments","assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology",[533,537,541],{"title":534,"visible":15,"weight":16,"urlFragment":527,"anchor":535,"singlePageAnchor":535,"docTitle":19,"url":536},"23.1.1. Replication agreements between IdM replicas","replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments","#replication-agreements-between-idm-replicas_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments",{"title":538,"visible":15,"weight":23,"urlFragment":527,"anchor":539,"singlePageAnchor":539,"docTitle":19,"url":540},"23.1.2. Topology suffixes","con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments","#con_topology-suffixes_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments",{"title":542,"visible":15,"weight":28,"urlFragment":527,"anchor":543,"singlePageAnchor":543,"docTitle":19,"url":544},"23.1.3. Topology segments","con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments","#con_topology-segments_assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments","#assembly_explaining-replication-agreements-topology-suffixes-and-topology-segments_assembly_managing-replication-topology",{"title":547,"visible":15,"weight":23,"urlFragment":527,"anchor":548,"singlePageAnchor":548,"docTitle":19,"url":549},"23.2. Using the topology graph to manage replication topology","con_using-the-topology-graph-to-manage-replication-topology_assembly_managing-replication-topology","#con_using-the-topology-graph-to-manage-replication-topology_assembly_managing-replication-topology",{"title":551,"visible":15,"weight":28,"urlFragment":527,"anchor":552,"singlePageAnchor":552,"docTitle":19,"url":553},"23.3. Setting up replication between two servers using the Web UI","managing-topology-ui-set-up","#managing-topology-ui-set-up",{"title":555,"visible":15,"weight":57,"urlFragment":527,"anchor":556,"singlePageAnchor":556,"docTitle":19,"url":557},"23.4. Stopping replication between two servers using the Web UI","managing-topology-ui-stop","#managing-topology-ui-stop",{"title":559,"visible":15,"weight":84,"urlFragment":527,"anchor":560,"singlePageAnchor":560,"docTitle":19,"url":561},"23.5. Setting up replication between two servers using the CLI","proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology","#proc_setting-up-replication-between-two-servers-using-command-line_assembly_managing-replication-topology",{"title":563,"visible":15,"weight":89,"urlFragment":527,"anchor":564,"singlePageAnchor":564,"docTitle":19,"url":565},"23.6. Stopping replication between two servers using the CLI","managing-topology-stop-cli","#managing-topology-stop-cli",{"title":567,"visible":15,"weight":94,"urlFragment":527,"anchor":568,"singlePageAnchor":568,"docTitle":19,"url":569},"23.7. Removing server from topology using the Web UI","managing-topology-remove-ui","#managing-topology-remove-ui",{"title":571,"visible":15,"weight":99,"urlFragment":527,"anchor":572,"singlePageAnchor":572,"docTitle":19,"url":573},"23.8. Viewing available server roles in the IdM topology using the IdM Web UI","viewing-available-server-roles-in-the-idm-topology-using-the-idm-web-ui_assembly_managing-replication-topology","#viewing-available-server-roles-in-the-idm-topology-using-the-idm-web-ui_assembly_managing-replication-topology",{"title":575,"visible":15,"weight":104,"urlFragment":527,"anchor":576,"singlePageAnchor":576,"docTitle":19,"url":577},"23.9. Viewing available server roles in the IdM topology using the IdM CLI","viewing-available-server-roles-in-the-idm-topology-using-the-idm-cli_assembly_managing-replication-topology","#viewing-available-server-roles-in-the-idm-topology-using-the-idm-cli_assembly_managing-replication-topology",{"title":579,"visible":15,"weight":109,"urlFragment":527,"anchor":580,"singlePageAnchor":580,"docTitle":19,"url":581},"23.10. Promoting a replica to a CA renewal server and CRL publisher server","server-roles-promote-to-ca","#server-roles-promote-to-ca",{"title":583,"visible":15,"weight":114,"urlFragment":527,"anchor":584,"singlePageAnchor":584,"docTitle":19,"url":585},"23.11. Demoting or promoting hidden replicas","demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology","#demoting-or-promoting-hidden-replicas_assembly_managing-replication-topology","#assembly_managing-replication-topology_installing-identity-management",{"title":588,"visible":15,"weight":589,"urlFragment":590,"anchor":18,"singlePageAnchor":590,"sections":591,"docTitle":19,"url":608},"24. Installing and running the IdM Healthcheck tool",26,"installing-and-running-the-ipa-healthcheck-tool_installing-identity-management",[592,596,600,604],{"title":593,"visible":15,"weight":16,"urlFragment":590,"anchor":594,"singlePageAnchor":594,"docTitle":19,"url":595},"24.1. Healthcheck in IdM","healthcheck-in-idm_installing-and-running-the-ipa-healthcheck-tool","#healthcheck-in-idm_installing-and-running-the-ipa-healthcheck-tool",{"title":597,"visible":15,"weight":23,"urlFragment":590,"anchor":598,"singlePageAnchor":598,"docTitle":19,"url":599},"24.2. Installing IdM Healthcheck","installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool","#installing-ipa-healthcheck_installing-and-running-the-ipa-healthcheck-tool",{"title":601,"visible":15,"weight":28,"urlFragment":590,"anchor":602,"singlePageAnchor":602,"docTitle":19,"url":603},"24.3. Running IdM Healthcheck","running-idm-healthcheck_installing-and-running-the-ipa-healthcheck-tool","#running-idm-healthcheck_installing-and-running-the-ipa-healthcheck-tool",{"title":605,"visible":15,"weight":57,"urlFragment":590,"anchor":606,"singlePageAnchor":606,"docTitle":19,"url":607},"24.4. Additional resources","additional_resources_6","#additional_resources_6","#installing-and-running-the-ipa-healthcheck-tool_installing-identity-management",{"title":610,"visible":15,"weight":611,"urlFragment":612,"anchor":18,"singlePageAnchor":613,"sections":614,"docTitle":19,"url":659},"25. Installing an Identity Management server using an Ansible playbook",27,"installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management","installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management",[615,619,623,627,631,635,639,643,647,651,655],{"title":616,"visible":15,"weight":16,"urlFragment":612,"anchor":617,"singlePageAnchor":617,"docTitle":19,"url":618},"25.1. Ansible and its advantages for installing IdM","ansible-and-its-advantages-for-installing-IdM_server-ansible","#ansible-and-its-advantages-for-installing-IdM_server-ansible",{"title":620,"visible":15,"weight":23,"urlFragment":612,"anchor":621,"singlePageAnchor":621,"docTitle":19,"url":622},"25.2. Installing the ansible-freeipa package","installing-the-ansible-freeipa-package_server-ansible","#installing-the-ansible-freeipa-package_server-ansible",{"title":624,"visible":15,"weight":28,"urlFragment":612,"anchor":625,"singlePageAnchor":625,"docTitle":19,"url":626},"25.3. Ansible roles location in the file system","ansible-roles-location-in-the-file-system_server-ansible","#ansible-roles-location-in-the-file-system_server-ansible",{"title":628,"visible":15,"weight":57,"urlFragment":612,"anchor":629,"singlePageAnchor":629,"docTitle":19,"url":630},"25.4. Setting the parameters for a deployment with an integrated DNS and an integrated CA as the root CA","setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible","#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-integrated-ca-as-the-root-ca_server-ansible",{"title":632,"visible":15,"weight":84,"urlFragment":612,"anchor":633,"singlePageAnchor":633,"docTitle":19,"url":634},"25.5. Setting the parameters for a deployment with external DNS and an integrated CA as the root CA","setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible","#setting-the-parameters-for-a-deployment-with-external-dns-and-an-integrated-ca-as-the-root-ca_server-ansible",{"title":636,"visible":15,"weight":89,"urlFragment":612,"anchor":637,"singlePageAnchor":637,"docTitle":19,"url":638},"25.6. Deploying an IdM server with an integrated CA as the root CA using an Ansible playbook","deploying-an-IdM-server-with-an-integrated-CA-using-an-Ansible-playbook_server-ansible","#deploying-an-IdM-server-with-an-integrated-CA-using-an-Ansible-playbook_server-ansible",{"title":640,"visible":15,"weight":94,"urlFragment":612,"anchor":641,"singlePageAnchor":641,"docTitle":19,"url":642},"25.7. Setting the parameters for a deployment with an integrated DNS and an external CA as the root CA","setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible","#setting-the-parameters-for-a-deployment-with-an-integrated-dns-and-an-external-ca-as-the-root-ca_server-ansible",{"title":644,"visible":15,"weight":99,"urlFragment":612,"anchor":645,"singlePageAnchor":645,"docTitle":19,"url":646},"25.8. Setting the parameters for a deployment with external DNS and an external CA as the root CA","setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible","#setting-the-parameters-for-a-deployment-with-external-dns-and-an-external-ca-as-the-root-ca_server-ansible",{"title":648,"visible":15,"weight":104,"urlFragment":612,"anchor":649,"singlePageAnchor":649,"docTitle":19,"url":650},"25.9. Deploying an IdM server with an external CA as the root CA using an Ansible playbook","deploying-an-IdM-server-with-an-external-CA-using-an-Ansible-playbook_server-ansible","#deploying-an-IdM-server-with-an-external-CA-using-an-Ansible-playbook_server-ansible",{"title":652,"visible":15,"weight":109,"urlFragment":612,"anchor":653,"singlePageAnchor":653,"docTitle":19,"url":654},"25.10. Uninstalling an IdM server using an Ansible playbook","uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible","#uninstalling-an-idm-server-using-an-ansible-playbook_server-ansible",{"title":656,"visible":15,"weight":114,"urlFragment":612,"anchor":657,"singlePageAnchor":657,"docTitle":19,"url":658},"25.11. Using an Ansible playbook to uninstall an IdM server even if this leads to a disconnected topology","using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible","#using-an-ansible-playbook-to-uninstall-an-idm-server-even-if-this-leads-to-a-disconnected-topology_server-ansible","#installing-an-Identity-Management-server-using-an-Ansible-playbook_installing-identity-management",{"title":661,"visible":15,"weight":662,"urlFragment":663,"anchor":18,"singlePageAnchor":664,"sections":665,"docTitle":19,"url":682},"26. Installing an Identity Management replica using an Ansible playbook",28,"installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management","installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management",[666,670,674,678],{"title":667,"visible":15,"weight":16,"urlFragment":663,"anchor":668,"singlePageAnchor":668,"docTitle":19,"url":669},"26.1. Specifying the base, server and client variables for installing the IdM replica","specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible","#specifying-the-base-server-and-client-variables-for-installing-the-IdM-replica_replica-ansible",{"title":671,"visible":15,"weight":23,"urlFragment":663,"anchor":672,"singlePageAnchor":672,"docTitle":19,"url":673},"26.2. Specifying the credentials for installing the IdM replica using an Ansible playbook","specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible","#specifying-the-credentials-for-installing-the-replica-using-an-ansible-playbook_replica-ansible",{"title":675,"visible":15,"weight":28,"urlFragment":663,"anchor":676,"singlePageAnchor":676,"docTitle":19,"url":677},"26.3. Deploying an IdM replica using an Ansible playbook","deploying-an-IdM-replica-using-an-Ansible-playbook_replica-ansible","#deploying-an-IdM-replica-using-an-Ansible-playbook_replica-ansible",{"title":679,"visible":15,"weight":57,"urlFragment":663,"anchor":680,"singlePageAnchor":680,"docTitle":19,"url":681},"26.4. Uninstalling an IdM replica using an Ansible playbook","uninstalling-an-idm-replica-using-an-ansible-playbook_replica-ansible","#uninstalling-an-idm-replica-using-an-ansible-playbook_replica-ansible","#installing-an-Identity-Management-replica-using-an-ansible-playbook_installing-identity-management",{"title":684,"visible":15,"weight":685,"urlFragment":686,"anchor":18,"singlePageAnchor":687,"sections":688,"docTitle":19,"url":717},"27. Installing an Identity Management client using an Ansible playbook",29,"installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management","installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management",[689,693,697,701,705,709,713],{"title":690,"visible":15,"weight":16,"urlFragment":686,"anchor":691,"singlePageAnchor":691,"docTitle":19,"url":692},"27.1. Setting the parameters of the inventory file for the autodiscovery client installation mode","setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible","#setting-the-parameters-of-the-inventory-file-for-the-autodiscovery-client-installation-mode_client-ansible",{"title":694,"visible":15,"weight":23,"urlFragment":686,"anchor":695,"singlePageAnchor":695,"docTitle":19,"url":696},"27.2. Setting the parameters of the inventory file when autodiscovery is not possible during client installation","setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible","#setting-the-parameters-of-the-inventory-file-when-autodiscovery-is-not-possible-during-client-installation_client-ansible",{"title":698,"visible":15,"weight":28,"urlFragment":686,"anchor":699,"singlePageAnchor":699,"docTitle":19,"url":700},"27.3. Authorization options for IdM client enrollment using an Ansible playbook","authorization-options-for-idm-client-enrollment-using-an-ansible-playbook_client-ansible","#authorization-options-for-idm-client-enrollment-using-an-ansible-playbook_client-ansible",{"title":702,"visible":15,"weight":57,"urlFragment":686,"anchor":703,"singlePageAnchor":703,"docTitle":19,"url":704},"27.4. Deploying an IdM client using an Ansible playbook","deploying-an-IdM-client-using-an-Ansible-playbook_client-ansible","#deploying-an-IdM-client-using-an-Ansible-playbook_client-ansible",{"title":706,"visible":15,"weight":84,"urlFragment":686,"anchor":707,"singlePageAnchor":707,"docTitle":19,"url":708},"27.5. Using the one-time password method in Ansible to install an IdM client","using-the-one-time-password-method-in-ansible-to-install-an-idm-client_client-ansible","#using-the-one-time-password-method-in-ansible-to-install-an-idm-client_client-ansible",{"title":710,"visible":15,"weight":89,"urlFragment":686,"anchor":711,"singlePageAnchor":711,"docTitle":19,"url":712},"27.6. Testing an Identity Management client after Ansible installation","testing-an-Identity-Management-after-Ansible-installation_client-ansible","#testing-an-Identity-Management-after-Ansible-installation_client-ansible",{"title":714,"visible":15,"weight":94,"urlFragment":686,"anchor":715,"singlePageAnchor":715,"docTitle":19,"url":716},"27.7. Uninstalling an IdM client using an Ansible playbook","uninstalling-an-IdM-client-using-an-Ansible-playbook_client-ansible","#uninstalling-an-IdM-client-using-an-Ansible-playbook_client-ansible","#installing-an-Identity-Management-client-using-an-ansible-playbook_installing-identity-management",{"title":719,"visible":15,"weight":720,"urlFragment":721,"anchor":18,"singlePageAnchor":721,"docTitle":19,"url":722},"28. Installing DNS on an existing IdM server",30,"installing-dns-on-an-existing-idm-server_installing-identity-management","#installing-dns-on-an-existing-idm-server_installing-identity-management",{"title":724,"visible":15,"weight":725,"urlFragment":726,"anchor":18,"singlePageAnchor":726,"docTitle":19,"url":727},"29. Uninstalling the integrated IdM DNS service from an IdM server",31,"uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management","#uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management",{"title":729,"visible":15,"weight":730,"urlFragment":731,"anchor":18,"singlePageAnchor":731,"sections":732,"docTitle":19,"url":741},"30. Adding the IdM CA service to an IdM server in a deployment without a CA",32,"adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management",[733,737],{"title":734,"visible":15,"weight":16,"urlFragment":731,"anchor":735,"singlePageAnchor":735,"docTitle":19,"url":736},"30.1. Installing the first IdM CA as the root CA into an existing IdM domain","installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca","#installing-the-first-idm-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca",{"title":738,"visible":15,"weight":23,"urlFragment":731,"anchor":739,"singlePageAnchor":739,"docTitle":19,"url":740},"30.2. Installing the first IdM CA with an external CA as the root CA into an existing IdM domain","installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca","#installing-the-first-idm-ca-with-an-external-ca-as-the-root-ca-into-an-existing-idm-domain_adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca","#adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management",{"title":743,"visible":15,"weight":744,"urlFragment":745,"anchor":18,"singlePageAnchor":745,"docTitle":19,"url":746},"31. Adding the IdM CA service to an IdM server in a deployment with a CA",33,"adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management","#adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management",{"title":748,"visible":15,"weight":749,"urlFragment":750,"anchor":18,"singlePageAnchor":750,"docTitle":19,"url":751},"32. Uninstalling the IdM CA service from an IdM server",34,"uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management","#uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management",{"title":753,"visible":15,"weight":754,"urlFragment":755,"anchor":18,"singlePageAnchor":756,"docTitle":19,"url":757},"Legal Notice",35,"legal-notice","idm140559999367200","#idm140559999367200",[759,762,765],{"text":760,"link":761},"Red Hat Enterprise Linux","/documentation/red_hat_enterprise_linux/",{"text":763,"link":764},"9","/documentation/red_hat_enterprise_linux/9/",{"text":11},{"name":11,"translations":767,"productVersion":768,"singlePage":769,"pdf":772,"publishingStatus":774},[5,6,7,8,9],{"name":763},{"contentUrl":770,"name":11,"new":771,"url":19},"https://d2bhdhkti9t3uj.cloudfront.net/html/ac1a145a-205f-4a31-abfe-185be7e3b3bb/a67b977ad4bfa2a9d7fe874381d69d6a.html","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/installing_identity_management/index",{"url":773},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/pdf/installing_identity_management/Red_Hat_Enterprise_Linux-9-Installing_Identity_Management-en-US.pdf","PUBLISHED",[776,781,784,788,792,796,800],{"name":777,"new":778,"url":779,"urlAliases":780},"10.0-Beta","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10-beta","10-beta",[],{"name":763,"new":782,"url":763,"urlAliases":783},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9",[],{"name":785,"new":786,"url":785,"urlAliases":787},"8","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8",[],{"name":789,"new":790,"url":789,"urlAliases":791},"7","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7",[],{"name":793,"new":794,"url":793,"urlAliases":795},"6","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6",[],{"name":797,"new":798,"url":797,"urlAliases":799},"5","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/5",[],{"name":801,"new":802,"url":801,"urlAliases":803},"4","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/4",[],{"installing_identity_management/index":805,"installing_identity_management/proc_providing-feedback-on-red-hat-documentation_installing-identity-management":806,"installing_identity_management/preparing-the-system-for-ipa-server-installation_installing-identity-management":807,"installing_identity_management/installing-an-ipa-server-with-integrated-dns_installing-identity-management":808,"installing_identity_management/installing-an-ipa-server-with-external-ca_installing-identity-management":809,"installing_identity_management/installing-an-ipa-server-without-a-ca_installing-identity-management":810,"installing_identity_management/installing-an-ipa-server-without-integrated-dns_installing-identity-management":811,"installing_identity_management/assembly_installing-an-ipa-server-without-dns-with-external-ca_installing-identity-management":812,"installing_identity_management/proc_installing-an-idm-server-or-replica-with-custom-database-settings-from-an-ldif-file_installing-identity-management":813,"installing_identity_management/troubleshooting-idm-server-installation_installing-identity-management":814,"installing_identity_management/uninstalling-an-ipa-server_installing-identity-management":815,"installing_identity_management/renaming-an-idm-server_installing-identity-management":816,"installing_identity_management/update-downgrade-ipa_installing-identity-management":817,"installing_identity_management/preparing-the-system-for-ipa-client-installation_installing-identity-management":818,"installing_identity_management/assembly_installing-an-idm-client_installing-identity-management":819,"installing_identity_management/installing-an-ipa-client-with-kickstart_installing-identity-management":820,"installing_identity_management/troubleshooting-idm-client-installation_installing-identity-management":821,"installing_identity_management/re-enrolling-an-ipa-client_installing-identity-management":822,"installing_identity_management/uninstalling-an-ipa-client_installing-identity-management":823,"installing_identity_management/renaming-ipa-client-systems_installing-identity-management":824,"installing_identity_management/preparing-the-system-for-ipa-replica-installation_installing-identity-management":825,"installing_identity_management/installing-an-ipa-replica_installing-identity-management":826,"installing_identity_management/troubleshooting-idm-replica-installation_installing-identity-management":827,"installing_identity_management/uninstalling-an-idm-replica_installing-identity-management":828,"installing_identity_management/assembly_managing-replication-topology_installing-identity-management":829,"installing_identity_management/installing-and-running-the-ipa-healthcheck-tool_installing-identity-management":830,"installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management":831,"installing_identity_management/installing-an-identity-management-replica-using-an-ansible-playbook_installing-identity-management":832,"installing_identity_management/installing-an-identity-management-client-using-an-ansible-playbook_installing-identity-management":833,"installing_identity_management/installing-dns-on-an-existing-idm-server_installing-identity-management":834,"installing_identity_management/uninstalling-the-integrated-idm-dns-service-from-an-idm-server_installing-identity-management":835,"installing_identity_management/adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-without-a-ca_installing-identity-management":836,"installing_identity_management/adding-the-idm-ca-service-to-an-idm-server-in-a-deployment-with-a-ca_installing-identity-management":837,"installing_identity_management/uninstalling-the-idm-ca-service-from-an-idm-server_installing-identity-management":838,"installing_identity_management/legal-notice":839},{"prevt":18,"next":24},{"prevt":17,"next":29},{"prevt":18,"next":29},{"prevt":18,"next":120},{"prevt":18,"next":133},{"prevt":18,"next":146},{"prevt":18,"next":159},{"prevt":18,"next":176},{"prevt":176,"next":201},{"prevt":18,"next":201},{"prevt":201,"next":227},{"prevt":222,"next":232},{"prevt":18,"next":232},{"prevt":18,"next":250},{"prevt":18,"next":276},{"prevt":18,"next":322},{"prevt":18,"next":340},{"prevt":18,"next":362},{"prevt":18,"next":384},{"prevt":18,"next":398},{"prevt":18,"next":428},{"prevt":18,"next":454},{"prevt":18,"next":488},{"prevt":488,"next":527},{"prevt":18,"next":527},{"prevt":18,"next":590},{"prevt":18,"next":612},{"prevt":18,"next":663},{"prevt":18,"next":686},{"prevt":686,"next":726},{"prevt":721,"next":731},{"prevt":18,"next":731},{"prevt":731,"next":750},{"prevt":745,"next":755},{"prevt":750,"next":18},{"product":18,"version":18},{"installing_identity_management":842},[771],{"products":844},[845,846,847,848,849,850,851,852,853,854,855,856,857],"builds_for_red_hat_openshift","migration_toolkit_for_virtualization","openshift_container_platform","openshift_sandboxed_containers","red_hat_advanced_cluster_security_for_kubernetes","red_hat_advanced_cluster_management_for_kubernetes","red_hat_openshift_data_foundation","red_hat_openshift_dev_spaces","red_hat_openshift_gitops","red_hat_openshift_local","red_hat_openshift_pipelines","red_hat_openshift_serverless","workload_availability_for_red_hat_openshift",[],{"default":860},[861,870,876,885,893,901,908,916,923],{"nid":862,"type":863,"langcode":864,"Published":16,"title":865,"Created":866,"Updated":867,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":868,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":869},580,"rebrand banner","en","OpenShift Container Storage is now OpenShift Data Foundation starting with version 4.9.","2023-01-11 15:38:32","2023-01-11 15:40:04","/documentation/red_hat_openshift_container_storage\r\n/documentation/red_hat_openshift_container_storage/\r\n/documentation/red_hat_openshift_container_storage/*","internal:/documentation/red_hat_openshift_data_foundation/",{"nid":871,"type":863,"langcode":864,"Published":16,"title":865,"Created":872,"Updated":873,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":874,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":875},581,"2023-01-11 15:41:31","2023-01-11 15:42:04","/documentation/red_hat_openshift_data_foundation/4.9\r\n/documentation/red_hat_openshift_data_foundation/4.9/\r\n/documentation/red_hat_openshift_data_foundation/4.9/*\r\n/documentation/red_hat_openshift_data_foundation/4.10\r\n/documentation/red_hat_openshift_data_foundation/4.10/\r\n/documentation/red_hat_openshift_data_foundation/4.10/*\r\n/documentation/red_hat_openshift_data_foundation/4.11\r\n/documentation/red_hat_openshift_data_foundation/4.11/\r\n/documentation/red_hat_openshift_data_foundation/4.11/*","internal:/documentation/red_hat_openshift_container_storage/",{"nid":877,"type":878,"langcode":864,"Published":16,"title":879,"Created":880,"Updated":881,"body_value":18,"field_documentation banner_text_value":882,"field_documentation banner_text_format":883,"field_paths_value":884,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},582,"developer preview banner","MicroShift is Developer Preview software only","2023-01-11 15:50:24","2023-01-30 19:00:52","\u003Cp slot=header>MicroShift is Developer Preview software only.\u003C/p>For more information about the support scope of Red Hat Developer Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/devpreview/\">Developer Preview Support Scope\u003C/a>.","documentation banner","/documentation/microshift/4.12\r\n/documentation/microshift/4.12/*\r\n/documentation/red_hat_build_of_microshift/4.12\r\n/documentation/red_hat_build_of_microshift/4.12/*",{"nid":886,"type":887,"langcode":864,"Published":16,"title":888,"Created":889,"Updated":890,"body_value":18,"field_documentation banner_text_value":891,"field_documentation banner_text_format":883,"field_paths_value":892,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},583,"obsolete documentation banner","RHACS EOL - DAT-3433","2023-01-23 16:36:43","2023-01-23 16:39:14","\u003Cp slot=header>You are viewing documentation for a release that is no longer maintained. To view the documentation for the most recent version, see the \u003Ca href=\"/documentation/red_hat_advanced_cluster_security_for_kubernetes/\">latest RHACS docs\u003C/a>.\u003C/p>","/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71/*",{"nid":894,"type":895,"langcode":864,"Published":16,"title":896,"Created":897,"Updated":898,"body_value":18,"field_documentation banner_text_value":899,"field_documentation banner_text_format":883,"field_paths_value":900,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},584,"end of life banner","EOL banner for RHV","2023-05-23 14:58:05","2023-05-24 15:19:42","\u003Cp slot=header>The Red Hat Virtualization\u003C/p>Maintenance Phase runs until August 31, 2024, followed by the Extended Life Phase with no more software fixes through August 31, 2026. See \u003Ca href=\"https://access.redhat.com/articles/6975303\">Migration Paths for OpenShift Container Platform deployed on Red Hat Virtualization\u003C/a> for details.","/documentation/red_hat_virtualization/4.4",{"nid":902,"type":895,"langcode":864,"Published":16,"title":903,"Created":904,"Updated":905,"body_value":18,"field_documentation banner_text_value":906,"field_documentation banner_text_format":883,"field_paths_value":907,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},585,"RHHI-V EOL","2023-06-01 16:52:57","2023-06-01 17:03:44","\u003Cp slot=header>Red Hat Hyperconverged Infrastructure for Virtualization\u003C/p> is in the \u003Ca href=\"https://access.redhat.com/support/policy/updates/rhhiv\">Maintenance Support Phase\u003C/a> of its lifecycle until October 31, 2024. After that date, the product will be End of Life. See the \u003Ca href=\"https://access.redhat.com/announcements/6972521\">RHHI-V announcement\u003C/a> for next steps.","/documentation/red_hat_hyperconverged_infrastructure_for_virtualization/1.8",{"nid":909,"type":910,"langcode":864,"Published":16,"title":911,"Created":912,"Updated":913,"body_value":18,"field_documentation banner_text_value":914,"field_documentation banner_text_format":883,"field_paths_value":915,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},586,"preview banner","MicroShift is Technology Preview software only","2024-03-18 16:53:05","2024-03-18 16:54:56","\u003Cp slot=header>MicroShift is Technology Preview software only.\u003C/p>For more information about the support scope of Red Hat Technology Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview Support Scope\u003C/a>.","/documentation/red_hat_build_of_microshift/4.13\r\n/documentation/red_hat_build_of_microshift/4.13/*",{"nid":917,"type":910,"langcode":864,"Published":16,"title":918,"Created":919,"Updated":920,"body_value":18,"field_documentation banner_text_value":921,"field_documentation banner_text_format":883,"field_paths_value":922,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},588,"Ansible 2.5 upgrade limitation","2024-09-30 16:53:05","2024-10-28 16:54:56","\u003Cp slot=\"header\">Support added for upgrades from 2.4\u003C/p>Ansible Automation Platform 2.5-3, released on October 28, 2024, adds support for upgrades from 2.4. See the upgrade documentation for more information.","",{"nid":924,"alertType":925,"type":926,"langcode":864,"Published":16,"title":927,"Created":922,"Updated":922,"body_value":18,"field_documentation banner_text_value":928,"field_documentation banner_text_format":883,"field_paths_value":929,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},587,"warning","Warning banner","Red Hat build of Apache Camel K","\u003Cp slot=header>Red Hat Camel K is deprecated\u003C/p>Red Hat Camel K is deprecated and the End of Life date for this product is June 30, 2025. For help migrating to the current go-to solution, \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel\">Red Hat build of Apache Camel\u003C/a>, see the \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel_k/1.10.7/html/migration_guide_camel_k_to_camel_extensions_for_quarkus/index\">Migration Guide\u003C/a>.","/documentation/red_hat_build_of_apache_camel_k/*",{"product":760},["Reactive",932],{"$snuxt-i18n-meta":933,"$sisLoading":934,"$sisSinglePage":15,"$sisInFocusMode":934,"$smobileTocOpen":934,"$sisLargeTOC":934,"$scurrentChapter":17,"$scurrentSection":17,"$scurrentSubSection":922},{},false,["Set"],["ShallowReactive",937],{"s8LoCEfG4A":18,"rFVLKcOK8e":18,"uUstF4AIyn":18,"MdHNSZP4nR":18,"Pn02PlJOas":18},"/en/documentation/red_hat_enterprise_linux/9/html-single/installing_identity_management/index"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{contentEnv:"",collectFeedback:true,i18n:{baseUrl:"",defaultLocale:"en",defaultDirection:"ltr",strategy:"prefix",lazy:false,rootRedirect:"",routesNameSeparator:"___",defaultLocaleRouteNameSuffix:"default",skipSettingLocaleOnNavigate:false,differentDomains:false,trailingSlash:false,configLocales:[{code:"en",name:"English",iso:"en-US"},{code:"fr",name:"Français",iso:"fr-FR"},{code:"ko",name:"한국어",iso:"ko-KR"},{code:"ja",name:"日本語",iso:"ja-JP"},{code:"zh-cn",name:"中文 (中国)",iso:"zh-CN"},{code:"de",name:"Deutsch",iso:"de_DE"},{code:"it",name:"Italiano",iso:"it_IT"},{code:"pt-br",name:"Português",iso:"pt_BR"},{code:"es",name:"Español",iso:"es-ES"}],locales:{en:{domain:""},fr:{domain:""},ko:{domain:""},ja:{domain:""},"zh-cn":{domain:""},de:{domain:""},it:{domain:""},"pt-br":{domain:""},es:{domain:""}},detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",switchLocalePathLinkSSR:false,autoImportTranslationFunctions:false}}},app:{baseURL:"/",buildId:"5ff82c51-785e-4a7d-aca6-77d6692e8c7a",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>
